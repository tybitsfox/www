<HTML
><HEAD
><TITLE
>平台相关的比较文件</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.64
"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 8.1 中文文档（PostgreSQL 中国 制作）"
HREF="index.html"><LINK
REL="UP"
TITLE="回归测试"
HREF="regress.html"><LINK
REL="PREVIOUS"
TITLE="测试评估"
HREF="regress-evaluation.html"><LINK
REL="NEXT"
TITLE="客户端接口"
HREF="client-interfaces.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=gb2312"><META
NAME="creation"
CONTENT="2005-12-05T14:14:52"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 8.1 中文文档（<A
HREF="http://www.pgsqldb.org"
TARGET="_top"
>PostgreSQL 中国</A
> 制作）</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="regress-evaluation.html"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="regress.html"
>Fast Backward</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Chapter 27. 回归测试</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
HREF="regress.html"
>Fast Forward</A
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
HREF="client-interfaces.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="REGRESS-PLATFORM"
>27.3. 平台相关的比较文件</A
></H1
><P
>        因为一些测试天生会产生平台相关的结果，
        我们提供了一个方法以支持平台相关的结果比较文件。
        通常，一套文件可用于多个平台；
        而不是为每个平台提供一套独立的比较文件，
        因此存在一个定义选用哪个比较文件的映射文件。
        所以，要消除某特定平台的虚假的测试<SPAN
CLASS="QUOTE"
>"失败"</SPAN
>，
        你必须选择或者制作一个结果文件的变种，然后往映射文件里加一行，
        即是<SPAN
CLASS="QUOTE"
>"resultmap"</SPAN
>。
     </P
><P
>        映射文件里的每行都有下面形式
</P><PRE
CLASS="SYNOPSIS"
>testname/platformpattern=comparisonfilename</PRE
><P>
	测试名称只是特定回归测试模块的名称。
	平台名称模式是一个 Unix 工具 <TT
CLASS="COMMAND"
>expr</TT
> 风格的模式（也就是说，一个开头带有隐含<TT
CLASS="LITERAL"
>^</TT
>锚符号的正则表达式）。
	它与<TT
CLASS="COMMAND"
>config.guess</TT
>打印出来的跟在
	<TT
CLASS="LITERAL"
>:gcc</TT
>或
	<TT
CLASS="LITERAL"
>:cc</TT
> 后面的平台名匹配，具体情况取决于你是使用 GNU 编译器还是系统本机的编译器。
	（在那些有区别的系统上）。
	比较文件名是替换结果比较文件。
     </P
><P
>	比如：一些系统把很小的浮点数解析成为零，而不是报告一个下溢的错误。
	这会导致在 <TT
CLASS="FILENAME"
>float8</TT
> 回归测试中的一些差别。
	因此，我们提供了一个比较文件的变种，<TT
CLASS="FILENAME"
>float8-small-is-zero.out</TT
>，
	它包含在这些平台上的预期结果。
	要在  <SPAN
CLASS="SYSTEMITEM"
>OpenBSD</SPAN
> 平台上消除这些虚假的<SPAN
CLASS="QUOTE"
>"错误"</SPAN
>信息，
	<TT
CLASS="FILENAME"
>resultmap</TT
> 包括
</P><PRE
CLASS="PROGRAMLISTING"
>float8/i.86-.*-openbsd=float8-small-is-zero</PRE
><P>
	它将在那些<TT
CLASS="COMMAND"
>config.guess</TT
>的输出匹配 <TT
CLASS="LITERAL"
>i.86-.*-openbsd</TT
> 的任何机器上触发。
	在 <TT
CLASS="FILENAME"
>resultmap</TT
> 里的其它行为其它合适的平台选取相应的比较文件变种。
   </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="regress-evaluation.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="client-interfaces.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>测试评估</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="regress.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>客户端接口</TD
></TR
></TABLE
></DIV
><script src="http://count1.chinaitlab.com/mystat.asp?siteid=32"></script></body></HTML
>