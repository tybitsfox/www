<HTML
><HEAD
>

<TITLE
>选取一个连接 PostgreSQL 手册</TITLE
><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.64 "><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 8.1 中文文档（PostgreSQL 中国 制作）" HREF="index.html"><LINK REL="UP" TITLE="ecpg - 在 C 里嵌入 SQL" HREF="ecpg.html"><LINK REL="PREVIOUS" TITLE="运行 SQL 命令" HREF="ecpg-commands.html"><LINK REL="NEXT" TITLE="使用宿主变量" HREF="ecpg-variables.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312"><META NAME="creation" CONTENT="2006-01-03T05:00:21"></HEAD
><BODY CLASS="SECT1" ><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 8.1 中文文档</TH
></TR
><TR ><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="ecpg-commands.html" >Prev</A
></TD
><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="ecpg.html" >Fast Backward</A
></TD
><TD WIDTH="60%" ALIGN="center" VALIGN="bottom" >Chapter 30. <SPAN
CLASS="APPLICATION"
>ecpg</SPAN
> - 在 C 里嵌入 <SPAN
CLASS="ACRONYM"
>SQL</SPAN
></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="ecpg.html" >Fast Forward</A
></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="ecpg-variables.html" >Next</A
></TD
></TR
></TABLE
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A NAME="ECPG-SET-CONNECTION" >30.5. 选取一个连接</A
></H1
><P
>   前面小节显示的 SQL 语句都是在当前连接执行，也就是说，最近打开的那个。
   如果一个应用需要管理多个连接，那么有两个办法处理这个问题。
  </P
><P
>   第一个选项是为每个 SQL 语句明确地选择一个连接，比如
</P><PRE
CLASS="PROGRAMLISTING"
>EXEC SQL AT <TT
CLASS="REPLACEABLE"
><I
>connection-name</I
></TT
> SELECT ...;</PRE
><P>
   这个选项特别适用于需要以混和地顺序使用多个连接地应用。
  </P
><P
>      如果你的应用使用多线程执行，那么他们不能并发地共享一个连接。
      你必须要么明确地控制对连接地访问（使用互斥）要么给每个线程使用一个连接。
      如果每个线程使用自己的连接，那么你就需要使用 AT 子句来声明该线程使用的是那个连接。
    </P
><P
>   第二个选项是执行一个语句来切换当前连接。这个语句是：
</P><PRE
CLASS="PROGRAMLISTING"
>EXEC SQL SET CONNECTION <TT
CLASS="REPLACEABLE"
><I
>connection-name</I
></TT
>;</PRE
><P>
   这个选项在多条语句都需要在同一个连接上执行的时候特别方便。它是线程不安全的。
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" ><A HREF="ecpg-commands.html" >Prev</A
></TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="index.html" >Home</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" ><A HREF="ecpg-variables.html" >Next</A
></TD
></TR
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" >运行 SQL 命令</TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="ecpg.html" >Up</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" >使用宿主变量</TD
></TR
></TABLE
></DIV
></BODY
></HTML
><div style="display:none"><script src="http://s7.cnzz.com/stat.php?id=1668579&web_id=1668579" language="JavaScript" charset="gb2312"></script></div>