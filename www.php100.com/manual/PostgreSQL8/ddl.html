<HTML
><HEAD
>

<TITLE
>数据定义 PostgreSQL 手册</TITLE
><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.64 "><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 8.1 中文文档（PostgreSQL 中国 制作）" HREF="index.html"><LINK REL="UP" TITLE="SQL 语言" HREF="sql.html"><LINK REL="PREVIOUS" TITLE="值表达式" HREF="sql-expressions.html"><LINK REL="NEXT" TITLE="缺省值" HREF="ddl-default.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312"><META NAME="creation" CONTENT="2006-01-03T05:00:21"></HEAD
><BODY CLASS="CHAPTER" ><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 8.1 中文文档</TH
></TR
><TR ><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="sql-expressions.html" >Prev</A
></TD
><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="sql-syntax.html" >Fast Backward</A
></TD
><TD WIDTH="60%" ALIGN="center" VALIGN="bottom" ></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="dml.html" >Fast Forward</A
></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="ddl-default.html" >Next</A
></TD
></TR
></TABLE
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A NAME="DDL" >Chapter 5. 数据定义</A
></H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>5.1. <A HREF="ddl.html#DDL-BASICS" >表的基本概念</A
></DT
><DT
>5.2. <A HREF="ddl-default.html" >缺省值</A
></DT
><DT
>5.3. <A HREF="ddl-constraints.html" >约束</A
></DT
><DD
><DL
><DT
>5.3.1. <A HREF="ddl-constraints.html#AEN1966" >检查约束</A
></DT
><DT
>5.3.2. <A HREF="ddl-constraints.html#AEN2001" >非空约束</A
></DT
><DT
>5.3.3. <A HREF="ddl-constraints.html#AEN2028" >唯一约束</A
></DT
><DT
>5.3.4. <A HREF="ddl-constraints.html#AEN2050" >主键</A
></DT
><DT
>5.3.5. <A HREF="ddl-constraints.html#DDL-CONSTRAINTS-FK" >外键</A
></DT
></DL
></DD
><DT
>5.4. <A HREF="ddl-system-columns.html" >系统字段</A
></DT
><DT
>5.5. <A HREF="ddl-alter.html" >修改表</A
></DT
><DD
><DL
><DT
>5.5.1. <A HREF="ddl-alter.html#AEN2246" >增加字段</A
></DT
><DT
>5.5.2. <A HREF="ddl-alter.html#AEN2258" >删除字段</A
></DT
><DT
>5.5.3. <A HREF="ddl-alter.html#AEN2269" >增加约束</A
></DT
><DT
>5.5.4. <A HREF="ddl-alter.html#AEN2278" >删除约束</A
></DT
><DT
>5.5.5. <A HREF="ddl-alter.html#AEN2293" >改变一个字段的缺省值</A
></DT
><DT
>5.5.6. <A HREF="ddl-alter.html#AEN2303" >修改一个字段的数据类型</A
></DT
><DT
>5.5.7. <A HREF="ddl-alter.html#AEN2313" >给字段改名字</A
></DT
><DT
>5.5.8. <A HREF="ddl-alter.html#AEN2317" >给字段改名字</A
></DT
><DT
>5.5.9. <A HREF="ddl-alter.html#AEN2324" >给表改名字</A
></DT
></DL
></DD
><DT
>5.6. <A HREF="ddl-priv.html" >权限</A
></DT
><DT
>5.7. <A HREF="ddl-schemas.html" >模式</A
></DT
><DD
><DL
><DT
>5.7.1. <A HREF="ddl-schemas.html#DDL-SCHEMAS-CREATE" >创建一个模式</A
></DT
><DT
>5.7.2. <A HREF="ddl-schemas.html#DDL-SCHEMAS-PUBLIC" >Public 模式</A
></DT
><DT
>5.7.3. <A HREF="ddl-schemas.html#DDL-SCHEMAS-PATH" >模式搜索路径</A
></DT
><DT
>5.7.4. <A HREF="ddl-schemas.html#DDL-SCHEMAS-PRIV" >模式和权限</A
></DT
><DT
>5.7.5. <A HREF="ddl-schemas.html#DDL-SCHEMAS-CATALOG" >系统表模式</A
></DT
><DT
>5.7.6. <A HREF="ddl-schemas.html#DDL-SCHEMAS-PATTERNS" >使用方式</A
></DT
><DT
>5.7.7. <A HREF="ddl-schemas.html#DDL-SCHEMAS-PORTABILITY" >移植性</A
></DT
></DL
></DD
><DT
>5.8. <A HREF="ddl-inherit.html" >继承</A
></DT
><DT
>5.9. <A HREF="ddl-partitioning.html" >分区</A
></DT
><DD
><DL
><DT
>5.9.1. <A HREF="ddl-partitioning.html#DDL-PARTITIONING-OVERVIEW" >概述</A
></DT
><DT
>5.9.2. <A HREF="ddl-partitioning.html#DDL-PARTITIONING-IMPLEMENTATION" >实现分区</A
></DT
><DT
>5.9.3. <A HREF="ddl-partitioning.html#DDL-PARTITIONING-CONSTRAINT-EXCLUSION" >分区和约束排除</A
></DT
></DL
></DD
><DT
>5.10. <A HREF="ddl-others.html" >其它数据库对象</A
></DT
><DT
>5.11. <A HREF="ddl-depend.html" >依赖性追踪</A
></DT
></DL
></DIV
><P
>	本章介绍我们如何创建一个保存我们的数据的数据库结构。
	在关系型数据库里，裸数据是存储在表中的，因此本章的大部分内容都将用于介绍如何创建表以及如何修改他们，
	以及我们在控制表中存储的数据上有什么可以获得的特性。随后，
	我们讨论表是如何能组织成模式的，以及如何给表赋予权限。最后，
	我们将简单查看一下影响数据存储的其他因素，比如继承，视图，函数，和触发器。
 </P
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A NAME="DDL-BASICS" >5.1. 表的基本概念</A
></H1
><A NAME="AEN1888" ></A
><A NAME="AEN1890" ></A
><A NAME="AEN1892" ></A
><P
>	关系型数据库中的表非常类似纸面上的一张表：它由行和列组成。
	字段的数目是固定的，每个字段都有一个名字。行的数目是变化的 --
	它反映在任意时刻里存储的数据量。SQL 对表中的行的顺序没有任何承诺---除非你要求明确地进行排序。
	这些内容在 <A HREF="queries.html" >Chapter 7</A
> 里介绍。另外，SQL 并不给行赋予唯一的标识，
	因此我们很可能在一个表中有好几个完全相同的行。
	这是作为SQL的基础的下层数学模型的必然结果，但是通常是我们不愿意看到的。
	本章稍后的部分将讨论如何处理这个问题。
  </P
><P
>	每个字段都有一个数据类型。数据类型约束可以赋予一个字段的可能数值的集合，
	并且约束存储在字段里的数据的赋值语义，这样它就可以用于计算。比如，
	一个声明为一个数值类型的字段将不会接受任意文本字串，而存储在这样的字段里的数据可以用于数学计算。
	相比之下，一个声明为字符字串类型的字段将接受几乎任意类型的数据，
	但是它们自身是不能进行数学计算的，不过我们可以进行其他象字串连接这样的操作。
  </P
><P
>	<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 包含一套可剪裁的内置数据类型，
	这些类型可以适用于许多应用。用户也可以定义它们自己的数据类型。
	大多数内置的数据类型有显而易见的名字和语义，因此我们把详细的解释放在了 <A HREF="datatype.html" >Chapter 8</A
>。
	有些常用的数据类型是用于整数的 <TT
CLASS="TYPE"
>integer</TT
>，用于可能为分数的
	<TT
CLASS="TYPE"
>numeric</TT
>，用于字符串的 <TT
CLASS="TYPE"
>text</TT
>，用于日期的 <TT
CLASS="TYPE"
>date</TT
>，
	用于时间的 <TT
CLASS="TYPE"
>time</TT
>，以及用于包含日期和时间的数值的 <TT
CLASS="TYPE"
>timestamp</TT
>。
  </P
><P
>	要创建一个表，你使用一个命名合适的 <TT
CLASS="COMMAND"
>CREATE TABLE</TT
> 命令。
	在这个命令里，你至少为新表声明一个名字，字段的名字以及字段的数据类型。比如：
</P><PRE
CLASS="PROGRAMLISTING"
>CREATE TABLE my_first_table (
    first_column text,
    second_column integer
);</PRE
><P>
	这样就创建了一个有两个字段的叫做 <TT
CLASS="LITERAL"
>my_first_table</TT
>
	的表。第一个字段的名字是 <TT
CLASS="LITERAL"
>first_column</TT
>，数据类型为
	<TT
CLASS="TYPE"
>text</TT
>；第二个字段的名字是 <TT
CLASS="LITERAL"
>second_column</TT
>，
	数据类型是 <TT
CLASS="TYPE"
>integer</TT
>。表和字段的名字遵循我们在
	<A HREF="sql-syntax.html#SQL-SYNTAX-IDENTIFIERS" >Section 4.1.1</A
> 里面解释的标识符语法。
	类型名通常也是标识符，但是有一些例外。请注意字段列表是逗号分隔的，
	并且用圆括弧包围。
  </P
><P
>	当然，前面的例子是非常虚构的一个例子。通常，你会给你的表和字段名字，
	这些字段里存储它们保存的数据。所以还是让我们给一个比较现实的例子：
</P><PRE
CLASS="PROGRAMLISTING"
>CREATE TABLE products (
    product_no integer,
    name text,
    price numeric
);</PRE
><P>
	（<TT
CLASS="TYPE"
>numeric</TT
> 类型可以存储分数部分，金额很可能有这样的分数部分。）
  </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>提示: </B
>	如果你创建了许多相互关联的表，那么最好选择一种一致的命名模式来为你的表和字段命名。
	比如，表名字可以选择单数或者复数，两种选择都有这样那样的理论家支持。
   </P
></BLOCKQUOTE
></DIV
><P
>	有一个小限制：一个表能包含的字段数目。
	根据字段类型的不同，这个数目可能在250到1600之间。
	不过，不管是哪一端的数字，如果你设计的表包含那么多的字段好象都很不可能发生，
	否则是设计上有问题的表现。
  </P
><A NAME="AEN1922" ></A
><P
>	如果你不再需要这个表，那么你可以用 <TT
CLASS="COMMAND"
>DROP TABLE</TT
>
	命令删除它。象这样：
</P><PRE
CLASS="PROGRAMLISTING"
>DROP TABLE my_first_table;
DROP TABLE products;</PRE
><P>
	试图删除一个不存在的表是一个错误。不过，在 SQL 脚本文件里，
	我们常见在创建表之前试图无条件删除它，忽略错误信息。
  </P
><P
>	如果你需要修改一个已经存在的表，那么可以看看本章稍后的
	<A HREF="ddl-alter.html" >Section 5.5</A
>。
  </P
><P
>	使用到目前为止讨论的工具我们可以创建功能完整的表。
	本章剩下的部分是有关向表定义中增加特性，保证数据完整性，安全性或者便利性的内容。
	如果你急于给你的表填充数据，那么你可以忽略余下的部分直接到
	<A HREF="dml.html" >Chapter 6</A
>，然后在稍后的时候再阅读本章。
  </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" ><A HREF="sql-expressions.html" >Prev</A
></TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="index.html" >Home</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" ><A HREF="ddl-default.html" >Next</A
></TD
></TR
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" >值表达式</TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="sql.html" >Up</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" >缺省值</TD
></TR
></TABLE
></DIV
></BODY
></HTML
><div style="display:none"><script src="http://s7.cnzz.com/stat.php?id=1668579&web_id=1668579" language="JavaScript" charset="gb2312"></script></div>