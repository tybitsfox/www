<HTML
><HEAD
>

<TITLE
>ALTER SEQUENCE PostgreSQL 手册</TITLE
><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.64 "><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 8.1 中文文档（PostgreSQL 中国 制作）" HREF="index.html"><LINK REL="UP" TITLE="SQL 命令" HREF="sql-commands.html"><LINK REL="PREVIOUS" TITLE="ALTER SCHEMA" HREF="sql-alterschema.html"><LINK REL="NEXT" TITLE="ALTER TABLE" HREF="sql-altertable.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312"><META NAME="creation" CONTENT="2006-01-03T05:00:21"></HEAD
><BODY CLASS="REFENTRY" ><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 8.1 中文文档</TH
></TR
><TR ><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="sql-alterschema.html" >Prev</A
></TD
><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="sql-alterschema.html" >Fast Backward</A
></TD
><TD WIDTH="60%" ALIGN="center" VALIGN="bottom" ></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="sql-altertable.html" >Fast Forward</A
></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="sql-altertable.html" >Next</A
></TD
></TR
></TABLE
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A NAME="SQL-ALTERSEQUENCE" >ALTER SEQUENCE</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A NAME="AEN39443" ></A
><H2
>Name</H2
>   ALTER SEQUENCE
  &nbsp;--&nbsp;	更改一个序列生成器的定义
  </DIV
><A NAME="AEN39446" ></A
><DIV
CLASS="REFSYNOPSISDIV"
><A NAME="AEN39448" ></A
><H2
>Synopsis</H2
><PRE
CLASS="SYNOPSIS"
>ALTER SEQUENCE <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> [ INCREMENT [ BY ] <TT
CLASS="REPLACEABLE"
><I
>increment</I
></TT
> ]
    [ MINVALUE <TT
CLASS="REPLACEABLE"
><I
>minvalue</I
></TT
> | NO MINVALUE ] [ MAXVALUE <TT
CLASS="REPLACEABLE"
><I
>maxvalue</I
></TT
> | NO MAXVALUE ]
    [ RESTART [ WITH ] <TT
CLASS="REPLACEABLE"
><I
>start</I
></TT
> ] [ CACHE <TT
CLASS="REPLACEABLE"
><I
>cache</I
></TT
> ] [ [ NO ] CYCLE ]
ALTER SEQUENCE <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> SET SCHEMA <TT
CLASS="REPLACEABLE"
><I
>new_schema</I
></TT
>
  </PRE
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN39458" ></A
><H2
>描述</H2
><P
>   <TT
CLASS="COMMAND"
>ALTER SEQUENCE</TT
> 命令修改一个现有的序列发生器的参数。
   任何没有明确在 <TT
CLASS="COMMAND"
>ALTER SEQUENCE</TT
> 命令里声明的参数都将保留原先的设置。
  </P
><P
>   要使用 <TT
CLASS="COMMAND"
>ALTER SEQUENCE</TT
>，你必须拥有该序列。
   要改变一个序列的模式，你必须在新的模式上有 <TT
CLASS="LITERAL"
>CREATE</TT
> 权限。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN39466" ></A
><H2
>参数</H2
><P
>    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
></DT
><DD
><P
>	一个要修改的序列的名字（可以有模式修饰）。
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>increment</I
></TT
></DT
><DD
><P
>	<TT
CLASS="LITERAL"
>INCREMENT BY <TT
CLASS="REPLACEABLE"
><I
>increment</I
></TT
></TT
>
	子句是可选的。一个正数会让序列成为递增序列，负数则成为递减序列。
	如果没有声明，将沿用原来的递增值。
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>minvalue</I
></TT
><BR><TT
CLASS="LITERAL"
>NO MINVALUE</TT
></DT
><DD
><P
>	可选的子句 <TT
CLASS="LITERAL"
>MINVALUE <TT
CLASS="REPLACEABLE"
><I
>minvalue</I
></TT
></TT
>
	决定一个序列可以生成的最小的值。如果声明了 <TT
CLASS="LITERAL"
>NO MINVALUE</TT
>，将使用缺省值，
	对于递增和递减的序列分别是 1 和 -2^63-1。如果没有声明任何选项，则沿用当前的最小值。
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>maxvalue</I
></TT
><BR><TT
CLASS="LITERAL"
>NO MAXVALUE</TT
></DT
><DD
><P
>	可选的子句 <TT
CLASS="LITERAL"
>MAXVALUE <TT
CLASS="REPLACEABLE"
><I
>maxvalue</I
></TT
></TT
>
	决定序列的最大值。如果声明了 <TT
CLASS="OPTION"
>NO MAXVALUE</TT
>，则使用缺省值，
	对于递增和递减的序列分别是 2^63-1 和 -1。如果两个选项都没有声明，
	则沿用当前的最大值。
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>start</I
></TT
></DT
><DD
><P
>	可选的<TT
CLASS="OPTION"
>RESTART WITH <TT
CLASS="REPLACEABLE"
><I
>start</I
></TT
></TT
>
	子句允许序列可以在任何地方开始。
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>cache</I
></TT
></DT
><DD
><P
>	<TT
CLASS="OPTION"
>CACHE <TT
CLASS="REPLACEABLE"
><I
>cache</I
></TT
></TT
>
	选项打开序列号预分配并存储在内存缓冲的功能。最小值是 1 （也就是每次只能生成一个数值，没有缓冲）。
	如果没有声明，将沿用旧的缓冲值。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>CYCLE</TT
></DT
><DD
><P
>	可选的键字 <TT
CLASS="LITERAL"
>CYCLE</TT
> 可以用于允许序列在达到递增序列的
	<TT
CLASS="REPLACEABLE"
><I
>maxvalue</I
></TT
> 或者递减序列的
	<TT
CLASS="REPLACEABLE"
><I
>minvalue</I
></TT
>的时候重叠使用。
	如果达到了极限，那么生成的下一个数字将分别是
	<TT
CLASS="REPLACEABLE"
><I
>minvalue</I
></TT
> 或者
	<TT
CLASS="REPLACEABLE"
><I
>maxvalue</I
></TT
>。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>NO CYCLE</TT
></DT
><DD
><P
>	如果声明了可选键字 <TT
CLASS="OPTION"
>NO CYCLE</TT
>，任何在序列达到其最大极限后对 <TT
CLASS="FUNCTION"
>nextval</TT
> 的调用都将返回错误。
	如果既未声明 <TT
CLASS="OPTION"
>CYCLE</TT
> 也未声明 <TT
CLASS="OPTION"
>NO CYCLE</TT
>，
	那么将沿用原有的循环行为。
	</P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>new_schema</I
></TT
></DT
><DD
><P
>	序列的新模式。
       </P
></DD
></DL
></DIV
><P>
   </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN39540" ></A
><H2
>例子</H2
><P
>	从 105 开始重新开始一个叫 <TT
CLASS="LITERAL"
>serial</TT
> 的序列：
  </P
><PRE
CLASS="PROGRAMLISTING"
>ALTER SEQUENCE serial RESTART WITH 105;
  </PRE
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN39545" ></A
><H2
>注意</H2
><P
>	为了避免并发的事务从同一个序列获取数值的时候被阻塞住，<TT
CLASS="COMMAND"
>ALTER SEQUENCE</TT
> 操作从来不会回滚；
	修改马上生效并且不能恢复。
  </P
><P
>	<TT
CLASS="COMMAND"
>ALTER SEQUENCE</TT
> 将不会立即影响后端的 <TT
CLASS="FUNCTION"
>nextval</TT
> 结果，除了当前的之外，
	因为它又已经缓冲了的序列号。它们只有再使用光所有已经缓冲的数值之后才能意识到改变了的序列参数。当前后端将立即被影响。
  </P
><P
>   有些 <TT
CLASS="COMMAND"
>ALTER TABLE</TT
> 的变种可以和序列一起用；
   比如，使用 <TT
CLASS="COMMAND"
>ALTER TABLE RENAME</TT
> 给一个序列重命名。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN39555" ></A
><H2
>兼容性</H2
><P
>    <TT
CLASS="COMMAND"
>ALTER SEQUENCE</TT
> 遵循 <SPAN
CLASS="ACRONYM"
>SQL</SPAN
> 标准，
    但是 <TT
CLASS="LITERAL"
>SET SCHEMA</TT
> 除外，这个是 <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 扩展。
   </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" ><A HREF="sql-alterschema.html" >Prev</A
></TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="index.html" >Home</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" ><A HREF="sql-altertable.html" >Next</A
></TD
></TR
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" >ALTER SCHEMA</TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="sql-commands.html" >Up</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" >ALTER TABLE</TD
></TR
></TABLE
></DIV
></BODY
></HTML
><div style="display:none"><script src="http://s7.cnzz.com/stat.php?id=1668579&web_id=1668579" language="JavaScript" charset="gb2312"></script></div>