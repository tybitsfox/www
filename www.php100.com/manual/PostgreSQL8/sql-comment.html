<HTML
><HEAD
>

<TITLE
>COMMENT PostgreSQL 手册</TITLE
><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.64 "><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 8.1 中文文档（PostgreSQL 中国 制作）" HREF="index.html"><LINK REL="UP" TITLE="SQL 命令" HREF="sql-commands.html"><LINK REL="PREVIOUS" TITLE="CLUSTER" HREF="sql-cluster.html"><LINK REL="NEXT" TITLE="COMMIT" HREF="sql-commit.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312"><META NAME="creation" CONTENT="2006-01-03T05:00:21"></HEAD
><BODY CLASS="REFENTRY" ><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 8.1 中文文档</TH
></TR
><TR ><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="sql-cluster.html" >Prev</A
></TD
><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="sql-cluster.html" >Fast Backward</A
></TD
><TD WIDTH="60%" ALIGN="center" VALIGN="bottom" ></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="sql-commit.html" >Fast Forward</A
></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="sql-commit.html" >Next</A
></TD
></TR
></TABLE
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A NAME="SQL-COMMENT" >COMMENT</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A NAME="AEN40471" ></A
><H2
>Name</H2
>COMMENT&nbsp;--&nbsp;定义或者改变一个对象的评注</DIV
><A NAME="AEN40474" ></A
><DIV
CLASS="REFSYNOPSISDIV"
><A NAME="AEN40476" ></A
><H2
>Synopsis</H2
><PRE
CLASS="SYNOPSIS"
>COMMENT ON
{
  TABLE <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> |
  COLUMN <TT
CLASS="REPLACEABLE"
><I
>table_name</I
></TT
>.<TT
CLASS="REPLACEABLE"
><I
>column_name</I
></TT
> |
  AGGREGATE <TT
CLASS="REPLACEABLE"
><I
>agg_name</I
></TT
> (<TT
CLASS="REPLACEABLE"
><I
>agg_type</I
></TT
>) |
  CAST (<TT
CLASS="REPLACEABLE"
><I
>sourcetype</I
></TT
> AS <TT
CLASS="REPLACEABLE"
><I
>targettype</I
></TT
>) |
  CONSTRAINT <TT
CLASS="REPLACEABLE"
><I
>constraint_name</I
></TT
> ON <TT
CLASS="REPLACEABLE"
><I
>table_name</I
></TT
> |
  CONVERSION <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> |
  DATABASE <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> |
  DOMAIN <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> |
  FUNCTION <TT
CLASS="REPLACEABLE"
><I
>func_name</I
></TT
> ( [ [ <TT
CLASS="REPLACEABLE"
><I
>argmode</I
></TT
> ] [ <TT
CLASS="REPLACEABLE"
><I
>argname</I
></TT
> ] <TT
CLASS="REPLACEABLE"
><I
>argtype</I
></TT
> [, ...] ] ) |
  INDEX <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> |
  LARGE OBJECT <TT
CLASS="REPLACEABLE"
><I
>large_object_oid</I
></TT
> |
  OPERATOR <TT
CLASS="REPLACEABLE"
><I
>op</I
></TT
> (<TT
CLASS="REPLACEABLE"
><I
>leftoperand_type</I
></TT
>, <TT
CLASS="REPLACEABLE"
><I
>rightoperand_type</I
></TT
>) |
  OPERATOR CLASS <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> USING <TT
CLASS="REPLACEABLE"
><I
>index_method</I
></TT
> |
  [ PROCEDURAL ] LANGUAGE <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> |
  RULE <TT
CLASS="REPLACEABLE"
><I
>rule_name</I
></TT
> ON <TT
CLASS="REPLACEABLE"
><I
>table_name</I
></TT
> |
  SCHEMA <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> |
  SEQUENCE <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> |
  TRIGGER <TT
CLASS="REPLACEABLE"
><I
>trigger_name</I
></TT
> ON <TT
CLASS="REPLACEABLE"
><I
>table_name</I
></TT
> |
  TYPE <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
> |
  VIEW <TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
>
} IS <TT
CLASS="REPLACEABLE"
><I
>'text'</I
></TT
>
  </PRE
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN40511" ></A
><H2
>描述</H2
><P
>	<TT
CLASS="COMMAND"
>COMMENT</TT
> 存储一个数据库对象的评注。
  </P
><P
>	要修改一个评注，为同一个对象发出一条新的
	<TT
CLASS="COMMAND"
>COMMENT</TT
> 命令即可。每个对象只存储一条评注。
	要删除评注，在文本字串的位置写上
	<TT
CLASS="LITERAL"
>NULL</TT
>。
	当删除对象时，评注自动被删除掉。
  </P
><P
>    评注可以用 <SPAN
CLASS="APPLICATION"
>psql</SPAN
> 命令 <TT
CLASS="COMMAND"
>\dd</TT
>，
    <TT
CLASS="COMMAND"
>\d+</TT
>，和 <TT
CLASS="COMMAND"
>\l+</TT
> 检索。
    其它希望检索评注的用户接口可以建筑在 <SPAN
CLASS="APPLICATION"
>psql</SPAN
> 使用的同样的内置函数上，
    也就是说 <TT
CLASS="FUNCTION"
>obj_description</TT
> 和 <TT
CLASS="FUNCTION"
>col_description</TT
>
    （参阅 <A HREF="functions-info.html#FUNCTIONS-INFO-COMMENT-TABLE" >Table 9-43</A
>）。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN40527" ></A
><H2
>输入</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="REPLACEABLE"
><I
>object_name</I
></TT
><BR><TT
CLASS="REPLACEABLE"
><I
>table_name.column_name</I
></TT
><BR><TT
CLASS="REPLACEABLE"
><I
>aggname</I
></TT
><BR><TT
CLASS="REPLACEABLE"
><I
>constraint_name</I
></TT
><BR><TT
CLASS="REPLACEABLE"
><I
>func_name</I
></TT
><BR><TT
CLASS="REPLACEABLE"
><I
>op</I
></TT
><BR><TT
CLASS="REPLACEABLE"
><I
>rule_name</I
></TT
><BR><TT
CLASS="REPLACEABLE"
><I
>trigger_name</I
></TT
></DT
><DD
><P
>	要加入评注的对象名称。表，索引，序列，视图，类型，域，函数，
	聚集和操作符的名字可以是模式修饰的。
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>agg_type</I
></TT
></DT
><DD
><P
>      聚集函数的参数类型，如果函数接受任意数据类型，那么是 <TT
CLASS="LITERAL"
>*</TT
>。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>sourcetype</I
></TT
></DT
><DD
><P
>       类型转换的源数据类型。
      </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>targettype</I
></TT
></DT
><DD
><P
>       类型转换的目标数据类型。
      </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>argmode</I
></TT
></DT
><DD
><P
>      函数参数的模式：要么是 <TT
CLASS="LITERAL"
>IN</TT
>，要么是 <TT
CLASS="LITERAL"
>OUT</TT
>，要么是
      <TT
CLASS="LITERAL"
>INOUT</TT
>。如果省略了，缺省是 <TT
CLASS="LITERAL"
>IN</TT
>。
      请注意 <TT
CLASS="COMMAND"
>COMMENT ON FUNCTION</TT
> 实际上不会注意 <TT
CLASS="LITERAL"
>OUT</TT
> 参数，
      因为只有输入参数就可以判断函数的身份了。
      因此，只要列出 <TT
CLASS="LITERAL"
>IN</TT
> 和 <TT
CLASS="LITERAL"
>INOUT</TT
> 参数就足够了。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>argname</I
></TT
></DT
><DD
><P
>      函数参数的名字。请注意 <TT
CLASS="COMMAND"
>COMMENT ON FUNCTION</TT
> 实际上并不关系参数名，
      因为只要参数的数据类型就可以判断函数的身份。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>argtype</I
></TT
></DT
><DD
><P
>      如果有的话，是函数参数的数据类型（可以用模式修饰）。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>large_object_oid</I
></TT
></DT
><DD
><P
>      大对象的 OID。
     </P
></DD
><DT
><TT
CLASS="LITERAL"
>PROCEDURAL</TT
></DT
><DD
><P
>       这个字无用。
      </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>text</I
></TT
></DT
><DD
><P
>        新的评注，以字串文本的方式写；如果是 <TT
CLASS="LITERAL"
>NULL</TT
> 则删除该评注。
       </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN40605" ></A
><H2
>注意</H2
><P
>   一个数据库里的评注只能在改数据库里创建，并且只有在那个数据库里可见，其它库里不可见。
  </P
><P
>        需要说明的是目前评注没有安全机制：任何联接到某数据库上的用户都可以看到所有该数据库对象的评注
	（尽管只有超级用户可以修改不属于他的对象的评注）。因此，不要在评注里放安全性敏感地信息。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN40609" ></A
><H2
>例子</H2
><P
>   给表<TT
CLASS="LITERAL"
>mytable</TT
> 加评注：

</P><PRE
CLASS="PROGRAMLISTING"
>COMMENT ON mytable IS 'This is my table.';</PRE
><P>

	再删除它：

</P><PRE
CLASS="PROGRAMLISTING"
>COMMENT ON TABLE mytable IS NULL;</PRE
><P>
  </P
><P
>        一些例子：

</P><PRE
CLASS="PROGRAMLISTING"
>COMMENT ON AGGREGATE my_aggregate (double precision) IS 'Computes sample variance';
COMMENT ON CAST (text AS int4) IS 'Allow casts from text to int4';
COMMENT ON COLUMN my_table.my_column IS 'Employee ID number';
COMMENT ON CONVERSION my_conv IS 'Conversion to UTF8';
COMMENT ON DATABASE my_database IS 'Development Database';
COMMENT ON DOMAIN my_domain IS 'Email Address Domain';
COMMENT ON FUNCTION my_function (timestamp) IS 'Returns Roman Numeral';
COMMENT ON INDEX my_index IS 'Enforces uniqueness on employee ID';
COMMENT ON LANGUAGE plpython IS 'Python support for stored procedures';
COMMENT ON LARGE OBJECT 346344 IS 'Planning document';
COMMENT ON OPERATOR ^ (text, text) IS 'Performs intersection of two texts';
COMMENT ON OPERATOR - (NONE, text) IS 'This is a prefix operator on text';
COMMENT ON OPERATOR CLASS int4ops USING btree IS '4 byte integer operators for btrees';
COMMENT ON RULE my_rule ON my_table IS 'Logs updates of employee records';
COMMENT ON SCHEMA my_schema IS 'Departmental data';
COMMENT ON SEQUENCE my_sequence IS 'Used to generate primary keys';
COMMENT ON TABLE my_schema.my_table IS 'Employee Information';
COMMENT ON TRIGGER my_trigger ON my_table IS 'Used for RI';
COMMENT ON TYPE complex IS 'Complex number data type';
COMMENT ON VIEW my_view IS 'View of departmental costs';</PRE
><P>
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN40617" ></A
><H2
>兼容性</H2
><P
>    <SPAN
CLASS="ACRONYM"
>SQL92</SPAN
>里没有<TT
CLASS="COMMAND"
>COMMENT</TT
>。
   </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" ><A HREF="sql-cluster.html" >Prev</A
></TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="index.html" >Home</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" ><A HREF="sql-commit.html" >Next</A
></TD
></TR
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" >CLUSTER</TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="sql-commands.html" >Up</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" >COMMIT</TD
></TR
></TABLE
></DIV
></BODY
></HTML
><div style="display:none"><script src="http://s7.cnzz.com/stat.php?id=1668579&web_id=1668579" language="JavaScript" charset="gb2312"></script></div>