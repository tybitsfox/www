<HTML
><HEAD
>

<TITLE
>ecpg PostgreSQL 手册</TITLE
><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.64 "><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 8.1 中文文档（PostgreSQL 中国 制作）" HREF="index.html"><LINK REL="UP" TITLE="客户端应用" HREF="reference-client.html"><LINK REL="PREVIOUS" TITLE="dropuser" HREF="app-dropuser.html"><LINK REL="NEXT" TITLE="pg_config" HREF="app-pgconfig.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312"><META NAME="creation" CONTENT="2006-01-03T05:00:21"></HEAD
><BODY CLASS="REFENTRY" ><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 8.1 中文文档</TH
></TR
><TR ><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="app-dropuser.html" >Prev</A
></TD
><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="app-dropuser.html" >Fast Backward</A
></TD
><TD WIDTH="60%" ALIGN="center" VALIGN="bottom" ></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="app-pgconfig.html" >Fast Forward</A
></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="app-pgconfig.html" >Next</A
></TD
></TR
></TABLE
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A NAME="APP-ECPG" ><SPAN
CLASS="APPLICATION"
>ecpg</SPAN
></A
></H1
><DIV
CLASS="REFNAMEDIV"
><A NAME="AEN50437" ></A
><H2
>Name</H2
><SPAN
CLASS="APPLICATION"
>ecpg</SPAN
>&nbsp;--&nbsp;嵌入的 SQL C 预处理器</DIV
><A NAME="AEN50441" ></A
><DIV
CLASS="REFSYNOPSISDIV"
><A NAME="AEN50443" ></A
><H2
>Synopsis</H2
><P
><TT
CLASS="COMMAND"
>ecpg</TT
> [<TT
CLASS="REPLACEABLE"
><I
>option</I
></TT
>...]  <TT
CLASS="REPLACEABLE"
><I
>file</I
></TT
>... </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="APP-ECPG-DESCRIPTION" ></A
><H2
>描述</H2
><P
>	<SPAN
CLASS="APPLICATION"
>ecpg</SPAN
>
	是一个嵌入的用于C 语言的 SQL 预编译器。
	它把嵌有 SQL 语句的 C 程序通过将 SQL 调用替换成特殊的函数调用的方法转换成普通的 C 代码。
	然后输出的文件就可以用任何 C 编译工具进行处理。
  </P
><P
>	<TT
CLASS="COMMAND"
>ecpg</TT
> 将把命令行上给出的每个输入文件转换成对应的 C 输出文件。
	输入文件最好有 <TT
CLASS="FILENAME"
>.pgc</TT
> 的扩展名，
	这样，这个扩展将被替换成 <TT
CLASS="FILENAME"
>.c</TT
> 来决定输出文件名。
	如果输入文件的扩展不是 <TT
CLASS="FILENAME"
>.pgc</TT
>，那么输出文件名将通过在全文件名后面附加 <TT
CLASS="LITERAL"
>.c</TT
> 来生成。
	输出文件名也可以用 <TT
CLASS="OPTION"
>-o</TT
> 选项覆盖。
  </P
><P
>	本手册页并不描述嵌入的 SQL 语句，参阅 <A HREF="ecpg.html" >Chapter 30</A
> 获更多信息。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN50463" ></A
><H2
>选项</H2
><P
>    <SPAN
CLASS="APPLICATION"
>ecpg</SPAN
> 接受下面命令行参数：

    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>-c</TT
></DT
><DD
><P
>	为 SQL 代码自动生成某种 C 代码。目前，这个选项可以用于 <TT
CLASS="LITERAL"
>EXEC SQL TYPE</TT
>。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-C <TT
CLASS="REPLACEABLE"
><I
>mode</I
></TT
></TT
></DT
><DD
><P
>       设置一个兼容模式。<TT
CLASS="REPLACEABLE"
><I
>mode</I
></TT
> 可以是 <TT
CLASS="LITERAL"
>INFORMIX</TT
> 或者 <TT
CLASS="LITERAL"
>INFORMIX_SE</TT
>。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-D <TT
CLASS="REPLACEABLE"
><I
>symbol</I
></TT
></TT
></DT
><DD
><P
>	定义一个 C 预编译器符号。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-i</TT
></DT
><DD
><P
>       同时也分析系统包含文件。
      </P
></DD
><DT
>-I <TT
CLASS="REPLACEABLE"
><I
>include-path</I
></TT
></DT
><DD
><P
>	声明一个附加的包含路径。用于寻找通过
	<TT
CLASS="LITERAL"
>EXEC SQL INCLUDE</TT
> 包含的文件。缺省是
	<TT
CLASS="FILENAME"
>.</TT
>（当前目录），
	<TT
CLASS="FILENAME"
>/usr/local/include</TT
>，
	在编译时定义的<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 包含路径（缺省：
	<TT
CLASS="FILENAME"
>/usr/local/pgsql/include</TT
>）和
	<TT
CLASS="FILENAME"
>/usr/include</TT
>。顺序如上。
       </P
></DD
><DT
>-o <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></DT
><DD
><P
>	声明<TT
CLASS="COMMAND"
>ecpg</TT
>应该把它的所有输出写到给出的 <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>里。
       </P
></DD
><DT
>-t</DT
><DD
><P
>	打开自动提交模式。在这种模式象，每个查询都自动提交，
	除非它是包围在一个明确的事务块中。在缺省模式下，
	命令只是在发出 <TT
CLASS="COMMAND"
>EXEC SQL COMMIT</TT
> 的时候提交。
       </P
></DD
><DT
>-v</DT
><DD
><P
>	打印额外的信息，包括版本和包含路径。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>---help</TT
></DT
><DD
><P
>	显示一个命令用法的简单摘要，然后退出。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>--version</TT
></DT
><DD
><P
>	显示版本信息，然后退出。
      </P
></DD
></DL
></DIV
><P>
   </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN50531" ></A
><H2
>注意</H2
><P
>	在编译预处理的 C 代码文件的时候，编译器需要能够找到
	<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 包含目录里面的 <SPAN
CLASS="APPLICATION"
>ECPG</SPAN
> 
	头文件。因此，我们在调用编译器的时候可能需要使用 <TT
CLASS="OPTION"
>-I</TT
>
	（比如，<TT
CLASS="LITERAL"
>-I/usr/local/pgsql/include</TT
>）。
  </P
><P
>	使用了嵌入 SQL 的 C 代码必须和 <TT
CLASS="FILENAME"
>libecpg</TT
> 库链接，比如，使用这样的链接选项：
	<TT
CLASS="LITERAL"
>-L/usr/local/pgsql/lib -lecpg</TT
>。
  </P
><P
>	这些目录的实际值可以通过 <A HREF="app-pgconfig.html" >pg_config</A
> 找到。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A NAME="AEN50543" ></A
><H2
>例子</H2
><P
>	如果你有一个叫 <TT
CLASS="FILENAME"
>prog1.pgc</TT
> 的嵌入
	SQL 的 C 源代码，你可以用下面的命令序列创建一个可执行程序：
</P><PRE
CLASS="PROGRAMLISTING"
>ecpg prog1.pgc
cc -I/usr/local/pgsql/include -c prog1.c
cc -o prog1 prog1.o -L/usr/local/pgsql/lib -lecpg</PRE
><P>
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" ><A HREF="app-dropuser.html" >Prev</A
></TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="index.html" >Home</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" ><A HREF="app-pgconfig.html" >Next</A
></TD
></TR
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" ><SPAN
CLASS="APPLICATION"
>dropuser</SPAN
></TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="reference-client.html" >Up</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" >pg_config</TD
></TR
></TABLE
></DIV
></BODY
></HTML
><div style="display:none"><script src="http://s7.cnzz.com/stat.php?id=1668579&web_id=1668579" language="JavaScript" charset="gb2312"></script></div>