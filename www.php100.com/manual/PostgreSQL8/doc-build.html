<HTML
><HEAD
>

<TITLE
>制作文档 PostgreSQL 手册</TITLE
><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.64 "><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 8.1 中文文档（PostgreSQL 中国 制作）" HREF="index.html"><LINK REL="UP" TITLE="文档" HREF="docguide.html"><LINK REL="PREVIOUS" TITLE="工具集" HREF="doc-toolsets.html"><LINK REL="NEXT" TITLE="文档写作" HREF="docguide-authoring.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312"><META NAME="creation" CONTENT="2006-01-03T05:00:21"></HEAD
><BODY CLASS="SECT1" ><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 8.1 中文文档</TH
></TR
><TR ><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="doc-toolsets.html" >Prev</A
></TD
><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="docguide.html" >Fast Backward</A
></TD
><TD WIDTH="60%" ALIGN="center" VALIGN="bottom" >Appendix G. 文档</TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="docguide.html" >Fast Forward</A
></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="docguide-authoring.html" >Next</A
></TD
></TR
></TABLE
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A NAME="DOC-BUILD" >G.3. 制作文档</A
></H1
><P
>        一旦你把所有的东西都设置好了，进入目录
        <TT
CLASS="FILENAME"
>doc/src/sgml</TT
> 然后运行下面其中一条命令：
        （记得要用 GNU make。）
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A NAME="AEN79208" >G.3.1. HTML</A
></H2
><P
>    制作 <SPAN
CLASS="ACRONYM"
>HTML</SPAN
> 版本的文档：
</P><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>doc/src/sgml$ </TT
><TT
CLASS="USERINPUT"
><B
>gmake html</B
></TT
></PRE
><P>
    这也是缺省目标。
   </P
><P
>    在制作 HTML 文档的时候，这个过程同样生成用于索引条目的连接信息。
    因此，如果你希望你的文档在最后有索引，那么你需要制作一次 HTML
    文档，然后再次把文档制作成你想要的格式。
   </P
><P
>    为了便于最终版本的发布，包含 HTML 文档的文件被存储在一个 tar 包里，
    在安装的时候解包。要创建 <SPAN
CLASS="ACRONYM"
>HTML</SPAN
> 文档包，使用下面
    的命令
</P><PRE
CLASS="PROGRAMLISTING"
>cd doc/src
gmake postgres.tar.gz</PRE
><P>
    在发布版里，这些文档包放在 <TT
CLASS="FILENAME"
>doc</TT
> 目录里，
    并且缺省时 <TT
CLASS="COMMAND"
>gmake install</TT
> 会安装这些东西。
  </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A NAME="AEN79221" >G.3.2. 手册页</A
></H2
><P
>        我们用 <SPAN
CLASS="APPLICATION"
>docbook2man</SPAN
> 工具把
         <SPAN
CLASS="PRODUCTNAME"
>DocBook</SPAN
> 的
         <TT
CLASS="SGMLTAG"
>REFENTRY</TT
> 页面转换成适于做 man page
        的 *roff 输出。
        这些手册页也是以 tar 归档的形式发布的，与 <SPAN
CLASS="ACRONYM"
>HTML</SPAN
>
        版本类似。要创建手册页包，用命令
</P><PRE
CLASS="PROGRAMLISTING"
>cd doc/src
gmake man.tar.gz</PRE
><P>
        这些命令最后会在 <TT
CLASS="FILENAME"
>doc/src</TT
> 目录生成一个 tar 文件。
  </P
><P
>   要生成高质量的手册页，我们可能必须使用一个黑过的版本的转换工具，或者做
   一些手工调整。所有手册页都应该在发布之前手工检查。
  </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A NAME="AEN79231" >G.3.3. 用 <SPAN
CLASS="APPLICATION"
>JadeTex</SPAN
> 生成的打印输出</A
></H2
><P
>    如果你想用 <SPAN
CLASS="APPLICATION"
>JadeTex</SPAN
> 生成一个可打印
    的文档，你可以用下面的命令：

    <P
></P
></P><UL
><LI
><P
>       制作一个 <SPAN
CLASS="ACRONYM"
>DVI</SPAN
> 版本：
</P><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>doc/src/sgml$ </TT
><TT
CLASS="USERINPUT"
><B
>gmake postgres.dvi</B
></TT
></PRE
><P>
      </P
></LI
><LI
><P
>       从 <SPAN
CLASS="ACRONYM"
>DVI</SPAN
> 里生成一个 Postscript：
</P><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>doc/src/sgml$ </TT
><TT
CLASS="USERINPUT"
><B
>gmake postgres.ps</B
></TT
></PRE
><P>
      </P
></LI
><LI
><P
>       制作一个 <SPAN
CLASS="ACRONYM"
>PDF</SPAN
>：
</P><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>doc/src/sgml$ </TT
><TT
CLASS="USERINPUT"
><B
>gmake postgres.pdf</B
></TT
></PRE
><P>
       （当然，你也可以从 Postscript 里制作 <SPAN
CLASS="ACRONYM"
>PDF</SPAN
> 版本，
       但是如果你直接生成 <SPAN
CLASS="ACRONYM"
>PDF</SPAN
>，那么它会有超链接和其它
       增强的特性。）
      </P
></LI
></UL
><P>
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A NAME="AEN79257" >G.3.4. 通过 <SPAN
CLASS="ACRONYM"
>RTF</SPAN
> 生成打印输出</A
></H2
><P
>    你也可以通过把它转换成 <SPAN
CLASS="ACRONYM"
>RTF</SPAN
> 并且用一个办公套件
    进行格式微调的办法把<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>文档转换
    成 <SPAN
CLASS="ACRONYM"
>RTF</SPAN
> 格式的办法来创建一个可打印的版本。
    根据你使用的不同的办公套件，然后你就可以分别把文档转换成 Postscript
    或者<SPAN
CLASS="ACRONYM"
>PDF</SPAN
>。下面的步骤演示了使用 <SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>
    实现的过程。
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>     目前看来 <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 的当前版本的文档碰到
     了OpenJade的大小限制的一些毛病。如果制作 <SPAN
CLASS="ACRONYM"
>RTF</SPAN
> 版本
     的时候停住了好长时间，而输出文件还是 0，那么你很有可能碰到了这个毛病。
     （不过，记住，正常的制作要花 5 到 10 分钟，因此不要太快退出。）
    </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="PROCEDURE"
><P
><B
><SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
><SPAN
CLASS="ACRONYM"
>RTF</SPAN
> 清理</B
></P
><P
>    <SPAN
CLASS="APPLICATION"
>OpenJade</SPAN
>，忽略了声明文本主体的缺省风格。以前，这个未经查明的问题
    导致目录（ToC）生成的长时间处理。不过，在<SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>
    的工作人员的全力帮助下，这个病症被诊断出来并且找到了绕开的办法。
    </P
><OL
TYPE="1"
><LI
><P
>      键入下面命令生成 <SPAN
CLASS="ACRONYM"
>RTF</SPAN
> 版本：
</P><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>doc/src/sgml$ </TT
><TT
CLASS="USERINPUT"
><B
>gmake postgres.rtf</B
></TT
></PRE
><P>
     </P
></LI
><LI
><P
>	修复 RTF 文件，以正确声明所有风格，
	尤其是缺省风格。如果文档包含 <TT
CLASS="SGMLTAG"
>REFENTRY</TT
> 段，
	那么我们还必须把和<I
CLASS="EMPHASIS"
>前面</I
>的段落与当前段落
	绑定的格式化暗示替换为当前的段落和后面的段落绑定。
	在 <TT
CLASS="FILENAME"
>doc/src/sgml</TT
> 里有一个
	<SPAN
CLASS="APPLICATION"
>fixrtf</SPAN
> 用于完成这样的修补∶
</P><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>doc/src/sgml$ </TT
><TT
CLASS="USERINPUT"
><B
>./fixrtf --refentry postgres.rtf</B
></TT
></PRE
><P>
     </P
><P
>	该脚本把 <TT
CLASS="LITERAL"
>{\s0 Normal;}</TT
>
	增加为文档的零级风格。根据<SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>，
	RTF 标准会禁止增加一种隐含的零级风格，
	尽管 M$Word 碰巧可以处理这种情况。为了修复 <TT
CLASS="SGMLTAG"
>REFENTRY</TT
>
	段落，该脚本把 <TT
CLASS="LITERAL"
>\keepn</TT
> 标记替换为
	<TT
CLASS="LITERAL"
>\keep</TT
>。
     </P
></LI
><LI
><P
>      在 <SPAN
CLASS="PRODUCTNAME"
>Applixware Words</SPAN
> 里打开新的文档，然后输入该
      <SPAN
CLASS="ACRONYM"
>RTF</SPAN
> 文件。
     </P
></LI
><LI
><P
>	用<SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>生成一个新的 ToC。
     </P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
><P
>	选择现有的 ToC 行，从第一行第一个字符到最后一行最后一个字符。
       </P
></LI
><LI
><P
>	用
	<SPAN
CLASS="GUIMENU"
>Tools</SPAN
>-&gt;<SPAN
CLASS="GUISUBMENU"
>Book
        Building</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Create Table of
        Contents</SPAN
>
	制作一个新的 ToC。选择头三层头用于包含在 ToC里。
	这将用本地的<SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>ToC 代替从RTF 里输入进来的行。
       </P
></LI
><LI
><P
>	使用
        <SPAN
CLASS="GUIMENU"
>Format</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Style</SPAN
>，
	调整 ToC 格式，选择每三种 ToC 风格，
	然后为 <TT
CLASS="LITERAL"
>First</TT
> 和
	<TT
CLASS="LITERAL"
>Left</TT
>调整边距。使用下面的值：

        <DIV
CLASS="INFORMALTABLE"
><A NAME="AEN79323" ></A
><P
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR ><TH
ALIGN="LEFT"
VALIGN="TOP"
>风格</TH
><TH
ALIGN="LEFT"
VALIGN="TOP"
>第一边距（英寸）</TH
><TH
ALIGN="LEFT"
VALIGN="TOP"
>左边距（英寸）</TH
></TR
></THEAD
><TBODY
><TR ><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>TOC-Heading 1</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>0.4</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>0.4</TT
></TD
></TR
><TR ><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>TOC-Heading 2</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>0.8</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>0.8</TT
></TD
></TR
><TR ><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>TOC-Heading 3</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>1.2</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>1.2</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
>
       </P
></LI
></OL
></LI
><LI
><P
>	对文档进行加工：

      <P
></P
></P><UL
><LI
><P
>	调整分页符。
	</P
></LI
><LI
><P
>	调整表列宽。
	</P
></LI
></UL
><P>
     </P
></LI
><LI
><P
>	用正确的值替换 ToC 里例子和图片部分右对齐的页数。
	这些对每个文档只需要花几分钟。
     </P
></LI
><LI
><P
>	如果索引是空的，那么从文档中删除它。
     </P
></LI
><LI
><P
>	重新生成并调整目录。
     </P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
><P
>	选择 ToC 字段。
      </P
></LI
><LI
><P
>	选择
	<SPAN
CLASS="GUIMENU"
>Tools</SPAN
>-&gt;<SPAN
CLASS="GUISUBMENU"
>Book
         Building</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Create Table of
         Contents</SPAN
>
      </P
></LI
><LI
><P
>	通过选择
         <SPAN
CLASS="GUIMENU"
>Tools</SPAN
>-&gt;<SPAN
CLASS="GUISUBMENU"
>Field
         Editing</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Unprotect</SPAN
>
	解除 ToC。
      </P
></LI
><LI
><P
>	删除 ToC 中的第一行，它是指向 ToC 本身的一条记录。
      </P
></LI
></OL
></LI
><LI
><P
>        把该文档保存为<SPAN
CLASS="PRODUCTNAME"
>Applixware Words</SPAN
>本地文档格式以便于最后的编辑。
     </P
></LI
><LI
><P
>        把该文档以 Postscript 格式<SPAN
CLASS="QUOTE"
>"打印"</SPAN
>到一个文件。
     </P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A NAME="AEN79388" >G.3.5. 纯文本文件</A
></H2
><P
>        有好几个文件是以纯文本的模式发布的，主要是为了在安装过程中阅读。
         <TT
CLASS="FILENAME"
>INSTALL</TT
> 文件对应 <A HREF="installation.html" >Chapter 14</A
>，
        只有一点用于不同环境的修改。要创建这个文件，进入
        目录 <TT
CLASS="FILENAME"
>doc/src/sgml</TT
> 然后敲入
        <TT
CLASS="USERINPUT"
><B
>gmake INSTALL</B
></TT
>。
        这样就会创建一个叫 <TT
CLASS="FILENAME"
>INSTALL.html</TT
> 的文件，
        你可以用  <SPAN
CLASS="PRODUCTNAME"
>Netscape Navigator</SPAN
> 把它
        另存为一个文本文件，然后把它拷到现存文件的位置。
        好象  <SPAN
CLASS="PRODUCTNAME"
>Netscape</SPAN
> 提供了最高的
        <SPAN
CLASS="ACRONYM"
>HTML</SPAN
> 到文本的转换质量。（比
         <SPAN
CLASS="APPLICATION"
>lynx</SPAN
> 和
         <SPAN
CLASS="APPLICATION"
>w3m</SPAN
>好）。
   </P
><P
>        文件 <TT
CLASS="FILENAME"
>HISTORY</TT
> 可以用类似方法创建，用的命令是
         <TT
CLASS="USERINPUT"
><B
>gmake HISTORY</B
></TT
>。对于 <TT
CLASS="FILENAME"
>src/test/regress/README</TT
>
	 文件，命令是 <TT
CLASS="USERINPUT"
><B
>gmake regress_README</B
></TT
>。
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A NAME="AEN79406" >G.3.6. 语法检查</A
></H2
><P
>    制作文档可能需要很长时间。但是有一个方法用于只检查文档文件的语法正确性，
    只要花几秒钟：
</P><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>doc/src/sgml$ </TT
><TT
CLASS="USERINPUT"
><B
>gmake check</B
></TT
></PRE
><P>
   </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" ><A HREF="doc-toolsets.html" >Prev</A
></TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="index.html" >Home</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" ><A HREF="docguide-authoring.html" >Next</A
></TD
></TR
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" >工具集</TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="docguide.html" >Up</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" >文档写作</TD
></TR
></TABLE
></DIV
></BODY
></HTML
><div style="display:none"><script src="http://s7.cnzz.com/stat.php?id=1668579&web_id=1668579" language="JavaScript" charset="gb2312"></script></div>