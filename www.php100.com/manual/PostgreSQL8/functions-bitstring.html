<HTML
><HEAD
>

<TITLE
>位串函数和操作符 PostgreSQL 手册</TITLE
><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.64 "><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 8.1 中文文档（PostgreSQL 中国 制作）" HREF="index.html"><LINK REL="UP" TITLE="函数和操作符" HREF="functions.html"><LINK REL="PREVIOUS" TITLE="二进制字串函数和操作符" HREF="functions-binarystring.html"><LINK REL="NEXT" TITLE="模式匹配" HREF="functions-matching.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312"><META NAME="creation" CONTENT="2006-01-03T05:00:21"></HEAD
><BODY CLASS="SECT1" ><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 8.1 中文文档</TH
></TR
><TR ><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="functions-binarystring.html" >Prev</A
></TD
><TD WIDTH="10%" ALIGN="left" VALIGN="top" ><A HREF="functions.html" >Fast Backward</A
></TD
><TD WIDTH="60%" ALIGN="center" VALIGN="bottom" >Chapter 9. 函数和操作符</TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="functions.html" >Fast Forward</A
></TD
><TD WIDTH="10%" ALIGN="right" VALIGN="top" ><A HREF="functions-matching.html" >Next</A
></TD
></TR
></TABLE
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A NAME="FUNCTIONS-BITSTRING" >9.6. 位串函数和操作符</A
></H1
><A NAME="AEN8763" ></A
><P
>    本节描述用于检查和操作位串的函数和操作符，也就是操作类型为 <TT
CLASS="TYPE"
>bit</TT
> 和 <TT
CLASS="TYPE"
>bit varying</TT
>
    的数值的函数和操作符。除了常用的比较操作符之外，还可以使用 <A HREF="functions-bitstring.html#FUNCTIONS-BIT-STRING-OP-TABLE" >Table 9-10</A
> 里显示的操作符。
    <TT
CLASS="LITERAL"
>&amp;</TT
>，<TT
CLASS="LITERAL"
>|</TT
>，和 <TT
CLASS="LITERAL"
>#</TT
> 的位串操作数必须等长。
    在移位的时候，保留原始的位串的的长度，如例子所示。
   </P
><DIV
CLASS="TABLE"
><A NAME="FUNCTIONS-BIT-STRING-OP-TABLE" ></A
><P
><B
>Table 9-10. 位串操作符</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR ><TH
ALIGN="LEFT"
VALIGN="TOP"
>操作符</TH
><TH
ALIGN="LEFT"
VALIGN="TOP"
>描述</TH
><TH
ALIGN="LEFT"
VALIGN="TOP"
>例子</TH
><TH
ALIGN="LEFT"
VALIGN="TOP"
>结果</TH
></TR
></THEAD
><TBODY
><TR ><TD ALIGN="LEFT" VALIGN="TOP" > <TT
CLASS="LITERAL"
>||</TT
> </TD
><TD ALIGN="LEFT" VALIGN="TOP" >连接</TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>B'10001' || B'011'</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>10001011</TT
></TD
></TR
><TR ><TD ALIGN="LEFT" VALIGN="TOP" > <TT
CLASS="LITERAL"
>&amp;</TT
> </TD
><TD ALIGN="LEFT" VALIGN="TOP" >按位 AND（与）</TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>B'10001' &amp; B'01101'</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>00001</TT
></TD
></TR
><TR ><TD ALIGN="LEFT" VALIGN="TOP" > <TT
CLASS="LITERAL"
>|</TT
> </TD
><TD ALIGN="LEFT" VALIGN="TOP" >按位 OR（或）</TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>B'10001' | B'01101'</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>11101</TT
></TD
></TR
><TR ><TD ALIGN="LEFT" VALIGN="TOP" > <TT
CLASS="LITERAL"
>#</TT
> </TD
><TD ALIGN="LEFT" VALIGN="TOP" >按位 XOR（异或）</TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>B'10001' # B'01101'</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>11100</TT
></TD
></TR
><TR ><TD ALIGN="LEFT" VALIGN="TOP" > <TT
CLASS="LITERAL"
>~</TT
> </TD
><TD ALIGN="LEFT" VALIGN="TOP" >按位 NOT（非）</TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>~ B'10001'</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>01110</TT
></TD
></TR
><TR ><TD ALIGN="LEFT" VALIGN="TOP" > <TT
CLASS="LITERAL"
>&lt;&lt;</TT
> </TD
><TD ALIGN="LEFT" VALIGN="TOP" >按位左移</TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>B'10001' &lt;&lt; 3</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>01000</TT
></TD
></TR
><TR ><TD ALIGN="LEFT" VALIGN="TOP" > <TT
CLASS="LITERAL"
>&gt;&gt;</TT
> </TD
><TD ALIGN="LEFT" VALIGN="TOP" >按位右移</TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>B'10001' &gt;&gt; 2</TT
></TD
><TD ALIGN="LEFT" VALIGN="TOP" ><TT
CLASS="LITERAL"
>00100</TT
></TD
></TR
></TBODY
></TABLE
></DIV
><P
>    下面的 <SPAN
CLASS="ACRONYM"
>SQL</SPAN
> 标准函数除了可以用于字符串之外，也可以用于位串：
    <TT
CLASS="LITERAL"
><TT
CLASS="FUNCTION"
>length</TT
></TT
>，
    <TT
CLASS="LITERAL"
><TT
CLASS="FUNCTION"
>bit_length</TT
></TT
>，
    <TT
CLASS="LITERAL"
><TT
CLASS="FUNCTION"
>octet_length</TT
></TT
>，
    <TT
CLASS="LITERAL"
><TT
CLASS="FUNCTION"
>position</TT
></TT
>，
    <TT
CLASS="LITERAL"
><TT
CLASS="FUNCTION"
>substring</TT
></TT
>。
   </P
><P
>    另外，我们可以在整数和 <TT
CLASS="TYPE"
>bit</TT
> 之间来回转换。例子：
</P><PRE
CLASS="PROGRAMLISTING"
>44::bit(10)                    <I
CLASS="LINEANNOTATION"
>0000101100</I
>
44::bit(3)                     <I
CLASS="LINEANNOTATION"
>100</I
>
cast(-44 as bit(12))           <I
CLASS="LINEANNOTATION"
>111111010100</I
>
'1110'::bit(4)::integer        <I
CLASS="LINEANNOTATION"
>14</I
></PRE
><P>
    请注意，如果只是转换为 <SPAN
CLASS="QUOTE"
>"bit"</SPAN
>，意思是转换成 <TT
CLASS="LITERAL"
>bit(1)</TT
>，
    因此只会转换成整数的最低位。
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>      在 <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 8.0 以前，把一个整数转换成 <TT
CLASS="TYPE"
>bit(n)</TT
> 将拷贝整数的最左边的 <TT
CLASS="LITERAL"
>n</TT
> 位，
      而现在是拷贝最右边的 <TT
CLASS="LITERAL"
>n</TT
> 位。还有，把一个整数转换成比整数本身长位串，就会在最左边扩展符号。
     </P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR size="1" 
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" ><A HREF="functions-binarystring.html" >Prev</A
></TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="index.html" >Home</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" ><A HREF="functions-matching.html" >Next</A
></TD
></TR
><TR ><TD WIDTH="33%" ALIGN="left" VALIGN="top" >二进制字串函数和操作符</TD
><TD WIDTH="34%" ALIGN="center" VALIGN="top" ><A HREF="functions.html" >Up</A
></TD
><TD WIDTH="33%" ALIGN="right" VALIGN="top" >模式匹配</TD
></TR
></TABLE
></DIV
></BODY
></HTML
><div style="display:none"><script src="http://s7.cnzz.com/stat.php?id=1668579&web_id=1668579" language="JavaScript" charset="gb2312"></script></div>