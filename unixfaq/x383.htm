<html><head><title>我如何得到一个文件的长度？</title><meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.73" charset="UTF-8"><link rel="HOME" title="UNIX Programming FAQ 中文版 v0.1.0" href="./book1.htm"><link rel="UP" title="一般文件操作(包括管道和套接字)" href="./c300.htm"><link rel="PREVIOUS" title="请问du是怎样工作的？" href="./x378.htm"><link rel="NEXT" title="我如何像shell里一样扩展在文件名里的'~'？" href="./x389.htm"></head><body class="SECT1" alink="#0000ff" bgcolor="#ffffff" link="#0000ff" text="#000000" vlink="#840084"><div class="NAVHEADER"><table summary="Header navigation table" border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><th colspan="3" align="center">UNIX Programming FAQ 中文版 v0.1.0</th></tr><tr><td align="left" valign="bottom" width="10%"><a href="./x378.htm" accesskey="P">Prev</a></td><td align="center" valign="bottom" width="80%">Chapter 2. 一般文件操作(包括管道和套接字)</td><td align="right" valign="bottom" width="10%"><a href="./x389.htm" accesskey="N">Next</a></td></tr></tbody></table><hr align="left" width="100%"></div><div class="SECT1"><h1 class="SECT1"><a name="AEN383">2.8. 我如何得到一个文件的长度？</a></h1><p>用stat()或在文件打开后用fstat()。
    </p><p>这两个调用会将文件信息填入一个结构中， 其中你能找到诸如文件主人、属性、
大小、最后访问时间、最后修改时间等所有关于此文件的东西。
    </p><p>下面的程序大体示范如何用stat()得到文件大小。
    </p><pre class="PROGRAMLISTING">     #include &lt;stdlib.h&gt;
     #include &lt;stdio.h&gt;
    
     #include &lt;sys/types.h&gt;
     #include &lt;sys/stat.h&gt;
    
     int get_file_size(char *path,off_t *size)
     {
       struct stat file_stats;
    
       if(stat(path,&amp;file_stats))
         return -1;
    
       *size = file_stats.st_size;
       return 0;
     }
    </pre></div><div class="NAVFOOTER"><hr align="left" width="100%"><table summary="Footer navigation table" border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" valign="top" width="33%"><a href="./x378.htm" accesskey="P">Prev</a></td><td align="center" valign="top" width="34%"><a href="./book1.htm" accesskey="H">Home</a></td><td align="right" valign="top" width="33%"><a href="./x389.htm" accesskey="N">Next</a></td></tr><tr><td align="left" valign="top" width="33%">请问du是怎样工作的？</td><td align="center" valign="top" width="34%"><a href="./c300.htm" accesskey="U">Up</a></td><td align="right" valign="top" width="33%">我如何像shell里一样扩展在文件名里的'~'？</td></tr></tbody></table></div></body></html>
