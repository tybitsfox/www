<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>GtkIMContext</title><meta name="generator" content="DocBook XSL Stylesheets V1.66.0"><link rel="start" href="index.html" title="GTK+ Reference Manual"><link rel="up" href="AbstractObjects.html" title="Abstract Base Classes"><link rel="prev" href="GtkWidget.html" title="GtkWidget"><link rel="next" href="PlugSocket.html" title="Cross-process Embedding"><meta name="generator" content="GTK-Doc V1.3 (XML mode)"><link rel="stylesheet" href="style.css" type="text/css"><link rel="part" href="gtk.html" title="Part I. GTK+ Overview"><link rel="part" href="gtkbase.html" title="Part II. GTK+ Core Reference"><link rel="part" href="gtkobjects.html" title="Part III. GTK+ Widgets and Objects"><link rel="chapter" href="ch01.html" title="Object Hierarchy"><link rel="chapter" href="ch02.html" title="Widget Gallery"><link rel="chapter" href="WindowWidgets.html" title="Windows"><link rel="chapter" href="DisplayWidgets.html" title="Display Widgets"><link rel="chapter" href="ButtonWidgets.html" title="Buttons and Toggles"><link rel="chapter" href="NumericEntry.html" title="Numeric/Text Data Entry"><link rel="chapter" href="TextWidgetObjects.html" title="Multiline Text Editor"><link rel="chapter" href="TreeWidgetObjects.html" title="Tree, List and Icon Grid Widgets"><link rel="chapter" href="MenusAndCombos.html" title="Menus, Combo Box, Toolbar"><link rel="chapter" href="Actions.html" title="Action-based menus and toolbars"><link rel="chapter" href="SelectorWidgets.html" title="Selectors (File/Font/Color/Input Devices)"><link rel="chapter" href="LayoutContainers.html" title="Layout Containers"><link rel="chapter" href="Ornaments.html" title="Ornaments"><link rel="chapter" href="ScrollingWidgets.html" title="Scrolling"><link rel="chapter" href="MiscObjects.html" title="Miscellaneous"><link rel="chapter" href="AbstractObjects.html" title="Abstract Base Classes"><link rel="chapter" href="PlugSocket.html" title="Cross-process Embedding"><link rel="chapter" href="SpecialObjects.html" title="Special-purpose features"><link rel="chapter" href="DeprecatedObjects.html" title="Deprecated"><link rel="part" href="migrating.html" title="Part IV. Migrating from Previous Versions of GTK+"><link rel="chapter" href="gtk-migrating-checklist.html" title="Migration Checklist"><link rel="chapter" href="gtk-migrating-GtkFileChooser.html" title="Migrating from GtkFileSelection to GtkFileChooser"><link rel="chapter" href="gtk-migrating-GtkAction.html" title="Migrating from old menu and toolbar systems to GtkAction"><link rel="chapter" href="gtk-migrating-GtkComboBox.html" title="Migrating from GtkOptionMenu and GtkCombo to GtkComboBox and GtkComboBoxEntry"><link rel="chapter" href="gtk-migrating-GtkIconView.html" title="Migrating from GnomeIconList to GtkIconView"><link rel="chapter" href="gtk-migrating-GtkAboutDialog.html" title="Migrating from GnomeAbout to GtkAboutDialog"><link rel="chapter" href="gtk-migrating-GtkColorButton.html" title="Migrating from GnomeColorPicker to GtkColorButton"><link rel="part" href="pt05.html" title="Part V. GTK+ Tools"><link rel="glossary" href="glossary.html" title="Glossary"><link rel="index" href="ix01.html" title="Index"><link rel="index" href="ix02.html" title="Index of deprecated symbols"><link rel="index" href="ix03.html" title="Index of new symbols in 2.2"><link rel="index" href="ix04.html" title="Index of new symbols in 2.4"><link rel="index" href="ix05.html" title="Index of new symbols in 2.6"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle"><td><a accesskey="p" href="GtkWidget.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td><td><a accesskey="u" href="AbstractObjects.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td><td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td><th width="100%" align="center">GTK+ Reference Manual</th><td><a accesskey="n" href="PlugSocket.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td></tr></table><div class="refentry" lang="en"><a name="GtkIMContext"></a><div class="titlepage"></div><div class="refnamediv"><table width="100%"><tr><td valign="top"><h2><span class="refentrytitle">GtkIMContext</span></h2><p>GtkIMContext &#8212; Base class for input method contexts</p></td><td valign="top" align="right"></td></tr></table></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">

#include &lt;gtk/gtk.h&gt;


            <a href="GtkIMContext.html#GtkIMContext-struct">GtkIMContext</a>;
void        <a href="GtkIMContext.html#gtk-im-context-set-client-window">gtk_im_context_set_client_window</a>
                                            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../gdk/gdk-Windows.html#GdkWindow"
>GdkWindow</a> *window);
void        <a href="GtkIMContext.html#gtk-im-context-get-preedit-string">gtk_im_context_get_preedit_string</a>
                                            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> **str,
                                             <a
href="../pango/pango-Text-Attributes.html#PangoAttrList"
>PangoAttrList</a> **attrs,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> *cursor_pos);
<a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    <a href="GtkIMContext.html#gtk-im-context-filter-keypress">gtk_im_context_filter_keypress</a>  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../gdk/gdk-Event-Structures.html#GdkEventKey"
>GdkEventKey</a> *event);
void        <a href="GtkIMContext.html#gtk-im-context-focus-in">gtk_im_context_focus_in</a>         (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);
void        <a href="GtkIMContext.html#gtk-im-context-focus-out">gtk_im_context_focus_out</a>        (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);
void        <a href="GtkIMContext.html#gtk-im-context-reset">gtk_im_context_reset</a>            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);
void        <a href="GtkIMContext.html#gtk-im-context-set-cursor-location">gtk_im_context_set_cursor_location</a>
                                            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../gdk/gdk-Points-Rectangles-and-Regions.html#GdkRectangle"
>GdkRectangle</a> *area);
void        <a href="GtkIMContext.html#gtk-im-context-set-use-preedit">gtk_im_context_set_use_preedit</a>  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a> use_preedit);
void        <a href="GtkIMContext.html#gtk-im-context-set-surrounding">gtk_im_context_set_surrounding</a>  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             const <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> *text,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> len,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> cursor_index);
<a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    <a href="GtkIMContext.html#gtk-im-context-get-surrounding">gtk_im_context_get_surrounding</a>  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> **text,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> *cursor_index);
<a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    <a href="GtkIMContext.html#gtk-im-context-delete-surrounding">gtk_im_context_delete_surrounding</a>
                                            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> offset,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> n_chars);


</pre></div><div class="refsect1" lang="en"><a name="id3651838"></a><h2>Object Hierarchy</h2><pre class="synopsis">

  <a
href="../gobject/gobject-The-Base-Object-Type.html#GObject"
>GObject</a>
   +----GtkIMContext
         +----<a href="GtkIMContextSimple.html" title="GtkIMContextSimple">GtkIMContextSimple</a>
         +----<a href="GtkIMMulticontext.html" title="GtkIMMulticontext">GtkIMMulticontext</a>
</pre></div><div class="refsect1" lang="en"><a name="id3651872"></a><h2>Signal Prototypes</h2><pre class="synopsis">

"<a href="GtkIMContext.html#GtkIMContext-commit">commit</a>"    void        user_function      (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> *arg1,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);
"<a href="GtkIMContext.html#GtkIMContext-delete-surrounding">delete-surrounding</a>"
            <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    user_function      (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> arg1,
                                            <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> arg2,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);
"<a href="GtkIMContext.html#GtkIMContext-preedit-changed">preedit-changed</a>"
            void        user_function      (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);
"<a href="GtkIMContext.html#GtkIMContext-preedit-end">preedit-end</a>"
            void        user_function      (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);
"<a href="GtkIMContext.html#GtkIMContext-preedit-start">preedit-start</a>"
            void        user_function      (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);
"<a href="GtkIMContext.html#GtkIMContext-retrieve-surrounding">retrieve-surrounding</a>"
            <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    user_function      (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);
</pre></div><div class="refsect1" lang="en"><a name="id3652101"></a><h2>Description</h2><p>

</p></div><div class="refsect1" lang="en"><a name="id3652111"></a><h2>Details</h2><div class="refsect2" lang="en"><a name="id3652117"></a><h3><a name="GtkIMContext-struct"></a>GtkIMContext</h3><a class="indexterm" name="id3652127"></a><pre class="programlisting">typedef struct _GtkIMContext GtkIMContext;</pre><p>

</p></div><hr><div class="refsect2" lang="en"><a name="id3652143"></a><h3><a name="gtk-im-context-set-client-window"></a>gtk_im_context_set_client_window ()</h3><a class="indexterm" name="id3652153"></a><pre class="programlisting">void        gtk_im_context_set_client_window
                                            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../gdk/gdk-Windows.html#GdkWindow"
>GdkWindow</a> *window);</pre><p>
Set the client window for the input context; this is the
<a
href="../gdk/gdk-Windows.html#GdkWindow"
><span class="type">GdkWindow</span></a> in which the input appears. This window is
used in order to correctly position status windows, and may
also be used for purposes internal to the input method.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>window</tt></i> :</span></td><td>  the client window. This may be <tt class="literal">NULL</tt> to indicate
          that the previous client window no longer exists.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3652252"></a><h3><a name="gtk-im-context-get-preedit-string"></a>gtk_im_context_get_preedit_string ()</h3><a class="indexterm" name="id3652264"></a><pre class="programlisting">void        gtk_im_context_get_preedit_string
                                            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> **str,
                                             <a
href="../pango/pango-Text-Attributes.html#PangoAttrList"
>PangoAttrList</a> **attrs,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> *cursor_pos);</pre><p>
Retrieve the current preedit string for the input context,
and a list of attributes to apply to the string.
This string should be displayed inserted at the insertion
point.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td>    a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>str</tt></i> :</span></td><td>        location to store the retrieved string. The
             string retrieved must be freed with <a
href="../glib/glib-Memory-Allocation.html#g-free"
><tt class="function">g_free()</tt></a>.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>attrs</tt></i> :</span></td><td>      location to store the retrieved attribute list.
             When you are done with this list, you must
             unreference it with <a
href="../pango/pango-Text-Attributes.html#pango-attr-list-unref"
><tt class="function">pango_attr_list_unref()</tt></a>.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>cursor_pos</tt></i> :</span></td><td> location to store position of cursor (in characters)
             within the preedit string.  
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3652418"></a><h3><a name="gtk-im-context-filter-keypress"></a>gtk_im_context_filter_keypress ()</h3><a class="indexterm" name="id3652430"></a><pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    gtk_im_context_filter_keypress  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../gdk/gdk-Event-Structures.html#GdkEventKey"
>GdkEventKey</a> *event);</pre><p>
Allow an input method to internally handle a key press event.
If this function returns <tt class="literal">TRUE</tt>, then no further processing
should be done for this keystroke.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>event</tt></i> :</span></td><td> the key event
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> <tt class="literal">TRUE</tt> if the input method handled the keystroke.

</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3652534"></a><h3><a name="gtk-im-context-focus-in"></a>gtk_im_context_focus_in ()</h3><a class="indexterm" name="id3652545"></a><pre class="programlisting">void        gtk_im_context_focus_in         (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);</pre><p>
Notify the input method that the widget to which this
input context corresponds has gained focus. The input method
may, for example, change the displayed feedback to reflect
this change.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3652606"></a><h3><a name="gtk-im-context-focus-out"></a>gtk_im_context_focus_out ()</h3><a class="indexterm" name="id3652617"></a><pre class="programlisting">void        gtk_im_context_focus_out        (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);</pre><p>
Notify the input method that the widget to which this
input context corresponds has lost focus. The input method
may, for example, change the displayed feedback or reset the contexts
state to reflect this change.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3652679"></a><h3><a name="gtk-im-context-reset"></a>gtk_im_context_reset ()</h3><a class="indexterm" name="id3652689"></a><pre class="programlisting">void        gtk_im_context_reset            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);</pre><p>
Notify the input method that a change such as a change in cursor
position has been made. This will typically cause the input
method to clear the preedit state.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3652750"></a><h3><a name="gtk-im-context-set-cursor-location"></a>gtk_im_context_set_cursor_location ()</h3><a class="indexterm" name="id3652762"></a><pre class="programlisting">void        gtk_im_context_set_cursor_location
                                            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../gdk/gdk-Points-Rectangles-and-Regions.html#GdkRectangle"
>GdkRectangle</a> *area);</pre><p>
Notify the input method that a change in cursor 
position has been made. The location is relative to the client
window.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>area</tt></i> :</span></td><td> new location
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3652844"></a><h3><a name="gtk-im-context-set-use-preedit"></a>gtk_im_context_set_use_preedit ()</h3><a class="indexterm" name="id3652855"></a><pre class="programlisting">void        gtk_im_context_set_use_preedit  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a> use_preedit);</pre><p>
Sets whether the IM context should use the preedit string
to display feedback. If <i class="parameter"><tt>use_preedit</tt></i> is FALSE (default
is TRUE), then the IM context may use some other method to display
feedback, such as displaying it in a child of the root window.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>use_preedit</tt></i> :</span></td><td> whether the IM context should use the preedit string.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3652945"></a><h3><a name="gtk-im-context-set-surrounding"></a>gtk_im_context_set_surrounding ()</h3><a class="indexterm" name="id3652957"></a><pre class="programlisting">void        gtk_im_context_set_surrounding  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             const <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> *text,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> len,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> cursor_index);</pre><p>
Sets surrounding context around the insertion point and preedit
string. This function is expected to be called in response to the
GtkIMContext::retrieve_surrounding signal, and will likely have no
effect if called at other times.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a> 
</td></tr><tr><td><span class="term"><i class="parameter"><tt>text</tt></i> :</span></td><td> text surrounding the insertion point, as UTF-8.
       the preedit string should not be included within
       <i class="parameter"><tt>text</tt></i>.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>len</tt></i> :</span></td><td> the length of <i class="parameter"><tt>text</tt></i>, or -1 if <i class="parameter"><tt>text</tt></i> is nul-terminated
</td></tr><tr><td><span class="term"><i class="parameter"><tt>cursor_index</tt></i> :</span></td><td> the byte index of the insertion cursor within <i class="parameter"><tt>text</tt></i>.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3653109"></a><h3><a name="gtk-im-context-get-surrounding"></a>gtk_im_context_get_surrounding ()</h3><a class="indexterm" name="id3653120"></a><pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    gtk_im_context_get_surrounding  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> **text,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> *cursor_index);</pre><p>
Retrieves context around the insertion point. Input methods
typically want context in order to constrain input text based on
existing text; this is important for languages such as Thai where
only some sequences of characters are allowed.
</p><p>
This function is implemented by emitting the
GtkIMContext::retrieve_surrounding signal on the input method; in
response to this signal, a widget should provide as much context as
is available, up to an entire paragraph, by calling
<a href="GtkIMContext.html#gtk-im-context-set-surrounding"><tt class="function">gtk_im_context_set_surrounding()</tt></a>. Note that there is no obligation
for a widget to respond to the ::retrieve_surrounding signal, so input
methods must be prepared to function without context.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>text</tt></i> :</span></td><td> location to store a UTF-8 encoded string of text
       holding context around the insertion point.
       If the function returns <tt class="literal">TRUE</tt>, then you must free
       the result stored in this location with <a
href="../glib/glib-Memory-Allocation.html#g-free"
><tt class="function">g_free()</tt></a>.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>cursor_index</tt></i> :</span></td><td> location to store byte index of the insertion cursor
       within <i class="parameter"><tt>text</tt></i>.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> <tt class="literal">TRUE</tt> if surrounding text was provided; in this case
   you must free the result stored in *text.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3653290"></a><h3><a name="gtk-im-context-delete-surrounding"></a>gtk_im_context_delete_surrounding ()</h3><a class="indexterm" name="id3653302"></a><pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    gtk_im_context_delete_surrounding
                                            (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> offset,
                                             <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> n_chars);</pre><p>
Asks the widget that the input context is attached to to delete
characters around the cursor position by emitting the
GtkIMContext::delete_surrounding signal. Note that <i class="parameter"><tt>offset</tt></i> and <i class="parameter"><tt>n_chars</tt></i>
are in characters not in bytes which differs from the usage other
places in <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>.
</p><p>
In order to use this function, you should first call
<a href="GtkIMContext.html#gtk-im-context-get-surrounding"><tt class="function">gtk_im_context_get_surrounding()</tt></a> to get the current context, and
call this function immediately afterwards to make sure that you
know what you are deleting. You should also account for the fact
that even if the signal was handled, the input context might not
have deleted all the characters that were requested to be deleted.
</p><p>
This function is used by an input method that wants to make
subsitutions in the existing text in response to new input. It is
not useful for applications.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>context</tt></i> :</span></td><td> a <a href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>offset</tt></i> :</span></td><td> offset from cursor position in chars;
   a negative value means start before the cursor.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>n_chars</tt></i> :</span></td><td> number of characters to delete.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> <tt class="literal">TRUE</tt> if the signal was handled.
</td></tr></tbody></table></div></div></div><div class="refsect1" lang="en"><a name="id3653473"></a><h2>Signals</h2><div class="refsect2" lang="en"><a name="id3653479"></a><h3><a name="GtkIMContext-commit"></a>The "commit" signal</h3><pre class="programlisting">void        user_function                  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> *arg1,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);</pre><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>imcontext</tt></i> :</span></td><td>the object which received the signal.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>arg1</tt></i> :</span></td><td>

</td></tr><tr><td><span class="term"><i class="parameter"><tt>user_data</tt></i> :</span></td><td>user data set when the signal handler was connected.</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3653572"></a><h3><a name="GtkIMContext-delete-surrounding"></a>The "delete-surrounding" signal</h3><pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    user_function                  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> arg1,
                                            <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a> arg2,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);</pre><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>imcontext</tt></i> :</span></td><td>the object which received the signal.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>arg1</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>arg2</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>user_data</tt></i> :</span></td><td>user data set when the signal handler was connected.</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td>

</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3653698"></a><h3><a name="GtkIMContext-preedit-changed"></a>The "preedit-changed" signal</h3><pre class="programlisting">void        user_function                  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);</pre><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>imcontext</tt></i> :</span></td><td>the object which received the signal.

</td></tr><tr><td><span class="term"><i class="parameter"><tt>user_data</tt></i> :</span></td><td>user data set when the signal handler was connected.</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3653771"></a><h3><a name="GtkIMContext-preedit-end"></a>The "preedit-end" signal</h3><pre class="programlisting">void        user_function                  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);</pre><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>imcontext</tt></i> :</span></td><td>the object which received the signal.

</td></tr><tr><td><span class="term"><i class="parameter"><tt>user_data</tt></i> :</span></td><td>user data set when the signal handler was connected.</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3653845"></a><h3><a name="GtkIMContext-preedit-start"></a>The "preedit-start" signal</h3><pre class="programlisting">void        user_function                  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);</pre><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>imcontext</tt></i> :</span></td><td>the object which received the signal.

</td></tr><tr><td><span class="term"><i class="parameter"><tt>user_data</tt></i> :</span></td><td>user data set when the signal handler was connected.</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id3653918"></a><h3><a name="GtkIMContext-retrieve-surrounding"></a>The "retrieve-surrounding" signal</h3><pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>    user_function                  (<a href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *imcontext,
                                            <a
href="../glib/glib-Basic-Types.html#gpointer"
>gpointer</a> user_data);</pre><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>imcontext</tt></i> :</span></td><td>the object which received the signal.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>user_data</tt></i> :</span></td><td>user data set when the signal handler was connected.</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td>

</td></tr></tbody></table></div></div></div></div><table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0"><tr valign="middle"><td align="left"><a accesskey="p" href="GtkWidget.html"><b>&lt;&lt; GtkWidget</b></a></td><td align="right"><a accesskey="n" href="PlugSocket.html"><b>Cross-process Embedding &gt;&gt;</b></a></td></tr></table></body></html>
