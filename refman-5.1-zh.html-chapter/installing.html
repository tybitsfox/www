<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 2. Installing MySQL</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="prev" href="introduction.html" title="Chapter 1. General Information"><link rel="next" href="tutorial.html" title="Chapter 3. Tutorial">
<style>
<!--
 li.MsoNormal
	{mso-style-parent:"";
	margin-bottom:.0001pt;
	font-size:12.0pt;
	
	; margin-left:0cm; margin-right:0cm; margin-top:0cm}
span.quote
	{}
 table.MsoNormalTable
	{mso-style-parent:"";
	font-size:10.0pt;
	
	}
span.guibutton
	{}
span.guiicon
	{}
span.guimenu
	{}
span.guisubmenu
	{}
span.guimenuitem
	{}
span.guilabel
	{}
span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
-->
</style>
</head><body><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="installing"></a>
	第2章：安装MySQL</h2></div></div></div><div class="toc"><p><b>
	目录</b></p><dl><dt><span class="section">
			<a href="#general-installation-issues">
			2.1. 一般安装问题</a></span></dt><dd><dl><dt><span class="section">
				<a href="#which-os">
				2.1.1. MySQL支持的操作系统</a></span></dt><dt><span class="section">
				<a href="#which-version">
				2.1.2. 选择要安装的MySQL分发版</a></span></dt><dt><span class="section">
				<a href="#getting-mysql">
				2.1.3. 怎样获得MySQL</a></span></dt><dt><span class="section">
				<a href="#verifying-package-integrity">
				2.1.4. 通过MD5校验和或GnuPG验证软件包的完整性<code class="literal"></code></a></span></dt><dt><span class="section">
				<a href="#installation-layouts">
				2.1.5. 安装布局</a></span></dt></dl></dd><dt><span class="section">
			<a href="#quick-standard-installation">
			2.2. 使用二进制分发版的标准MySQL安装</a></span></dt><dt><span class="section">
			<a href="#windows-installation">2.3. 
			在Windows上安装MySQL</a></span></dt><dd><dl><dt><span class="section">
				<a href="#windows-system-requirements">
				2.3.1. Windows系统要求</a></span></dt><dt><span class="section">
				<a href="#windows-choosing-package">
				2.3.2. 选择安装软件包</a></span></dt><dt><span class="section">
				<a href="#windows-using-installer">2.3.3. 
				用自动安装器安装MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-install-wizard">
				2.3.4. 使用MySQL安装向导</a></span></dt><dt><span class="section">
				<a href="#windows-config-wizard">
				2.3.5. 使用配置向导</a></span></dt><dt><span class="section">
				<a href="#windows-install-archive">2.3.6. 
				通过非安装Zip文件安装MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-extract-archive">
				2.3.7. 提取安装档案文件</a></span></dt><dt><span class="section">
				<a href="#windows-create-option-file">
				2.3.8. 创建选项文件</a></span></dt><dt><span class="section">
				<a href="#windows-select-server">
				2.3.9. 选择MySQL服务器类型</a></span></dt><dt><span class="section">
				<a href="#windows-server-first-start">
				2.3.10. 首次启动服务器</a></span></dt><dt><span class="section">
				<a href="#windows-start-command-line">
				2.3.11. 从Windows命令行启动MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-start-service">
				2.3.12. 以Windows服务方式启动MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-testing">
				2.3.13. 测试MySQL安装</a></span></dt><dt><span class="section">
				<a href="#windows-troubleshooting">
				2.3.14. 在Windows环境下对MySQL安装的故障诊断与排除</a></span></dt><dt><span class="section">
				<a href="#windows-upgrading">
				2.3.15. 在Windows下升级MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-vs-unix">
				2.3.16. Windows版MySQL同Unix版MySQL对比</a></span></dt></dl></dd><dt><span class="section">
			<a href="#linux-rpm">2.4. 
			在Linux下安装MySQL</a></span></dt><dt><span class="section">
			<a href="#mac-os-x-installation">2.5.在Mac 
			OS X中安装MySQL</a></span></dt><dt><span class="section">
			<a href="#netware-installation">2.6. 
			在NetWare中安装MySQL</a></span></dt><dt><span class="section">
			<a href="#installing-binary">2.7. 
			在其它类Unix系统中安装MySQL</a></span></dt><dt><span class="section">
			<a href="#installing-source">
			2.8. 使用源码分发版安装MySQL</a></span></dt><dd><dl><dt><span class="section">
				<a href="#quick-install">
				2.8.1. 源码安装概述</a></span></dt><dt><span class="section">
				<a href="#configure-options">
				2.8.2. 典型配置选项<span><strong class="command"></strong></span></a></span></dt><dt><span class="section">
				<a href="#installing-source-tree">
				2.8.3. 从开发源码树安装</a></span></dt><dt><span class="section">
				<a href="#compilation-problems">
				2.8.4. 处理MySQL编译问题</a></span></dt><dt><span class="section">
				<a href="#mit-pthreads">
				2.8.5. MIT-pthreads注意事项</a></span></dt><dt><span class="section">
				<a href="#windows-source-build">2.8.6. 
				在Windows下从源码安装MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-client-compiling">
				2.8.7. 在Windows下编译MySQL客户端</a></span></dt></dl></dd><dt><span class="section">
			<a href="#post-installation">
			2.9. 安装后的设置和测试</a></span></dt><dd><dl><dt><span class="section">
				<a href="#windows-post-installation">
				2.9.1. Windows下安装后的过程</a></span></dt><dt><span class="section">
				<a href="#unix-post-installation">
				2.9.2. Unix下安装后的过程</a></span></dt><dt><span class="section">
				<a href="#default-privileges">
				2.9.3. 使初始MySQL账户安全</a></span></dt></dl></dd><dt><span class="section">
			<a href="#upgrade">
			2.10. 升级MySQL</a></span></dt><dd><dl><dt><span class="section">
				<a href="#upgrading-from-5-0">
				2.10.1. 从5.0版升级</a></span></dt><dt><span class="section">
				<a href="#upgrading-grant-tables">
				2.10.2. 升级授权表</a></span></dt><dt><span class="section">
				<a href="#upgrading-to-arch">
				2.10.3. 将MySQL数据库拷贝到另一台机器</a></span></dt></dl></dd><dt><span class="section">
			<a href="#downgrading">
			2.11. 降级MySQL</a></span></dt><dt><span class="section">
			<a href="#operating-system-specific-notes">
			2.12. 具体操作系统相关的注意事项</a></span></dt><dd><dl><dt><span class="section">
				<a href="#linux">
				2.12.1. Linux注意事项</a></span></dt><dt><span class="section">
				<a href="#mac-os-x">
				2.12.2. Mac OS X注意事项</a></span></dt><dt><span class="section">
				<a href="#solaris">
				2.12.3. Solaris注意事项</a></span></dt><dt><span class="section">
				<a href="#bsd-notes">
				2.12.4. BSD注意事项</a></span></dt><dt><span class="section">
				<a href="#other-unix-notes">
				2.12.5. 其它Unix注意事项</a></span></dt><dt><span class="section">
				<a href="#os-2">
				2.12.6. OS/2注意事项</a></span></dt></dl></dd><dt><span class="section">
			<a href="#perl-support">
			2.13. Perl安装注意事项</a></span></dt><dd><dl><dt><span class="section">
				<a href="#perl-installation">
				2.13.1. 在Unix中安装Perl</a></span></dt><dt><span class="section">
				<a href="#activestate-perl">
				2.13.2. 在Windows下安装ActiveState Perl</a></span></dt><dt><span class="section">
				<a href="#perl-support-problems">
				2.13.3. 使用Perl DBI/DBD接口的问题<code class="literal"></code></a></span></dt></dl></dd></dl></div><a class="indexterm" name="id2702364"></a>
	<p>本章描述怎样获得并安装<strong><span>MySQL</span></strong>：</p>
	<p><span>1.<span>&nbsp;&nbsp;&nbsp;
	</span></span><b>要了解支持哪些平台</b>。请注意并非所有支持的平台同等适合运行<span>MySQL</span>。在部分平台上会比其它平台更有效、稳定。详情请参见<a href="#which-os" title="2.1.1. Operating Systems Supported by MySQL">2.1.1节，“MySQL支持的操作系统”</a> 。</p>
	<p><span>2.<span>&nbsp;&nbsp;&nbsp;
	</span></span><b>确定你应该使用的分发的版本</b>。可获得<strong><span style="font-family:
宋体;">MySQL</span></strong>的多个版本，大部分有多种分发版。你可以选择包含二进制（预编译）代码或源码形式的预打包分发。如果不能确定，则使用二进制分发版。对于想看我们的最新开发并帮助我们测试新代码的用户，我们提供了公共访问接口，可以访问我们最新的源码树。为了确定你应该使用的分发的版本和类型，请参见<a href="#which-version" title="2.1.2. Choosing Which MySQL Distribution to Install">2.1.2节，“选择要安装的MySQL分发版”</a>。</p>
	<p><span>3.<span>&nbsp;&nbsp;&nbsp;
	</span></span><strong><span>下载想安装的分发版</span><span>。</span></strong>对于能从其获得<strong><span>MySQL</span></strong>的站点列表，请参见<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3节，“怎样获得MySQL”</a>。用来验证分发版完整性的指令参见<a href="#verifying-package-integrity" title="2.1.4. Verifying Package Integrity Using MD5 Checksums or GnuPG">2.1.4节，“通过MD5校验和或GnuPG验证软件包的完整性<code class="literal"></code>”</a>。</p>
	<p><span>4.<span>&nbsp;&nbsp;&nbsp;
	</span></span><strong><span>安装分发版</span><span>。</span></strong>针对二进制代码和源码分发版的安装说明在<a href="#quick-standard-installation" title="2.2. Standard MySQL Installation Using a Binary Distribution">2.2节，“使用二进制分发版的标准MySQL安装”</a>中讲述。针对二进制代码和源码分发版的安装说明在<a href="#installing-source" title="2.8. MySQL Installation Using a Source Distribution">2.8节，“使用源码分发版安装MySQL”</a>中讲述。</p>
	<p><strong><span>注</span></strong>释：如果你想要将当前版本的<span>MySQL</span>升级到最新版本，而不是首次安装<span>MySQL</span>，关于升级过程和升级前应考虑的问题请参见<a href="#upgrade" title="2.10. Upgrading MySQL">2.10节，“升级MySQL”</a>。</p>
	<p>如果遇到安装问题，<a href="#operating-system-specific-notes" title="2.12. Operating System-Specific Notes">2.12节，“具体操作系统相关的注意事项”</a>中提供了解决平台相关问题的信息。</p>
	<p><span>5.<span>&nbsp;&nbsp;&nbsp;
	</span></span><strong><span>进行安装后的设置。</span></strong>安装<span>MySQL</span>后，请阅读<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9节，“安装后的设置和测试”</a>。本节介绍了重要的信息，可以确保<span>MySQL</span>服务器正确工作。本节还描述了如何使尚未有密码的初始<span>MySQL</span>用户账户的安全。不管你是用二进制代码还是源码分发版来安装<strong><span>MySQL</span></strong>，这些过程均适用。</p>
	<span>如果要运行<span>MySQL</span>基准脚本，必须使用支持<span>MySQL</span>的<span>Perl</span>。请参见</span><a href="#perl-support" title="2.13. Perl Installation Notes">2.13节，“Perl安装注意事项”</a>。<div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="general-installation-issues"></a>
		2.1.&nbsp;一般安装问题</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#which-os">
			2.1.1. MySQL支持的操作系统</a></span></dt><dt><span class="section">
			<a href="#which-version">
			2.1.2. 选择要安装的MySQL分发版</a></span></dt><dt><span class="section">
			<a href="#getting-mysql">
			2.1.3. 怎样获得MySQL</a></span></dt><dt><span class="section">
			<a href="#verifying-package-integrity">
			2.1.4. 通过MD5校验和或GnuPG验证软件包的完整性<code class="literal"></code></a></span></dt><dt><span class="section">
			<a href="#installation-layouts">
			2.1.5. 安装布局</a></span></dt></dl></div>
		<p>在安装<span>MySQL</span>前，你应该：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>确定是否<span>MySQL</span>将运行在你的平台上。</p>
		<p><span>2.<span>&nbsp;&nbsp;&nbsp;
		</span></span>选择安装的分发版。</p>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>下载分发版并验证其完整性。</p>
		<p>本节包含执行上述步骤必需的信息。之后，你可以按照本章中后面几节的说明来安装选择的分发版。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="which-os"></a>
			2.1.1.&nbsp;MySQL支持的操作系统</h3></div></div></div><a class="indexterm" name="id2702625"></a><a class="indexterm" name="id2702635"></a><a class="indexterm" name="id2702642"></a><a class="indexterm" name="id2702649"></a><a class="indexterm" name="id2702656"></a>
			<p>本节列出了可以运行<span>MySQL</span>的操作系统。</p>
			<p>我们使用<span>GNU Autoconf</span>，因此将<strong><span style="font-family:
宋体;">MySQL</span></strong>移植到所有使用<span>Posix</span>线程和<span>C++</span>编译器的现代系统是可能的。<span>(</span>要求服务器支持线程。如果只是编译客户端代码，则只需要<span>C++</span>编译器<span>)</span>。我们主要在<span>Linux(SuSE</span>和<span>Red 
			Hat)</span>、<span>FreeBSD</span>和<span>Sun 
			Solaris(</span>版本<span>8</span>和<span>9)</span>上使用并开发本软件。</p>
			<p>已经报告<strong><span>MySQL</span><span>可以</span></strong>在下列操作系统<span>/</span>线程包的组合上成功地进行编译。注意，对于很多操作系统，原生的线程仅支持最新的版本。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生线程的<span>AIX 4.x</span>和<span>5.x</span>。请参见<a href="#ibm-aix" title="2.12.5.3. IBM-AIX notes">2.12.5.3节，“IBM-AIX注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Amiga</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>包括<span>MIT-pthreads</span>包的<span>BSDI 
			2.x</span>。请参见<a href="#bsdi" title="2.12.4.4. BSD/OS Version 2.x Notes">2.12.4.4节，“BSD/OS 2.x版注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生线程的<span>BSDI3.0,3.1</span>和<span>4.x</span>。请参见<a href="#bsdi" title="2.12.4.4. BSD/OS Version 2.x Notes">2.12.4.4节，“BSD/OS 2.x版注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生线程的<span>Digital Unix 4.x</span>。请参见<a href="#alpha-dec-unix" title="2.12.5.5. Alpha-DEC-UNIX Notes (Tru64)">2.12.5.5节，“Alpha-DEC-UNIX(Tru64)版注意事项”</a>.。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>包括<span>MIT-pthreads</span>包的<span>FreeBSD 
			2.x</span>。请参见<a href="#freebsd" title="2.12.4.1. FreeBSD Notes">2.12.4.1节，“FreeBSD注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生线程的<span>FreeBSD 3.x</span>和<span>4.x</span>。请参见<a href="#freebsd" title="2.12.4.1. FreeBSD Notes">2.12.4.1节，“FreeBSD注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有<span>LinuxThreads</span>的<span>FreeBSD 
			4.x</span>。请参见<a href="#freebsd" title="2.12.4.1. FreeBSD Notes">2.12.4.1节，“FreeBSD注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有<span>DCE</span>线程或<span>MIT-pthreads</span>包的<span>HP-UX 
			10.20</span>。请参见<a href="#hp-ux-10-20" title="2.12.5.1. HP-UX Version 10.20 Notes">2.12.5.1节，“HP-UX 10.20版注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生线程的<span>HP-UX 11.x</span>。请参见<a href="#hp-ux-11-x" title="2.12.5.2. HP-UX Version 11.x Notes">2.12.5.2节，“HP-UX 11.x版注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有<span>LinuxThreads 0.7.1+</span>或<span>glibc</span><span> 
			2.0.7+</span>，适合各种<span>CPU</span>的<span>Linux 
			2.0+</span>。请参见<a href="#linux" title="2.12.1. Linux Notes">2.12.1节，“Linux注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Mac OS X</span>。请参见<a href="#mac-os-x" title="2.12.2. Mac OS X Notes">2.12.2节，“Mac OS X注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>NetBSD 1.3/1.4 Intel</span>和<span>NetBSD 
			1.3 Alpha(</span>需要<span>GNU make)</span>。请参见<a href="#netbsd" title="2.12.4.2. NetBSD Notes">2.12.4.2节，“NetBSD注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Novell NetWare 6.0</span>。请参见<a href="#netware-installation" title="2.6. Installing MySQL on NetWare">2.6节，“在NetWare中安装MySQL”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生线程的<span>OpenBSD &gt; 2.5</span>。包括<span>MIT-pthreads</span>包的<span>OpenBSD 
			&lt; 2.5</span>。请参见<a href="#openbsd" title="2.12.4.3. OpenBSD 2.5 Notes">2.12.4.3节，“OpenBSD 2.5版注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>OS/2 Warp 3, FixPack 29</span>和<span>OS/2 
			Warp 4, FixPack 4. </span>参见<a href="#os-2" title="2.12.6. OS/2 Notes">2.12.6节，“OS/2注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有最新<span>FSU Pthreads</span>移植包的<span>SCO 
			OpenServer 5.0.X</span>。请参见<a href="#sco" title="2.12.5.8. SCO UNIX and OpenServer 5.0.x Notes">2.12.5.8节，“SCO UNIX和OpenServer 5.0.x版注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>SCO UnixWare 7.1.x</span>。请参见<a href="#sco-unixware" title="2.12.5.9. SCO UnixWare 7.1.x and OpenUNIX 8.0.0 Notes">2.12.5.9节，“SCO UnixWare 7.1.x和OpenUNIX 8.0.0版注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>SCO Openserver 6.0.x</span>。请参见<a href="#sco-openserver" title="2.12.5.10. SCO OpenServer 6.0.x Notes">2.12.5.10节，“SCO OpenServer 6.0.x版注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生线程的<span>SGI Irix 6.x</span>。请参见<a href="#sgi-irix" title="2.12.5.7. SGI Irix Notes">2.12.5.7节，“SGI Irix注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>SPARC</span>和<span>x86</span>上有原生线程的<span>Solaris 
			2.5</span>和以上版本。请参见<a href="#solaris" title="2.12.3. Solaris Notes">2.12.3节，“Solaris注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>包括<span>MIT-pthreads</span>包的<span>SunOS 
			4.x</span>。请参见<a href="#solaris" title="2.12.3. Solaris Notes">2.12.3节，“Solaris注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Tru64 Unix</span>。请参见<a href="#alpha-dec-unix" title="2.12.5.5. Alpha-DEC-UNIX Notes (Tru64)">2.12.5.5节，“Alpha-DEC-UNIX(Tru64)版注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Windows 9x</span>、<span>Me</span>、<span>NT</span>、<span>2000</span>、<span>XP</span>和<span>2003</span>。请参见<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3节，“在Windows上安装MySQL”</a>。</p>
			<p>并非所有支持的平台同等适合运行<span>MySQL</span>。根据以下因素确定某个平台适合高负荷关键任务<span>MySQL</span>服务器的程度：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>线程库的稳定性。可能某个平台的反应不错，但<span>MySQL</span>的稳定性取决于它所调用的线程库，不管其它部分是否完善。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>内核和线程库利用均衡多处理器<span>(SMP)</span>系统的能力。换句话说，当进程创建一个线程时，应允许线程运行原进程所运行<span>CPU</span>之外的其它处理器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>内核和线程库运行在短范围频繁获取和释放互斥体而不需要过多地交换内容的多个线程的能力。如果执行<span>pthread_mutex_lock()</span>时产生的<span>CPU</span>时间太短，则会严重影响<span>MySQL</span>。如果不关注该问题，增加过多的<span>CPU</span>实际会降低<span>MySQL</span>的速度。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>常规文件系统的稳定性和性能。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果数据库表很大，文件系统处理大文件的能力和处理效率。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>我们在该平台上使用<span>MySQL AB</span>的经验水平。如果我们熟悉一个平台，我们可以对具体平台进行优化并固定编译时间。我们还可以提供建议如何更好地为<span>MySQL</span>配置系统。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>我们在类似配置下所完成的内部测试的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在同一平台类似配置下成功运行<span>MySQL</span>的用户数。如果该数字很高，则说明遇到具体平台问题的几率要小得多。</p>
			<p>根据前面的标准，允许<span>MySQL</span>的最好的平台是<span>x86,</span>安装<span>SuSE 
			Linux</span>，使用<span>2.4</span>或<span>2.6</span>内核，和<span>ReiserFS(</span>或类似<span>Linux</span>分发版<span>)</span>和安装了<span> 
			Solaris(2.7-9)</span>的<span>SPARC</span>。<span>FreeBSD</span>排第三位，但我们真正希望一旦线程库得到改进，它也可以提高排名。从某一观点我们还希望提高其它<span>MySQL</span>目前正在上面编译、允许的平台的排名，但稳定性和性能上可以要求不同等级。这需要我们与<span>MySQL</span>所依赖的操作系统和库组件开发人员共同努力。如果你对改进某个组件感兴趣，可能影响其开发，需要更多的关于<span>MySQL</span>如何能运行得更好的说明，请向我们的<span>MySQL
			</span>
			<span>internals</span>发送邮件。请参见<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1节，“The MySQL邮件列表”</a>。</p>
			<p>请注意前面的对比并不是说一个操作系统总体上比另一个操作系统要好。我们只是讨论选择一个<span>OS</span>来专门运行<span>MySQL</span>。记住了这一点，如果考虑更多的因素，对比结果可能会不同。在某些情况下，一个<span>OS</span>比另一个<span>OS</span>好的原因只是我们已经为具体平台做出了更多的努力来进行测试和优化。我们只是陈述我们的观点帮助你选择运行<span>MySQL</span>的平台。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="which-version"></a>
			2.1.2.&nbsp;选择要安装的MySQL分发版</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#choosing-version">
				2.1.2.1. 选择要安装的MySQL版本</a></span></dt><dt><span class="section">
				<a href="#choosing-distribution-format">
				2.1.2.2. 选择分发格式</a></span></dt><dt><span class="section">
				<a href="#many-versions">
				2.1.2.3. 如何发布更新以及何时发布更新</a></span></dt><dt><span class="section">
				<a href="#release-philosophy">
				2.1.2.4. 发布原则：发行版本中没有已知的缺陷</a></span></dt><dt><span class="section">
				<a href="#mysql-binaries">
				2.1.2.5. MySQL AB编译的MySQL二进制版本</a></span></dt></dl></div><a class="indexterm" name="id2703181"></a><a class="indexterm" name="id2703188"></a><a class="indexterm" name="id2703194"></a><a class="indexterm" name="id2703201"></a><a class="indexterm" name="id2703211"></a><div class="section"><div class="titlepage"><div><div>
				准备安装<span>MySQL</span>时，你应确定使用哪个版本。<span>MySQL</span>的开发有几个发布系列，可以选择最适合你要求的一个版本。确定了安装的版本后，便可以选择分发版。有二进制或源码发布格式。<h4 class="title"><a name="choosing-version"></a>
				2.1.2.1.&nbsp;选择要安装的MySQL版本</h4></div></div></div>
				<p>首先要作出决策，你是否想要使用最新的开发版本或最终的稳定版本。在<span>MySQL</span>开发过程中，同时存在多个发布系列，每个发布处在成熟度的不同阶段：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL 5.2</span>是最新开发的发布系列，是将执行新功能的系列。不久的将来可以使用<span>Alpha</span>发行，以便感兴趣的用户进行广泛的测试。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL 5.1</span>是当前稳定<span>(</span>产品质量<span>)</span>发布系列。只针对漏洞修复重新发布；没有增加会影响稳定性的新功能。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL 5.0</span>是前一稳定<span>(</span>产品质量<span>)</span>发布系列。只针对严重漏洞修复和安全修复重新发布；没有增加会影响该系列的重要功能。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL 4.0</span>和<span>3.23</span>是旧的稳定<span>(</span>产品质量<span>)</span>发布系列。该版本不再使用，新的发布只用来修复特别严重的漏洞（以前的安全问题）。</p>
				<p>
				我们不认为有完全的冻结版，因为任何版本均需要对漏洞进行修复和其它修复。对于“某种程度的冻结”，我们是指我们可以在产品发布中增加一些不会影响当前工作的小东西。自然，前一系列的相关漏洞修复会移植到后面的系列。</p>
				<p>通常<span>, </span>如果你是第一次开始使用<strong><span>MySQL</span></strong>或想要将它移植到一些还没有二进制分发版的系统上，我们推荐使用最终的稳定版本。目前是<span>MySQL 
				5.1</span>。我们已经使用<span>MySQL</span>基准对所有<span>MySQL</span>发布进行了检查，包括来自开发系列的发布，在发布前还使用基准套件来测试它。</p>
				<p>
				如果你正在运行一个老的系统并且想要升级，但是又不想冒险进行非无缝升级，应该升级到最新版本中你正使用的相同的发布系列（只有版本号的最后部分比你使用的新）。我们已经试着仅修复致命缺陷，对那个版本进行了很小的相对安全的改动。</p>
				<p>如果你想要使用产品发布系列中所没有的新功能，你可以使用开发系列的版本。请注意开发发布不如产品发布稳定。</p>
				<p>如果你想要使用包含所有最新补丁和漏洞修复的最新源码，可以使用我们的<span>BitKeeper</span>库。这些库还没有发布，但可以预览代码，将来的发布基于这些代码。</p>
				<p><strong>
				<span>
				MySQL</span></strong>的命名机制使用由<span>3</span>个数字和一个后缀组成的版本号。例如，像<strong><span>mysql-5.0.9-beta</span></strong>的版本号这样解释：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>第<span>1</span>个数字<span>(</span><strong><span>5</span></strong><span>)</span>是主版本号，描述了文件格式。所有版本<span>5</span>的发行都有相同的文件格式。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>第<span>2</span>个数字<span>(</span><strong><span>0</span></strong><span>)</span>是发行级别。主版本号和发行级别组合到一起便构成了发行序列号。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>第<span>3</span>个数字<span>(</span><strong><span>9</span></strong><span>)</span>是在此发行系列的版本号，随每个新分发版递增。通常你需要已经选择的发行<span>(release)</span>的最新版本<span>(</span>版本<span>)</span>。</p>
				<p>
				每次更新后，版本字符串的最后一个数字递增。如果相对于前一个版本增加了新功能或有微小的不兼容性，字符串的第二个数字递增。如果文件格式改变，第一个数字递增。</p>
				<p>后缀显示发行的稳定性级别。通过一系列后缀显示如何改进稳定性。可能的后缀有：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>
				alpha</span></strong>表明发行包含大量未被彻底测试的新代码。已知的缺陷应该在新闻小节被记录。请参见<a href="news.html">附录D：</a><a href="news.html" title="Appendix D. MySQL Change History"><i>MySQL变更史</i></a>。在大多数<span>alpha</span>版本中也有新的命令和扩展。<span>alpha</span>版本也可能有主要代码更改等开发。但我们在发布前一定对其进行测试。</p>
				<p>
				<span>
				·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>
				beta</span></strong>意味着该版本功能是完整的，并且所有的新代码被测试了，没有增加重要的新特征，应该没有已知的缺陷。当<span>alpha</span>版本至少一个月没有出现报导的致命漏洞，并且没有计划增加导致已经实施的功能不稳定的新功能时，版本则从<span>alpha</span>版变为<strong><span >beta</span></strong>版。</p>
				<p>在以后的<strong><span >beta</span></strong>版、发布版或产品发布中，所有<span>API</span>、外部可视结构和<span>SQL</span>命令列均不再更改。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>rc</span></strong>是<span>发布代表；</span>是一个发行了一段时间的<span>beta</span>版本，看起来应该运行正常。只增加了很小的修复。<span>(</span><span>发布代表即以前所称的</span><span>gamma
				</span>版<span>) </span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				如果没有后缀，这意味着该版本已经在很多地方运行一段时间了，而且没有非平台特定的缺陷报告。只增加了关键漏洞修复修复。这就是我们称为一个产品（稳定）或“通用”版本的东西。</p>
				<p><strong>
				<span>
				MySQL</span></strong>的命名机制于其它产品稍有不同。一般情况，我们可以很放心地使用已经投放市场两周而没有被相同发布系列的新版本所代替的版本。</p>
				<p><strong>
				<span>
				MySQL</span></strong>所有版本都经过我们的标准测试和基准测试运行，以保证它们可相当安全地使用。因为标准测试不断扩充以检测以前发现的缺陷，测试套件一直在改进之中。</p>
				<p>所有版本都至少已经用下列套件进行了测试：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>一个内部测试套件</p>
				<p>
				<span>mysql-test</span>目录包含一整套测试案例。我们针对每个二进制服务器进行这些测试。关于该测试套件的详细信息参见<a href="extending-mysql.html#mysql-test-suite" title="27.1.2. MySQL Test Suite">27.1.2节，“MySQL测试套件”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL</span>基准套件</p>
				<p>
				它运行一定范围的普通查询。它也是一个测试，检测最新的优化处理是否真的使代码更快。请参见<a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">7.1.4节，“MySQL基准套件”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>crash-me</span>测试</p>
				<p>这尝试决定数据库支持什么功能和它的能力与限制是什么。请参见<a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">7.1.4节，“MySQL基准套件”</a>。</p>
				<p>另一个测试是在内部生产环境中使用最新<strong><span>MySQL</span></strong>版本，至少在一台机器上。我们有超过<span>100GB</span>的数据可供使用。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="choosing-distribution-format"></a>
				2.1.2.2.&nbsp;选择分发格式</h4></div></div></div>
				<p>选择了<span>MySQL</span>的安装版本后，要做的第二项决策是你是使用源码分发版还是二进制分发版。大多数情况，如果你的平台上已经有了一个二进制分发版，你可能使用二进制分发版。大多数平台可以使用原格式二进制分发版，例如<span>Linux</span>使用<span>RPM</span>文件，<span>Mac 
				OS X</span>使用<span>DMG</span>安装软件包。也可以使用<span>Zip</span>文件或压缩<strong><span>tar</span></strong>文件。</p>
				<p>选择二进制分发版的理由：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>二进制分发版比源码分发版更容易安装。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>为了满足不同用户的需求，我们提供了两种不同的二进制版本：一个是编译过的带非事务储存引擎<span>(</span>小的快速库<span>)</span>，另一个配置了最重要的扩展选项，例如事务安全表。两个版本均从相同的源码分发版编译而来。所有本地<span>MySQL</span>客户端均可以连接任一版本的<span>MySQL</span>服务器。</p>
				<p>扩展<span>MySQL</span>库分发版标有<span>-max</span>后缀，配置了与<strong><span>mysqld-max</span></strong>相同的选项。请参见<a href="database-administration.html#mysqld-max" title="5.1.2. The mysqld-max Extended MySQL Server">5.1.2节，“mysq<span><strong class="command">ld-max扩展My</strong></span>SQL服务器”</a>。</p>
				<p>如果想要使用<span>MySQL-Max</span><span> 
				RPM</span>，必须首先安装标准<span>MySQL-server</span><span> 
				RPM</span>。</p>
				<p>在某些环境下，最好安装源码分发版<span>MySQL</span>：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>你想要在某个明显的位置安装<span>MySQL</span>。标准二进制分发版可以安装到任何地方，但你想更加灵活地将<span>MySQL</span>组件放到某个地方。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>你想要将<strong><span>mysqld</span></strong>配置一些标准二进制分发版中未包括的一些特殊特征。下面是一些你想要使用的最常用的选项：</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--with-innodb</span><span>(</span>在所有<span>MySQL 
				5.1</span>库版本中默认使用<span>)</span></p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--with-berkeley-db</span><span>(</span>只适合部分平台<span>)</span></p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--with-libwrap</span></p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				<span>--with-</span><span>名<span>d-z-libs</span></span></span><span>(</span>适合部分二进制<span>)</span></p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--with-debug[=full]</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>你想要将<strong><span>mysqld</span></strong>配置一些标准二进制分发版中已经包括的一些特殊特征。例如，一般编译过的分发版支持所有字符集。如果你想要一个更小的<span>MySQL</span>服务器，可以重新编译只支持你需要的字符集。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>你有一个专用编译器<span>(</span>例如<span>pgcc</span><span>)</span>或想要使用更好地优化适用你的处理器的编译器选项。二进制分发版编译的选项适合同一处理器族的各种处理器。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>你想要使用<span>BitKeeper</span>库中的最新源码，以访问所有最新漏洞修复。例如，如果你发现了漏洞并将它报告给<span>MySQL</span>开发小组，漏洞修复传递给源码库，你便可以访问它。发布实际发行后才会出现漏洞修复。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你想要阅读<span>(</span>或修改<span>)</span>构成<strong><span>MySQL</span></strong>的<span>C</span>和<span>C++</span>代码，你应该拿到源码分发版。源码总是最终的手册。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>源码分发版也比二进制的分发版包含更多的测试和实例。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="many-versions"></a>
				2.1.2.3.&nbsp;如何发布更新以及何时发布更新</h4></div></div></div><a class="indexterm" name="id2703931"></a><a class="indexterm" name="id2703941"></a>
				<p><strong>
				<span>
				MySQL</span></strong>进展的相当快，我们想要与其它<strong><span>MySQL</span></strong>用户分享它。当我们有一个看来其它人似乎需要的非常有用的功能时，我们就试着制作一个发行版本。</p>
				<p>
				我们也尝试帮助那些需要很容易实现的功能的用户，我们也关注我们授权的用户想要什么，我们更特别关注我们支持的客户想要什么，并且尽力帮助他们。</p>
				<p>没有人一定要下载一个新版本，新闻小节中将告诉你新版本是否有一些你确实想要的东西。请参见<a href="news.html" title="Appendix D. MySQL Change History">附录D：<i>MySQL变更史</i></a>。</p>
				<p>当更新<strong><span>MySQL</span></strong>时，我们使用下列策略：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>将发布每个系列。每次发布时，版本的最后一个数字为同一系列前一版本的基础上加<span>1</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>稳定的测试过的产品版本每年准备出现<span>1-2</span>次，但是如果发现小缺陷，只有缺陷修复的一个版本将被发行。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>工作版本<span>/</span>对旧版本的漏洞修复文件每<span>4-8</span>周出现一次。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>对一些平台的二进制分发版，主要版本由我们制作。其它人可以为其它系统制作二进制分发版，但是可能不多见。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我们一旦识别并修正了非紧急但烦人的缺陷，则立即将其发布，可以从公共<span>BitKeeper</span>库中立即得到修复代码，并将包含到下一发布版中。</p>
				<ul type="disc">
					<li>
					在任何情况下，如果在一个发行中有一个致命缺陷，我们将尽快制作一个新版本来修复。（我们希望其它公司也这样做！<span>)
					</span></li>
				</ul>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="release-philosophy"></a>
				2.1.2.4.&nbsp;发布原则：发行版本中没有已知的缺陷</h4></div></div></div>
				<p>我们投入了大量的时间和工作来使我们的发布没有缺陷。我们从来没有发布过含有<em><span>已知</span></em>致命重复性缺陷的单一<span>MySQL</span>版本。<span>(</span>“<span class="quote">致命</span>”缺陷指能在正常应用中导致<span>MySQL</span>瘫痪的缺陷，对于正常查询产生错误答案，或有安全问题）<span>。
				</span></p>
				<p>我们已经将所有公开问题、缺陷和由设计决策决定的事宜记入文件。请参见<a href="problems.html#bugs" title="A.8. Known Issues in MySQL">A.8节，“MySQL中的已知事宜”</a>。</p>
				<p>我们的目标是修复一切可以修复的东西，而不会使稳定的<span>MySQL</span>版本变得不稳定。在某些情况，这意味着我们可以在开发版本中修复问题，而不是在稳定的<span> 
				(</span>产品<span>) </span>版本。自然，我们会将这些问题记入文档，以便用户能知道。</p>
				<p>下面描述了我们如何操作：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我们通过我们的客户支持列表、在<span><a target="_top"  href="http://bugs.mysql.com/">http://bugs.mysql.com/</a>
				</span>缺陷数据库和<span>MySQL</span>外部邮件列表来监控缺陷。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>当前版本中所有被报导的缺陷被输入缺陷数据库。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>当我们修复缺陷，我们总是为其设计一次测试案例，并将其包括进测试系统中，以确保不会漏检使缺陷再现。<span>(</span>所有修复的缺陷中大约<span>90%</span>的具有测试案例）<span>。
				</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>为添加到<span>MySQL</span>中的所有新功能创建测试案例。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我们开始构建新的<span>MySQL</span>发布前，我们确保修复了<span>MySQL</span>版本<span>(3.23.x</span>、<span>4.0.x</span>、<span>4.1.x</span>、<span>5.0.x</span>等等<span>)</span>中所有被报导的重复性缺陷。如果某些内容不能修复<span>(</span>由于<span>MySQL</span>内部的一些设计决策<span>)</span>，我们在本手册中记录下来。请参见<a href="problems.html#bugs" title="A.8. Known Issues in MySQL">A.8节，“MySQL中的已知事宜”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我们在所有支持二进制的平台<span>(15+</span>平台<span>)</span>上构建并运行我们的测试套件和基准套件。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				如果在某个平台上测试或基准套件失败，我们不会公布二进制。如果问题是由于源码中的普通缺陷，我们将进行修复并在所有系统上构建并测试。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>构建和测试过程需要<span>2-3</span>天。如果在该过程中我们收到致命缺陷相关报告<span>(</span>例如，会<span>造成内核转储<span>)</span></span>，我们将修复该问题并重新启动构建过程。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span><a target="_top"  href="http://dev.mysql.com/">http<span>：</span>//dev.mysql.com/</a></span>上公布二进制后，我们则向<span>mysql</span>发出公告消并<span>announce</span>邮件列表。请参见<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1节，“The 
				MySQL邮件列表”</a>。公告消息包含所有发布的更改列表和已知问题。只有部分发版不需要<strong><span>已知的问题</span></strong>部分。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>为了让我们的用户快速访问最新<span>MySQL</span>功能，我们每<span>4-8</span>周产生一个新的<span>MySQL</span>发布。每天构建源码快照，可以从<span><a target="_top"  href="http://downloads.mysql.com/snapshots.php">http://downloads.mysql.com/snapshots.php</a></span>获得。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				如果，尽管经过我们最大的努力，我们在发布后仍收到缺陷报告，即在某个具体平台上出现严重问题，我们将立即进行修复，并为该平台构建一个新的 
				<span>&#39;a&#39;</span>版本。由于我们的大用户群，可以很快地查出并解决此类问题。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我们为保证稳定版本所做的跟踪记录不错。在最近<span>150</span>个发布中，我们只需要对其中不到<span>10</span>个重新构建。其中有<span>3</span>个案例，缺陷为我们的构建机器上的<span>glibc</span><span>
				</span>库，花了很长时间来跟踪。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-binaries"></a>
				2.1.2.5.&nbsp;MySQL AB编译的MySQL二进制版本</h4></div></div></div><a class="indexterm" name="id2704293"></a>
				<p>作为<span>MySQL AB</span>的服务，我们提供了一套二进制<span>MySQL</span>分发版，已经在我们的站点上所列的系统或支持<span>MySQL</span>、友好地为我们提供访问的机器上的系统上编译过。</p>
				<p>除了具体平台安装软件包格式提供的二进制分发版，我们还以压缩<strong><span>tar</span></strong>文件<span>(</span><span>.tar.gz</span>文件<span>)</span>为多种平台提供了二进制分发版。请参见<a href="#quick-standard-installation" title="2.2. Standard MySQL Installation Using a Binary Distribution">2.2节，“使用二进制分发版的标准MySQL安装”</a>。</p>
				<p>对于<span>Windows</span>分发版，参见<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3节，“在Windows上安装MySQL”</a>。</p>
				<p>使用脚本 
				<span>Build-tools/Do-compile</span>生成这些分发版，可以编译源码并使用<strong><span>scripts/make_binary_distribution</span></strong>创建二进制<span>tar.gz</span>文件。</p>
				<p>通过下面的编译器和选项来配置并构建二进制分发版。可以查看各个库二进制<strong><span>tar</span></strong>文件分发版的脚本<strong><span>bin/mysqlbug</span></strong>内的变量<span>COMP_ENV_INFO</span>和 
				<span>CONFIGURE_LINE</span>来查看这些信息。</p>
				<div class="itemizedlist"><ul type="disc"><li>在<span>MySQL 
					AB</span>开发系统上构建下面的二进制：<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx x86</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3</span>：</p>
					<p>
					<span>CFLAGS=&quot;-O2 -mcpu=pentiumpro&quot; 
					CXX=gcc CXXFLAGS=&quot;-O2 -mcpu=pentiumpro -felide-constructors&quot; 
					./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --disable-shared --with-client-ldflags=-all-static 
					--with-mysqld-ldflags=-all-static</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.x x86</span>中的<strong><span>icc</span></strong><span>(Intel 
					C++ Compiler 8.1</span>或更高版本<span>)</span>：</p>
					<p>
					<span>CC=icc CXX=icpc 
					CFLAGS=&quot;-O3 -unroll2 -ip -mp -no-gcc -restrict&quot; CXXFLAGS=&quot;-O3 
					-unroll2 -ip -mp -no-gcc -restrict&quot; ./configure --prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --enable-assembler --disable-shared 
					--with-client-ldflags=-all-static --with-mysqld-ldflags=-all-static 
					--with-embedded-server --with-innodb</span></p>
					<p>请注意<span>Intel
					</span>编译器<span>8.1</span>版和更高版有不同的“纯”<span>C(</span><span>icc</span><span>)</span>驱动程序和<span>C++(</span><span>icpc</span><span>)</span>驱动程序；如果你使用<strong><span>icc
					</span></strong><span>8.0</span>版本或较早的版本来构建<span>MySQL</span>，需要设置<span>CXX=icc</span>。</p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx Intel Itanium 2</span>中的<strong><span>ecc</span></strong><span> 
					(Intel C++ Itanium Compiler 7.0)</span>：</p>
					<p>
					<span>CC=ecc CFLAGS=&quot;-O2 
					-tpp2 -ip -nolib_inline&quot; CXX=ecc CXXFLAGS=&quot;-O2 -tpp2 -ip -nolib_inline&quot; 
					./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx Intel Itanium</span>中的<strong><span>ecc</span></strong><span>(Intel 
					C++ Itanium Compiler 7.0)</span>：</p>
					<p>
					<span>CC=ecc CFLAGS=-tpp1 
					CXX=ecc CXXFLAGS=-tpp1 ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx alpha</span>中的<span>ccc</span><span>(Compaq 
					C V6.2-505 / Compaq C++ V6.3-006)</span>：</p>
					<p>
					<span>CC=ccc CFLAGS=&quot;-fast 
					-arch generic&quot; CXX=cxx CXXFLAGS=&quot;-fast -arch generic -noexceptions 
					-nortti&quot; ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile --with-mysqld-ldflags=-non_shared 
					--with-client-ldflags=-non_shared --disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.x.xx ppc</span>中的<strong><span>gcc</span></strong><span> 
					2.95.4</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer 
					-felide-constructors -fno-exceptions -fno-rtti&quot; ./configure 
					--prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared --with-embedded-server --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx s390</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3</span>：</p>
					<p>
					<span>CFLAGS=&quot;-O2&quot; 
					CXX=gcc CXXFLAGS=&quot;-O2 -felide-constructors&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared --with-client-ldflags=-all-static 
					--with-mysqld-ldflags=-all-static</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx x86_64(AMD64)</span>中的<strong><span>gcc</span></strong><span> 
					3.2.1</span>：</p>
					<p>
					<span>CXX=gcc 
					./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 8 x86</span>中的<strong><span>gcc</span></strong><span> 
					3.2.3</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared --with-inno</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 8 SPARC</span>中的<strong><span>gcc</span></strong><span> 
					3.2</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --enable-assembler 
					--with-named-z-libs=no --with-named-curses-libs=-lcurses 
					--disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 8 SPARC 64-bit</span>中的<strong><span>gcc</span></strong><span> 
					3.2</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-m64 -fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -m64 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--with-named-curses-libs=-lcurses --disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 9 SPARC</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer 
					-felide-constructors -fno-exceptions -fno-rtti&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --with-named-curses-libs=-lcurses 
					--disable-shared</span><span> </span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 9 SPARC</span>中的<span>cc-5.0</span><span>(Sun 
					Forte 5.0)</span>：</p>
					<p>
					<span>CC=cc-5.0 CXX=CC 
					ASFLAGS=&quot;-xarch=v9&quot; CFLAGS=&quot;-Xa -xstrconst -mt -D_FORTEC_ -xarch=v9&quot; 
					CXXFLAGS=&quot;-noex -mt -D_FORTEC_ -xarch=v9&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --with-named-z-libs=no 
					--enable-thread-safe-client --disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>IBM AIX 4.3.2 ppc</span>中的<strong><span>gcc</span></strong><span> 
					3.2.3</span>：</p>
					<p>
					<span>CFLAGS=&quot;-O2 
					-mcpu=powerpc -Wa,-many &quot; CXX=gcc CXXFLAGS=&quot;-O2 
					-mcpu=powerpc -Wa,-many -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>IBM AIX 4.3.3 ppc</span>中的<span>xlC_r</span><span>(IBM 
					Visual Age C/C++ 6.0)</span>：</p>
					<p>
					<span>CC=xlc_r 
					CFLAGS=&quot;-ma -O2 -qstrict -qoptimize=2 -qmaxmem=8192&quot; 
					CXX=xlC_r CXXFLAGS =&quot;-ma -O2 -qstrict -qoptimize=2 
					-qmaxmem=8192&quot; ./configure --prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--disable-shared --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>IBM AIX 5.1.0 ppc</span>中的<strong><span>gcc</span></strong><span> 
					3.3</span>：</p>
					<p>
					<span>CFLAGS=&quot;-O2 
					-mcpu=powerpc -Wa,-many&quot; CXX=gcc CXXFLAGS=&quot;-O2 -mcpu=powerpc 
					-Wa,-many -felide-constructors -fno-exceptions -fno-rtti&quot; 
					./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>IBM AIX 5.2.0 ppc</span>中的<span>xlC_r</span><span>(IBM 
					Visual Age C/C++ 6.0)</span>： </p>
					<p>
					<span>CC=xlc_r CFLAGS=&quot;-ma 
					-O2 -qstrict -qoptimize=2 -qmaxmem=8192&quot; CXX=xlC_r CXXFLAGS=&quot;-ma 
					-O2 -qstrict -qoptimize=2 -qmaxmem=8192&quot; ./configure 
					--prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--with-named-z-libs=no --disable-shared 
					--with-embedded-server --with-innodb</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 10.20 pa-risc1.1</span>中的<strong><span>gcc</span></strong><span> 
					3.1</span>：</p>
					<p>
					<span>CFLAGS=&quot;-DHPUX 
					-I/opt/dce/include -O3 -fPIC&quot; CXX=gcc CXXFLAGS=&quot;-DHPUX 
					-I/opt/dce /include -felide-constructors -fno-exceptions -fno-rtti 
					-O3 -fPIC&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-pthread --with-named-thread-libs=-ldce 
					--with-lib-ccflags=-fPIC --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 11.00 pa-risc</span>中的<span>aCC</span><span>(HP 
					ANSI C++ B3910B A.03.50)</span>：</p>
					<p>
					<span>CC=cc CXX=aCC 
					CFLAGS=+DAportable CXXFLAGS=+DAportable ./configure 
					--prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared 
					--with-embedded-server --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 11.11 pa-risc2.0 64bit</span>中的<span>aCC</span><span>(HP 
					ANSI C++ B3910B A.03.33)</span>： </p>
					<p>
					<span>CC=cc CXX=aCC 
					CFLAGS=+DD64 CXXFLAGS=+DD64 ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 11.11 pa-risc2.0 32bit</span>中的<span>aCC</span><span>(HP 
					ANSI C++ B3910B A.03.33)</span>： </p>
					<p>
					<span>CC=cc CXX=aCC 
					CFLAGS=&quot;+DAportable&quot; CXXFLAGS=&quot;+DAportable&quot; ./configure 
					--prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 11.22 ia64 64bit</span>中的<span>aCC</span><span>(HP 
					aC++/ANSI C B3910B A.05.50)</span>：</p>
					<p>
					<span>CC=cc CXX=aCC 
					CFLAGS=&quot;+DD64 +DSitanium2&quot; CXXFLAGS=&quot;+DD64 +DSitanium2&quot; 
					./configure --prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared 
					--with-embedded-server --with-innodb</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Apple Mac OS X 10.2 powerpc</span>中的<strong><span>gcc</span></strong><span> 
					3.1</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>FreeBSD 4.7 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.95.4</span>：</p>
					<p>
					<span>
					CFLAGS=-DHAVE_BROKEN_REALPATH ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --with-named-z-libs=not-used 
					--disable-shared</span><span> </span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>使用<span>LinuxThreads</span>的<span>FreeBSD 
					4.7 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.95.4</span>：</p>
					<p>
					<span>CFLAGS=&quot;-DHAVE_BROKEN_REALPATH 
					-D__USE_UNIX98 -D_REENTRANT -D_THREAD_SAFE -I/usr/local/include/pthread/linuxthreads&quot; 
					CXXFLAGS=&quot;-DHAVE_BROKEN_REALPATH -D__USE_UNIX98 -D_REENTRANT 
					-D_THREAD_SAFE -I/usr/local/include/pthread/linuxthreads&quot; 
					./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --with-named-thread-libs=&quot;-DHAVE_GLIBC2_STYLE_GETHOSTBYNAME_R 
					-D_THREAD_SAFE -I /usr/local/include/pthread/linuxthreads 
					-L/usr/local/lib -llthread -llgcc_r&quot; --disable-shared 
					--with-embedded-server --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>QNX Neutrino 6.2.1 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3qnx-nto 20010315</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer 
					-felide-constructors -fno-exceptions -fno-rtti&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared</span></p>
					<p>下面的二进制是在由其它用户提供给<span>MySQL AB</span>的第三方系统上构建而成。这是免费赠送；<span>MySQL 
					AB</span>没有完全控制这些系统，因此我们只能对在这些系统上构建的二进制提供有限的支持。</p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>
					<span>
					&nbsp; </span><span>SCO Unix 3.2v5.0.7 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3: </span></p>
					<p>
					<span>CFLAGS=&quot;-O3 
					-mpentium&quot; LDFLAGS=-static CXX=gcc CXXFLAGS=&quot;-O3 -mpentium 
					-felide-constructors&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--enable-thread-safe-client --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>SCO UnixWare 7.1.4 i386</span>中的<strong><span>CC</span></strong><span> 
					3.2: </span></p>
					<p>
					<span>CC=cc CFLAGS=&quot;-O&quot; 
					CXX=CC ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--enable-thread-safe-client --disable-shared --with-readline</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>CO OpenServer 6.0.0 i386</span>中的<strong><span>CC</span></strong><span> 
					3.2: </span></p>
					<p>
					<span>CC=cc CFLAGS=&quot;-O&quot; 
					CXX=CC ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--with-named-z-libs=no --enable-thread-safe-client 
					--disable-shared --with-readline</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Compaq Tru64 OSF/1 V5.1 732 
					alpha</span>中的<span>cc/cxx</span><span>(Compaq 
					C V6.3-029i / DIGITAL C++ V6.1-027): </span></p>
					<p>
					<span>CC=&quot;cc -pthread&quot; 
					CFLAGS=&quot;-O4 -ansi_alias -ansi_args -fast -inline speed 
					-speculate all&quot; CXX=&quot;cxx -pthread&quot; CXXFLAGS=&quot;-O4 -ansi_alias 
					-fast -inline speed -speculate all -noexceptions -nortti&quot; 
					./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--with-named-thread-libs=&quot;-lpthread -lmach -lexc -lc&quot; 
					--disable-shared --with-mysqld-ldflags=-all-static</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>
					<span>
					&nbsp;&nbsp; </span><span>SGI Irix 6.5 IP32</span>中的<strong><span>gcc</span></strong><span> 
					3.0.1: </span></p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXXFLAGS=&quot;-O3 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>FreeBSD/sparc64 5.0</span>中的<strong><span>gcc</span></strong><span> 
					3.2.1: </span></p>
					<p>
					<span>
					CFLAGS=-DHAVE_BROKEN_REALPATH ./configure 
					--prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared --with-innodb</span><span>
					</span></p>
					<p>在<span>MySQL AB</span>过去提供的二进制软件包中应用了下面的编译选项。这些二进制不再进行更新，但是在这里列出了这些编译选项供参考。</p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>
					<span>
					&nbsp;</span><span>Linux 2.2.xx SPARC</span>中的<strong><span>egcs</span></strong><span> 
					1.1.2: </span></p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer 
					-felide-constructors -fno-exceptions -fno-rtti&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.2.x x686</span>中的<strong><span>gcc</span></strong><span> 
					2.95.2: </span></p>
					<p>
					<span>CFLAGS=&quot;-O3 -mpentiumpro&quot; 
					CXX=gcc CXXFLAGS=&quot;-O3 -mpentiumpro -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--enable-assembler --with-mysqld-ldflags=-all-static 
					--disable-shared --with-extra-charsets=complex</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>SunOS 4.1.4 2 sun4c</span>中的<strong><span>gcc</span></strong><span> 
					2.7.2.1: </span></p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=&quot;-O3 -felide-constructors&quot; ./configure --prefix=/usr/local/mysql 
					--disable-shared --with-extra-charsets=complex 
					--enable-assembler</span><span> </span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>SunOS 5.5.1(</span>及以上版本<span>)sun4u</span>中的<strong><span  style="font-family:
宋体">egcs</span></strong><span> 1.0.3a</span>或<span>2.90.27</span>或<strong><span>gcc</span></strong><span> 
					2.95.2</span>和更新版<span>: </span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>
					<span>CC=gcc CFLAGS=&quot;-O3&quot; 
					CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors -fno-exceptions -fno-rtti&quot; 
					./configure --prefix=/usr/local/mysql --with-low-memory 
					--with-extra-charsets=complex --enable-assembler</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>SunOS 5.6 i86pc</span>中的<strong><span>gcc</span></strong><span> 
					2.8.1: </span></p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql 
					--with-low-memory --with-extra-charsets=complex</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>BSDI BSD/OS 3.1 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.7.2.1: </span></p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=-O ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>BSDI BSD/OS 2.1 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.7.2: </span></p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>AIX 4.2</span>中的<strong><span>gcc</span></strong><span> 
					2.7.2.2</span>：</p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex</span></p>
					<p>如果你有更好的上述配置选项，可以向<span>MySQL </span>
					<span>internals</span>邮件列表发送邮件。请参见<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1节，“The MySQL邮件列表”</a>。</p>
					<p>在我们的站点中列出的<span>MySQL 5.1</span>发布的<span>RPM</span>分发版是由<span>MySQL 
					AB</span>产生的。</p>
					<p>如果你想要编译<span>MySQL</span>调试版本，应当在前面的<strong><span>configure</span></strong>命令中加上<span>--with-debug</span>或<span>--with-debug=full</span>，并去掉<span>-fomit-frame-pointer</span>选项。</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="getting-mysql"></a>
			2.1.3.&nbsp;怎样获得MySQL</h3></div></div></div><a class="indexterm" name="id2705455"></a><a class="indexterm" name="id2705461"></a><a class="indexterm" name="id2705468"></a><a class="indexterm" name="id2705478"></a><a class="indexterm" name="id2705485"></a><a class="indexterm" name="id2705492"></a></div><div class="section"><div class="titlepage"><div><div>
			检查<span>MySQL</span>下载页<span>(<a target="_top"  href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/<span>
			</span></a>)</span>获取当前版本和下载指令信息。关于<span>MySQL</span>下载镜像站点的完整的最新列表，参见<span><a target="_top"  href="http://dev.mysql.com/downloads/mirrors.html"><span>
			<u><span style="color:blue">
			http://dev.mysql.com/downloads/mirrors.html</span></u></span></a></span>。你可以在此发现<span>MySQL</span>镜像站点和如何报告有问题的或过时的镜像站点的信息。<p>
			我们的主镜像站点位于<span><a target="_top"  href="http://mirrors.sunsite.dk/mysql/">http://mirrors.sunsite.dk/mysql/</a></span>。</p>
			<h3 class="title"><a name="verifying-package-integrity"></a>
			2.1.4.&nbsp;通过MD5校验和或GnuPG验证软件包的完整性<code class="literal"></code></h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#verifying-md5-checksum">
				2.1.4.1. 验证MD5校验和</a></span></dt><dt><span class="section">
				<a href="#checking-gpg-signature">
				2.1.4.2. 通过GnuPG进行签名检查<code class="literal"></code></a></span></dt><dt><span class="section">
				<a href="#checking-rpm-signature">
				2.1.4.3. 使用RPM进行签名检查<code class="literal"></code></a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
				下载了适合你的需求的<span>MySQL</span>安装软件包并在安装前，你应当确保它的完整性，没有被篡改。<span>MySQL 
				AB</span>提供了<span>3</span>种完整性检查方法：<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MD5</span>校验和</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>使用<span>GnuPG</span>、<span>GNU 
				Privacy Guard</span>对签名进行加密</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>对于<span>RPM</span>软件包，使用内嵌式<span>RPM</span>完整性验证机制</p>
				<p>下面的章节描述了如何使用这些方法。</p>
				<p>如果你注意到<span>MD5</span>校验和与<span>GPG</span>签名不匹配，首先应尝试多次下载相关安装软件包，可以从其它镜像站点。如果你反复尝试仍不能成功验证安装软件包的完整性，请将此类问题通知给我们，包括完整的安装软件包名和你使用的下载站点，在<span>&lt;<a  href="mailto:webmaster@mysql.com">webmaster@mysql.com</a>&gt;</span>或<span>&lt;<a  href="mailto:build@mysql.com">build@mysql.com</a>&gt;</span>。不要使用缺陷<span>-</span>报告机制来报告下载问题。</p>
				<h4 class="title"><a name="verifying-md5-checksum"></a>
				2.1.4.1.&nbsp;验证MD5校验和</h4></div></div></div>
				<p>下载<span>MySQL</span>安装软件包后，你应当确保它的<span>MD5</span>校验和与提供的<span>MySQL</span>下载页上的相匹配。每个安装软件包有唯一的校验和，可以用下面的命令来验证，其中<span>package_name</span>是你下载的安装软件包的名称：</p>
				<pre><span>shell&gt; </span><span><b><span>md5sum package_name</span></b></span></pre>
				<p>示例：</p>
				<pre><span>&nbsp; shell&gt; md5sum mysql-st</span>和<span>ard-5.1.2-alpha-linux-i686.tar.gz</span></pre>
				<pre><span>&nbsp; aaab65abbec64d5e907dcd41b8699945&nbsp; mysql-st</span>和<span>ard-5.1.2-alpha-linux-i686.tar.gz</span></pre>
				<p>你应当验证结果校验和<span>(</span>十六进制数字字符串<span>)</span>与下载页上相关安装软件包下面显示的校验和相匹配。</p>
				<p><strong><span>注释：</span></strong>一定要验证<strong><span>归档文件</span></strong><span>(</span>例如，<span>.zip</span>或<span>.tar.gz</span>文件<span>)</span>的校验和，而不是其中包括的文件。</p>
				<p>请注意并非所有操作系统支持<strong><span>md5sum</span></strong>命令。在一些操作系统上，只是称为<strong><span>md5</span><span>，</span></strong>另一些根本不装载它。在<span>Linux</span>中，它是<strong><span>GNU 
				Text Utilities</span></strong>安装软件包的一部分，适合各种平台。可以从<span><a target="_top"  href="http://www.gnu.org/software/textutils/">http<span>：</span>//www.gnu.org/software/textutils/</a></span>下载源码。如果你已经安装了<span>OpenSSL</span>，还可以使用命令<strong><span>openssl 
				md5 package_name</span></strong>。<span><a target="_top"  href="http://www.fourmilab.ch/md5/">http<span>：</span>//www.fourmilab.ch/md5/</a></span>提供了<span>DOS/Windows</span>使用的<strong><span>md5</span></strong>命令行实用工具。<strong><span>winMd5Sum</span></strong>是一个图形<span>MD5</span>检查工具，可以从<span><a target="_top"  href="http://www.nullriver.com/index/products/winmd5sum">http<span>：</span>//www.nullriver.com/index/products/winmd5sum</a></span>获得。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="checking-gpg-signature"></a>
				2.1.4.2.&nbsp;通过GnuPG进行签名检查<code class="literal"></code></h4></div></div></div>
				<p>验证安装软件包完整性和真实性的另一个方法是使用加密签名。这比使用<span>MD5</span>校验和更可靠，但是需要更多的工作。</p>
				<p><span>MySQL AB</span>用<strong><span>GnuPG</span></strong><span>(GNU 
				Privacy Guard)</span>对下载<span>MySQ</span>软件包进行签名。<strong><span>GnuPG</span></strong>是开放源码，不同于<span>Phil 
				Zimmermann</span>的闻名的<span>Pretty Good Privacy (<strong><span>PGP</span></strong>)</span>。关于<strong><span>GnuPG</span></strong>和如何获得并安装到你的系统的详细信息，请参见<span><a target="_top"  href="http://www.gnupg.org/">http<span>：</span>//www.gnupg.org/</a></span>。大多数<span>Linux</span>分发版装有默认安装的<strong><span>GnuPG</span></strong>。关于<strong><span>GnuPG</span></strong>的详细信息，参见 
				<span>
				<a target="_top"  href="http://www.openpgp.org/">
				http<span>：</span>//www.openpgp.org/</a></span>。</p>
				<p>要想验证具体安装软件包的签名，你首先需要获得<span>MySQL AB</span>公共<span>GPG</span>构建密钥的拷贝。可以从<span><a target="_top"  href="http://www.keyserver.net/">http<span>：</span>//www.keyserver.net/</a></span>下载密钥。你想要获得的密钥名为<span>build@mysql.com</span>。另外，可以从下面的文本直接剪切并粘贴密钥：</p>
				<pre><span>Key ID:</span></pre>
				<pre><span>pub&nbsp; 1024D/5072E1F5 2003-02-03</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp; MySQL Package signing key (www.mysql.com) &lt;build@mysql.com&gt;</span></pre>
				<pre><span>Fingerprint: A4A9 4068 76FC BD3C 4567&nbsp; 70C8 8C71 8D3B 5072 E1F5</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>Public Key (ASCII-armored):</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>-----BEGIN PGP PUBLIC KEY BLOCK-----</span></pre>
				<pre><span>Version: GnuPG v1.0.6 (GNU/Linux)</span></pre>
				<pre><span>Comment: For info see http://www.gnupg.org</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>mQGiBD4+owwRBAC14GIfUfCyEDSIePvEW3SAFUdJBtoQHH/nJKZyQT7h9bPlUWC3</span></pre>
				<pre><span>RODjQReyCITRrdwyrKUGku2FmeVGwn2u2WmDMNABLnpprWPkBdCk96+OmSLN9brZ</span></pre>
				<pre><span>fw2vOUgCmYv2hW0hyDHuvYlQA/BThQoADgj8AW6/0Lo7V1W9/8VuHP0gQwCgvzV3</span></pre>
				<pre><span>BqOxRznNCRCRxAuAuVztHRcEAJooQK1+iSiunZMYD1WufeXfshc57S/+yeJkegNW</span></pre>
				<pre><span>hxwR9pRWVArNYJdDRT+rf2RUe3vpquKNQU/hnEIUHJRQqYHo8gTxvxXNQc7fJYLV</span></pre>
				<pre><span>K2HtkrPbP72vwsEKMYhhr0eKCbtLGfls9krjJ6sBgACyP/Vb7hiPwxh6rDZ7ITnE</span></pre>
				<pre><span>kYpXBACmWpP8NJTkamEnPCia2ZoOHODANwpUkP43I7jsDmgtobZX9qnrAXw+uNDI</span></pre>
				<pre><span>QJEXM6FSbi0LLtZciNlYsafwAPEOMDKpMqAK6IyisNtPvaLd8lH0bPAnWqcyefep</span></pre>
				<pre><span>rv0sxxqUEMcM3o7wwgfN83POkDasDbs3pjwPhxvhz6//62zQJ7Q7TXlTUUwgUGFj</span></pre>
				<pre><span>a2FnZSBzaWduaW5nIGtleSAod3d3Lm15c3FsLmNvbSkgPGJ1aWxkQG15c3FsLmNv</span></pre>
				<pre><span>bT6IXQQTEQIAHQUCPj6jDAUJCWYBgAULBwoDBAMVAwIDFgIBAheAAAoJEIxxjTtQ</span></pre>
				<pre><span>cuH1cY4AnilUwTXn8MatQOiG0a/bPxrvK/gCAJ4oinSNZRYTnblChwFaazt7PF3q</span></pre>
				<pre><span>zIhMBBMRAgAMBQI+PqPRBYMJZgC7AAoJEElQ4SqycpHyJOEAn1mxHijft00bKXvu</span></pre>
				<pre><span>cSo/pECUmppiAJ41M9MRVj5VcdH/KN/KjRtW6tHFPYhMBBMRAgAMBQI+QoIDBYMJ</span></pre>
				<pre><span>YiKJAAoJELb1zU3GuiQ/lpEAoIhpp6BozKI8p6eaabzF5MlJH58pAKCu/ROofK8J</span></pre>
				<pre><span>Eg2aLos+5zEYrB/LsrkCDQQ+PqMdEAgA7+GJfxbMdY4wslPnjH9rF4N2qfWsEN/l</span></pre>
				<pre><span>xaZoJYc3a6M02WCnHl6ahT2/tBK2w1QI4YFteR47gCvtgb6O1JHffOo2HfLmRDRi</span></pre>
				<pre><span>Rjd1DTCHqeyX7CHhcghj/dNRlW2Z0l5QFEcmV9U0Vhp3aFfWC4Ujfs3LU+hkAWzE</span></pre>
				<pre><span>7zaD5cH9J7yv/6xuZVw411x0h4UqsTcWMu0iM1BzELqX1DY7LwoPEb/O9Rkbf4fm</span></pre>
				<pre><span>Le11EzIaCa4PqARXQZc4dhSinMt6K3X4BrRsKTfozBu74F47D8Ilbf5vSYHbuE5p</span></pre>
				<pre><span>/1oIDznkg/p8kW+3FxuWrycciqFTcNz215yyX39LXFnlLzKUb/F5GwADBQf+Lwqq</span></pre>
				<pre><span>a8CGrRfsOAJxim63CHfty5mUc5rUSnTslGYEIOCR1BeQauyPZbPDsDD9MZ1ZaSaf</span></pre>
				<pre><span>anFvwFG6Llx9xkU7tzq+vKLoWkm4u5xf3vn55VjnSd1aQ9eQnUcXiL4cnBGoTbOW</span></pre>
				<pre><span>I39EcyzgslzBdC++MPjcQTcA7p6JUVsP6oAB3FQWg54tuUo0Ec8bsM8b3Ev42Lmu</span></pre>
				<pre><span>QT5NdKHGwHsXTPtl0klk4bQk4OajHsiy1BMahpT27jWjJlMiJc+IWJ0mghkKHt92</span></pre>
				<pre><span>6s/ymfdf5HkdQ1cyvsz5tryVI3Fx78XeSYfQvuuwqp2H139pXGEkg0n6KdUOetdZ</span></pre>
				<pre><span>Whe70YGNPw1yjWJT1IhMBBgRAgAMBQI+PqMdBQkJZgGAAAoJEIxxjTtQcuH17p4A</span></pre>
				<pre><span>n3r1QpVC9yhnW2cSAjq+kr72GX0eAJ4295kl6NxYEuFApmr1+0uUq/SlsQ==</span></pre>
				<pre><span>=YJkx</span></pre>
				<pre><span>-----END PGP PUBLIC KEY BLOCK-----</span></pre>
				<p><span>你可以使用<strong><span>gpg 
				--import</span></strong>将构建密钥导入你的个人公共<span>GPG</span>钥匙圈</span><span>（</span><span>keyring</span>）<span>。例如，如果你把密钥保存到</span><span>mysql_pubkey.asc</span><span>文件中，导入命令应为：</span></p>
				<pre><span>shell&gt; </span><span><b><span>gpg --import mysql_pubkey.asc</span></b></span></pre>
				<p>关于公共密钥如何工作的详细信息，请参阅<span>GPG</span>文档。</p>
				<p>下载并导入公共构建密钥后，下载期望的<span>MySQL</span>安装软件包和相应的签名，也可以从下载页上获得。签名文件名与分发版文件相同，有<span> 
				an </span>
				<span>.asc</span>扩展名。例如：</p>
				<table border="1" cellpadding="0" id="table1">
					<tr>
						<td>
						<p>分发文件</td>
						<td>
						<p><span>
						<span>mysql-st</span><span>和<span>ard-5.1.2-alpha-linux-i686.tar.gz</span></span></span></td>
					</tr>
					<tr>
						<td>
						<p>签名文件</td>
						<td>
						<p><span>
						<span>mysql-st</span><span>和<span>ard-5.1.2-alpha-linux-i686.tar.gz.asc</span></span></span></td>
					</tr>
				</table>
				<p>确保两个文件保存在同一目录下，运行下面的命令来验证分发文件的签名：</p>
				<pre><span>shell&gt; </span><span><b><span>gpg --verify package_name.asc</span></b></span></pre>
				<p>示例：</p>
				<pre><span>&nbsp; shell&gt; gpg --verify mysql-standard-5.1.2-alpha-linux-i686.tar.gz.asc</span></pre>
				<pre><span>&nbsp; gpg: Signature made Tue 12 Jul 2005 23:35:41 EST using DSA key ID 5072E1F5</span></pre>
				<pre><span>&nbsp; gpg: Good signature from &quot;MySQL Package signing key (www.mysql.com) &lt;build@mysql.com&gt;&quot;</span></pre>
				<p>
				<span>Good signature</span>消息表示所有内容都很正确。你可以忽略任何<span>insecure 
				memory</span>警告。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="checking-rpm-signature"></a>
				2.1.4.3.&nbsp;使用RPM进行签名检查<code class="literal"></code></h4></div></div></div>
				<p><span>RPM</span>软件包没有单独的签名。<span>RPM</span>软件包内置<span>GPG</span>签名和<span>MD5</span>校验和。可以运行下面的命令来验证安装软件包：</p>
				<pre><span>shell&gt; </span><span><b><span>rpm --checksig package_name.rpm</span></b></span></pre>
				<p>示例：</p>
				<pre><span>shell&gt; </span><span><b><span>rpm --checksig MySQL-server-5.1.2-alpha-0.i386.rpm</span></b></span></pre>
				<pre><span>MySQL-server-5.1.2-alpha-0.i386.rpm</span>：<span> md5 gpg OK</span></pre>
				<p><strong><span>注释：</span></strong>如果你正使用<span>RPM 
				4.1</span>，并且出现关于<span>(GPG) 
				NOT OK (MISSING KEYS: GPG#5072e1f5)</span>的抱怨，尽管你已经将<span>MySQL</span>公共构建密钥导入到你自己的<span>GPG</span>钥匙圈，你必须首先将密钥导入到<span>RPM</span>钥匙圈中。<span>RPM 
				4.1</span>不再使用你的个人<span>GPG</span>钥匙圈<span>(</span>或<span>GPG</span>本身<span>)</span>。<span>RPM 
				4.1</span>维护自己的钥匙圈，因为它是系统范围的应用程序，而用户<span>GPG</span>公共钥匙圈是具体的用户文件。要想将<span>MySQL</span>公共密钥导入<span>RPM</span>钥匙圈，要首先获得前面章节描述的密钥。然后使用<strong><span>rpm 
				--import</span></strong>导入密钥。例如，如果你的公共密钥保存在<span>mysql_pubkey.asc</span>文件中，应使用下述命令导入公共密钥：</p>
				<pre><span>shell&gt; </span><span><b><span>rpm --import mysql_pubkey.asc</span></b></span></pre>
				<p>如果你需要获得<span>MySQL</span>公共密钥，参见<a href="#checking-gpg-signature" title="2.1.4.2. Signature Checking Using GnuPG">2.1.4.2节，“通过GnuPG进行签名检查<code class="literal"></code>”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="installation-layouts"></a>
			2.1.5.&nbsp;安装布局</h3></div></div></div><a class="indexterm" name="id2706133"></a><a class="indexterm" name="id2706140"></a><a class="indexterm" name="id2706147"></a><a class="indexterm" name="id2706157"></a></div></div><div class="section"><div class="titlepage"><div><div>
		这节描述安装<span>MySQL AB</span>提供的二进制代码和源码分发时创建的默认目录布局。如果你安装其它供应商提供的分发，应使用其它布局。<p>
		在<span>Windows</span>中，<span>MySQL 5.1</span>的默认安装目录是<span>C:\Program 
		Files\MySQL\MySQL Server 5.1</span>。<span>(</span>一些<span>Windows</span>用户宁愿安装到原来的默认安装目录 
		<span><span>
		C</span><span>：<span>\mysql</span></span></span>。然而，子目录布局仍然相同）<span>。</span>安装目录包括以下子目录：</p>
		<table border="1" cellpadding="0" id="table2">
			<tr>
				<td width="116">
				<p><strong><span>目录</span></strong></td>
				<td width="249">
				<p><strong><span>目录内容</span></strong></td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>bin</span></td>
				<td width="249">
				<p>客户端程序和<strong><span>mysqld</span></strong>服务器</td>
			</tr>
			<tr>
				<td width="116">
				<p><tt >
				<span>data</span></tt></td>
				<td width="249">
				<p>日志文件，数据库</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>Docs</span></td>
				<td width="249">
				<p>文档</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>examples</span></td>
				<td width="249">
				<p>示例程序和脚本</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>include</span></td>
				<td width="249">
				<p>包含<span>(</span>头<span>)</span>文件</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>lib</span></td>
				<td width="249">
				<p>库</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>scripts</span></td>
				<td width="249">
				<p>实用工具脚本</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>share</span></td>
				<td width="249">
				<p>错误消息文件</td>
			</tr>
		</table>
		<p>使用<span>MySQL AB&#39;s Linux RPM</span>分发进行安装后，将在以下系统目录产生文件：</p>
		<table border="1" cellpadding="0" id="table3">
			<tr>
				<td width="224">
				<p><strong><span>目录</span></strong></td>
				<td width="261">
				<p><strong><span>目录内容</span></strong></td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/bin</span></td>
				<td width="261">
				<p>客户端程序和脚本</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/sbin</span></td>
				<td width="261">
				<p><strong>
				<span>mysqld</span></strong>服务器</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/var/lib/mysql</span></td>
				<td width="261">
				<p>日志文件，数据库</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>
				/usr/share/doc/packages</span></td>
				<td width="261">
				<p>文档</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/include/mysql</span></td>
				<td width="261">
				<p>包含<span>(</span>头<span>)</span>文件</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/lib/mysql</span></td>
				<td width="261">
				<p>库</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/share/mysql</span></td>
				<td width="261">
				<p>错误消息和字符集文件</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/share/sql-bench</span></td>
				<td width="261">
				<p>基准程序</td>
			</tr>
		</table>
		<p>在<span>Unix</span>中，可以在你选择的安装位置解压并安装<strong><span>tar</span></strong>文件二进制分发<span>(typically
		</span>
		<span>/usr/local/mysql</span><span>)</span>并在该位置创建以下目录：</p>
		<table border="1" cellpadding="0" id="table4">
			<tr>
				<td width="128">
				<p><strong><span>目录</span></strong></td>
				<td width="285">
				<p><strong><span>目录内容</span></strong></td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>bin</span></td>
				<td width="285">
				<p>客户端程序和<strong><span>mysqld</span></strong>服务器</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>data</span></td>
				<td width="285">
				<p>日志文件，数据库</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>docs</span></td>
				<td width="285">
				<p>文档，<span>ChangeLog</span></td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>include</span></td>
				<td width="285">
				<p>包含<span>(</span>头<span>)</span>文件</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>lib</span></td>
				<td width="285">
				<p>库</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>scripts</span></td>
				<td width="285">
				<p><strong>
				<span>mysql_install_db</span></strong></td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>share/mysql</span></td>
				<td width="285">
				<p>错误消息文件</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>sql-bench</span></td>
				<td width="285">
				<p>基准程序</td>
			</tr>
		</table>
		<p>配置并编译完源码分发后，便开始安装。默认情况下，可以将文件安装到<span>/usr/local</span>，即在下面的子目录中：</p>
		<table border="1" cellpadding="0" id="table5">
			<tr>
				<td width="140">
				<p><strong><span>目录</span></strong></td>
				<td width="213">
				<p><strong><span>目录内容</span></strong></td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>bin</span></td>
				<td width="213">
				<p>客户端程序和脚本</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>include/mysql</span></td>
				<td width="213">
				<p>包含<span>(</span>头<span>)</span>文件</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>info</span></td>
				<td width="213">
				<p><span>Info</span>格式的文档</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>lib/mysql</span></td>
				<td width="213">
				<p>库</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>libexec</span></td>
				<td width="213">
				<p><strong>
				<span>mysqld</span></strong>服务器</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>share/mysql</span></td>
				<td width="213">
				<p>错误消息文件</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>sql-bench</span></td>
				<td width="213">
				<p>基准程序和<span>crash-me</span>测试</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>var</span></td>
				<td width="213">
				<p>数据库和日志文件</td>
			</tr>
		</table>
		<p>在一个安装目录内，源码安装的布局在下列方面不同于二进制安装：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span><b><span>mysqld</span></b></span>服务器被安装在<tt >“<span>libexec</span>”</tt>目录而不是<tt >“<span>bin</span>”</tt>目录内。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>数据目录是<tt >“<span>var</span>”</tt>而非<tt >“<span>data</span>”</tt>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span><b>
		<span>m</span><span>ysql_install_db</span></b></span>被安装在<tt >“<span>bin</span>”</tt>目录而非<tt >“<span>scripts</span>”</tt>内。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>头文件和库目录是<tt >“<span>include/mysql</span>”</tt>和<tt >“<span>lib/mysql</span>”</tt>而非<tt >“<span>include</span>”</tt>和<tt >“<span>lib</span>”</tt>。</p>
		<p>执行源码分发根目录下的<span>scripts/make_binary_distribution</span>脚本，你可以用编译过的源码分发版创建你自己的二进制安装。</p>
		<h2 class="title"><a name="quick-standard-installation"></a>
		2.2.&nbsp;使用二进制分发版的标准MySQL安装</h2></div></div></div>
		<p>后面几章包括如何在安装软件包格式适合的平台上平台安装<span>MySQL</span>。<span>(</span>即执行“<span class="quote">二进制安装</span>”）<span>。</span>也可以在多种平台上安装<span>MySQL</span>二进制分发版。关于适合所有平台的软件包的通用安装指令参见<a href="#installing-binary" title="2.7. Installing MySQL on Other Unix-Like Systems">2.7节，“在其它类Unix系统中安装MySQL”</a>。</p>
		<p>关于二进制分发版的使用和如何获得的详细信息请参见<a href="#general-installation-issues" title="2.1. General Installation Issues">2.1节，“一般安装问题”</a>。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="windows-installation"></a>2.3. 在Windows上安装MySQL</h2></div></div></div><div class="toc"><dl><dt><span class="section">
		<a href="#windows-system-requirements">
		2.3.1. Windows系统要求</a></span></dt><dt><span class="section">
		<a href="#windows-choosing-package">
		2.3.2. 选择安装软件包</a></span></dt><dt><span class="section">
		<a href="#windows-using-installer">2.3.3. 
		用自动安装器安装MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-install-wizard">
		2.3.4. 使用MySQL安装向导</a></span></dt><dt><span class="section">
		<a href="#windows-config-wizard">
		2.3.5. 使用配置向导</a></span></dt><dt><span class="section">
		<a href="#windows-install-archive">2.3.6. 
		通过非安装Zip文件安装MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-extract-archive">
		2.3.7. 提取安装档案文件</a></span></dt><dt><span class="section">
		<a href="#windows-create-option-file">
		2.3.8. 创建选项文件</a></span></dt><dt><span class="section">
		<a href="#windows-select-server">
		2.3.9. 选择MySQL服务器类型</a></span></dt><dt><span class="section">
		<a href="#windows-server-first-start">
		2.3.10. 首次启动服务器</a></span></dt><dt><span class="section">
		<a href="#windows-start-command-line">
		2.3.11. 从Windows命令行启动MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-start-service">
		2.3.12. 以Windows服务方式启动MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-testing">
		2.3.13. 测试MySQL安装</a></span></dt><dt><span class="section">
		<a href="#windows-troubleshooting">
		2.3.14. 在Windows环境下对MySQL安装的故障诊断与排除</a></span></dt><dt><span class="section">
		<a href="#windows-upgrading">
		2.3.15. 在Windows下升级MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-vs-unix">
		2.3.16. Windows版MySQL同Unix版MySQL对比</a></span></dt></dl></div>
		<p><span>MySQL AB</span>已经提供了<span>Windows</span>中安装的<span>MySQL 
		3.21</span>以上版本，并提供了每天下载<span>MySQL</span>的比率。本节描述在<span>Windows</span>中安装<span>MySQL</span>的过程。</p>
		<p>使用<span>Windows</span>版本<span>MySQL</span>安装器，结合<span>GUI</span>配置向导，可以自动安装<span>MySQL</span>，创建选项文件，启动服务器并使默认用户账户安全。</p>
		<p>如果你要升级已有的<span>4.1.5</span>版以前的<span>MySQL,</span>你必须执行以下步骤：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>获得并安装分发版。</p>
		<p><span>2.<span>&nbsp;&nbsp;&nbsp;
		</span></span>根据需要设置选项文件。</p>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>选择想要使用的服务器。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>启动服务器。</p>
		<p><span>5.<span>&nbsp;&nbsp;&nbsp;
		</span></span>为初始<span>MySQL</span>账户指定密码。</p>
		<p>该过程还适合安装软件包内不包括安装器的<span>MySQL</span>安装。</p>
		<p><span>Windows</span>版<span>MySQL 5.1</span>有<span>3</span>种分发格式：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>&nbsp;</span>二进制分发版包含一个设置程序，可以安装你需要的任何内容，因此可以立即启动服务器。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>&nbsp;</span>源码分发版包含所有使用<span>Visual 
		Studio 2003</span>编译器来构建可执行程序的代码和支持文件。</p>
		<p>一般来讲，你应当使用二进制分发版。它比其它的分发版使用起来要简单，不再需要其它工具来启动并运行<span>MySQL</span>。</p>
		<p>本节描述了如何使用二进制分发版在<span>Windows</span>中安装<span>MySQL</span>。要想使用源码分发版安装，参见<a href="#windows-source-build" title="2.8.6. Installing MySQL from Source on Windows">2.8.6节，“在Windows下从源码安装MySQL”</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-system-requirements"></a>
			2.3.1.&nbsp;Windows系统要求</h3></div></div></div>
			<p>要想在<span>Windows</span>中运行<span>MySQL</span>，你需要：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>32</span>位<span>Windows</span>操作系统，例如<span>9x</span>、<span>Me</span>、<span>NT</span>、<span>2000</span>、<span>XP</span>或<span>Windows 
			Server 2003</span>。</p>
			<p>基于<span>Windows NT</span>的操作系统<span>(NT</span>，<span>2000,XP</span>，<span>2003)</span>，将<span>MySQL</span>服务器做为服务来运行。强烈建议使用基于<span>Windows 
			NT</span>的操作系统。请参见<a href="#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12节，“以Windows服务方式启动MySQL”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>TCP/IP</span>协议支持。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Windows</span>版本<span>MySQL</span>二进制分发版，可以从<span><a target="_top"  href="http://dev.mysql.com/downloads/">http<span>：</span>//dev.mysql.com/<span>下载</span>/</a></span>下载。请参见<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3节，“怎样获得MySQL”</a>。</p>
			<p>注释：如果你从<span>FTP</span>下载分发版，我们建议使用充分的<span>FTP</span>客户端以保证续传，避免下载过程中文件被破坏。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以读取 
			<span>.zip</span>文件的工具，以解压分发文件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>硬盘上有足够的空间保证根据你的需求来解包、安装和创建数据库<span>(</span>一般建议至少有<span>200</span>兆字节<span>)</span>。</p>
			<p>你还可以有以下可选需求：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你计划通过<span>ODBC</span>连接<span>MySQL</span>服务器，你还需要一个连接器<span>/ODBC</span>驱动程序。请参见<a href="connectors.html#odbc-connector" title="26.1. MySQL Connector/ODBC">26.1节，“MySQL Connector/ODBC”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果表需要占用的空间大于<span>4GB</span>，则在<span>NTFS</span>或更新的文件系统上安装<span>MySQL</span>。当创建表时不要忘记使用<span>MAX_ROWS</span>和 
			<span>AVG_ROW_LENGTH</span>。请参见<a href="sql-syntax.html#create-table" title="13.1.5. CREATE TABLE Syntax">13.1.5节，“CREATE 
			TABLE语法”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-choosing-package"></a>
			2.3.2.&nbsp;选择安装软件包</h3></div></div></div>
			<p>在<span>Windows</span>中安装<span>MySQL</span>时，有<span>3</span>种<span>MySQL 
			5.1</span>安装软件包可供选择：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>基本安装</span></strong>：该安装软件包的文件名类似于<span>mysql-essential-5.1.2-alpha-win32.msi</span>，包含在<span>Windows</span>中安装<span>MySQL</span>所需要的最少的文件，包括配置向导。该安装软件包不包括可选组件，例如嵌入式服务器和基准套件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>完全安装</span></strong>：该安装软件包的文件名类似于<span>mysql-5.1.2-alpha-win32.zip</span>，包含在<span>Windows</span>中安装<span>MySQL</span>所需要的全部文件，包括配置向导。该安装软件包包括可选组件，例如嵌入式服务器和基准套件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>非自动安装文件</span></strong>：该安装软件包的文件名类似于<span>mysql-noinstall-5.1.2-alpha-win32.zip</span>，包含完整安装包中的全部文件，只是不包括配置向导。该安装软件包不包括自动安装器，必须手动安装和配置。</p>
			<p>对于大多数用户，建议选择基本安装。</p>
			<p>你的选择会影响你后面必须遵从的安装过程。如果你选择基本安装或完全安装，参见<a href="#windows-using-installer" title="2.3.3. Installing MySQL with the Automated Installer">2.3.3节，“用自动安装器安装MySQL”</a>。如果你选择非自动安装<span>MySQL</span>，参见<a href="#windows-install-archive" title="2.3.6. Installing MySQL from a Noinstall Zip Archive">2.3.6节，“通过非安装Zip文件安装MySQL”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-using-installer"></a>2.3.3. 用自动安装器安装MySQL</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
		在<span>Windows</span>中安装<span>MySQL</span>时，新用户可以使用<span>MySQL</span>安装帮助和<span>MySQL 
		Configuration Wizard</span>（配置向导）。<span>MySQL</span>安装和配置的方式是使新用户可以立即开始使用<span>MySQL</span>。<p>
		基本安装和完全安装中均包括<span>MySQL</span>安装帮助和配置向导，建议在大多数标准<span>MySQL</span>安装中选择。例外情况包括想在单个服务器上安装多个实例的用户和想完全控制服务器配置的高级用户。</p>
		<h3 class="title"><a name="windows-install-wizard"></a>
			2.3.4.&nbsp;使用MySQL安装向导</h3></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#mysql-install-wizard-introduction">
				2.3.4.1. 前言</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-starting">
			2.3.4.2. 下载并启动MySQL安装向导</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-install-type">
			2.3.4.3. 选择安装类型</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-custom-install">
			2.3.4.4. 定制安装对话框</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-confirmation-dialog">
			2.3.4.5. 配置对话框</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-changes">
			2.3.4.6. MySQL安装向导所作的更改</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-upgrading">
				2.3.4.7. 升级MySQL</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-introduction"></a>
				2.3.4.1.&nbsp;前言</h4></div></div></div>
			<p><span>MySQL</span>安装帮助是<span>MySQL</span>服务器的安装器，使用最新的<span>Microsoft 
			Window</span>安装器技术。结合使用<span>MySQL</span>安装帮助和配置向导，用户安装并 
			配置完<span>MySQL</span>服务器后便可以直接使用。</p>
			<p><span>MySQL</span>安装帮助是<span>MySQL 5.1</span>服务器分发的标准安装器。使用<span>MySQL</span>安装帮助安装<span>MySQL</span>之前，用户需要手动关闭并卸载已经安装的以前版本的<span>MySQL</span>。关于对以前版本进行升级的详细信息请参见
          <a href="#mysql-install-wizard-upgrading" title="2.3.4.7. Upgrading MySQL">
			2.3.4.7节，“升级MySQL”</a>。</p>
			<p>最近版本的<span>Windows</span>包含了改进版本的<span>Microsoft 
			Windows</span>安装器<span>(MSI)</span>。<span>MSI</span>已经成为<span>Windows 
			2000</span>、<span>Windows XP</span>和<span>Windows 
			Server 2003</span>应用程序安装的事实标准。<span>MySQL</span>安装帮助中使用了该技术，使安装过程更加灵活、顺利。</p>
			<p><span>Microsoft Windows</span>安装器引擎随着<span>Windows 
			XP</span>的更新而更新；使用以前<span>Windows</span>版本的用户可以参考<span><a target="_top"  href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;292539">Microsoft
			<span>知识库文章</span></a></span>查阅关于升级到最新版<span>Windows</span>安装器引擎的资料。</p>
			<p>此外，<span>Microsoft</span>最近已经引入了<span>WiX(Windows
			</span>安装器<span> XML)</span>工具包。这是<span>Microsoft</span>公认的开放源码项目。我们转换到<span>WiX</span>是因为它是一个开放源码项目，可以使用脚本更加灵活地处理整个<span>Windows</span>安装过程。</p>
			<p>对<span>MySQL</span>装帮助的改进依赖于各用户的支持和反馈。如果你发现<span>MySQL</span>安装帮助缺少对你很重要的某些功能，或如果你发现某个缺陷，请使用我们的<span><a target="_top"  href="http://bugs.mysql.com/"><span>MySQL缺陷系统</span></a></span>来索取功能或报告问题。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-starting"></a>
			2.3.4.2.&nbsp;下载并启动MySQL安装向导</h4></div></div></div>
			<p>可以从<a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>下载<span>MySQL</span>服务器安装软件包。如果你下载的安装软件包在<span>Zip</span>文件中，你需要先提取文件。</p>
			<p>启动帮助的过程取决于下载的安装软件包的内容。如果有<span>setup.exe</span>文件，双击启动安装过程。如果有<span>.msi</span>文件，双击启动安装过程。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-install-type"></a>
			2.3.4.3.&nbsp;选择安装类型</h4></div></div></div>
			<p>有<span>3</span>种安装类型：<strong><span>Typical(</span><span>典型安装<span>)</span>、<span>Complete(</span>完全安装<span>)</span></span></strong>和<strong><span>Custom(</span><span>定制安装<span>)</span></span></strong>。</p>
			<p><strong><span>Typical(</span><span>典型安装<span>)</span></span></strong>安装只安装<span>MySQL</span>服务器、<strong><span>mysql</span></strong>命令行客户端和命令行实用程序。命令行客户端和实用程序包括<strong><span>mysqldump</span><span>、<span>myisamchk</span></span></strong>和其它几个工具来帮助你管理<span>MySQL</span>服务器。</p>
			<p><strong><span>Complete(</span><span>完全安装<span>)</span></span></strong>安装将安装软件包内包含的所有组件。完全安装软件包包括的组件包括嵌入式服务器库、基准套件、支持脚本和文档。</p>
			<p><strong><span>Custom(</span><span>定制安装<span>)</span></span></strong>安装允许你完全控制你想要安装的软件包和安装路径。关于定制安装的详细信息请参见<a href="#mysql-install-wizard-custom-install" title="2.3.4.4. The Custom Install Dialog">2.3.4.4节，“定制安装对话框”</a>。</p>
			<p>如果你选择<strong><span  style="font-family:
宋体">Typical(</span><span>典型安装<span>)</span></span></strong>或<strong><span>Complete(</span><span>完全安装<span>)</span></span></strong>安装并点击<span class="guibutton"><span>Next</span></span>按钮，你将进入确认窗口确认选择并开始安装。如果你选择<strong><span>定制</span></strong>安装并点击<span class="guibutton"><span>Next</span></span>按钮，你将进入定制安装对话框，参见<a href="#mysql-install-wizard-custom-install" title="2.3.4.4. The Custom Install Dialog">2.3.4.4节，“定制安装对话框”</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-custom-install"></a>
			2.3.4.4.&nbsp;定制安装对话框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			如果你想要更改<span>MySQL</span>安装帮助安装的安装路径或具体组件，应当选择<strong><span>Custom(</span><span>定制安装<span>)</span></span></strong>安装。<p>
			所有可用组件列入定制安装对话框左侧的树状视图内。未安装的组件用红色 <span class="guiicon">
			<span>X</span></span><span> </span>
			图标表示；已经安装的组件有灰色图标。要想更改组件，点击该组件的图标并从下拉列表中选择新的选项。</p>
			<p>可以点击安装路径右侧的<span class="guibutton"><span>Change...</span></span>按钮来更改默认安装路径。</p>
			<p>选择了安装组件和安装路径后，点击<span class="guibutton"><span>Next</span></span>按钮进入确认对话框。</p>
			<h4 class="title"><a name="mysql-install-wizard-confirmation-dialog"></a>
			2.3.4.5.&nbsp;配置对话框</h4></div></div></div>
			<p>选择了安装类型和可选安装组件后，则进入确认对话框。该对话框中将显示安装类型和安装路径供检查。</p>
			<p>如果你满意设定值要想安装<span>MySQL</span>，点击<span class="guibutton"><span>Install</span>（安装）</span>按钮。要想更改设定值，点击<span class="guibutton"><span>Back</span></span>按钮。要想退出<span>MySQL</span>安装帮助不再安装<span> 
			MySQL</span>，点击<span class="guibutton"><span>Cancel</span></span>按钮。</p>
			<p><span>完成安装后，将出现注册选项和<span>MySQL</span>网址。注册后便可以访问</span><a href="http://forums.mysql.com" target="_top">forums.mysql.com</a><span>处的<span>MySQL</span>论坛，可以在</span><span><a target="_top"  href="http://bugs.mysql.com">bugs.mysql.com</a></span><span>报告缺陷，并可以注册为时事新闻订户。在安装器的最后一个窗口内，提供了安装摘要，并提供选项以启动<span>MySQL 
			Configuration Wizard</span>（配置向导），可以用来创建配置文件，安装<span>MySQL</span>服务并进行安全配置。</span></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-changes"></a>
			2.3.4.6.&nbsp;MySQL安装向导所作的更改</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			点击<span class="guibutton"><span>Install</span>（安装）</span>按钮后，<span>MySQL</span>安装帮助开始安装过程，并对系统进行下面章节描述的更改。<p>
			<strong><span>更改注册表</span></strong></p>
			<p>在典型安装中，<span>MySQL</span>安装帮助在<span>HKEY_LOCAL_MACHINE\SOFTWARE\MySQL 
			AB</span>创建<span>Windows</span>注册键值。</p>
			<p><span>MySQL</span>安装帮助根据正安装的服务器的主要版本创建一个键值，例如 
			<span>
			<span>MySQL</span><span>服务器<span>5.1</span>。</span></span>它包含两个字符串值，<span>Location</span>和<span>Version</span>。<span>Location</span>字符串包含安装目录。在默认安装中，它包含<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\</span>。<span>Version</span>字符串包含发布号。例如，安装<span>MySQL 
			Server 5.1.2-alpha</span>，键值包含一个<span>5.1.2-alpha</span>值。</p>
			<p>这些注册键值用来帮助外部工具识别<span>MySQL</span>服务器的安装位置，不需要扫描整个硬盘来确定<span>MySQL</span>服务器的安装路径。运行服务器时不需要注册键值，使用<span>noinstall</span><span> 
			Zip</span>文件时不创建注册键值。</p>
			<p><strong><span>更改启动菜单</span></strong></p>
			<p><span>MySQL</span>安装帮助在<span>Windows </span>
			<span class="guimenu">启动</span>菜单中创建一条新的条目，使用<span>MySQL</span>菜单，根据安装的<span>MySQL</span>的主版本来命名。例如，如果安装了<span>MySQL 
			5.1, MySQL</span>安装帮助在<span class="guimenu">启动</span>菜单中创建<span class="guisubmenu"><span>MySQL 
			Server 5.1</span></span>部分。</p>
			<p>将在新<span class="guimenu">启动</span>菜单部分创建下面的条目：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span class="guimenuitem"><span>MySQL</span>命令行客户端</span>：这是<strong><span>mysql</span></strong>命令行客户端的快捷方式，对其进行配置以连接为<span>root</span>用户。当连接时快捷方式提示输入<span>root</span>用户密码。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span class="guimenuitem"><span>MySQL</span>服务器实例配置向导</span>：这是<span>MySQL 
			Configuration Wizard</span>（配置向导）的快捷方式。使用该快捷方式来配置新安装的服务器，或重新配置已有的服务器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span class="guimenuitem"><span>MySQL</span>文档</span>：可以连接到保存在<span>MySQL</span>服务器安装目录下的文档。采用基本安装方式安装<span>MySQL</span>服务器时，该选项不可用。</p>
			<p><strong><span>更改文件系统</span></strong></p>
			<p>默认情况下，<span>MySQL</span>安装帮助将<span>MySQL 5.1</span>服务器安装到<span>C:\<i>Program 
			Files</i>\MySQL\MySQL Server <i>5.1</i></span>，其中<span><i><span>Program 
			Files</span></i></span>是系统应用程序的默认位置，<span><i><span>5.1</span></i></span>是<span>MySQL</span>服务器的主要版本。这是建议的<span>MySQL</span>服务器的新安装位置，替换了前面的默认位置<span><span>c</span><span>：<span>\mysql</span></span></span>。</p>
			<p>默认情况下，所有<span>MySQL</span>应用程序保存到目录<span>C:\<i>Program 
			Files</i>\MySQL</span>下，其中<span><i><span>Program 
			Files</span></i></span>是应用程序在<span>Windows</span>中的默认安装位置。开发机器上的典型<span>MySQL</span>安装应为：</p>
			<pre><span>C:\Program Files\MySQL\MySQL Server 5.1</span></pre>
			<pre><span>C:\Program Files\MySQL\MySQL Administrator 1.0</span></pre>
			<pre><span>C:\Program Files\MySQL\MySQL Query Browser 1.0</span></pre>
			<p>该方法使管理和维护具体系统上安装的<span>MySQL</span>应用程序更加容易。</p>
			<h4 class="title"><a name="mysql-install-wizard-upgrading"></a>
				2.3.4.7.&nbsp;升级MySQL</h4></div></div></div>
			<p>使用<span>MSI</span>的升级功能，<span>MySQL</span>安装帮助可以自动执行服务器升级。这意味着安装新版本前，不需要手动卸载前面安装的程序。安装新版本前，安装器自动关闭并卸载前面安装的<span>MySQL</span>服务。</p>
			<p>只有在主版本号和次要版本号相同的安装之间进行升级时，才能自动进行升级。例如，可以自动从<span>MySQL 
			4.1.5</span>升级到<span>MySQL 4.1.6,</span>但是不能从<span>MySQL 
			5.0</span>升级到<span>MySQL 5.1</span>。</p>
			<p>参见<a href="#windows-upgrading" title="2.3.15. Upgrading MySQL on Windows">2.3.15节，“在Windows下升级MySQL”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-config-wizard"></a>
			2.3.5.&nbsp;使用配置向导</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#mysql-config-wizard-introduction">
				2.3.5.1. 前言</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-starting">
				2.3.5.2. 启动MySQL配置向导</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-maintenance">
				2.3.5.3. 选择维护选项</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-configuration-type">
				2.3.5.4. 选择配置类型</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-server-type">
				2.3.5.5. 服务器类型对话框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-database-usage">
				2.3.5.6. 数据库使用情况对话框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-tablespace">
				2.3.5.7. InnoDB表空间对话框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-connections">
				2.3.5.8. 并发连接对话框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-networking">
				2.3.5.9. 联网选项对话框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-character-set">
				2.3.5.10. 字符集对话框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-service">
				2.3.5.11. 服务选项对话框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-security">
				2.3.5.12. 安全选项对话框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-confirmation">
				2.3.5.13. 配置对话框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-file-location">
				2.3.5.14. my.ini文件的位置</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-editing">
				2.3.5.15. 编辑my.ini文件</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-introduction"></a>
				2.3.5.1.&nbsp;前言</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL Configuration Wizard</span>（配置向导）可以帮助自动配置<span>Windows</span>中的服务器。<span>MySQL 
				Configuration Wizard</span>（配置向导）问你一系列问题，然后将回答放到模板中生成一个<span>my.ini</span>文件，该文件与你的安装一致。<p>
				<span>MySQL Configuration Wizard</span>（配置向导）包含在<span>MySQL 
				5.1</span>服务器中，目前只适用于<span>Windows</span>用户。</p>
				<p><span>MySQL Configuration Wizard</span>（配置向导）在很大程度上是<span>MySQL 
				AB</span>经过多年从许多用户收到的反馈的结果。然而，如果你发现它缺少某些对你很重要的功能，或如果你发现一个缺陷，请使用我们的<span><a target="_top"  href="http://bugs.mysql.com/"><span>MySQL 
				缺陷系统</span></a></span>来索取功能或报告问题。</p>
				<h4 class="title"><a name="mysql-config-wizard-starting"></a>
				2.3.5.2.&nbsp;启动MySQL配置向导</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				一般情况当<span>MySQL</span>安装帮助退出时，从<span>MySQL</span>安装帮助启动<span>MySQL 
				Configuration Wizard</span>（配置向导）。还可以点击<span>Windows</span><span class="guimenu">启动</span>菜单中<span>MySQL</span><span class="guimenuitem">服务器实例配置向导</span>条目中的<span>MySQL</span>部分来启动<span>MySQL 
				Configuration Wizard</span>（配置向导）。<p>并且，还可以进入<span>MySQL</span>安装<span>bin</span>目录直接启动<span>MySQLInstanceConfig.exe</span>文件。</p>
				<h4 class="title"><a name="mysql-config-wizard-maintenance"></a>
				2.3.5.3.&nbsp;选择维护选项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				如果<span>MySQL Configuration Wizard</span>（配置向导）检查到<span>my.ini</span>文件，你可以选择重新配置已有的服务器，或通过删除<span>my.ini</span>文件并停止、卸载<span>MySQL</span>服务来卸载服务器实例。<p>
				要想重新配置已有的服务器，选择<span class="guimenuitem"><span>Re-configure 
				Instance</span></span>选项并点击<span class="guibutton"><span>Next</span></span>按钮。已有的<span>my.ini</span>文件重新命名为<span>my<i>timestamp</i>.ini.bak</span>，其中<span><i><span>timestamp</span></i></span>是<span>my.ini</span>文件创建是的日期和时间。要想卸载已有的服务器实例，选择<span class="guimenuitem"><span>Remove 
				Instance</span></span>选项并点击<span class="guibutton"><span>Next</span></span>按钮。</p>
				<p>如果选择了<span class="guimenuitem"><span>Remove 
				Instance</span></span>选项，则进入确认窗口。点击<span class="guibutton"><span>Execute</span></span>按钮：<span>MySQL 
				Configuration Wizard</span>（配置向导）停止并卸载<span>MySQL</span>服务，然后删除<span>my.ini</span>文件。服务器安装和自己的<span>data</span>文件夹不删除。</p>
				<p>如果选择了<span class="guimenuitem"><span>Re-configure 
				Instance</span></span>选项，则进入配置<span class="guimenu">类型</span>对话框，可以选择你想要配置的安装类型。</p>
				<h4 class="title"><a name="mysql-config-wizard-configuration-type"></a>
				2.3.5.4.&nbsp;选择配置类型</h4></div></div></div>
				<p>当启动<span>MySQL Configuration Wizard</span>（配置向导）重新安装<span>MySQL</span>，或为已有安装选择<span class="guimenuitem"><span>Re-configure 
				Instance</span></span>选项，则进入配置<span class="guimenu">类型</span>对话框。</p>
				<p>可以选择两种配置类型：<span class="guimenuitem"><span>Detailed 
				Configuration</span>（详细配置）</span>和<span class="guimenuitem"><span>Standard 
				Configuration</span>（标准配置）</span>。<span class="guimenuitem"><span>Standard 
				Configuration</span>（标准配置）</span>选项适合想要快速启动<span>MySQL</span>而不必考虑服务器配置的新用户。<span class="guimenuitem">详细配置</span>选项适合想要更加细粒度控制服务器配置的高级用户。</p>
				<p>如果你是<span>MySQL</span>的新手，需要配置为单用户开发机的服务器，<span class="guimenuitem"><span>Standard 
				Configuration</span>（标准配置）</span>应当适合你的需求。选择<span class="guimenuitem"><span>Standard 
				Configuration</span>（标准配置）</span>选项，则<span> MySQL 
				Configuration Wizard</span>（配置向导）自动设置所有配置选项，但不包括<span class="guimenuitem">服务选项</span>和安全<span class="guimenuitem">选项</span>。</p>
				<p><span class="guimenuitem"><span>Standard 
				Configuration</span>（标准配置）</span>设置选项可能与安装<span>MySQL</span>的系统不兼容。如果系统上已经安装了<span>MySQL</span>和你想要配置的安装，建议选择<span class="guimenuitem">详细配置</span>。</p>
				<p>要想<span class="guimenuitem"><span>Standard 
				Configuration</span>（标准配置）</span>，请分别参阅<a href="#mysql-config-wizard-service" title="2.3.5.11. The Service Options Dialog">2.3.5.11节，“服务选项对话框”</a>和<a href="#mysql-config-wizard-security" title="2.3.5.12. The Security Options Dialog">2.3.5.12节，“安全选项对话框”</a><span class="guimenuitem">的服务选项</span>和安全<span class="guimenuitem">选项</span>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-server-type"></a>
				2.3.5.5.&nbsp;服务器类型对话框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				可以选择<span>3</span>种服务器类型，选择哪种服务器将影响到<span>MySQL 
				Configuration Wizard</span>（配置向导）对内存、硬盘和过程或使用的决策。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Developer Machine(</span>开发机器<span>)</span></span>：该选项代表典型个人用桌面工作站。假定机器上运行着多个桌面应用程序。将<span>MySQL</span>服务器配置成使用最少的系统资源。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Server 
				Machine</span>（服务器）</span>：该选项代表服务器，<span>MySQL</span>服务器可以同其它应用程序一起运行，例如<span>FTP</span>、<span>email</span>和<span>web</span>服务器。<span>MySQL</span>服务器配置成使用适当比例的系统资源。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Dedicated MySQL Server Machine</span>（专用<span>MySQL</span>服务器）</span>：该选项代表只运行<span>MySQL</span>服务的服务器。假定运行没有运行其它应用程序。<span>MySQL</span>服务器配置成使用所有可用系统资源。</p>
				<h4 class="title"><a name="mysql-config-wizard-database-usage"></a>
				2.3.5.6.&nbsp;数据库使用情况对话框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span class="guimenu">通过<span>Database Usage</span>（数据库使用）</span>对话框，你可以指出创建<span>MySQL</span>表时使用的表处理器。通过该选项，你可以选择是否使用<span>InnoDB</span>储存引擎，以及<span>InnoDB</span>占用多大比例的服务器资源。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Multifunctional Database</span>（多功能数据库）</span>：选择该选项，则同时使用<span>InnoDB</span>和<span>MyISAM</span>储存引擎，并在两个引擎之间平均分配资源。建议经常使用两个储存引擎的用户选择该选项。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Transactional Database Only</span>（只是事务处理数据库）</span>：该选项同时使用<span>InnoDB</span>和<span>MyISAM</span><span>
				</span>储存引擎，但是将大多数服务器资源指派给<span>InnoDB</span>储存引擎。建议主要使用<span>InnoDB</span>只偶尔使用<span>MyISAM</span>的用户选择该选项。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Non-Transactional Database Only</span>（只是非事务处理数据库）</span>：该选项完全禁用<span>InnoDB</span>储存引擎，将所有服务器资源指派给<span>MyISAM</span>储存引擎。建议不使用<span>InnoDB</span>的用户选择该选项。</p>
				<h4 class="title"><a name="mysql-config-wizard-tablespace"></a>
				2.3.5.7.&nbsp;InnoDB表空间对话框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				有些用户可能想要将<span>InnoDB</span>表空间文件放到不同的位置，而不放到<span>MySQL</span>服务器数据目录。如果你的系统有较大的空间或较高性能的储存设备（例如<span>RAID</span>储存系统），则最好将表空间文件单独放到一个位置。<p>
				要想更改<span>InnoDB</span>表空间文件的默认位置，从驱动器下拉列表选择一个新的驱动器，并从路径下拉列表选择新的路径。要想创建路径，点击 
				<span class="guibutton"><span>...</span></span>按钮。</p>
				<p>如果你要更改已有服务器的配置，更改路径前你必须点击<span class="guibutton"><span>Modify</span></span>按钮。此时启动服务器之前，你必须将已有表空间文件移到新位置。</p>
				<h4 class="title"><a name="mysql-config-wizard-connections"></a>
				2.3.5.8.&nbsp;并发连接对话框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				限制所创建的与<span>MySQL</span>服务器之间的并行连接数量很重要，以便防止服务器耗尽资源。在<span class="guimenu"><span>Concurrent 
				Connections</span>（并行连接）</span>对话框中，可以选择服务器的使用方法，并根据情况限制并行连接的数量。还可以手动设置并行连接的限制。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Decision 
				Support</span>（决策支持）<span>(DSS)/OLAP</span></span>：如果服务器不需要大量的并行连接可以选择该选项。假定最大连接数目设置为<span>100,</span>平均并行连接数为<span>20</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Online 
				Transaction Processing</span>（联机事务处理）<span>(OLTP)</span></span>：如果你的服务器需要大量的并行连接则选择该选项。最大连接数设置为<span>500</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Manual 
				Setting</span>（人工设置）</span>：选择该选项可以手动设置服务器并行连接的最大数目。从前面的下拉框中选择并行连接的数目，如果你期望的数目不在列表中，则在下拉框中输入最大连接数。</p>
				<h4 class="title"><a name="mysql-config-wizard-networking"></a>
				2.3.5.9.&nbsp;联网选项对话框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				在<span>Networking Options</span>（<span class="guimenu">网络选项）</span>对话框中可以启用或禁用<span>TCP/IP</span>网络，并配置用来连接<span>MySQL</span>服务器的端口号。<p>
				默认情况启用<span>TCP/IP</span>网络。要想禁用<span>TCP/IP</span>网络，取消选择<span class="guimenuitem"><span>Enable 
				TCP/IP Networking</span></span>选项旁边的检查框。</p>
				<p>默认使用<span>3306</span>端口。要想更访问<span>MySQL</span>使用的端口，从下拉框选择一个新端口号或直接向下拉框输入新的端口号。如果你选择的端口号已经被占用，将提示确认选择的端口号。</p>
				<h4 class="title"><a name="mysql-config-wizard-character-set"></a>
				2.3.5.10.&nbsp;字符集对话框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>服务器支持多种字符集，可以设置适用于所有表、列和数据库的默认服务器字符集。使用<span class="guimenu"><span>Character 
				Set</span>（</span>字符集对话框）来更改<span> MySQL</span>服务器的默认字符集。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Standard 
				Character Set</span>（标准字符集）</span>：如果想要使用<span>Latin1</span>做为默认服务器字符集，则选择该选项。<span>Latin1</span>用于英语和许多西欧语言。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Best 
				Support For Multilingualism</span>（支持多种语言）</span>：如果想要使用<span>UTF8</span>做为默认服务器字符集，则选择该选项。<span>UTF8</span>可以 
				将不同语言的字符储存为单一的字符集。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Manual 
				Selected Default Character Set/Collation</span></span>（<span class="guimenuitem">人工选择的默认字符集<span>/</span>校对规则）</span>：如果想要手动选择服务器的默认字符集，请选择该项。从下拉列表中选择期望的字符集。</p>
				<h4 class="title"><a name="mysql-config-wizard-service"></a>
				2.3.5.11.&nbsp;服务选项对话框</h4></div></div></div>
				<p>在基于<span>Windows NT</span>的平台上，可以将<span>MySQL</span>服务器安装成服务。安装成服务，系统启动时可以自动启动<span>MySQL</span>服务器，甚至出现服务故障时可以随<span>Windows</span>自动启动。</p>
				<p><span>默认情况，<span>MySQL 
				Configuration Wizard</span>（配置向导）将<span>MySQL</span>服务器安装为服务，服务名为<span>MySQL</span>。如果你不想安装服务，取消</span><span class="guimenuitem"><span>Install 
				As Windows Service</span></span><span>选项旁边的选择框。可以从下拉框选择新的服务名或在下拉框输入新的服务名来更改服务名。</span></p>
				<p>要想将<span>MySQL</span>服务器安装为服务，但是不自动启动，不选中<span class="guimenuitem"><span>Launch 
				the MySQL Server Automatically</span></span>选项旁边的检查框。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-security"></a>
				2.3.5.12.&nbsp;安全选项对话框</h4></div></div></div>
				<p>强烈建议为你的<span>MySQL</span>服务器设置一个<span>root</span>密码，默认情况<span>MySQL 
				Configuration Wizard</span>（配置向导）要求你设置一个<span>root</span>密码。如果你不想设置<span>root</span>密码，不选中<span class="guimenuitem"><span>Modify 
				Security Settings</span>（修改安全设定值）</span>选项旁边的选择框。</p>
				<p>要想设置<span>root</span>密码，在<span class="guimenuitem"><span>New 
				root password(</span>输入新密码<span>)</span></span>和<span class="guimenuitem"><span>Confirm</span>（确认）</span>两个框内输入期望的密码。如果重新配置已有的服务器，你还需要<span class="guimenuitem"><span>Current 
				root password</span>（当前<span>root</span>密码）</span>框内输入已有的<span>root</span>密码。</p>
				<p>要想防止通过网络以<span>root</span>登录，选中<span class="guimenuitem"><span>Root 
				may only connect from localhost</span>（只允许从本机登陆连接<span>root</span>）</span>选项旁边的框。这样可以提高<span>root</span>账户的安全。</p>
				<p>要想创建一个匿名用户账户，选中<span class="guimenuitem"><span>Create 
				An Anonymous Account</span>（创建匿名账户）</span>选项旁边的框。创建匿名账户会降低服务器的安全，并造成登录和许可困难。因此不建议。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-confirmation"></a>
				2.3.5.13.&nbsp;配置对话框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL Configuration Wizard</span>（配置向导）的最后一个对话框是<span class="guimenu"><span>Confirmation</span>（确认）对话框</span>。要想启动配置过程，点击<span class="guibutton"><span>Execute</span></span>。要想返回要想到前面的对话框，点击<span class="guibutton"><span>Back</span></span>按钮。要想不配置服务器即退出<span>MySQL 
				Configuration Wizard</span>（配置向导），点击<span>Cancel</span>按钮。<p>
				点击<span class="guibutton"><span>Execute</span></span>按钮后，<span>MySQL 
				Configuration Wizard</span>（配置向导）执行一系列的任务，执行过程将显示在屏幕上。</p>
				<p><span>MySQL Configuration Wizard</span>（配置向导）首先使用<span>MySQL 
				AB</span>开发人员和工程师准备的模板根据你的选择确定配置文件选项。该模板的名称为<span>my-template.ini</span>，位于服务器安装目录中。</p>
				<p><span>MySQL Configuration Wizard</span>（配置向导）将这些选项写入到一个<span>my.ini</span>文件中。<span>my.ini</span>文件的最终位置显示在写<span class="guilabel">配置文件</span>任务的旁边。</p>
				<p>如果选择为<span>MySQL</span>服务器创建一个服务，<span>MySQL 
				Configuration Wizard</span>（配置向导）则创建并启动服务。如果你重新配置已有的服务，<span>MySQL 
				Configuration Wizard</span>（配置向导）则根据你的配置更改重新启动服务。</p>
				<p>如果选择设置<span>root</span>密码，<span>MySQL 
				Configuration Wizard</span>（配置向导）则连接服务器，设置新<span>root</span>密码并应用你选择的其它安全设定值。</p>
				<p><span>MySQL Configuration Wizard</span>（配置向导）完成任务后，则显示一个概要。点击<span class="guibutton"><span>Finish</span></span>按钮退出<span>MySQL 
				Configuration Wizard</span>（配置向导）。</p>
				<h4 class="title"><a name="mysql-config-wizard-file-location"></a>
				2.3.5.14.&nbsp;my.ini文件的位置</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL Configuration Wizard</span>（配置向导）将<span>my.ini</span>文件放到<span>MySQL</span>服务器的安装目录中。这样可以帮助将配置文件与具体服务器实例关联起来。<p>
				要想确保<span>MySQL</span>服务器知道从哪里查找<span>my.ini</span>文件，即做为服务安装的一部分传递给<span>MySQL</span>服务器的部分：<span>--defaults-file=&quot;<i>C:\Program 
				Files\MySQL\MySQL Server 5.1</i>\my.ini&quot;</span>，其中<span><i><span>C:\Program 
				Files\MySQL\MySQL Server 5.1</span></i></span><span>
				</span>被<span>MySQL</span>服务器的安装路径替代。</p>
				<p>
				<span>--defaults-file</span>指导<span>MySQL</span>服务器读取具体的配置文件。</p>
				<h4 class="title"><a name="mysql-config-wizard-editing"></a>
				2.3.5.15.&nbsp;编辑my.ini文件</h4></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			要想修改<span>my.ini</span>文件，用文本编辑器打开并进行必要的修改。你还可以用<span><a target="_top"  href="http://www.mysql.com/products/administrator/">MySQL 
			Administrator</a></span>实用工具修改服务器配置。<p><span>MySQL</span>客户端和实用程序，例如<strong><span>mysql</span></strong>命令行客户端和<strong><span>mysqldump</span></strong>不能将<span>my.ini</span>文件放到服务器安装目录中。要想配置客户端和实用工具，根据<span>Windows
			</span>版本，在<span><span>C</span><span>：<span>\Windows</span></span></span>或<span><span>C</span><span>：<span>\WINNT</span></span></span>目录下创建一个新的<span>my.ini</span>文件。</p>
			<h3 class="title"><a name="windows-install-archive"></a>2.3.6. 通过非安装Zip文件安装MySQL</h3></div></div></div>
			<p>想使用非自动安装包的用户可以使用本节的指令手动安装<span>MySQL</span>。从<span>Zip</span>文档安装<span>MySQL</span>的过程为：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>将文档提取到期望的安装目录中。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>创建一个选项文件。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>选择<span>MySQL</span>服务器类型。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>启动<span>MySQL</span>服务器。</p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>使默认用户账户安全。</p>
			<p>下面一节描述了该过程。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-extract-archive"></a>
			2.3.7.&nbsp;提取安装档案文件</h3></div></div></div>
			<p>要想手动安装<span>MySQL</span>，其步骤为：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果你从以前的版本升级，开始升级过程前请参阅<a href="#windows-upgrading" title="2.3.15. Upgrading MySQL on Windows">2.3.15节，“在Windows下升级MySQL”</a>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果你使用基于<span>Windows NT</span>的操作系统，例如<span>Windows 
			NT</span>、<span>Windows 2000</span>、<span>Windows 
			XP</span>或<span>Windows Server 2003,</span>确保登录的用户名具有管理员权限。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>选择安装位置。传统安装中<span>MySQL</span>服务器安装到<span><span>C</span><span>：<span>\mysql</span></span></span>，<span>MySQL 
			Installation Wizard</span>（安装帮助）将<span>MySQL</span>安装到<span>C:\Program 
			Files\MySQL</span>。如果你不想将<span>MySQL</span>安装到<span><span>C</span><span>：<span>\mysql</span></span></span>，你必须在启动过程或在选项文件中指定安装目录的路径。请参见<a href="#windows-create-option-file" title="2.3.8. Creating an Option File">2.3.8节，“创建选项文件”</a>。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>zip</span>文件工具，将安装文件提取到选定的安装位置。使用某些工具，可以将文档提取到选择的安装位置的文件夹中。在这种情况下，你可以将子文件夹中的内容移动到选择的安装位置。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-create-option-file"></a>
			2.3.8.&nbsp;创建选项文件</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			如果想要指定运行服务器的启动选项，可以在命令行中指出或放到一个选项文件中。对于服务器每次启动都用到的选项，你会发现使用选项文件来指定<span>MySQL</span>配置非常方便。特别是在以下环境中：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>安装或数据目录位置不是默认位置<span>(</span><span>C:\Program 
			Files\MySQL\MySQL Server 5.1</span>和<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>需要调节服务器设定值。</p>
			<p>档<span>MySQL</span>服务器在<span>Windows</span>中启动时，它从两个文件中寻找选项：<span>Windows</span>目录中的<span>my.ini</span>文件和<span><span>C</span><span>：<span>\my.cnf</span></span></span><span>
			</span>文件。<span>Windows</span>目录典型名称为<span><span>C</span><span>：<span>\WINDOWS</span></span></span>或<span><span>C</span><span>：<span>\WINNT</span></span></span>。可以使用下面的命令从<span>WINDIR</span>环境变量值确定自己的确切位置：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>echo %WINDIR%</span></b></span></pre>
			<p><span>MySQL</span>首先从<span>my.ini</span>文件中寻找选项，然后从<span>my.cnf</span>文件中寻找。为了避免混淆，最好只使用一个文件。如果你的<span>PC</span>使用了一个引导加载器，其中<span><span>C</span><span>：</span></span>不是引导盘，唯一的选则是使用<span>my.ini</span>文件。不管你使用哪个选项文件，必须为纯文本文件。</p>
			<p>还可以使用<span>MySQL</span>分发中的示例选项文件。在安装目录中查找以下文件：<span><span>my-small.cnf</span><span>、<span>my-medium.cnf</span>、</span></span><span>my-large.cnf</span>和<span>my-huge.cnf</span>，你可以重新命名并复制到相应位置用作基本配置文件。</p>
			<p>可以用任何文本编辑器来创建并修改选项文件，例如记事本。例如，如果<span>MySQL</span>安装在<span><span>E</span><span>：<span>\mysql</span>，</span></span>数据目录安装在<span>E:\mydata\data</span>，你可以 
			创建含有<span>[mysqld]</span>部分的选项文件，指定<span>basedir</span>和<span>datadir</span>参数的值：</p>
			<pre><span>[mysqld]</span></pre>
			<pre><span># set basedir to your installation path</span></pre>
			<pre><span>basedir=E:/mysql</span></pre>
			<pre><span># set datadir to the location of your data directory</span></pre>
			<pre><span>datadir=E:/mydata/data</span></pre>
			<p>请注意在选项文件中使用正斜线儿不是反斜线指定<span>Windows</span>路径名。如果使用反斜线，必须用双反斜线：</p>
			<pre><span>[mysqld]</span></pre>
			<pre><span># set basedir to your installation path</span></pre>
			<pre><span>basedir=E:\\mysql</span></pre>
			<pre><span># set datadir to the location of your data directory</span></pre>
			<pre><span>datadir=E:\\mydata\\data</span></pre>
			<p>在<span>Windows</span>下，<span>MySQL</span>安装器将数据目录直接放到安装<span>MySQL</span>的目录下。如果你想要使用其它位置的数据目录，应当将<span>data</span>目录中的全部内容复制到新的目录下。例如，如果<span>MySQL</span>安装到<span>C:\Program 
			Files\MySQL\MySQL Server 5.1</span>中，数据目录默认在<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span>。如果想要使用<span>E:\mydata</span>做为数据目录，你必须做两件事情：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>将整个<span>data</span>目录和全部内容从<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span>移动到<span>E:\mydata</span>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>每次启动服务器时，使用<span>--datadir</span>选项来指定新的数据目录。</p>
			<h3 class="title"><a name="windows-select-server"></a>
			2.3.9.&nbsp;选择MySQL服务器类型</h3></div></div></div>
			<p>下面的表显示了<span>Windows</span>下可用的<span>MySQL 
			5.1</span>服务器：</p>
			<table border="1" cellpadding="0" id="table6">
				<tr>
					<td width="152">
					<p><strong><span>
					二进制</span></strong></td>
					<td width="636">
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld- debug</span></strong></td>
					<td width="636">
					<p>已经编译过，可以进行完全调试和自动内存分配检查，用于表<span>InnoDB</span>和<span><span>BDB</span><span>。</span></span></td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld</span></strong></td>
					<td width="636">
					<p>优化的二进制，支持<span>InnoDB</span>。</td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld-nt</span></strong></td>
					<td width="636">
					<p>优化的二进制，支持<span>Windows NT</span>，<span>2000 
					XP</span>，有命名管道。</td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld-max</span></strong></td>
					<td width="636">
					<p>优化的二进制，支持<span>InnoDB</span>和<span>BDB</span>表。</td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld-max-nt</span></strong></td>
					<td width="636">
					<p>同<strong><span>mysqld-max</span></strong>，但是已经编译过，支持命名管道。</td>
				</tr>
			</table>
			<p>已经对所有前面的二进制进行了优化以适用现代<span>Intel</span>处理器，但是应当工作在<span>Intel 
			i386-</span>类或更高的处理器上。</p>
			<p>所有<span>Windows MySQL 5.1</span>服务器支持数据库目录符号链接。</p>
			<p><span>MySQL</span>支持所有<span>Windows</span>平台的<span>TCP/IP</span>。<strong><span>mysqld-nt</span></strong>和<span >mysql-max-nt</span>服务器支持<span>Windows 
			NT</span>、<span>2000</span>、<span>XP</span>和<span>2003</span>的命名管道。然而，在所有平台下默认使用<span>TCP/IP</span>。<span>(</span>在许多<span>Windows</span>配置中，命名管道比<span>TCP/IP</span>慢）<span>。
			</span></p>
			<p>命名管道在以下条件下使用：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果使用<span>--enable-named-pipe</span>选项启动服务器，则启用了命名管道。需要明确使用该选项，因为当使用命名管道关闭<span>MySQL</span>服务器时，某些用户会遇到问题。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>只有<strong><span>mysqld-nt</span></strong>或<strong><span>mysqld-max-nt</span></strong>服务器，并且服务器运行在支持命名管道的<span>Windows</span>版本<span>(NT</span>、<span>2000</span>、<span>XP</span>、<span>2003)</span>，才能够使用命名管道连接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>这些服务器可以运行在<span>Windows 98 </span>或<span>Me</span>中，但是必须安装<span>TCP/IP</span>协议；此时不可以使用命名管道连接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>这些服务器不能在<span>Windows 95</span>中运行。</p>
			<p><strong><span>注释：</span></strong>参考手册中的大多数例子使用<strong><span>mysqld</span></strong>做为服务器名。如果你选择使用不同的服务器，例如<strong><span>mysqld-nt</span></strong>，则在相应例子中的命令中进行相应的替换。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-server-first-start"></a>
			2.3.10.&nbsp;首次启动服务器</h3></div></div></div>
			<p>本节中的信息主要适用选择<span>Noinstall</span><span>MySQL</span>安装版本，或想要手动配置和测试<span>MySQL</span>而不用<span>GUI</span>工具的情况。</p>
			<p>在<span>Windows 95,98,</span>或<span>Me</span>中，<span>MySQL</span>客户端总使用<span>TCP/IP</span>连接服务器。<span>(</span>这样允许网络中的所有机器连接<span>MySQL</span>服务器）<span>。</span>因此，在启动<span>MySQL</span>之前，你必须确保机器支持<span>TCP/IP</span>。可以从<span>Windows 
			CD-ROM</span>中找到<span>TCP/IP</span>。</p>
			<p>请注意如果使用旧版本的<span>Windows 95(</span>例如，<span>OSR2)</span>，很可能你使用了旧的<span>Winsock</span>包；<span>MySQL</span>需要<span>Winsock 
			2</span>。可以从<a href="http://www.microsoft.com/" target="_top">http://www.microsoft.com/</a>获得最新的<span>Winsock</span>。<span>Windows 
			98</span>包含新的<span>Winsock 2</span>库，因此不需要更新库。</p>
			<p>在基于<span>NT</span>的系统中，例如<span> Windows NT</span>、<span>2000</span>、<span>XP</span>或<span>2003,</span>客户端可以有两个选择。可以使用<span>TCP/IP</span>，如果服务器支持命名管道连接，也可以使用命名管道。要想使<span>MySQL</span>使用<span>Windows 
			NT 4</span>中的<span>TCP/IP,</span>你必须安装服务<span>pack 
			3(</span>或更新的补丁<span>)</span>。</p>
			<p>如果用<span>--shared-memory</span>选项启动，<span>Windows</span>版<span>MySQL</span>还支持共享内存连接。客户端可以通过<span>--protocol=memory</span>选项通过共享内存进行连接。</p>
			<p>关于运行哪个服务器二进制的信息，参见<a href="#windows-select-server" title="2.3.9. Selecting a MySQL Server type">2.3.9节，“选择MySQL服务器类型”</a>。</p>
			<p>本节对<span>MySQL</span>服务器启动进行了概述。下面章节详细说明了从命令行或<span>Windows
			</span>服务启动<span>MySQL</span>服务器的具体信息。</p>
			<p>这些章节的例子假定<span>MySQL</span>安装到默认位置<span><span>C:\Program 
			Files\MySQL\MySQL Server 5.1</span><span>。</span></span>如果你将<span>MySQL</span>安装到了其它位置，则要更改例子中的路径名。</p>
			<p>在控制台窗口<span>(</span>或“<span class="quote"><span>DOS 
			window</span></span>”<span>)</span>中，最好根据命令提示进行测试。这样可以让服务器在<span>window</span>中容易看见的地方显示状态消息。如果配置出现错误，通过这些消息，可以更容易地识别并修复问题。</p>
			<p>要想启动服务器，输入命令：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --console</span></b></span></pre>
			<p>支持<span>InnoDB</span>的服务器启动时，你应当能看见下面的消息：</p>
			<pre><span>InnoDB: The first specified datafile c:\ibdata\ibdata1 did not exist:</span></pre>
			<pre><span>InnoDB: a new database to be created</span>！</pre>
			<pre><span>InnoDB: Setting file c:\ibdata\ibdata1 size to 209715200</span></pre>
			<pre><span>InnoDB: Database physically writes the file full: wait...</span></pre>
			<pre><span>InnoDB: Log file c:\iblogs\ib_logfile0 did not exist: new to be created</span></pre>
			<pre><span>InnoDB: Setting log file c:\iblogs\ib_logfile0 size to 31457280</span></pre>
			<pre><span>InnoDB: Log file c:\iblogs\ib_logfile1 did not exist: new to be created</span></pre>
			<pre><span>InnoDB: Setting log file c:\iblogs\ib_logfile1 size to 31457280</span></pre>
			<pre><span>InnoDB: Log file c:\iblogs\ib_logfile2 did not exist: new to be created</span></pre>
			<pre><span>InnoDB: Setting log file c:\iblogs\ib_logfile2 size to 31457280</span></pre>
			<pre><span>InnoDB: Doublewrite buffer not found: creating new</span></pre>
			<pre><span>InnoDB: Doublewrite buffer created</span></pre>
			<pre><span>InnoDB: creating foreign key constraint system tables</span></pre>
			<pre><span>InnoDB: foreign key constraint system tables created</span></pre>
			<pre><span>011024 10:58:25&nbsp; InnoDB: Started</span></pre>
			<p>服务器完成启动序列后，你应当能看见下述内容，表示服务器准备好，可以进行客户端连接：</p>
			<pre><span>mysqld: ready for connections</span></pre>
			<pre><span>Version: &#39;5.1.2-alpha&#39;&nbsp; socket: &#39;&#39;&nbsp; port: 3306</span></pre>
			<p>服务器继续向控制台写入诊断输出。你可以打开新的控制台窗口运行客户端程序。</p>
			<p>如果省略<span>--console</span>选项，服务器向数据目录<span>(</span>默认为<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span><span>)</span>中的错误日志写入诊断输出。错误日志文件的扩展名为<span>.err</span>。</p>
			<p><strong><span>注释：</span></strong><span>MySQL</span>授权表中的账户一开始没有密码。服务器启动后，你应当根据<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9节，“安装后的设置和测试”</a>中的说明设置密码。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-start-command-line"></a>
			2.3.11.&nbsp;从Windows命令行启动MySQL</h3></div></div></div>
			<p>可以从命令行手动启动<span>MySQL</span>服务器。可以在任何版本的<span>Windows</span>中实现。</p>
			<p>要想从命令行启动<strong><span  style="font-family:
宋体">mysqld</span></strong>服务器，你应当启动控制台窗口<span>(</span>或“<span class="quote"><span>DOS 
			window</span></span>”<span>)</span>并输入命令：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld</span></b></span></pre>
			<p>根据系统中<span>MySQL</span>安装位置的不同，前面的例子中使用的路径也不同。</p>
			<p>在非<span>NT</span>版本的<span>Windows</span>中，在后台启动<strong><span>mysqld</span></strong>。也就是，服务器启动后，你应当可以看见后面的命令提示。如果你用该方法在<span>Windows 
			NT</span>、<span>2000</span>、<span>XP</span>或<span>2003</span>中启动服务器，服务器则在前台运行，在服务器退出前，不会出现命令提示。因此，当服务器运行时，应当打开另一个控制台窗口来运行客户端程序。</p>
			<p>下述命令可以停止<span>MySQL</span>服务器：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqladmin -u root shutdown</span></b></span></pre>
			<p>该命令调用<span>MySQL</span>管理工具<strong><span>mysqladmin</span></strong>连接服务器并告知它关闭服务。该命令使用<span>MySQL
			</span>
			<span>root</span>用户连接，这是<span>MySQL</span>权限系统中的默认管理账户。请注意<span>MySQL</span>权限系统中的用户完全独立于<span>Windows</span>下的登录用户。</p>
			<p>如果<strong><span>mysqld</span></strong>不能启动，检查错误日志看看服务器是否写入了显示问题原因的任何消息。错误日志位于<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span>目录中。是带后缀<span>.err</span>的文件。还可以尝试将服务器启动为<strong><span>mysqld 
			--console</span></strong>；此时，可以从窗口中获得一些有用的信息，可以帮助解决问题。</p>
			<p>最后选项是用<span>--standalone 
			--debug</span>启动<strong><span>mysqld</span></strong>。此时，<strong><span>mysqld</span></strong><span>
			</span>写入日志文件<span><span>C</span><span>：<span>\mysqld.trace</span>，</span></span>应当包含<strong><span>mysqld</span></strong>不启动的原因。请参见<a href="porting.html#making-trace-files" title="E.1.2. Creating Trace Files">E.1.2节，“创建跟踪文件”</a>。</p>
			<p>使用<strong><span>mysqld --verbose 
			--help</span></strong>显示<strong><span  style="font-family:
宋体">mysqld</span></strong>的所有选项。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-start-service"></a>
			2.3.12.&nbsp;以Windows服务方式启动MySQL</h3></div></div></div>
			<p>在<span>NT</span>家族 <span>(Windows NT</span>，<span>2000,XP</span>，<span>2003)</span>中，建议将<span>MySQL</span>安装为<span>Windows</span>服务，当<span>Windows</span>启动、停止时，<span>MySQL</span>也自动启动、停止。还可以从命令行使用<strong><span  style="font-family:
宋体">NET</span></strong>命令，或使用图形<strong><span>Services</span></strong>工具来控制<span>AMySQL</span>服务器。</p>
			<p>在<span>Windows</span>控制面板<span>(Windows 
			2000,XP</span>和<span>Server 2003</span>的<span class="guimenuitem">管理工具下面</span><span>)</span>中可以看见<strong><span>Services</span></strong>工具<span>(Windows
			<strong><span>Service Control Manager</span></strong>)</span>。<span>建议从命令行安装活卸载服务器时关闭</span><strong><span>Services</span></strong><span>工具。这样可以防止许多错误。</span></p>
			<p>安装<span>MySQL Windows</span>服务之前，应当使用下面的命令先停止当前正运行的服务器：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqladmin -u root shutdown</span></b></span></pre>
			<p><strong><span>注释：</span></strong>如果<span>MySQL
			</span>
			<span>root</span>用户账户有密码，你需要调用命令 
			<strong><span>C:\Program 
			Files\MySQL\MySQL Server 5.1\bin\mysqladmin -u root -p shutdown</span></strong>并根据提示输入密码。</p>
			<p>该命令调用<span>MySQL</span>管理工具<strong><span>mysqladmin</span></strong>，连接服务器并告知它关闭服务。该命令使用<span>MySQL
			</span>
			<span>root</span>用户连接，这是<span>MySQL</span>权限系统中的默认管理账户。请注意<span>MySQL</span>权限系统中的用户完全独立于<span>Windows</span>下的登录用户。</p>
			<p>使用该命令安装服务器</p>
			<pre><span>C</span>：<span>\&gt;</span><span><b><span> mysqld --install</span></b></span></pre>
			<p>如果只使用服务器名安装<strong><span  style="font-family:
宋体">mysqld</span></strong>时有问题，尝试使用全路径名来安装。例如：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --install</span></b></span></pre>
			<p>你还可以将<span>MySQL </span>
			<span>bin</span>目录的路径加到<span>Windows</span>系统<span>PATH</span>环境变量中：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>右击<span>Windows</span>桌面上的<span class="guiicon"><span>My 
			Computer</span>（我的计算机）</span>图标，选择<span class="guimenuitem"><span>Properties</span>（属性）。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>然后从出现的<span class="guimenu"><span>System 
			Properties</span></span>菜单中选择<span class="guimenuitem"><span>Advanced</span>（高级）标签</span>，然后点击<span class="guibutton"><span>Environment 
			Variables</span></span>（<span class="guibutton">环境变量）</span>按钮。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>选择<span class="guilabel"><span>System 
			Variables</span>（</span>系统<span class="guilabel">变量）下面的</span><span class="guimenuitem"><span>Path</span>（路径）</span>，然后点击<span class="guibutton"><span>Edit</span></span>（<span class="guibutton">编辑）</span>按钮。将弹出<span class="guimenu"><span>Edit 
			System Variable</span>（编辑系统变量）</span>对话框。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>将光标放到标记<span class="guilabel"><span>Variable 
			Value</span></span>（<span class="guilabel">变量值）处的</span>文本的后面。<span>(</span>使用<strong><span>End</span></strong>键确保光标位于文本的最后<span>)</span>。然后输入<span>MySQL
			</span>
			<span>bin</span>目录<span>&nbsp;&nbsp;
			</span>的完整路径<span>(</span>例如，<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\bin</span><span>)</span>，请注意应使用分号将该路径与该域内的其它值隔离开。一次关闭该对话框和各个对话框，点击<span class="guibutton"><span>OK</span></span>直到打开的所有对话框被关闭。你现在可以在<span>DOS</span>提示符下从系统的任何目录输入<span>MySQL</span>可执行程序名来调用<span>MySQL</span>可执行程序，而不必提供路径名。包括服务器、<span>MySQL</span>客户端和所有<span>MySQL</span>命令行实用程序，例如<strong><span>mysqladmin</span></strong>和<strong><span>mysqldump</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>请注意在同一个机器上运行多个<span>MySQL</span>服务器时，不需要在<span>Windows
			</span>
			<span>PATH</span>中加入<span>MySQL
			</span>
			<span>bin</span>目录。</p>
			<p><strong><span>警告</span></strong>：编辑系统<span>PATH</span>时必须特别注意；意外删除或修改已有路径值会造成系统故障甚至瘫痪。</p>
			<p>服务安装命令不会启动服务器。在本节后面将给出相关指令。</p>
			<p>安装服务时，可以使用<span>MySQL 5.1</span>中的下面的参数：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以直接在<span>--install</span>选项后面指定服务名。默认服务名是<span>MySQL</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果给出了服务名，后面可以跟一个选项。一般情况，应当为<span>defaults-file=<i>file_name</i></span>，指定选项文件的名称，服务器启动时应当从中读取选项。</p>
			<p>可以使用单个选项代替<span>--defaults-file</span>，但是不提倡这样做。<span>--defaults-file</span>更加灵活一些，因为你可以将多个服务器启动选项放入命名的选项文件中。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以在服务名后面指定一个<span>--local-service</span>选项。这样服务器运行时使用<span>LocalService</span><span> 
			Windows</span>账户，只具有有限的系统权限。该账户只适用于<span>Windows XP</span>或更新版本。如果服务名后面同时跟有<span>--defaults-file</span>和<span>--local-service</span>，二者可以按任何顺序排放。</p>
			<p>对于<span>Windows MySQL</span>服务器，根据下面规则确定服务器使用的服务名和选项文件：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果在服务安装命令中，没有在<span>--install</span>选项后面指定了服务名或使用默认服务名<span>(</span><span>MySQL</span><span>)</span>，服务器则使用<span>MySQL</span>服务名并从标准选项文件的<span>[mysqld]</span>组读取选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果在服务安装命令中，在<span>--install</span>选项后面指定的服务名不是默认服务名<span>(</span><span>MySQL</span><span>)</span>。则从具有相同服务名的组中读取选项，并从标准选项文件读取选项。</p>
			<p>服务器还从标准选项文件的<span>[mysqld]</span>组读取选项。你可以使用<span>[mysqld]</span>组中的选项用于所有<span>MySQL
			</span>服务，还可以使用具有相同服务名的组，用于该服务名所对应的服务器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果在服务安装命令中，在服务名后面指定了<span>--defaults-file</span>选项，服务器只从命名文件的<span>[mysqld]</span>组中读取选项，忽略标准选项文件。</p>
			<p>对于更复杂的例子可以考虑使用命令：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --install MySQL --defaults-file=C:\my-opts.cnf</span></b></span></pre>
			<p>该命令中，<span>--install</span>选项后面给出了默认服务名<span>(</span><span>MySQL</span><span>)</span>。如果未给出<span>--defaults-file</span>选项，该命令可以让服务器从标准选项文件的<span>[mysqld]</span>组中读数。由于提供了<span>--defaults-file</span>选项，服务器只从命名文件的<span>[mysqld]</span>组读取选项。</p>
			<p>还可以在启动<span>MySQL</span>服务之前，在<span>Windows
			<strong><span>Services</span></strong></span>工具中指定启动参数选项。</p>
			<p><span>MySQL</span>服务器安装为服务后，<span>Windows</span>启动时自动启动服务。还可以从<strong><span>Services</span></strong>工具直接启动服务，或使用命令<strong><span>NET 
			START MySQL</span></strong>。<strong><span>NET</span></strong>命令忽略大小写。</p>
			<p>做为服务运行时，<strong><span  style="font-family:
宋体">mysqld</span></strong>不能访问控制台窗口，因此看不见任何消息。如果<strong><span>mysqld</span></strong>未启动，检查错误日志看看服务器是否写入了显示问题原因的任何消息。错误日志位于<span>MySQL</span>数据目录中<span>(</span>例如，<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span><span>)</span>，是带后缀<span>.err</span>的文件。</p>
			<p>如果<span>MySQL</span>服务器安装为服务，并且服务正运行，<span>Windows</span>关闭时自动停止服务。还可以通过<span>Services</span>工具、<strong><span>NET 
			STOP MySQL</span></strong>命令或 <strong>
			<span>mysqladmin shutdown</span></strong>命令手动停止服务器。</p>
			<p>如果不想在引导过程中自动启动服务，还可以将服务设置为手动启动模式。实现的方法是使用<span>--install-manual</span>选项而非<span>--install</span>选项：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --install-manual</span></b></span></pre>
			<p>要想卸载服务器，如果服务正运行则应首先使用命令<strong><span>NET 
			STOP MYSQL</span></strong>停止服务。然后使用<span>--remove</span>选项卸载服务：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --remove</span></b></span></pre>
			<p>如果<strong><span>mysqld</span></strong>不是服务，可以从命令行启动它。详细说明参见<a href="#windows-start-command-line" title="2.3.11. Starting MySQL from the Windows Command Line">2.3.11节，“从Windows命令行启动MySQL”</a>。</p>
			<p>如果在安装过程中遇到问题，请参阅<a href="#windows-troubleshooting" title="2.3.14. Troubleshooting a MySQL Installation Under Windows">2.3.14节，“在Windows环境下对MySQL安装的故障诊断与排除”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-testing"></a>
			2.3.13.&nbsp;测试MySQL安装</h3></div></div></div><a class="indexterm" name="id2711089"></a><a class="indexterm" name="id2711096"></a></div><div class="section"><div class="titlepage"><div><div>
			可以通过以下命令测试<span>MySQL</span>服务器是否工作：<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqlshow</span></b></span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqlshow -u root mysql</span></b></span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqladmin version status proc</span></b></span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql test</span></b></span></pre>
			<p>如果<strong><span>mysqld</span></strong>对客户端程序<span>TCP/IP</span>连接的响应较慢，可能是<span>DNS</span>问题。此时，使用<span>--skip-name-resolve</span>选项启动<strong><span>mysqld</span></strong>，在<span>MySQL</span>授权表的<span>Host</span>列只使用<span>localhost</span>和<span>IP</span>号。</p>
			<p>可以通过<span>--pipe</span>或<span>--protocol=PIPE</span>选项强制<span>MySQL</span>客户端使用命名管道连接代替<span>TCP/IP</span>连接，或指定<span>.</span><span>(</span>阶段<span>)</span>做为主机名。使用<span>--socket</span>选项指定管道名。</p>
			<h3 class="title"><a name="windows-troubleshooting"></a>
			2.3.14.&nbsp;在Windows环境下对MySQL安装的故障诊断与排除</h3></div></div></div>
			<p>首次安装、运行<span>MySQL</span>时，你可能会遇到一些错误，使<span>MySQL</span>服务器不能启动。本节的目的是帮助你诊断并纠正这些错误。</p>
			<p>解决服务器问题时你的第一资料是错误日志。<span>MySQL</span>服务器使用错误日志来记录服务器不能启动的信息。错误日志位于<span>my.ini</span>文件指定的数据目录中。默认数据目录位于<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\dat</span>。请参见<a href="database-administration.html#error-log" title="5.11.1. The Error Log">5.11.1节，“错误日志”</a>。</p>
			<p>另一个错误相关信息源是<span>MySQL</span>服务启动时控制台上显示的消息。将<strong><span>mysqld</span></strong>安装为服务后，从命令行通过<strong><span>NET 
			START mysql</span></strong>命令来查看<span>MySQL</span>服务启动相关的错误消息。请参见<a href="#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12节，“以Windows服务方式启动MySQL”</a>。</p>
			<p>下面距离说明了首次安装并启动<span>MySQL</span>服务时会遇到的最常见的错误消息：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>System error 1067 has occurred.</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Fatal error: Can&#39;t open privilege tables: Table &#39;mysql.host&#39; doesn&#39;t exist</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>当<span>MySQL</span>服务器找不到<span>MySQL</span>权限数据库或关键文件时会出现这些消息。当<span>MySQL</span>基或数据目录没有安装在默认位置<span>(</span><span><span>C</span><span>：<span>\mysql</span></span></span>和 
			<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span><span>)</span>，而是安装到其它位置时通常会遇到该问题。</p>
			<p>发生该问题的一种情况是对<span>MySQL</span>进行升级或安装到了新位置，但是没有对配置文件进行更新以对应新的安装位置。此外还可能是新旧配置文件冲突，当升级<span>MySQL</span>时，一定要删除或重新命名旧的配置文件。</p>
			<p>如果你没有将<span>MySQL</span>安装到<span>C:\Program 
			Files\MySQL\MySQL Server 5.1</span>目录下，而是安装到了其它目录下，你需要通过使用配置<span>(</span><span>my.ini</span><span>)</span>文件让<span>MySQL</span>服务器知道安装目录。<span>my.ini</span>文件应位于<span>Windows</span>目录下，典型为<span><span>C</span><span>：<span>\WINNT</span></span></span>或<span><span>C</span><span>：<span>\WINDOWS</span></span></span>。可以在命令提示符下输入下面的命令从<span>WINDIR</span>环境变量值中确定确切位置：</p>
			<pre ><span>C</span>：<span>\&gt; </span><span><b><span>echo %WINDIR%</span></b></span></pre>
			<p>可以通过文本编辑器（例如记事本）来创建并修改选项文件。例如，如果<span>MySQL</span>安装在<span><span>E</span><span>：<span>\mysql</span></span></span>下<span>，</span>数据目录在<span>D:\MySQLdata</span>，你可以创建选项文件并设置<span>[mysqld]</span>来指定<span>basedir</span>和<span>datadir</span>参数的值：</p>
			<pre ><span>[mysqld]</span></pre>
			<pre ><span># set basedir to your installation path</span></pre>
			<pre ><span>basedir=E:/mysql</span></pre>
			<pre ><span># set datadir to the location of your data directory</span></pre>
			<pre ><span>datadir=D:/MySQLdata</span></pre>
			<p>请注意应使用<span>(</span>正<span>)</span>斜线而不是反斜线在选项文件中指定<span>Windows</span>路径名。如果使用反斜线，则必须使用双斜线：</p>
			<pre ><span>[mysqld]</span></pre>
			<pre ><span># set basedir to your installation path</span></pre>
			<pre ><span>basedir=C:\\Program Files\\MySQL\\MySQL Server 5.1</span></pre>
			<pre ><span># set datadir to the location of your data directory</span></pre>
			<pre ><span>datadir=D:\\MySQLdata</span></pre>
			<p>如果在<span>MySQL</span>配置文件中更改<span>datadir</span>值，在重新启动<span>MySQL</span>服务器之前，必须移动已有<span>MySQL</span>数据目录中的内容。</p>
			<p>参见<a href="#windows-create-option-file" title="2.3.8. Creating an Option File">2.3.8节，“创建选项文件”</a>。</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Error: Cannot create Windows service for MySql. Error: 0</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>当你没有事先停止并卸载已有<span>MySQL</span>服务，并且使用<span>MySQL 
			Configuration Wizard</span>（配置向导）重新安装或升级<span>MySQL</span>时，会遇到该问题。发生的原因是，当配置向导试图安装服务时，它发现已经有一个同名的服务。</p>
			<p>解决该问题的一个方案是使用配置向导时选择<span>mysql</span>之外的其它服务名。这样可以正确安装新服务，但保留了原来的服务。但是这样不好，最好是卸掉不再使用的旧服务。</p>
			<p>要想永远卸掉旧的<span>MySQL</span>服务，通过管理权限用户在命令行执行下面的命令：</p>
			<pre ><span>C:\&gt;</span><span><b><span>sc delete mysql</span></b></span></pre>
			<pre ><span>[SC] DeleteService SUCCESS</span></pre>
			<p>如果<span>Windows</span>版本中没有<span>sc</span>工具，可以从<span><a target="_top"  href="http://www.microsoft.com/windows2000/techinfo/reskit/tools/existing/delsrv-o.asp"><span>
			<u><span style="color:blue">
			http://www.microsoft.com/windows2000/techinfo/reskit/tools/existing/delsrv-o.asp</span></u>
			</span></a></span>下载<span>delsrv</span>工具并使用<span>delsrvMySQL</span>语法。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-upgrading"></a>
			2.3.15.&nbsp;在Windows下升级MySQL</h3></div></div></div><a class="indexterm" name="id2711468"></a>
			<p>本节列出了在<span>Windows</span>中升级<span>MySQL</span>应采取的步骤。</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>进行升级前你应先备份当前的<span>MySQL</span>安装。请参见<a href="database-administration.html#backup" title="5.9.1. Database Backups">5.9.1节，“数据库备份”</a>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>从<a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>下载最新<span>Windows</span>版<span>MySQL</span>。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>升级<span>MySQL</span>前，必须停止服务器。</p>
			<p>如果服务器安装为服务，必须在命令提示符下在命令行中用下面的命令停止服务：</p>
			<pre ><span>C</span>：<span>\&gt; </span><span><b><span>NET STOP MYSQL</span></b></span></pre>
			<p>如果<span>MySQL</span>服务器不是服务，使用下面的命令停止服务器：</p>
			<pre ><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqladmin -u root shutdown</span></b></span></pre>
			<p>
			<span >4.<span>&nbsp;&nbsp;&nbsp;
			</span></span><span>当从以前至的<span>4.1.5</span>版本升级到<span>MySQL 
			5.1</span>时<span>,</span>或从<span>Zip</span>文件安装的<span>MySQL</span>升级到<span>MySQL
			</span></span><span>Installation Wizard</span>（<span>安装帮助）安装的<span>MySQL</span>时，你必须手动卸载前面安装的<span>MySQL</span>服务。</span></p>
			<p>要想卸载<span>MySQL</span>服务，使用下面的命令：</p>
			<pre ><span>C</span>：<span>\&gt; </span><span><b><span>C:\mysql\bin\mysqld --remove</span></b></span></pre>
			<p><strong>
			<span>如果你不想卸载已有的服务，<span>MySQL 
			Installation Wizard</span>（安装帮助）则不会正确安装新的<span>MySQL</span>服务。</span></strong></p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果你使用<span>MySQL Installation Wizard</span>（安装帮助），按照<a href="#windows-install-wizard" title="2.3.4. Using the MySQL Installation Wizard">2.3.4节，“使用MySQL安装向导”</a>的描述来启动帮助。</p>
			<p>
			<span>6.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果用<span>Zip</span>文件安装<span>MySQL</span>，应提取文件。你可以覆盖已有的<span>MySQL</span>安装<span>(</span>通常位于<span><span>C</span><span>：<span>\mysql</span></span></span><span>)</span>，或将它安装到其它目录，例如 
			<span>
			<span>C</span><span>：<span>\mysql4</span></span></span>。建议覆盖原有的安装。</p>
			<p>
			<span>7.<span>&nbsp;&nbsp;&nbsp;
			</span></span>重新启动服务器。如果你运行<span>MySQL</span>服务，则使用<strong><span>NET 
			START MySQL</span></strong>，还可以直接调用<strong><span>mysqld</span></strong>。</p>
			<p>
			<span>8.<span>&nbsp;&nbsp;&nbsp;
			</span></span>关于在<span>Windows</span>之外的操作系统升级<span>MySQL</span>的详细信息，请参阅<a href="#upgrade" title="2.10. Upgrading MySQL">2.10节，“升级MySQL”</a>。</p>
			<p>
			<span>9.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果遇到错误，参见
            <a href="#windows-troubleshooting" title="2.3.14. Troubleshooting a MySQL Installation Under Windows">
			2.3.14节，“在Windows环境下对MySQL安装的故障诊断与排除”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-vs-unix"></a>
			2.3.16.&nbsp;Windows版MySQL同Unix版MySQL对比</h3></div></div></div><a class="indexterm" name="id2711671"></a><a class="indexterm" name="id2711682"></a>
			<p>已经证明，<span>Windows</span>版<span>MySQL</span>很稳定。<span>Windows</span>版<span>MySQL</span>的功能与相应的<span>Unix</span>版相同，只有以下例外：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			Windows 95</span><span>和线程</span></strong></p>
			<p><span>Windows 95</span>创建一个线程时大约需要<span>200</span>字节的主内存。<span>MySQL</span>的每个连接都会创建一个新线程，因此如果你的服务器正处理许多连接，你不应当在<span>Windows 
			95</span>中运行<strong><span>mysqld</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>有限的端口数目</span></strong></p>
			<p><span>Windows</span>系统有大约<span>4,000</span>个端口供客户端连接，某个端口的连接关闭后，在能够重新利用该端口前，需要<span>2</span>至<span>4</span>分钟。在客户端频繁连接并从服务器上断开时，在可以重新使用关闭的端口前，有可能用完了所有可用的端口。如果发生这种情况，<span>MySQL</span>服务器不会响应，即使它仍在运行。请注意机器上运行的其它应用程序也可以使用端口，此时可供<span>MySQL</span>使用的端口数要少。</p>
			<p>详细信息参见<span><a target="_top"  href="http://support.microsoft.com/default.aspx?scid=kb;en-us;196271"><span><u><span style="color:blue">http://support.microsoft.com/default.aspx?scid=kb;en-us;196271</span></u>
			</span></a></span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>并行读</span></strong></p>
			<p><span>MySQL</span>依靠<span>pread()</span>和<span>pwrite()</span>系统调用来同时使用<span>INSERT</span>和<span>SELECT</span>。目前我们使用互斥来竞争<span>pread()</span>和<span>pwrite()</span>。我们将来想用虚拟接口替换文件级接口，因此要想更快，我们可以在<span>NT</span>、<span>2000</span>和<span>XP</span>上使用<span>readfile()</span><span>/</span><span>writefile()</span>接口。目前<span>MySQL 
			5.1</span>可以打开的文件的限制数目为<span>2,048,</span>意味着在<span>Windows 
			NT</span>，<span>2000,XP</span>和<span>2003</span>上可以运行的并行线程不如<span>Unix</span>上多。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>阻塞读</span></strong></p>
			<p><span>MySQL</span>为每个连接使用阻塞读取，如果启用了命名管道连接，其含义如下：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>连接不会在<span>8</span>小时后自动断开，而在<span>Unix</span>版<span>MySQL</span>中会发生。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>如果连接被挂起，不杀掉<span>MySQL</span>则不会将其中断。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><strong><span>mysqladmin 
			kill</span></strong>不会杀掉睡眠中的连接。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>只要有睡眠连接，<strong><span>mysqladmin 
			shutdown</span></strong>不会中断。</p>
			<p>我们计划在将来修复该问题。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>ALTER TABLE</span></b></span></p>
			<p>执行<span>ALTER 
			TABLE</span>语句时，将该表锁定不让其它线程使用。在<span>Windows</span>中，你不能删除正被另一个线程使用的文件。在将来，我们会找出办法解决该问题。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>DROP TABLE</span></b></span></p>
			<p>在<span>Windows</span>中对一个被<span>MERGE</span>表应用的表执行<span>DROP 
			TABLE</span>不会实现，因为<span>MERGE</span>处理器将表从<span>MySQL</span>上层映射隐藏起来。由于<span>Windows</span>不允许删除打开的文件，必须在删除表之前首先清空所有<span>MERGE</span>表<span>(</span>使用<span>FLUSH 
			TABLES</span><span>)</span>或删掉<span>MERGE</span>表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>DATA DIRECTORY</span></b></span><strong><span> 
			and </span></strong><span><b>
			<span>INDEX DIRECTORY</span></b></span></p>
			<p>在<span>Windows</span>中将忽略<span>DATA 
			DIRECTORY</span>和<span>INDEX 
			DIRECTORY</span>选项，因为<span>Windows</span>不支持符号连接。在具有非功能<span>realpath()</span>调用的系统中，这些选项也被忽略。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>DROP DATABASE</span></b></span></p>
			<p>你不能删掉正被线程使用的数据库。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>从<span>Task 
			Manager</span>（任务管理器）杀掉<span>MySQL</span></span></strong></p>
			<p>你不能从<span>Task Manager</span>（任务管理求）或使用<span>Windows 
			95</span>的<span>shutdown</span>工具来杀掉<span>MySQL</span>。你必须通过<strong><span>mysqladmin 
			shutdown</span></strong>停止它。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>大小写名</span></strong></p>
			<p>由于<span>Windows</span>对文件名大小写不敏感。因此在<span>Windows</span>中<span>MySQL</span>数据库名和表名对大小写也不敏感。唯一的限制是在同一个语句中，必须同时使用大写或小写指定数据库名和表名。请参见<a href="language-structure.html#name-case-sensitivity" title="9.2.2. Identifier Case Sensitivity">9.2.2节，“识别符大小写敏感性”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>‘</span></strong><span><b><span>\</span></b></span><strong><span>’路径名间隔符</span></strong></p>
			<p><span>Windows</span>中的路径名用‘<span>\</span>’符间隔开，在<span>MySQL</span>中还是转义字符。如果你使用<span>LOAD 
			DATA INFILE</span>或<span>SELECT 
			... INTO OUTFILE</span>，用‘<span>/</span>’符使用<span>Unix-</span>类文件名：</p>
			<pre ><span>mysql&gt; </span><span><b><span>LOAD DATA INFILE &#39;C:/tmp/skr.txt&#39; INTO TABLE skr;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT * INTO OUTFILE &#39;C:/tmp/skr.txt&#39; FROM skr;</span></b></span></pre>
			<p>你还可以使用双‘<span>\</span>’符：</p>
			<pre ><span>mysql&gt; </span><span><b><span>LOAD DATA INFILE &#39;C:\\tmp\\skr.txt&#39; INTO TABLE skr;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT * INTO OUTFILE &#39;C:\\tmp\\skr.txt&#39; FROM skr;</span></b></span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>管道问题。</span></strong></p>
			<p>管道不能在<span>Windows</span>命令行提示符下可靠地工作。如果管道包括字符<span>^Z</span><span>/</span><span>CHAR(24)</span>，<span>Windows</span>认为遇到了文件末尾并中断程序。</p>
			<p>这主要是按照如下所示使用二进制日志的主要问题：</p>
			<pre ><span>C</span>：<span>\&gt;</span><span><b><span>mysqlbinlog binary-log-name | mysql --user=root</span></b></span></pre>
			<p>如果使用日志时出现问题，怀疑是由于<span>^Z</span><span> 
			/ </span>
			<span>CHAR(24)</span>字符，你可以使用下面的程序：</p>
			<pre ><span>C:\&gt; </span><span><b><span>mysqlbinlog binary-log-file --result-file=/tmp/bin.sql</span></b></span></pre>
			<pre ><span>C:\&gt; </span><span><b><span>mysql --user=root --execute &quot;source /tmp/bin.sql&quot;</span></b></span></pre>
			<p>后面的命令还可以用来可靠读取任何包含二进制数据的<span>SQL</span>文件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>Access denied for user</span></b></span><strong><span>错误</span></strong></p>
			<p>如果你试图运行<span>MySQL</span>客户端程序来连接同一机器上运行的服务器，但是遇到错误<span>Access 
			denied for user &#39;<i>some-user</i>&#39;@&#39;unknown&#39; to database &#39;mysql&#39;</span>，这意味着<span>MySQL</span>不能正确识别你的主机名。</p>
			<p>要解决该问题，你应当创建一个名为<span>\windows\hosts</span>包含下面信息的文件：</p>
			<pre ><span>127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost</span></pre>
			<p>这儿有一些公开问题，提供给想要帮助我们改进<span>Windows</span>中的<span>MySQL</span>的人们：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>增加宏来使用<span>Windows</span>提供的更快的线程安全增<span>/</span>减方法。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="linux-rpm"></a>2.4. 在Linux下安装MySQL</h2></div></div></div><a class="indexterm" name="id2712323"></a><a class="indexterm" name="id2712330"></a><a class="indexterm" name="id2712337"></a>
		<p>建议在<span>Linux</span>中使用<span>RPM</span>包来安装<span>MySQL</span>。<span>MySQL 
		RPM</span>目前已经嵌入到<span>SuSE Linux 7.3</span>系统中，但是应当能在大多数支持<strong><span>rpm</span></strong>和使用<span>glibc</span>的<span>Linux</span>版本中工作。要想获得<span>RPM</span>软件包，参见<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3节，“怎样获得MySQL”</a>。</p>
		<p><span>MySQL AB</span>不提供与具体平台相关的<span>RPM</span>；具体平台相关的<span>RPM</span>和通用<span>RPM</span>之间的区别是具体平台相关<span>RPM</span>为目标平台而构建，为动态连接。而通用<span>RPM</span>与<span>Linux</span>线程之间是静态连接。</p>
		<p><strong><span>注释：</span></strong>通常由其它供应商提供<span>MySQL</span>的<span>RPM</span>分发版。其特征和功能与<span>MySQL 
		AB</span>所构建的不同，该手册中的指令不一定适合安装其它供应商提供的<span>MySQL</span>的<span>RPM</span>分发版。此时应咨询供应商的说明。</p>
		<p>如果<span>RPM</span>文件有问题<span>(</span>例如，如果你收到错误“<span>Sorry, 
		the host &#39;<i>xxxx</i>&#39; could not be looked up</span>”<span>)</span>，参见<a href="#binary-notes-linux" title="2.12.1.2. Linux Binary Distribution Notes">2.12.1.2节，“Linux二进制分发版说明”</a>。</p>
		<p>在大多数情况，你只需要安装<span>MySQL-server</span>和<span>MySQL-client</span>软件包来安装<span>MySQL</span>。在标准安装中不需要其它的包。如果你想要运行含更多功能的<span>MySQL-Max</span>服务器，还应当安装<span>MySQL</span><span>-Max</span><span> 
		RPM</span>。必须先安装<span>M</span><span> 
		MySQL-server</span><span> RPM</span>再安装该模块。请参见<a href="database-administration.html#mysqld-max" title="5.1.2. The mysqld-max Extended MySQL Server">5.1.2节，“mysq<span><strong class="command">ld-max扩展My</strong></span>SQL服务器”</a>。</p>
		<p>如果安装<span>MySQL</span>软件包时出现从属错误<span>(</span>例如，“<span>error: 
		removing these packages would break dependencies: libmysqlclient.so.10 
		is needed by ..</span>”<span>)</span>，你还应当安装包<span>MySQL-shared-compat</span>，其中包括两个向后兼容的共享库<span>(MySQL 
		4.0</span>为<span>libmysqlclient.so.12</span>，<span>MySQL 
		3.23</span>为<span>libmysqlclient.so.10</span><span>)</span>。</p>
		<p>许多<span>Linux</span>分发版包含了<span>MySQL 3.23</span>，通常动态连接应用程序以节省硬盘空间。如果这些共享库在单独的包内<span>(</span>例如，<span>MySQL-shared</span><span>)</span>，只需要安装这些包并升级<span>MySQL</span>服务器和客户端软件包<span>(</span>为静态连接，不依赖共享库<span>)</span>。<span>对于包含与<span>MySQL</span>服务器相同软件包中的共享库的分发版<span>(</span>例如，<span>Red 
		Hat Linux)</span>，你可以安装<span>3.23 </span></span>
		<span>
		MySQL-shared</span><span> RPM</span><span>，或使用</span><span>MySQL-shared-compat</span><span>包。</span></p>
		<p>可以使用以下<span>RPM</span>包：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-server-<i>VERSION</i>.i386.rpm</span></p>
		<p><span>MySQL</span>服务器。你需要该选项，除非你只想连接运行在另一台机器上的<span>MySQL</span>服务器。
		注释：在<span>MySQL 
		4.0.10</span>之前，服务器<span>RPM</span>文件被称为<span>MySQL-<i>VERSION</i>.i386.rpm</span>。也就是说，名称中不含有<span>-server</span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-Max-<i>VERSION</i>.i386.rpm</span></p>
		<p><span>MySQL-Max</span>服务器。该服务器具有其它功能，这是<span>MySQL-server</span><span> 
		RPM</span>不具备的。你必须首先安装<span>MySQL-server</span><span> 
		RPM</span>，因为<span>MySQL</span><span>-Max</span><span> 
		RPM</span>依赖于它。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-client-<i>VERSION</i>.i386.rpm</span></p>
		<p>标准<span>MySQL</span>客户端程序。你可能总是要安装该软件包。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-bench-<i>VERSION</i>.i386.rpm</span></p>
		<p>测试和基准。需要<span>Perl</span>和<span><span>DBD</span><span>：：<span>mysql</span></span></span>模块。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-devel-<i>VERSION</i>.i386.rpm</span></p>
		<p>库和包含文件，如果你想要编译其它<span>MySQL</span>客户端，例如<span>Perl</span>模块，则需要。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-shared-<i>VERSION</i>.i386.rpm</span></p>
		<p>该软件包包含某些语言和应用程序需要动态装载的共享库<span>(</span><span>libmysqlclient.so*</span><span>)</span>，使用<span>MySQL</span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-shared-compat-<i>VERSION</i>.i386.rpm</span></p>
		<p>该软件包包括<span>MySQL 3.23</span>和<span>MySQL 
		4.0</span>的共享库。如果你安装了应用程序动态连接<span>MySQL 3.23</span>，但是你想要升级到<span>MySQL 
		4.0</span>而不想打破库的从属关系，则安装该软件包而不要安装<span>MySQL-shared</span>。从<span>MySQL 
		4.0.13</span>起包含该安装软件包。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-embedded-<i>VERSION</i>.i386.rpm</span></p>
		<p>嵌入式<span>MySQL</span>服务器库<span>(</span>从<span>MySQL 
		4.0</span>起<span>)</span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-<i>VERSION</i>.src.rpm</span></p>
		<p>包含以前所有软件包的源码。可用来在其它架构上重建<span>RPM(</span>例如，<span>Alpha</span>或<span>SPARC)</span>。</p>
		<p>要想看到<span>RPM</span>软件包内的所有文件<span>(</span>例如，<span>MySQL-server</span><span> 
		RPM)</span>，运行：</p>
		<pre><span>shell&gt; </span><span><b><span>rpm -qpl MySQL-server-<i>VERSION</i>.i386.rpm</span></b></span></pre>
		<p>要想执行标准最小安装，运行：</p>
		<pre><span>shell&gt; </span><span><b><span>rpm -i MySQL-server-<i>VERSION</i>.i386.rpm</span></b></span></pre>
		<pre><span>shell&gt; </span><span><b><span>rpm -i MySQL-client-<i>VERSION</i>.i386.rpm</span></b></span></pre>
		<p>要想只安装客户端软件包，运行：</p>
		<pre><span>shell&gt; </span><span><b><span>rpm -i MySQL-client-<i>VERSION</i>.i386.rpm</span></b></span></pre>
		<p><span>RPM</span>提供在安装软件包前验证其完整性和真实性的功能。如果你要想了解关于该功能的更多信息，参见<a href="#verifying-package-integrity" title="2.1.4. Verifying Package Integrity Using MD5 Checksums or GnuPG">2.1.4节，“通过MD5校验和或GnuPG验证软件包的完整性<code class="literal"></code>”</a>。</p>
		<p>服务器<span>RPM</span>将数据放入<span>/var/lib/mysql</span>目录。<span>RPM</span>还为<span>mysql</span>用户创建登录账户<span>(</span>如果还没有<span>)</span>，用来运行<span>MySQL</span>服务器，并在<span>/etc/init.d/</span>创建相应条目，以便在引导时自动启动服务器。<span>(</span>这意味着如果你已经安装并且已经更改启动脚本，你可能要复制脚本，以便你安装新<span>RPM</span>时 
		不会丢掉脚本<span>)</span>。关于系统启动时如何自动启动<span>MySQL</span>的详细信息，参见
      <a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">
		2.9.2.2节，“自动启动和停止MySQL”</a>。</p>
		<p>如果想要在旧的不支持<span>/etc/init.d</span><span>(</span>直接或通过符号连接<span>)</span>初始化脚本的<span>Linux</span>分发版中安装<span>MySQL 
		RPM</span>，你应当创建一个指向初始化脚本实际安装的位置的符号连接。例如，如果安装位置为<span>/etc/rc.d/init.d</span>，安装<span>RPM</span>前使用这些命令创建<span>/etc/init.d</span>，作为指向该位置的符号连接：</p>
		<pre><span>shell&gt; </span><span><b><span>cd /etc</span></b></span></pre>
		<pre><span>shell&gt; </span><span><b><span>ln -s rc.d/init.d</span><span>。</span></b></span></pre>
		<p>目前主要<span>Linux</span>分发版应当支持使用<span>/etc/init.d</span>的新目录布局，因为需要<span>LSB(Linux</span>标准基<span>)</span>兼容性。</p>
		<p>如果你安装的<span>RPM</span>文件包括<span>MySQL-server</span>，安装后<span>MySQL<strong><span>d</span></strong></span>服务器应当能启动并运行。你应当能使用<span>MySQL</span>启动。</p>
		<p>如果出现问题，可以从二进制安装部分找到详细信息。<a href="#installing-binary" title="2.7. Installing MySQL on Other Unix-Like Systems">2.7节，“在其它类Unix系统中安装MySQL”</a>。</p>
		<p><strong><span>注释：</span></strong><span>MySQL</span>授权表中的账户开始没有密码。启动服务器后，应当按照<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9节，“安装后的设置和测试”</a>中的说明为它们设置密码。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="mac-os-x-installation"></a>
		2.5.在Mac OS X中安装MySQL</h2></div></div></div><a class="indexterm" name="id2712944"></a><a class="indexterm" name="id2712954"></a>
		<p>可以在<span>Mac OS X 10.2.x(</span>“<span class="quote"><span>Jaguar</span></span>”<span>)</span>和以上版本上<span>Mac 
		OS X</span>使用二进制安装软件包的<span>PKG</span>格式代替二进制分发版来安装<span>MySQL</span>。请注意该软件包不支持旧版本的<span>Mac 
		OS X(</span>例如，<span>10.1.x)</span>。</p>
		<p>安装软件包位于硬盘映象<span>(</span><span>.dmg</span><span>)</span>文件中，必须首先双击搜索起中的图标来安装该文件。应当安装图像并显示其内容。</p>
		<p>要想获得<span>MySQL</span>，参见<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3节，“怎样获得MySQL”</a>。</p>
		<p><strong><span>注释：</span></strong>在继续安装前，一定要使用<span>MySQL</span>管理器应用程序<span>(</span>在<span>Mac 
		OS X</span>服务器上<span>)</span>或通过命令行的<strong><span>mysqladmin 
		shutdown</span></strong>关闭所有运行<span>MySQL</span>服务器实例。</p>
		<p>要想安装<span>MySQL PKG</span>文件，双击软件包图标。将启动<span>Mac 
		OS X</span>安装软件包安装器，将指导你完成<span>MySQL</span>安装。</p>
		<p><span>Mac OS X</span>安装软件包的安装器中有一个缺陷，你会在目标盘选择对话框中发现该错误消息：</p>
		<pre><span>You cannot install this software on this disk. (null)</span></pre>
		<p>如果出现该错误，只需要点击<span>Go 
		Back</span>按钮返回前面的窗口。然后点击<span>Continue</span>再次选择目标盘，此时应当可以正确地选择目标盘。我们已经向<span>Apple</span>报告了该缺陷，它正在调查该问题。</p>
		<p><span>MySQL</span>的<span>Mac OS X PKG</span>安装到<span  >/usr/local/mysql-<i>VERSION</i></span>，并且还会安装一个符号连接，<span>/usr/local/mysql</span>，指向新的位置。如果有<span>/usr/local/mysql</span>目录，首先将它改名为<span>/usr/local/mysql.bak</span>。安装完后，安装器执行<strong><span  style="font-family:
宋体">mysql_install_db</span></strong>在<span>MySQL</span>数据库中创建授权表。</p>
		<p>安装布局与<strong><span  style="font-family:
宋体">tar</span></strong>文件二进制分发版类似；所有<span>MySQL</span>二进制代码位于目录<span>/usr/local/mysql/bin</span>中。默认情况，<span>MySQL</span>套接字文件创建为<span  >/tmp/mysql.sock</span>。请参见<a href="#installation-layouts" title="2.1.5. Installation Layouts">2.1.5节，“安装布局”</a>。</p>
		<p><span>MySQL</span>安装需要<span>Mac OS X</span>的<span  >mysql</span>用户账户。在<span>Mac 
		OS X 10.2</span>及以上版本中，默认情况应存在<span  >mysql</span>用户账户。</p>
		<p>如果正运行<span>Mac OS X</span>服务器，需要安装<span>MySQL</span>。随<span>Mac 
		OS X</span>服务器版本安装的<span>MySQL</span>版本如下表所示：</p>
		<table border="1" cellpadding="0" id="table7">
			<tr>
				<td>
				<p><strong>
				<span>Mac OS X</span><span>服务器版本</span></strong></td>
				<td>
				<p><strong>
				<span>MySQL</span><span>版本</span></strong></td>
			</tr>
			<tr>
				<td>
				<p><span>10.2-10.2.2</span></td>
				<td>
				<p><span>3.23.51</span></td>
			</tr>
			<tr>
				<td>
				<p><span>10.2.3-10.2.6</span></td>
				<td>
				<p><span>3.23.53</span></td>
			</tr>
			<tr>
				<td>
				<p><span>10.3</span></td>
				<td>
				<p><span>4.0.14</span></td>
			</tr>
			<tr>
				<td>
				<p><span>10.3.2</span></td>
				<td>
				<p><span>4.0.16</span></td>
			</tr>
			<tr>
				<td>
				<p><span>10.4.0</span></td>
				<td>
				<p><span>4.1.10a</span></td>
			</tr>
		</table>
		<p>本节只覆盖官方<span>MySQL Mac OS X PKG</span>版本。一定要阅读<span>Apple</span>关于<span>MySQL</span>安装的帮助信息：运行“<span class="quote">帮助视图</span>”应用程序，选择“<span class="quote"><span>Mac 
		OS X</span>服务器</span>”帮助，搜索“<span class="quote"><span>MySQL</span></span>”，阅读标题为“<span class="quote">安装<span>MySQL</span></span>”的内容。</p>
		<p>对于<span>Mac OS X</span>服务器上已经安装的<span>MySQL</span>版本，如果早于<span>4.0</span>，应特别注意应当使用<strong><span>mysqld_safe</span></strong>而不是<strong><span>safe_mysqld</span></strong>来启动<strong><span>mysqld</span></strong>。</p>
		<p>如果你前面在<span>Mac OS X</span>上安装了从<a href="http://www.entropy.ch" target="_top">http://www.entropy.ch</a>下载的<span>Marc 
		Liyanage</span>的<span>MySQL</span>软件包，你可以只使用该页给出的二进制安装布局按照更新说明来安装。</p>
		<p>如果你从<span>Marc</span>的<span>3.23.xx </span>版本或从<span>Mac 
		OS X</span>的<span>MySQL</span>服务器版本升级到官方<span>MySQL 
		PKG</span>，你还需要将已有<span>MySQL</span>授权表转换为当前格式，因为已经加了许多新的安全权限。请参见<a href="#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2节，“升级授权表”</a>。</p>
		<p>如果你想在系统启动过程中自动启动<span>MySQL</span>，你还需要安装<span>MySQL 
		Startup Item</span>。在<span>MySQL 5.1</span>中<span>,</span>它是<span>Mac 
		OS X</span>安装盘映像的一部分，是一个独立的安装软件包。只需要双击<span class="guiicon"><span>MySQLStartupItem.</span></span>图标并按照说明来安装。</p>
		<p>请注意<span>Startup Item</span>只需要安装一次！不需要在以后每次升级<span>MySQL</span>软件包时都安装它。</p>
		<p><span>MySQL 5.1</span>的<span>Startup Item</span>安装在<span  >/Library/StartupItems/MySQLCOM</span>。<span>(</span>在<span>MySQL 
		4.1.2</span>以前的版本<span>,</span>安装位置为<span  >/Library/StartupItems/MySQL</span>，但与<span>Mac 
		OS X</span>服务器安装的<span>MySQL Startup Item</span>冲突<span>)</span>。<span>Startup 
		Item</span>安装时在系统配置文件<span  >/etc/hostconfig</span>中加入变量<span>MySQL</span><span>COM=-YES-</span>。如果你想要<span>disable</span>自动启动<span>MySQL</span>，只需要将该变量更改为<span>MySQL</span><span>COM=-NO-</span>。</p>
		<p>在<span>Mac OS X</span>服务器上，默认<span>MySQL</span>安装使用<span  >/etc/hostconfig</span>文件中的变量<span>MySQL</span>。<span>MySQL 
		AB Startup Item</span>安装器将其设置为<span>MySQL</span><span>=-NO-</span>禁用该变量。这样可以避免启动时间与<span>MySQL 
		AB Startup Item</span>使用的<span>MySQL</span><span>COM</span>变量冲突。但是，不会关闭运行的<span>MySQL</span>服务器。你应当自己关闭。</p>
		<p>安装完后，可以在终端窗口运行下面的命令来启动<span>MySQL</span>。你必须具有管理员权限来执行该任务。</p>
		<p>如果你已经安装的<span>Startup Item</span>：</p>
		<p><span >shell&gt; <b>
		sudo /Library/StartupItems/MySQLCOM/MySQLCOM start</b></span></p>
		<p><span >(Enter your 
		password, if necessary)</span></p>
		<p><span >(Press 
		Control-D or enter &quot;exit&quot; to exit the shell)</span></p>
		<p>如果不使用<span>Startup Item</span>，输入下面的命令序列：</p>
		<p>
		<span  >shell&gt; </span>
		<b><span >cd /usr/local/mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >sudo ./bin/mysqld_safe</span></b></p>
		<p>
		<span  >(Enter your 
		password, if necessary)</span></p>
		<p>
		<span  >(Press 
		Control-Z)</span></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >bg</span></b></p>
		<p>
		<span  >(Press 
		Control-D or enter &quot;exit&quot; to exit the shell)</span></p>
		<p>你应当能够连接<span>MySQL</span>服务器，例如，通过运行<span>/usr/local/mysql/bin/mysql</span>来连接。</p>
		<p><strong><span>注释：</span></strong><span>MySQL</span>授权表中的账户开始没有密码。启动服务器后，应当按照<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9节，“安装后的设置和测试”</a>中的说明来设置密码。</p>
		<p>你可以为外壳源文件起一个别名，使它更容易访问常用的程序，例如从命令行运行<strong><span>mysql</span></strong>和<strong><span>mysqladmin</span></strong>。<strong><span>tcsh</span></strong>语法为：</p>
		<pre><span>aliasMySQL /usr/local/mysql/bin/mysql</span></pre>
		<pre><span>aliasMySQLadmin /usr/local/mysql/bin/mysqladmin</span></pre>
		<p>对于<strong><span>bash</span></strong>，使用：</p>
		<pre><span>aliasMySQL=/usr/local/mysql/bin/mysql</span></pre>
		<pre><span>aliasMySQLadmin=/usr/local/mysql/bin/mysqladmin</span></pre>
		<p>最好是在<span  >PATH</span>环境变量中加入<span>/usr/local/mysql/bin</span>。例如，如果外壳命令是<strong><span  style="font-family:
宋体">tcsh</span></strong>，在<span>$HOME/.tcshrc</span>文件中加入下面一行：</p>
		<pre><span>setenv PATH ${PATH}:/usr/local/mysql/bin</span></pre>
		<p>如果根目录中没有<span>.tcshrc</span>文件，则用文本编辑器创建该文件。</p>
		<p>如果你对已有的安装进行升级，请注意安装新<span>MySQL PKG</span>时不会卸载旧的安装目录。遗憾的是，<span>Mac 
		OS X</span>安装器尚未提供功能来正确升级前面安装的软件包。</p>
		<p>要想在新安装中使用已有的数据库，你需要将旧数据目录中的内容复制到新的数据目录。执行该操作时，确保关闭新、旧服务器。将以前安装的<span>MySQL</span>数据库文件拷贝过来并成功启动新的服务器后，应当卸载旧的文件以节省硬盘空间。并且，还应当卸掉位于<span  >/Library/Receipts/mysql-<i>VERSION</i>.pkg</span>的旧版本<span>Package 
		Receipt</span>目录。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="netware-installation"></a>2.6. 在NetWare中安装MySQL</h2></div></div></div><a class="indexterm" name="id2713546"></a><a class="indexterm" name="id2713553"></a>
		<p>将<span>MySQL</span>装入到<span>NetWare</span>首先由<span>Novell</span>实现。<span>Novell</span>客户应当满意，<span>NetWare 
		6.5</span>中捆绑了<span>SQL</span>二进制，并具有自动商业使用许可，用于运行该版本<span>NetWare</span>的所有服务器。</p>
		<p><span>NetWare</span>的<span>MySQL</span>使用<span>NetWare</span>的<span>Metrowerks 
		CodeWarrior</span>和专用跨编译版<span>GNU</span>自动工具编译而成。</p>
		<p>可以从<span><a target="_top"  href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a></span>获得最新的二进制软件包<span>NetWare</span>。请参见<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3节，“怎样获得MySQL”</a>。</p>
		<p>为了使<span>MySQL</span>驻留在主机上，<span>NetWare</span>服务器必须满足以下要求：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>安装的<span><a target="_top"  href="http://support.novell.com/filefinder/18197/index.html">NetWare 
		6.5</a> </span>或<span><a target="_top"  href="http://support.novell.com/filefinder/13659/index.html">NetWare 
		6.0</a></span>的<span>Latest Support Pack</span>（最新支持补丁）。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>系统必须满足<span>Novell</span>的最低要求以运行相关版本的<span>NetWare</span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>MySQL</span>数据及其二进制，必须安装到<span>NSS</span>卷内；不支持传统卷。</p>
		<p>要想在<span>NetWare</span>下安装<span>MySQL</span>，遵从下面的步骤：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>如果你对前面的安装进行升级，停止<span>MySQL</span>服务器。应使用下面的命令从服务器控制台完成：</p>
		<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>SERVER:&nbsp; mysqladmin -u root shutdown</span></pre>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>从客户端登录到目标服务器上，访问安装<span>MySQL</span>的位置。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>将二进制软件包<span>Zip</span>文件提取到服务器上。一定要使用<span>Zip</span>文件中的路径。简单地将文件提取到<span><span>SYS</span><span>：<span>\</span></span></span>是很安全的。</p>
		<p>如果你从前面的安装升级，你可能需要复制数据目录<span>(</span>例如，<span  >SYS:MYSQL\DATA</span><span>)</span>和<span>my.cnf</span>（如果你已经定制）。然后你可以删除旧版本的<span>MySQL</span>。</p>
		<p><span>5.<span>&nbsp;&nbsp;&nbsp;
		</span></span>你可以将目录重新命名为更加一致和易于使用的名称。在本手册的例子中使用<span><span>SYS</span><span>：<span>MYSQL</span></span></span>来指向安装目录。</p>
		<p>请注意在<span>NetWare</span>上安装<span>MySQL</span>不会检测到是否已经安装了<span>NetWare</span>发布之外的<span>MySQL</span>版本。因此，如果你已经在<span><span>SYS</span><span>：<span>\MYSQL</span></span></span>安装了从网站上下载的最新<span>MySQL</span>版本<span>(</span>例如，<span>MySQL 
		4.1</span>或更新版本<span>)</span>，在升级<span>NetWare</span>服务器之前，必须重新命名文件夹；否则，<span><span>SYS</span><span>：<span>\MySQL</span></span></span>中的文件会被<span>NetWare 
		Support Pack</span>中的版本所覆盖。</p>
		<p><span>6.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在服务器控制台中，加入含有<span> MySQL NLM</span>的目录的搜索路径。例如：</p>
		<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>SERVER:&nbsp; SEARCH ADD SYS:MYSQL\BIN</span></pre>
		<p><span>8.<span>&nbsp;&nbsp;&nbsp;
		</span></span>初始化数据目录和授权表，如果需要，应在服务器控制台执行<strong><span>mysql_install_db</span></strong>。</p>
		<p><span>9.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在服务器控制台使用<strong><span  style="font-family:
宋体">mysqld_safe</span></strong>启动<span>MySQL</span>服务器。</p>
		<p><span>10.</span>要完成安装，还应当在<span>autoexec.ncf</span>中加入以下命令。例如，如果<span>MySQL</span>安装在<span><span>SYS</span><span>：<span>MYSQL</span></span></span>中，你想让<span>MySQL</span>自动启动，可以加入以下行：</p>
		<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span><span>#Starts the MySQL 5.1.x database server</span></pre>
		<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>SEARCH ADD SYS:MYSQL\BIN</span></pre>
		<pre><span>13.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>MYSQLD_SAFE</span></pre>
		<p>如果<span>MySQL</span>运行在<span>NetWare 
		6.0</span>上<span>,</span>我们强烈建议你在命令行中使用<span>--skip-external-locking</span>选项：</p>
		<pre ><span>#Starts the MySQL 5.1.x database server</span></pre>
		<pre ><span>SEARCH ADD SYS:MYSQL\BIN</span></pre>
		<pre ><span>MYSQLD_SAFE --skip-external-locking</span></pre>
		<p>还需要使用<span  >CHECK 
		TABLE</span>和<span  >REPAIR 
		TABLE</span>来替代<strong><span>myisamchk</span></strong>，因为<strong><span>myisamchk</span></strong>使用外部锁。已经知道外部锁在<span>NetWare 
		6.0</span>中有问题；在<span>NetWare 6.5</span>中已经解决了该问题。</p>
		<p><span>NetWare</span>中的<strong><span>mysqld_safe</span></strong>提供了窗口保留功能。当卸载<span>(</span>关闭<span>)<strong><span>mysqld_safe</span></strong> 
		NLM</span>时，默认情况窗口不会消失。相反，会提示用户输入：</p>
		<pre ><span>*&lt;NLM has terminated; Press any key to close the screen&gt;*</span></pre>
		<p>如果你想让<span>NetWare</span>自动关闭窗口，在<strong><span>mysqld_safe</span></strong><b>中</b>使用<span  >--autoclose</span>选项。例如：</p>
		<pre ><span>#Starts the MySQL 5.1.x database server</span></pre>
		<pre ><span>SEARCH ADD SYS:MYSQL\BIN</span></pre>
		<pre ><span>MYSQLD_SAFE --autoclose</span></pre>
		<p><span>14.</span>当首次安装或从前面的版本升级<span>MySQL 
		5.1</span>版时，应下载并安装最新的相应<span>Perl</span>模块和<span>PHP</span>扩展名：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>Perl for NetWare:
		<a target="_top"  href="http://forge.novell.com/modules/xfcontent/downloads.php/perl/Modules/">
		http://forge.novell.com/modules/xfcontent/downloads.php/perl/Modules/</a></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>PHP for NetWare:
		<a target="_top"  href="http://forge.novell.com/modules/xfcontent/downloads.php/php/Modules/">
		http://forge.novell.com/modules/xfcontent/downloads.php/php/Modules/</a></span></p>
		<p><span>&nbsp;(MySQL 4.1</span>的<span>PHP 
		5</span>扩展名适用于<span>MySQL 5.1)</span>。</p>
		<p>在<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a>中详细描述了<span>NetWare</span>中的<strong><span>mysqld_safe</span></strong>的行为。</p>
		<p>如果服务器上已经安装了<span>MySQL</span>，一定要检查<span>autoexec.ncf</span>中已有的<span>MySQL</span>启动命令，如果需要则编辑或删除这些命令。</p>
		<p><strong><span>注释：</span></strong><span>MySQL</span>授权表中的初始账户没有密码。启动服务器后，你应当使用<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9节，“安装后的设置和测试”</a>中的说明来设置密码。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="installing-binary"></a>2.7. 在其它类Unix系统中安装MySQL</h2></div></div></div><a class="indexterm" name="id2713971"></a><a class="indexterm" name="id2713982"></a>
		<p>本节介绍在各种平台上安装<strong><span>tar</span></strong>压缩文件格式的<span>MySQL</span>二进制分发版<span>(</span>文件有<span>.tar.gz</span><span>
		</span>扩展名<span>)</span>。详细目录参见<a href="#mysql-binaries" title="2.1.2.5. MySQL Binaries Compiled by MySQL AB">2.1.2.5节，“MySQL AB编译的MySQL二进制版本”</a>。</p>
		<p>要想获得<span>MySQL</span>，参见<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3节，“怎样获得MySQL”</a>。</p>
		<p><span>MySQL<strong><span style="font-family:
宋体">tar</span></strong></span>文件二进制分发版的文件名格式为<span  >mysql-<i>VERSION</i>-<i>OS</i>.tar.gz</span>，其中<span><i><span>VERSION</span></i></span>是版本号<span>(</span>例如，<span>5.1.2-alpha</span><span>)</span>，<span><i><span>OS</span></i></span>表示分发版安装的操作系统类型<span>(</span>例如，<span>pc-linux-i686</span><span>)</span>。</p>
		<p>除了这些通用软件包，我们还为各平台提供了具体的二进制安装软件包。关于如何安装的详细信息参见<a href="#quick-standard-installation" title="2.2. Standard MySQL Installation Using a Binary Distribution">2.2节，“使用二进制分发版的标准MySQL安装”</a>。</p>
		<p>你需要下面的工具来安装<span>MySQL <strong>
		<span>tar</span></strong></span>文件二进制分发版：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>GNU gunzip</span>解压缩分发版。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>一个适当的<span>tar</span>解包分发版。<span> 
		GNU tar</span>已知可以。一些操作系统中含有预安装的<strong><span>tar</span></strong>，已知有问题。例如，已知<span>Mac 
		OS X <strong><span>tar</span></strong></span>和<span>Sun
		<strong><span>tar</span></strong></span>对于长文件名有问题。在<span>Mac 
		OS X</span>中，你可以使用预安装的<strong><span  style="font-family:
宋体">gnutar</span></strong>程序。在其它系统中若<strong><span  style="font-family:
宋体">tar</span></strong>不完善，你应当首先安装<span>GNU <strong>
		<span>tar</span></strong></span>。</p>
		<p>如果你遇到问题，在把问题寄到<span>MySQL</span>邮件目录时，<strong><span>请一定使用</span></strong><span><b><span>mysqlbug</span></b></span>，就算问题不是一个缺陷，<span><b><span>mysqlbug</span></b></span>也会收集系统信息，将有助于其它人解决你的问题。不使用<span><b><span>mysqlbug</span></b></span>，你将减少得到你问题的一个解决方案的可能性！在你解包分发版后，你会<tt >在“<span>bin</span>”</tt>目录下找到<span><b><span>mysqlbug</span></b></span>。请参见<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3节，“如何通报缺陷和问题”</a>。</p>
		<p>必须执行以便安装并使用<strong><span style="
">MySQL</span></strong>二进制分发版的基本命令是：</p>
		<p>
		<span  >shell&gt; </span>
		<b><span >groupadd mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >useradd -g mysql mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >cd /usr/local</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >gunzip &lt; <i>/path/to/mysql-VERSION-OS</i>.tar.gz 
		| tar xvf -</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >ln -s <i>full-path-to-mysql-VERSION-OS</i> 
		mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >cd mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >scripts/mysql_install_db 
		--user=mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >chown -R root&nbsp; .</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >chown -R mysql data</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >chgrp -R mysql .</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >bin/mysqld_safe --user=mysql 
		&amp;</span></b></p>
		<p><strong><span>注释：</span></strong>该过程未设置<span>MySQL</span>账户的密码。完成下面的过程后，继续执行想<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9节，“安装后的设置和测试”</a>。</p>
		<p>下面为安装二进制分发版的更详细的描述：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>为<strong><span>mysqld</span></strong>增加一个登录用户和组：</p>
		<p>
		<span  >2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >groupadd 
		mysql</span></b></p>
		<p>
		<span  >3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >useradd 
		-g mysql mysql</span></b></p>
		<p>这些命令将增加<span>MySQL</span>组和<span>MySQL</span>用户。不同版本的<span>Unix</span>中，<strong><span>useradd</span></strong>和<strong><span>groupadd</span></strong>的语法可能会稍有不同。还可以称为<strong><span>adduser</span></strong>和<strong><span>addgroup</span></strong>。</p>
		<p>你可能会将这些用户和组命名为<span  >mysql</span>之外的名称。如果是这样，在下面的步骤中替换为相应的名称。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>挑选一个你想解开分发包的目录，进入该目录。在下面的例子中，我们将分发解包在“<span>/usr/local</span>”下（因此，下列说明假设你有权限在“<span>/usr/local</span>”中创建文件和目录，如果该目录被保护，你需要以<span>root</span>实施安装）<span>。</span></p>
		<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd /usr/local</span></b></span></pre>
		<p><span>6.<span>&nbsp;&nbsp;&nbsp;
		</span></span>从<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3节，“怎样获得MySQL”</a>中列出的站点之一获得一个分发文件。对于一个给定的版本，所有平台的二进制分发版均从相同的<span>MySQL</span>源码分发版构建。</p>
		<p><span>7.<span>&nbsp;&nbsp;&nbsp;
		</span></span>解包分发版，将创建安装目录。然后生成到该目录的一个符号链接：</p>
		<p>
		<span  >8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >gunzip &lt;
		<i>/path/to/mysql-VERSION-OS</i>.tar.gz | tar xvf -</span></b></p>
		<p>
		<span  >9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >ln -s <i>
		full-path-to-mysql-VERSION-OS</i> mysql</span></b></p>
		<p><strong>
		<span>tar</span></strong>命令创建<span  >mysql-<i>VERSION</i>-<i>OS</i></span>目录。<span>ln</span>命令生成到该目录的一个符号链接。这让你更容易地把安装目录指定为<span>/usr/local/mysql</span>。</p>
		<p>使用<span>GNU <strong>
		<span>tar</span></strong></span>，则不再需要<span>gunzip</span>。可以用下面的命令替换第一行来解包和提取分发版：</p>
		<pre ><span >shell&gt; </span><b><span>tar zxvf <i>/path/to/mysql-VERSION-OS</i>.tar.gz</span></b></pre>
		<p><span>10.</span>进入安装目录：</p>
		<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; <span><b>cd mysql</b></span></span></pre>
		<p>你会在<span>mysql</span>目录下发现几个文件和子目录，对安装目的最重要的是“<span>bin</span>”和“<span>scripts</span>”子目录。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>bin</span></p>
		<p>这个目录包含客户端程序和服务器，你应该把这个目录的完整路径加到<span>PATH</span>环境变量，以便<span>shell</span>能正确的找到<span>MySQL</span>程序。请参见<a href="environment-variables.html">附录F：</a><a href="environment-variables.html" title="Appendix F. Environment Variables"><i>环境变量</i></a>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span  >scripts</span></p>
		<p>这个目录包含<span>mysql_install_db</span>脚本，用来初始化<span  >mysql</span>数据库的
		授权表，其中贮存了服务器访问允许。</p>
		<p><span>12.</span>如果还没有安装<span>MySQL</span>，必须创建<span>MySQL</span>授权表：</p>
		<pre><span>13.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>scripts/mysql_install_db --user=mysql</span></b></span></pre>
		<p>如果你用<span>root</span>运行命令，应当使用<span  >--user</span>选项。选项的值应与你在第一步为运行服务器所创建的登录账户相同。如果你用该用户登录来运行命令，可以省略<span  >--user</span>选项。</p>
		<p>创建或升级授权表后，需要手动重新启动服务器。</p>
		<p><span>14.</span>将程序二进制的所有权改为<span><span>root</span><span>，</span></span>数据目录的所有权改为运行<strong><span>mysqld</span></strong><span>
		</span>的用户。如果位于安装目录<span>(</span><span>/usr/local/mysql</span><span>)</span>下，命令应为：</p>
		<p>
		<span  >15.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >chown -R 
		root&nbsp; .</span></b></p>
		<p>
		<span  >16.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >chown -R 
		mysql data</span></b></p>
		<p>
		<span  >17.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >chgrp -R 
		mysql .</span></b></p>
		<p>第一个命令将文件的所有属性改为<span>root</span>用户。第二个命令将数据目录的所有属性改为<span  >mysql</span>用户。第三个命令将组属性改为<span  >mysql</span>组。</p>
		<p><span>18.</span>如果你喜欢在引导机器时自动启动<span>MySQL</span>，可以拷贝<span>support-files/mysql.server</span>文件到系统有启动文件的地方。更多的信息可以在<span>support-files/mysql.server</span>脚本中和<a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2节，“自动启动和停止MySQL”</a>中找到。</p>
		<p><span>19.</span>如果安装了<span>DBI</span>和<span  >DBD::mysql</span><span>
		</span><span>Perl</span>模块，可以使用<b><span>bin/mysql_setpermission</span></b>脚本增加新账户。关于说明，参见 
		<a href="#perl-support" title="2.13. Perl Installation Notes">
		2.13节，“Perl安装注意事项”</a>。</p>
		<p><span>20.</span>如果你想使用<b><span>mysqlaccess</span></b>而在某个非标准的地点有<span>MySQL</span>分发版，你必须改变地点，在那儿<b><span>mysqlaccess</span></b>期望找到<b><span>mysql</span></b>客户端。编辑“<span>bin/mysqlaccess</span>”脚本，大约在第<span>18</span>行，寻找类似下面的行：</p>
		<pre><span>21.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp; </span><span>$MYSQL&nbsp;&nbsp;&nbsp;&nbsp; = &#39;/usr/local/bin/mysql&#39;;&nbsp;&nbsp;&nbsp; # path to mysql executable</span></pre>
		<p>改变路径以反映出<b><span>mysql</span></b>实际存储在你系统上的地点。如果不这样做，当运行<b><span>mysqlaccess</span></b>时，你将遇到一个<span>broken 
		pipe</span>的错误。</p>
		<p>在所有东西被解包并且安装以后，你应该初始化并且测试你的分发版。</p>
		<p>可以用下列命令启动<span>MySQL</span>服务器：</p>
		<pre><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
		<p>关于<strong><span>mysqld_safe</span></strong>的详细信息参见<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a>。</p>
		<p><strong><span>注释：</span></strong><span>MySQL</span>授权表中的账户开始没有密码。启动服务器后，应当使用<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9节，“安装后的设置和测试”</a>中的说明来设置密码。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="installing-source"></a>
		2.8.&nbsp;使用源码分发版安装MySQL</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#quick-install">
			2.8.1. 源码安装概述</a></span></dt><dt><span class="section">
			<a href="#configure-options">
			2.8.2. 典型配置选项<span><strong class="command"></strong></span></a></span></dt><dt><span class="section">
			<a href="#installing-source-tree">
			2.8.3. 从开发源码树安装</a></span></dt><dt><span class="section">
			<a href="#compilation-problems">
			2.8.4. 处理MySQL编译问题</a></span></dt><dt><span class="section">
			<a href="#mit-pthreads">
			2.8.5. MIT-pthreads注意事项</a></span></dt><dt><span class="section">
			<a href="#windows-source-build">2.8.6. 
			在Windows下从源码安装MySQL</a></span></dt><dt><span class="section">
			<a href="#windows-client-compiling">
			2.8.7. 在Windows下编译MySQL客户端</a></span></dt></dl></div><a class="indexterm" name="id2714841"></a><a class="indexterm" name="id2714851"></a><a class="indexterm" name="id2714861"></a>
		<p>安装源码之前，首先检查我们的二进制是否适合你的平台，是否可以工作。我们做了大量的工作确保我们的二进制用最合适的选项来构建。</p>
		<p>要获得<span>MySQLa </span>源码分发版，参见<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3节，“怎样获得MySQL”</a>。</p>
		<p><span>MySQL</span>源码分发版为<strong><span>tar</span></strong>压缩文件，文件名格式为<span  >mysql-<i>VERSION</i>.tar.gz</span>，其中 
		<i><span  >VERSION</span></i>是版本号，例如<span>5.1.2-alpha</span>。</p>
		<p>你需要下列工具构造并安装<strong><span>MySQL</span></strong>源码：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>GNU gunzip</span>解压缩该分发版。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>一个适当的<span>tar</span>解包分发版。<span>GNU 
		tar</span>已知可以。一些操作系统中含有预安装的<strong><span>tar</span></strong>，已知有问题。例如，已知<span>Mac 
		OS X <strong><span>tar</span></strong></span>和<span>Sun
		<strong><span>tar</span></strong></span>对于长文件名有问题。在<span>Mac 
		OS X</span>中，你可以使用预安装的<strong><span  style="font-family:
宋体">gnutar</span></strong>程序。在其它系统中若<strong><span  style="font-family:
宋体">tar</span></strong>不完善，你应当首先安装<span>GNU <strong>
		<span>tar</span></strong></span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>一个能工作的<span>ANSI C++</span>编译器。<b><span>gcc</span></b><span>&gt; 
		= 2.95.2</span>、<b><span>egcs</span></b><span>&gt; 
		= 1.0.2</span>或<strong><span>egcs 
		2.91.66</span></strong>、<span>SGI C++</span>和<span>SunPro 
		C++</span>是一些已知能工作的编译器。当使用<b><span>gcc</span></b>时，不需要<span>libg++</span>。<span>gcc2.7.x</span>有一个缺陷，使得它可能不能编译一些完全合法的<span>C++</span>文件，例如“<span>sql/sql_base.cc</span>”。如果你仅有<span>gcc2.7.x</span>，你必须升级<span>gcc</span>才能编译<span>MySQL</span>。已知<strong><span>gcc</span></strong><span> 
		2.8.1</span>在某些平台上有一些问题，因此如果平台上有新的编译器，则不要使用<strong><span  style="font-family:
宋体">gcc</span></strong><span> 2.8.1</span>。</p>
		<p>编译<span>MySQL 3.23.x</span>时，建议使用<strong><span>gcc</span></strong><span> 
		2.95.2</span>或更新版。</p>
		<p>
		<span  >
		·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
		</span><span>一个优秀的</span><b><span>make</span></b><span>程序。总是推荐<span>GNU
		</span></span><b><span>make</span></b><span>且有时必须使用。如果你有问题</span><span>，</span><span>我们推荐试一试<span>GNU</span></span><span>
		<b>make</b></span><span>3.75</span><span>或更新版</span><span>。</span></p>
		<p>如果你使用的<strong><span  style="font-family:
宋体">gcc</span></strong>版本足够新，可以识别<span>-fno-exceptions</span>选项，则使用该选项<em><span>非常重要</span></em>。否则，你编译二进制时出现问题。我们建议你同时使用<span>-felide-constructors</span>和<span>-fno-rtti</span>选项。当有疑问时，执行下面操作：</p>
		<pre><span>CFLAGS=&quot;-O3&quot; CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors \</span></pre>
		<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti&quot; ./configure \</span></pre>
		<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql --enable-assembler \</span></pre>
		<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --with-mysqld-ldflags=-all-static</span></pre>
		<p>在大多数系统中，可以得到快速、稳定的二进制。</p>
		<p>如果你遇到问题，在把问题邮寄到<span>MySQL</span>邮件目录时，<strong><span>请总是使用</span></strong><span><b><span>mysqlbug</span></b></span>，就算问题不是一个缺陷，<span><b><span>mysqlbug</span></b></span>收集系统信息，将有助于其它人解决你的问题。不使用<span><b><span>mysqlbug</span></b></span>，你将减少得到问题的解决方案的可能性！在解包分发版后，你会<tt >在“<span>bin</span>”</tt>目录下找到<span><b><span>mysqlbug</span></b></span>。请参见<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3节，“如何通报缺陷和问题”</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="quick-install"></a>
			2.8.1.&nbsp;源码安装概述</h3></div></div></div>
			<p>你必须执行的安装<span>MySQL</span>源码分发版的基本命令是：</p>
			<pre><span>shell&gt; </span><span><b><span>groupadd mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>useradd -g mysql mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>gunzip &lt; mysql-<i>VERSION</i>.tar.gz | tar -xvf -</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cd mysql-<i>VERSION</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>./configure --prefix=/usr/local/mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cp support-files/my-medium.cnf /etc/my.cnf</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cd /usr/local/mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>bin/mysql_install_db --user=mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>chown -R root&nbsp; .</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>chown -R mysql var</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>chgrp -R mysql .</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
			<p>如果从一个源码<span>RPM</span>开始，那么执行如下命令：</p>
			<pre><span>shell&gt; </span><span><b><span>rpmbuild --rebuild --clean MySQL-<i>VERSION</i>.src.rpm</span></b></span></pre>
			<p>这样你制作一个可以安装的二进制<span>RPM</span>。对于旧版本的<span>RPM</span>，你可能需要替换用<strong><span>rpm</span><span>替换</span></strong>命令<strong><span>rpmbuild</span></strong>。</p>
			<p><strong><span>注释：</span></strong>该过程不为任何<span>MySQL</span>账户设置密码。完成下面的过程后，根据<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9节，“安装后的设置和测试”</a>进行安装后的设置和测试。</p>
			<p>以下是安装<span>MySQL</span>源码分发版的更详细的描述：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span><strong>
			<span>为</span><span>mysqld</span></strong>增加一个登录用户和组： 
			</p>
			<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>groupadd mysql</span></b></span></pre>
			<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>useradd -g mysql mysql</span></b></span></pre>
			<p>这些命令将增加<span>MySQL</span>组和<span> 
			MySQL</span>用户。不同版本的<span>Unix</span>中，<strong><span>useradd</span></strong><span>
			</span>和<strong><span>groupadd</span></strong>的语法可能会稍有不同。还可以称为<strong><span>adduser</span></strong>和<strong><span>addgroup</span></strong>。</p>
			<p>你可能会将这些用户和组命名为<span  >mysql</span>之外的名称。如果是这样，在下面的步骤中替换为相应的名称。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>挑选一个你想解开分发包的目录，进入该目录。</p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>从<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3节，“怎样获得MySQL”</a>中列出的站点之一获得一个分发文件。</p>
			<p>
			<span>6.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在当前目录下解包分发版：</p>
			<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>gunzip &lt; <i>/path/to/mysql-VERSION</i>.tar.gz | tar xvf -</span></b></span></pre>
			<p>该命令创建<span>mysql-<i>VERSION</i></span><span>
			</span>目录。</p>
			<p>使用<span>GNU <strong>
			<span>tar</span></strong></span>，则不再需要<span>gunzip</span>。你可以用下面的命令来解包和提取分发：</p>
			<pre ><span>shell&gt; </span><span><b><span>tar zxvf <i>/path/to/mysql-VERSION-OS</i>.tar.gz</span></b></span></pre>
			<p>
			<span>8.<span>&nbsp;&nbsp;&nbsp;
			</span></span>进入解包分发版的顶级目录：</p>
			<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; cd&nbsp; mysql-VERSION</span></pre>
			<p>请注意目前必须从顶级目录配置和构建<span>MySQL</span>。你不能在其它目录中构建。</p>
			<p>
			<span>10.</span>配置发布版并且编译：</p>
			<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>./configure --prefix=/usr/local/mysql</span></b></span></pre>
			<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<p>当你运行<b><span>configure</span></b>时，你可能想要指定一些选项，运行<b><span>./configure 
			--help</span></b>得到一个选项列表。<a href="#configure-options" title="2.8.2. Typical configure Options">2.8.2节，“典型配置选项<span><strong class="command"></strong></span>”</a>讨论一些很有用的选项。</p>
			<p>如果<b><span>configure</span></b>失败，你将向<span>MySQL</span>邮件目录发送包含你认为能帮你解决该问题的包含“<span>config.log</span>”中所有行的邮件，也要包括<b><span>configure</span></b>的最后几行输出。用<b><span>mysqlbug</span></b>脚本邮寄错误报告。请参见<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3节，“如何通报缺陷和问题”</a>。</p>
			<p>如果编译失败，参见<a href="#compilation-problems" title="2.8.4. Dealing with Problems Compiling MySQL">2.8.4节，“处理MySQL编译问题”</a>寻求帮助。</p>
			<p>
			<span>13.</span>安装分发版：</p>
			<pre><span>14.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<p>如果你想要设置一个选项文件，使用<span>support-files</span>目录中的一个作为模板。例如：</p>
			<pre ><span>shell&gt; </span><span><b><span>cp support-files/my-medium.cnf /etc/my.cnf</span></b></span></pre>
			<p>可能你需要用<span><span>root</span><span>用户</span></span>运行这些命令。</p>
			<p>如果想要配置为支持<span>InnoDB</span>表，应当编辑<span>/etc/my.cnf</span>文件，去掉<span>innodb_...</span>开始选项行前面的<span>#</span>符，并将选项值改为你想要的。请参见<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>和<a href="storage-engines.html#innodb-configuration" title="15.2.3. InnoDB Configuration">15.2.3节，“InnoDB配置”</a>。</p>
			<p>
			<span>15.</span>进入安装目录：</p>
			<pre><span>16.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd /usr/local/mysql</span></b></span></pre>
			<p>
			<span>17.</span>如果还没有安装的<span>MySQL</span>，必须创建<span>MySQL</span>授权表：</p>
			<pre><span>18.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysql_install_db --user=mysql</span></b></span></pre>
			<p>如果用<span>root</span>运行命令，应当使用<span  >--user</span>选项。选项的值应与你在第一步为运行服务器所创建的登录账户相同。如果用该用户登录来运行命令，可以省略<span  >--user</span>选项。</p>
			<p>用<strong><span>mysql_install_db</span></strong>创建<span>MySQL</span>授权表后，需要手动重新启动服务器</p>
			<p>
			<span>19.</span>将程序二进制的所有权改为<span><span>root</span><span>，</span></span>数据目录的所有权改为你运行<strong><span>mysqld</span></strong>的用户。如果位于安装目录<span>(</span><span>/usr/local/mysql</span><span>)</span>下，命令应为：</p>
			<pre><span>20.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>chown -R root&nbsp; .</span></b></span></pre>
			<pre><span>21.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>chown -R mysql var</span></b></span></pre>
			<pre><span>22.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>chgrp -R mysql .</span></b></span></pre>
			<p>第一个命令将文件的所有属性改为<span>root</span>用户。第二个命令将数据目录的所有属性改为<span  >mysql</span>用户。第三个命令将组属性改为<span  >mysql</span>组。</p>
			<p>
			<span>23.</span>如果你喜欢在引导机器时自动启动<span>MySQL</span>，你可以拷贝<span>support-files/mysql.server</span>文件到你系统有启动文件的地方。更多的信息可以在<span>support-files/mysql.server</span>脚本中和<a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2节，“自动启动和停止MySQL”</a>中找到。</p>
			<p>
			<span>24.</span>如果安装了<span>DBI</span>和<span  >DBD::mysql</span><span>
			</span><span>Perl</span>模块，可以使用<b><span>bin/mysql_setpermission</span></b>脚本增加新账户。关于说明，参见<a href="#perl-support" title="2.13. Perl Installation Notes">2.13节，“Perl安装注意事项”</a>。</p>
			<p>在所有东西被安装以后，你应当使用该命令初始化并且测试你的分发版：</p>
			<pre><span>shell&gt; </span><span><b><span>/usr/local/mysql/bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
			<p>如果这个命令提示<span>mysqld daemon ended</span>并马上失败，那么你能在数据目录中的文件“<span>hostname&#39;.err</span>”找到一些信息。</p>
			<p>关于<strong><span>mysqld_safe</span></strong>的详细信息参见<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a>。</p>
			<p><strong><span>注释：</span></strong><span>MySQL</span>授权表中的账户开始没有密码。启动服务器后，你应当使用<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9节，“安装后的设置和测试”</a>中的说明来设置密码。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-options"></a>
			2.8.2.&nbsp;典型配置选项<span><strong class="command"></strong></span></h3></div></div></div><a class="indexterm" name="id2715852"></a><a class="indexterm" name="id2715862"></a><a class="indexterm" name="id2715871"></a><a class="indexterm" name="id2715880"></a><a class="indexterm" name="id2715891"></a><a class="indexterm" name="id2715898"></a><a class="indexterm" name="id2715905"></a>
			<p><b><span>configure</span></b>脚本给你一个很大的控制权来控制如何配置<span>MySQL</span>源码分发版。一般使用<b><span>configure</span></b>命令行的选项来进行。你也可以用某些环境变量作用于<b><span>configure</span></b>。请参见<a href="environment-variables.html" title="Appendix F. Environment Variables">附录F：<i>环境变量</i></a>。要查看<b><span>configure</span></b>支持的选择列表，可以运行命令：</p>
			<pre><span>shell&gt; </span><span><b><span>./configure --help</span></b></span></pre>
			<ul type="disc">
				<li>如果只编译<span>MySQL</span>客户端库和客户端程序而不是服务器，使用<span>--without-server</span>选项：</li>
				<li><span>shell&gt; .<b>/configure 
				--without-server</b></span></li>
			</ul>
			<p>如果你没有<span>C++</span>编译器，则不能编译<b><span>mysql</span></b><span>(</span>有一个客户端程序需要<span>C++)</span>。在这种情况下，你可以去掉<span>configure</span>里面测试<span>C++</span>编译器的代码，然后运行带有<span> 
			--without-server</span>选项的<b><span>./configure</span></b>。编译步骤步将仍然尝试构造<b><span>mysql</span></b>，但是你可以忽略任何关于“<span>mysql.cc</span>”的警告。（如果<b><span>make</span></b>停止，试试<b><span>make 
			-k</span></b>告诉它即使出错继续剩下的构造步骤）。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你想要构建嵌入式<span>MySQL</span>库<span> 
			(</span><span>libmysqld.a</span><span>),</span>你应当使用<span>--with-embedded-server</span>选项。</p>
			<ul type="disc">
				<li>如果你不想要位于“<span>/usr/local/var</span>”目录下面的日志<span>(log)</span>文件和数据库，使用类似于下列<span>configure</span>命令的一个： 
				</li>
				<li><span>shell&gt;<b>./configure--prefix=/usr/local/mysql
				</b></span></li>
				<li><span>shell&gt;<b>./configure--prefix=/usr/local
				</b></span><b>– </b></li>
				<li><b><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localstatedir=/usr/local/mysql/data</span></b></li>
			</ul>
			<p>
			第一个命令改变安装前缀以便将所有内容安装到“<span>/usr/local/mysql</span>”下面而非
			默认的“<span>/usr/local</span>”。第二个命令保留默认安装前缀，但是覆盖了数据库目录默认目录<span>(</span>通常是“<span>/usr/local/var</span>”<span>)</span>并且把它改为<span>/usr/local/mysql/data</span>。编译完<span>MySQL</span>后，可以通过选项文件更改这些选项。请参见<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>。</p>
			<ul type="disc">
				<li>如果你正在使用<span>Unix</span>并且你想要<span>MySQL</span>的套接字位于
				默认位置以外的某个地方<span>(</span>通常在目录“<span>/tmp</span>”或“<span>/var/run</span>”，使用象这样的<b><span>configure</span></b>的命令：</li>
				<li><span>shell&gt;<b> 
				./configure\-- with-unix-socket-</b></span></li>
				<li><b><span>path=/usr/local/mysql/tmp/mysql.sock</span></b></li>
			</ul>
			<p>
			注意给出的文件名必须是一个绝对路径。你还可以在以后使用<span>MySQL</span>选项文件更改<span>mysql.sock</span>的位置。请参见<a href="problems.html#problems-with-mysql-sock" title="A.4.5. How to Protect or Change the MySQL Socket File /tmp/mysql.sock">A.4.5节，“如何保护或更改MySQL套接字文件/tmp/mysql.sock<code class="filename"></code>”</a>。</p>
			<ul type="disc">
				<li>如果你想编译静态链接程序<span>(</span>例如，制作二进制分发版、获得更快的速度或与解决与<span>RedHat</span>分发版的一些问题<span>)</span>，像这样运行<b><span>configure</span></b>：</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><b><span>shell&gt;./configure --with-client-ldflags=-all-static\</span></b></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><b><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--with-mysqld-ldflags=-all-static</span></b></p>
			<ul type="disc">
				<li>如果你正在使用<span>gcc</span>并且没有安装<span>libg++</span>或<span>libstdc++</span>，你可以告诉<b><span>configure</span></b>使用<span>gcc</span>作为<span>C++</span>编译器： 
				</li>
				<li><span>shell&gt; <b>CC=gcc&nbsp; CXX=gcc&nbsp; 
				./configure</b></span></li>
			</ul>
			<p>当你使用<span>gcc</span>作为<span>C++</span>编译器用时，它将不试图链接<span>libg++</span>或<span>libstdc++</span>。即使你安装了这些库，这样也很好，因为过去使用<span>MySQL</span>时，它们的部分版本会出现一些奇怪的问题。</p>
			<p>下面列出了一些经常使用的编译器和环境变量设定值。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><strong><span>gcc</span></strong><span> 
			2.7.2</span>： </p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CC=gcc CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors&quot;</span></pre>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><strong><span>egcs</span></strong><span> 
			1.0.3a</span>： </p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CC=gcc CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors \</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>-fno-exceptions -fno-rtti&quot;</span></pre>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><strong><span>gcc</span></strong><span> 
			2.95.2</span>： </p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CFLAGS=&quot;-O3 -mpentiumpro&quot; CXX=gcc CXXFLAGS=&quot;-O3 -mpentiumpro \</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>-felide-constructors -fno-exceptions -fno-rtti&quot;</span></pre>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>pgcc</span><span> 
			2.90.29 </span>或更新版：</p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CFLAGS=&quot;-O3 -mpentiumpro -mstack-align-double&quot; CXX=gcc \</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CXXFLAGS=&quot;-O3 -mpentiumpro -mstack-align-double \</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>-felide-constructors -fno- exceptions -fno-rtti&quot;</span></pre>
			<p>在大多数情况，在<strong><span  style="font-family:
宋体">configure</span></strong>行使用前面列出的选项并加入下面的选项，可以得到合理的优化的<span>MySQL</span>二进制：</p>
			<pre ><span>--prefix=/usr/local/mysql --enable-assembler \</span></pre>
			<pre ><span>--with-mysqld-ldflags=-all-static</span></pre>
			<p>换句话说，对于所有最近的<strong><span>gcc</span></strong>版，整个<strong><span>configure</span></strong>行应为：</p>
			<pre ><span>CFLAGS=&quot;-O3 -mpentiumpro&quot; CXX=gcc CXXFLAGS=&quot;-O3 -mpentiumpro \</span></pre>
			<pre ><span>-felide-constructors -fno- exceptions -fno-rtti&quot; ./ configure \</span></pre>
			<pre ><span>--prefix=/usr/local/mysql --enable-assembler \</span></pre>
			<pre ><span>--with-mysqld-ldflags=-all-static</span></pre>
			<p>我们在<span>MySQL</span>网址<span>http://www.mysql.com/</span>提供的二进制均已经编译过并进行了优化，对于大多数用户应当比较完善。请参见<a href="#mysql-binaries" title="2.1.2.5. MySQL Binaries Compiled by MySQL AB">2.1.2.5节，“MySQL AB编译的MySQL二进制版本”</a>。其中有一些配置设定值，可以选用来构建更快的二进制，但是只适用高级用户。请参见<a href="optimization.html#compile-and-link-options" title="7.5.4. How Compiling and Linking Affects the Speed of MySQL">7.5.4节，“编译和链接怎样影响MySQL的速度”</a>。</p>
			<p>如果构造失败并且产生有关编译器或链接器的错误，不能创建共享库“<span>libmysqlclient.so.#</span>”<span>(</span>“<span>#</span>”是一个版本号<span>),
			</span>你可以通过为<b><span>configure</span></b>指定<span>--disable-shared</span>选项来解决此问题。在这种情况下，<b><span>configure</span></b>将不构造一个共享<span>libmysqlclient.so.#</span>库。</p>
			<ul type="disc">
				<li>默认地，<span>MySQL</span>使用<span>latin1</span><span>(cp1252)</span>字符集。为了改变
				默认设置，使用<span>--with-charset</span>选项：</li>
				<li><span>shell&gt; <b>./configure 
				-- with-charset=<i>CHARSET</i></b></span></li>
			</ul>
			<p><i>
			<span>CHARSET</span></i>可以是<span><span>big5</span><span>、<span>cp1251</span>、<span>cp1257</span>、<span>czech</span>、<span>danish</span>、<span>dec8</span>、<span>dos</span>、<span>euc_kr</span>、<span>gb2312</span>、<span>gbk</span>、<span>german1</span>、<span>hebrew</span>、<span>hp8</span>、<span>hungarian</span>、<span>koi8_ru</span>、<span>koi8_ukr</span>、<span>latin1</span>、<span>latin2</span>、<span>sjis</span>、<span>swe7</span>、<span>tis620</span>、<span>ujis</span>、<span>usa7</span></span></span>或<span>win1251ukr</span>。请参见<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1节，“数据和排序用字符集”</a>。</p>
			<p>可以指定默认校对规则。<span>MySQL</span>默认使用<span>latin1_swedish_ci</span>校对规则。要想更改，使用<span>--with-collation</span>选项：</p>
			<pre ><span>shell&gt; </span><span><b><span>./configure --with-collation=<i>COLLATION</i></span></b></span></pre>
			<p>要想更改字符集和校对规则，要同时使用<span>--with-charset</span>和<span>--with-collation</span>选项。
			校对规则必须是字符集的合法校对规则。<span>(</span>使用<span>SHOW 
			COLLATION</span>语句来确定每个字符集使用哪个校对规则<span>)</span>。</p>
			<p>如果想在服务器和客户端之间变换字符，你应该看一下<span>SET 
			OPTION CHARACTER SET</span>命令。请参见<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3节，“SET语法”</a>。</p>
			<p><strong>
			<span>警告：</span></strong>如果你在创建了任何数据库表之后改变字符集，你将必须对每个表运行<strong><span>myisamchk 
			-r -q --set-character-set=</span></strong><span><b><i><span>charset</span></i></b></span>，否则索引可能不正确地排序。（如果安装了<span>MySQL</span>，创建一些表，然后重新配置<span>MySQL</span>使用一个不同的字符集并且重新安装它，这时就可能发生这种情况。）</p>
			<p>通过<strong><span>configure</span></strong>选项<span>--with-extra-charsets=<i>LIST</i></span>，你可以定义在服务器中再定义哪些字符集。<span><i><span>LIST</span></i></span><span>
			</span>指下面任何一项：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>空格间隔的一系列字符集名</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>complex</span><span> 
			-</span>，以包括不能动态装载的所有字符集</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>all</span><span>
			</span>–，以将所有字符集包括进二进制</p>
			<ul type="disc">
				<li>为了配置<span>MySQL</span>带有调试代码，使用<span>--with-debug</span>选项：</li>
				<li><span>shell&gt;<b> ./configure 
				--with-debug</b></span></li>
			</ul>
			<p>
			这导致包含一个安全的内存分配器，能发现一些错误和并提供关于正在发生的事情的输出。请参见<a href="porting.html#debugging-server" title="E.1. Debugging a MySQL Server">E.1节，“调试MySQL服务器”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果客户端程序使用线程，还必须使用<span>--enable-thread-safe-client</span>配置选项来编译线程安全版的<span>MySQL</span>客户端库。将创建一个<span>libmysqlclient_r</span>库，可以用来连接应用程序线程。请参见<a href="apis.html#threaded-clients" title="25.2.15. How to Make a Threaded Client">25.2.15节，“如何生成线程式客户端”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以使用<span>--with-big-tables</span>选项构建支持大数据库表的<span>MySQL</span>。</p>
			<p>该选项使变量用来将表行数保存到<span>unsigned 
			long long</span>中而不是<span>unsigned 
			long</span>。结果是允许表有大约<span>1.844E+19 ((2<sup>32</sup>)<sup>2</sup>)</span>行而不是<span>2<sup>32</sup> 
			(~4.295E+09) </span>行。在以前，要完成该功能必须手动将<span>-DBIG_TABLES</span>传递给编译器。</p>
			<span>
			属于特定系统的选项可在本章特定系统的小节里找到。请参见</span><a href="#operating-system-specific-notes" title="2.12. Operating System-Specific Notes">2.12节，“具体操作系统相关的注意事项”</a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="installing-source-tree"></a>
			2.8.3.&nbsp;从开发源码树安装</h3></div></div></div><a class="indexterm" name="id2717054"></a><a class="indexterm" name="id2717061"></a>
			<p><strong><span>注意</span></strong>：如果你想帮助我们测试新代码，应当阅读本节。如果你只想在系统上安装并运行<span>MySQL</span>，应当使用标准发布分发版<span>(</span>二进制或源码分发版<span>)</span>。</p>
			<p>要想获得我们的最新开发源码树，应使用说明：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>从<span><a  href="http://www.bitmover.com/bk-client.shar下载BitKeeper">http://www.bitmover.com/bk-client.shar<span>下载</span>BitKeeper</a></span>免费客户端。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Unix</span>上安装免费客户端：</p>
			<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>sh bk-client.shar</span></b></span></pre>
			<pre><span>4.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd bk_client-1.1</span></b></span></pre>
			<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make all</span></b></span></pre>
			<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>PATH=$PWD:$PATH</span></b></span></pre>
			<p>在<span>Windows</span>上的安装方法：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>从<span><a target="_top"  href="http://cygwin.com/">http://cygwin.com</a></span>下载并安装<span>Cygwin</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>确保<strong><span>gcc</span></strong>和<strong><span>make</span></strong>已经安装到<span>Cygwin</span>。可以用<strong><span>which 
			gcc</span></strong>和 <strong><span>
			which make</span></strong>命令进行测试。如果任何一个没有安装，运行<span> 
			Cygwin</span>安装包管理器，选择<strong><span>gcc</span><span>、<span>make</span></span><span>并</span></strong>安装。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Cygwin</span>中，运行：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>sh bk-client.shar</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>cd bk_client-1.1</span></b></span></pre>
			<p>然后编辑<span>Makefile</span>并将行<span>s
			</span>
			<span>$(CC) $(CFLAGS) -o sfio 
			-lz sfio.c</span>更改为：</p>
			<pre><span>$(CC) $(CFLAGS) -o sfio sfio.c -lz</span></pre>
			<p>现在运行<strong><span>make</span></strong>命令并设置路径：</p>
			<pre><span>shell&gt; </span><span><b><span>make all</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>PATH=$PWD:$PATH</span></b></span></pre>
			<p>
			<span>7.<span>&nbsp;&nbsp;&nbsp;
			</span></span>安装<span>BitKeeper</span>免费客户端后，首先进入工作目录，然后使用以下命令在本地复制<span>MySQL 
			5.1</span>：</p>
			<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>sfioball -r+ bk://mysql.bkbits.net/mysql-5.1 mysql-5.1</span></b></span></pre>
			<p>一般情况，你不需要自己构建文档，因为我们已经在<span><a target="_top"  href="http://dev.mysql.com/doc/">http://dev.mysql.com/doc/</a></span>提供了许多格式。我们每天更新你可以下载的格式<span>(HTML</span>、<span>PDF</span>等<span>)</span>，因此你没有必要从<span>MySQL</span><span>doc</span>树中的<span>DocBook 
			XML</span>基本格式来创建。如果你想要复制文档库，使用下面的命令：</p>
			<pre ><span>shell&gt; </span><span><b><span>sfioball -r+ bk://mysql.bkbits.net/mysqldoc mysqldoc</span></b></span></pre>
			<p>在前面的例子中，在当前目录的<span>MySQL</span><span>-5.1/</span>子目录中设置源码树。</p>
			<p>如果你位于防火墙后面，只能初始化<span>HTTP</span>连接，还可以通过<span>HTTP</span>使用<span>BitKeeper</span>。</p>
			<p>如果需要使用代理服务器，设置环境变量<span>http_proxy</span>指向代理：</p>
			<pre ><span>shell&gt; </span><span><b><span>export http_proxy=&quot;http://your.proxy.server:8080/&quot;</span></b></span></pre>
			<p>当复制库时用<span>http://</span>替换<span><span>bk</span><span>：<span>//</span></span></span>。例如：</p>
			<pre ><span>shell&gt; </span><span><b><span>sfioball -r+ http://mysql.bkbits.net/mysql-5.1 mysql-5.1</span></b></span></pre>
			<p>下载源码树可能需要一段时间，取决于连接速度。请耐心等待。</p>
			<p>
			<span>9.<span>&nbsp;&nbsp;&nbsp;
			</span></span>要想更新本地<span>MySQL 5.1</span>库复制，使用命令：</p>
			<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>update bk://mysql.bkbits.net/mysql-5.1</span></b></span></pre>
			<p>
			<span>11.</span>你需要<span>GNU <strong>
			<span>make</span></strong></span><strong><span>、<span>autoconf</span></span></strong><span> 
			2.58 (</span>或更新版<span>)</span>、<strong><span>automake</span></strong><span> 
			1.8</span>、<strong><span>libtool</span></strong><span> 
			1.5</span>和<strong><span>m4</span></strong>来运行后面的命令。尽管许多操作系统安装了<strong><span>make</span></strong>，很可能编译失败，出现许多奇怪的缺陷消息。因此，强烈建议你使用<span>GNU
			<strong><span>make</span></strong>(</span>有时名为<strong><span>gmake</span></strong><span>)</span>。</p>
			<p>幸运的是，大量的操作系统预装了<span>GNU</span>工具链或提供了可安装软件包。你可以随时从下面的地址下载：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/autoconf/">
			http://www.gnu.org/software/autoconf/</a> </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/automake/">
			http://www.gnu.org/software/automake/</a> </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/libtool/">
			http://www.gnu.org/software/libtool/</a> </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/m4/">
			http://www.gnu.org/software/m4/</a> </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/make/">
			http://www.gnu.org/software/make/</a> </span></p>
			<p>要想配置<span>MySQL 5.1,</span>你还需要<span>GNU
			<strong><span>bison</span></strong> 1.75</span>或更新版。旧版本的<strong><span>bison</span></strong>会报告错误：</p>
			<pre ><span>sql_yacc.yy:#####: fatal error: maximum table size (32767) exceeded</span></pre>
			<p>注释：实际上并没有超出最大表空间；这是由旧版本的<strong><span>bison</span><span style="font-family:
宋体;">的</span></strong>缺陷造成的该问题。</p>
			<p>下面的例子显示了配置源码树需要的典型命令。第一个<span>cd</span>命令将位置改为树的顶级目录；用相应目录名替换<span>MySQL</span><span>-5.1</span>。</p>
			<pre ><span>shell&gt; </span><span><b><span>cd mysql-5.1</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>bk -r edit</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>aclocal; autoheader</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>libtoolize --automake --force</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>automake --force --add-missing; autoconf</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>(cd innobase; aclocal; autoheader; autoconf; automake)</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>(cd bdb/dist; sh s_all)</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>./configure&nbsp; # Add your favorite options here</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<p>对于下面的命令，可以使用<strong><span>BUILD/autorun.sh</span></strong>作为快捷方式：</p>
			<pre ><span>shell&gt; </span><span><b><span>aclocal; autoheader</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>libtoolize --automake --force</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>automake --force --add-missing; autoconf</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>(cd innobase; aclocal; autoheader; autoconf; automake)</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>(cd bdb/dist; sh s_all)</span></b></span></pre>
			<p>使用将目录改为<span>innobase</span>和<span>bdb/dist</span>目录的命令行来配置<span>InnoDB</span>和<span> 
			Berkeley DB (</span><span>BDB</span><span>)</span>储存引擎。如果你不需要<span>InnoDB</span>或<span>BDB</span>支持，你可以省略这些命令行。</p>
			<p>如果在该阶段你遇到一些奇怪的错误，请确认你是否已经安装了 <strong>
			<span>libtool</span></strong>。</p>
			<p>标准配置脚本位于<span>BUILD/</span>子目录。你会发现使用<span>BUILD/compile-pentium-debug</span>脚本比使用前面的外壳命令要方便得多。要想在不同的架构上编译，可以修改脚本，即去掉<span>Pentium</span>相关标志。</p>
			<p>
			<span>12.</span>构建完成后，运行<strong><span  style="font-family:
宋体">make install</span></strong>。在产品机器上运行时应注意；该命令会覆盖你正使用的版本。如果你安装了另一个<span>MySQL</span>，我们建议你使用 
			与你的产品服务器上不同的<span>--prefix</span>、<span>--with-tcp-port</span>和<span>--unix-socket-path</span>选项值来运行<strong><span  style="font-family:
宋体">./configure</span></strong>。</p>
			<p>
			<span>13.</span>强制运行新安装和尝试会破坏新功能。应先运行<strong><span>make 
			test</span></strong>。请参见<a href="extending-mysql.html#mysql-test-suite" title="27.1.2. MySQL Test Suite">27.1.2节，“MySQL测试套件”</a>。</p>
			<p>
			<span>14.</span>如果你已经进入<strong><span  style="font-family:
宋体">make</span></strong>阶段而分发版不编译，请报告给我们的<span><a target="_top"  href="http://bugs.mysql.com/">http://<span>bug</span>s.mysql.com/</a></span>中的缺陷数据库。如果你已经安装了<span>GNU</span>工具的最新版本，如果视图处理配置文件时出错，请报告给我们。但是，如果你执行<span>aclocal</span>并且遇到<span>command 
			not found</span><span> error</span>或类似问题，不要报告给我们。而是应确保安装了所有必要的工具，并且<span>PATH</span>变量设置正确，保证外壳命令可以找到它们。</p>
			<p>
			<span>15.</span>复制完库<span>(</span><span>sfioball</span><span>)</span>获得源码树后，你应当定期更新库<span>(</span><span>update</span><span>)</span>。</p>
			<p>
			<span>16.</span>你可以检查树的更改史，浏览源码树中的<span>BK/</span><span class="MsoHyperlink"><span>
			</span></span>
			<span>ChangeLog</span>文件并查看<span>ChangeSet</span>描述找到所有不同点。要想检查特殊的更改集，必须使用<strong><span>sfioball</span></strong>命令提取源码树的两次不同的修订，然后使用外部<strong><span>diff</span></strong>命令来比较。如果你看到有疑问的奇怪的不同之处或代码，一定要向<span>MySQL
			</span>
			<span>internals</span>邮件列表发送邮件。请参见<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1节，“The MySQL邮件列表”</a>。并且，如果你有更好的思想，请向上述地址发送邮件。</p>
			<p>
			<span>17.BitKeeper</span>免费客户端预装了源码。免费客户端可用的唯一文档是源码本身。</p>
			<p>你还可以在线浏览更改集、注释和源码。要想浏览<span>MySQL 5.1</span>的相关信息，请到<span><a target="_top"  href="http://mysql.bkbits.net:8080/mysql-5.1">http://mysql.bkbits.net:8080/mysql-5.1</a></span>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="compilation-problems"></a>
			2.8.4.&nbsp;处理MySQL编译问题</h3></div></div></div><a class="indexterm" name="id2717824"></a><a class="indexterm" name="id2717834"></a><a class="indexterm" name="id2717844"></a><a class="indexterm" name="id2717851"></a><a class="indexterm" name="id2717860"></a>
			<p>所有<span>MySQL</span>程序在<span>Solaris</span>或<span>Linux</span>上使用<b><span>gcc</span></b>编译并且没有任何警告。在其它系统上，由于系统包含文件的差别可能会发生警告。对于使用<span>MIT-pthreads</span>时发生的警告。请参见<a href="#mit-pthreads" title="2.8.5. MIT-pthreads Notes">2.8.5节，“MIT-pthreads注意事项”</a>。其它问题，检查下面的表。</p>
			<p>许多问题的解决方案涉及重新配置。如果你确实需要重新配置，注意下列事项：</p>
			<ul type="disc">
				<li>如果<b><span>configure</span></b>在它已经被运行了以后运行，它可以使用先前收集的信息。这个信息存储在“<span>config.cache</span>”里面。当<b><span>configure</span></b>启动时，它寻找该文件而且如果它存在，假定信息仍然是正确的，读入它的内容。当你重新配置时，该假设无效。</li>
				<li>每次运行<b><span>configure</span></b>的时候，必须运行<b><span>make</span></b>再重新编译。然而<span>,
				</span>你可能想要把先前构造的老的目标文件删除，因为它们使用不同的配置选项编译而成。</li>
			</ul>
			<p>为了防止使用旧的配置信息或目标文件，重新运行<b><span>configure</span></b>前运行这些命令：</p>
			<p><span>shell&gt; <b>rm&nbsp; config.cache</b></span></p>
			<p><span>shell&gt; <b>make clean</b></span></p>
			<p>另外，你可以运行<b><span>make distclean</span></b>。</p>
			<p>下表描述了一些最常发生的编译<span>MySQL</span>的问题：</p>
			<ul type="disc">
				<li>如果在编译“<span>sql_yacc.cc</span>”时，遇到如下错误，可能是存储器或交换空间溢出：</li>
			</ul>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Internal compiler error: program cc1plus got fatal signal 11</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Out of virtual memory</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Virtual memory exhausted</span></pre>
			<p>该问题是<span>gcc</span>要求大量的内存编译带有嵌入函数<span>(inline 
			function)</span>的“<span>sql_yacc.cc</span>”。试试以<span>--with-low-memory</span>选项运行<b><span>configure</span></b>：</p>
			<p><span>
			shell&gt; <b>./configure -- with-low-memory</b></span></p>
			<p>如果你正在使用<b><span>gcc</span></b>，该选项使得将<span>-fno-inline</span>加到编译行，如果你正使用其它的编译器，则加入<span>-O0</span>。你应该试一试<span>--with-low-memory</span>选项，即使你有特别多的存储器和交换空间，而你认为不可能运行得溢出。这个问题甚至会在很慷慨的硬件配置的系统上出现，通常用<span>--with-low-memory</span>选项修正它。</p>
			<ul type="disc">
				<li>默认情况，<b><span>configure</span></b>选则<b><span>c++</span></b>作为编译器并用<span>-lg++</span>选项的<span>GNU
				<b>c++</b></span>链接。如果你正在使用<b><span>gcc</span></b>，这个特性在配置期间导致如下问题：<span>
				</span></li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>configure: error: installation or 
			configuration problem:</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>C++ compiler cannot create 
			executables.</span></p>
			<p>也可能在编译期间看到<b><span>g++</span></b>、<span>libg++</span>或<span>libstdc++</span>相关的问题。</p>
			<p>这些问题的一个原因是你可能没有<b><span>g++</span></b>，或可能有<b><span>g++</span></b>但无<span>libg++</span>或<span>libstdc++</span>。看一下“<span>config.log</span>”文件。它应该包含<span>c++</span>编译器不能工作的准确原因！为了解决这些问题，可以使用<span>gcc</span>作为<span>C++</span>编译器。试试设置环境变量<span>CXX</span>为<span>&quot;gcc 
			-O3&quot;</span>。例如：</p>
			<p><span>
			shell&gt; <b>CXX=&quot;gcc -O3&quot; ./configure</b></span></p>
			<p>可以工作，因为<b><span>gcc</span></b>象<b><span>g++</span></b>一样编译<span>C++</span>源码，但
			默认地它不链接<span>libg++</span>或<span>libstdc++</span>。</p>
			<p>解决这些问题的其它方法当然是安装<b><span>g++</span></b>、<span>libg++</span>和<span>libstdc++</span>。然而，我们建议不要在<span>MySQL</span>中使用<span>libg++</span>或<span><span>libstdc++</span><span>，</span></span>因为只会增加<strong><span>mysqld</span></strong>二进制空间而不会带来任何好处。部分版本的库在过去曾经给用户带来一些奇怪的问题。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你的编译以下面任何错误而失败，必须升级<b><span>make</span></b>版本到<b><span>GNUmake</span></b>：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>making all in mit-pthreads</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>make: Fatal error in reader: Makefile, line 18:</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Badly formed macro assignment</span></pre>
			<p>或：</p>
			<pre ><span>make: file `Makefile&#39; line 18: Must be a separator (:</span></pre>
			<p>或：</p>
			<pre ><span>pthread.h: No such file or directory</span></pre>
			<p>已知<span>Solaris</span>和<span>FreeBSD</span>的<span>make</span>程序有问题。</p>
			<p>已知<span>GNU make 3.75</span>能工作。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你想要定义<span>C</span>或<span>C++</span>编译器所使用的标志，把标志加到<span>CFLAGS</span>和<span>CXXFLAGS</span>环境变量中即可。也可以使用<span>CC</span>和<span>CXX</span>来指定编译器名字。例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>CC=gcc</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>CFLAGS=-O3</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>CXX=gcc</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>CXXFLAGS=-O3</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>export CC CFLAGS CXX CXXFLAGS</span></b></span></pre>
			<p>对于已经知道在不同系统上有用的标志定义列表，参见<a href="#mysql-binaries" title="2.1.2.5. MySQL Binaries Compiled by MySQL AB">2.1.2.5节，“MySQL AB编译的MySQL二进制版本”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你遇到象如下的一条错误消息，则需要升级<b><span>gcc</span></b>编译器：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>client/libmysql.c:273: parse error before `__attribute__&#39;</span></pre>
			<p><b><span>gcc</span></b><span>2.8.1</span>已知可以工作，但是我们推荐使用<strong><span>gcc</span></strong><span> 
			2.95.2</span>或<strong><span>egcs</span></strong><span> 
			1.0.3a</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果编译<b><span>mysqld</span></b>时显示例如下面的那些错误<span>,<b>
			</b></span><b><span>configure</span></b>没有正确地检测传到<span>accept()</span>、<span>getsockname()</span>或<span>getpeername()</span>最后参数的类型：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>cxx: Error: mysqld.cc, line 645: In this statement, the referenced</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type of the pointer value &#39;&#39;length&#39;&#39; is &#39;&#39;unsigned long&#39;&#39;,</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which is not compatible with &#39;&#39;int&#39;&#39;.</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>new_sock = accept(sock, (struct sockaddr *)&amp;cAddr, &amp;length);</span></pre>
			<p>为了修正它，编辑“<span>config.h</span>”文件<span>(</span>它由<span>configure</span>生成<span>)</span>。寻找这些行：</p>
			<pre ><span>/* Define as the base type of the last arg to accept */</span></pre>
			<pre ><span>#define SOCKET_SIZE_TYPE XXX</span></pre>
			<ul type="disc">
				<li>更改<span>XXX</span>为<span>size_t</span>或<span>int</span>，取决于你的操作系统。（注意：每次运行<b><span>configure</span></b>都必须这样做，因为<b><span>configure</span></b>重新生成“<span>config.h</span>”）<span>。</span></li>
				<li>“<span>sql_yacc.cc</span>”文件由“<span>sql_yacc.yy</span>”生成。通常构造过程不需要创造“<span>sql_yacc.cc</span>”，因为<span>MySQL</span>有一个已经生成的拷贝，然而，如果你确实需要再创建它，可能会碰到这个错误：<span>
				</span></li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>&quot;sql_yacc.yy&quot;, line xxx fatal: 
			default action causes potential...</span></p>
			<p>这是一个<b><span>yacc</span></b>版本不完善的迹象。你可能需要安装<b><span>bison</span></b>（<span>GNU</span>的<b><span>yacc</span></b><span>)</span>并使用它。<span>
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Debian Linux 3.0</span>上<span>,
			</span>如果你编译的<span>MySQL 5.1</span>要支持<span>Berkeley 
			DB</span>，需要安装<span>gawk</span>代替默认的<span>mawk</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你需要调试<span>mysqld</span>或<span>MySQL</span>客户端，运行<b><span>configure</span></b>，使用<span>--with-debug</span>选项，然后重新编译并且将客户端程序链接到新的客户端库。请参见<a href="porting.html#debugging-client" title="E.2. Debugging a MySQL Client">E.2节，“调试MySQL客户端”</a>。</p>
			<p>
			<span  >
			·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>如果你在<span>Linux(</span>例如，</span><span>SuSE 
			Linux 8.1</span>或<span>Red Hat Linux 7.3</span><span >)</span><span>下遇到类似下面的编译错误：</span></p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>libmysql.c:1329: warning: passing arg 5 of `gethostbyname_r&#39; from</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>incompatible pointer type</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>libmysql.c:1329: too few arguments to function `gethostbyname_r&#39;</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>libmysql.c:1329: warning: assignment makes pointer from integer</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>without a cast</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>make[2]: *** [libmysql.lo] Error 1</span></pre>
			<p>默认情况，<strong><span  style="font-family:
宋体">configure</span></strong>脚本试图使用<strong><span  style="font-family:
宋体">g++</span></strong><span> GNU C++</span>编译器来确定正确的参数。如果未安装<strong><span>g++</span><span>，</span></strong>将会产生错误的结果。有两种方法可以解决该问题：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>确保安装了<span>GNU C++ <strong>
			<span>g++</span></strong></span>。在某些<span>Linux</span>分发版上，需要安装的软件包叫做<span>gpp</span>；在其它分发版上名为<strong><span>gcc-c++</span></strong>。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>使用<strong><span>gcc</span></strong>作为<span>C++
			</span>编译器，将<span>CXX</span>环境变量设置为<strong><span  style="font-family:
宋体">gcc</span></strong>：</p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>export CXX=&quot;gcc&quot;</span></pre>
			<p>请注意之后需要再次运行<strong><span  style="font-family:
宋体">configure</span></strong>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mit-pthreads"></a>
			2.8.5.&nbsp;MIT-pthreads注意事项</h3></div></div></div><a class="indexterm" name="id2718879"></a><a class="indexterm" name="id2718886"></a>
			<p>这节描述使用<span>MIT-pthreads</span>时所涉及的一些问题。</p>
			<p>在<span>Linux</span>上，应该不使用<span>MIT-pthreads</span>而是安装<span>LinuxThreads</span>！参见<a href="#linux" title="2.12.1. Linux Notes">2.12.1节，“Linux注意事项”</a>。</p>
			<p>如果你的系统不提供原生的线程支持，将需要使用<span>MIT-pthreads</span>包构造<strong><span style="font-family:
宋体;">MySQL</span></strong>。这包括大多数<span>FreeBSD</span>系统、<span>SunOS 
			4.x</span>、<span>Solaris 2.4</span>和更早版本及其它，参见<a href="#which-os" title="2.1.1. Operating Systems Supported by MySQL">2.1.1节，“MySQL支持的操作系统”</a>。</p>
			<p><span>MIT-pthreads</span>不是<span>MySQL 5.1</span>源码分发版的一部分。如果你需要该安装包，需要单独从<span>http://www.mysql.com/Downloads/Contrib/pthreads-1_60_beta6-mysql.tar.gz</span>下载。</p>
			<p>下载后，将源文件提取到<span>MySQL</span>源码目录的顶级目录。将创建新的<span>mit-pthreads</span>子目录。</p>
			<ul type="disc">
				<li>在大多数系统上，你能通过使用<b><span>configure</span></b>并用<span>--with-mit-threads</span>选项来强迫运行<span>MIT-pthreads</span>：</li>
				<li><span>shell&gt; .<b>/configure 
				-- with-mit-threads</b></span></li>
			</ul>
			<p>当使用<span>MIT-pthreads</span>时，不支持在一个非源码目录构造，因为我们想要使我们对代码的改变减到最小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>决定是否使用<span>MIT-pthreads</span>的检查仅在处理服务器代码的配置过程期间发生。如果已经用<span>--without-server</span>配置了分发版并只构造客户端代码，客户端将不知道<span>MIT-pthreads</span>是否正在被使用并且是否使用
			默认的<span>Unix</span>套接字连接。因为在某些平台上<span>Unix</span>套接字文件不能在<span>MIT-pthreads</span>下面工作，这意味着当你运行客户端程序时，你需要使用<span>-h</span>或<span>--host</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>当使用<span>MIT-pthreads</span>编译<span>MySQL</span>时，因为性能原因，系统锁定
			默认为禁止使用。你可以用<span>--external-locking</span>选项告诉服务器使用系统锁定。只是在相同数据文件上运行两个<span>MySQL</span>服务器时采需要，因此不推荐。</p>
			<ul type="disc">
				<li>有时<span>pthreadbind()</span>命令不能绑定一个套接字但没有任何错误消息<span>(</span>至少在<span>Solaris</span>上<span>)</span>，结果是所有到服务器的连接均失败。例如：</li>
				<li><span>shell&gt; <b>mysqladmin 
				version</b></span></li>
				<li><span>mysqladmin: connect to 
				server at &#39;&#39; failed;</span></li>
				<li><span>error: &#39;Can&#39;t connect 
				to mysql server on localhost (146)&#39;</span></li>
			</ul>
			<p>解决它的方法是杀死<b><span>mysqld</span></b>服务器并且重启它。这只有当我们强迫服务器停止并马上进行重启时在发生。</p>
			<ul type="disc">
				<li>使用<span>MIT-pthreads</span>，不能用<span>SIGINT</span>（<span>break)</span>中断<span>sleep()</span>系统调用。这只有在运行<b><span>mysqladmin 
				--sleep</span></b>时才能注意到。在中断起作用并且进程停止之前必须等待<span>sleep()</span>终止。<span>
				</span></li>
				<li>当链接时，你可能会收到这样的警告消息<span>(</span>至少在<span>Solaris</span>上<span>)</span>；它们可以被忽视：</li>
				<li><span>ld: warning: symbol `_iob&#39; 
				has differing sizes:</span></li>
				<li><span>&nbsp;&nbsp;&nbsp; (file /my/local/pthreads/lib/libpthread.a(findfp.o) 
				value=0x4;</span></li>
				<li><span>file /usr/lib/libc.so 
				value=0x140);</span></li>
				<li><span>&nbsp;&nbsp;&nbsp; /my/local/pthreads/lib/libpthread.a(findfp.o) 
				definition taken</span></li>
				<li><span>ld: warning: symbol `__iob&#39; 
				has differing sizes:</span></li>
				<li><span>&nbsp;&nbsp;&nbsp; (file /my/local/pthreads/lib/libpthread.a(findfp.o) 
				value=0x4;</span></li>
				<li><span>file /usr/lib/libc.so 
				value=0x140);</span></li>
				<li><span>&nbsp;&nbsp;&nbsp; /my/local/pthreads/lib/libpthread.a(findfp.o) 
				definition taken</span></li>
			</ul>
			<p><span>
			&nbsp;</span></p>
			<ul type="disc">
				<li>一些其它的警告也可被忽略：</li>
				<li><span>implicit declaration of 
				function `int strtoll(...)&#39;</span></li>
				<li><span>implicit declaration of 
				function `int strtoul(...)&#39;</span></li>
				<li>我们还没有让<span>readline</span>在<span>MIT-pthreads</span>上工作。（这不需要，但是可能某些人会感兴趣。）</li>
			</ul>
		</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-source-build"></a>2.8.6. 在Windows下从源码安装MySQL</h3></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#windows-vc-plus-plus-build">
			2.8.6.1. 使用VC++构建MySQL</a></span></dt><dt><span class="section">
			<a href="#windows-bitkeeper-build">
			2.8.6.2. 从最新的开发源码创建Windows源码安装包</a></span></dt></dl></div>
			<p>下面的说明描述了如何在<span>Windows</span>下从<span>5.1</span>版源码构建<span>MySQL</span>二进制。说明用于从包含最新开发源码的标准源码分发版或从<span>BitKeeper</span>树来构建二进制。</p>
			<p><strong><span>注释：</span></strong>本文档中的说明严格限于在<span>Windows</span>下从最新源码分发版或从<span>BitKeeper</span>树来测试<span>MySQL</span>的用户。作为产品使用时，<span>MySQL 
			AB</span>不建议使用你自己从源码构建的<span>MySQL</span>服务器。一般情况，最好使用<span>MySQL 
			AB</span>预编译的对性能进行优化的适用<span>Windows</span>的<span>MySQL</span>二进制分发版。安装二进制分发版的说明参见<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3节，“在Windows上安装MySQL”</a>。</p>
			<p>要想在<span>Windows</span>中从源码构建<span>MySQL</span>，<span>Windows</span>系统中应有下面的编译器和资源：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Visual Studio 2003</span>编译器系统<span>(VC++ 
			7.0)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>3</span>到<span>5GB</span>的硬盘空间。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Windows 2000</span>或更高版本。</p>
			<p>确切的系统需求见：<span><a target="_top"  href="http://msdn.microsoft.com/vstudio/productinfo/sysreqs/default.aspx">http://msdn.microsoft.com/vstudio/productinfo/sysreqs/default.aspx</a></span></p>
			<p>还需要适用<span>Windows</span>的<span>MySQL</span>源码分发版。有两种方法可以获得<span>MySQL 
			5.1 </span>源码分发版：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>获得<span>MySQL AB</span>打包的源码分发版软件包。预打包的源码分发版可从 
			<span>
			<a target="_top"  href="http://dev.mysql.com/downloads/">
			http://dev.mysql.com/downloads/</a></span>获得。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>你可以用最新<span>BitKeeper</span>开发源码树构建源码分发版。如果你计划构建，必须在<span>Unix</span>系统中创建安装软件包，并将它转移到<span>Windows</span>系统。<span>(</span>这样操作的理由是部分配置和构建步骤需要只能在<span>Unix</span>中工作的工具）<span>。BitKeeper</span>方法需要：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>运行<span>Unix</span>或类似<span>Unix</span>的系统，例如<span>Linux</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>该系统上安装的<span>BitKeeper 3.0</span>。关于如何下载和安装<span>BitKeeper</span>的说明参见<a href="#installing-source-tree" title="2.8.3. Installing from the Development Source Tree">2.8.3节，“从开发源码树安装”</a>。</p>
			<p>如果你使用<span>Windows</span>源码分发版，你可以直接跳到<a href="#windows-vc-plus-plus-build" title="2.8.6.1. Building MySQL Using VC++">2.8.6.1节，“使用VC++构建MySQL”</a>。要想从<span>BitKeeper</span>树构建，继续<a href="#windows-bitkeeper-build" title="2.8.6.2. Creating a Windows Source Package from the Latest Development Source">2.8.6.2节，“从最新的开发源码创建Windows源码安装包”</a>。</p>
			<p>如果你发现某些组件不能按预料的工作，或者你有好的建议可以改进目前的在<span>Windows</span>中的构建过程，请向<span>win32</span>邮件列表发送消息。请参见<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1节，“The MySQL邮件列表”</a>。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="windows-vc-plus-plus-build"></a>
				2.8.6.1.&nbsp;使用VC++构建MySQL</h4></div></div></div>
				<p><strong><span>注释：</span></strong><span>MySQL 
				4.1</span>和以上版本的<span>VC++</span>工作区文件与<span>Microsoft 
				Visual Studio 2003</span>版本兼容，<span>MySQL AB</span>人员已经在每个版本之前进行了测试。</p>
				<p>按照以下步骤构建<span>MySQL</span>：</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>创建工作目录<span>(</span>例如，<span><span>C</span><span>：<span>\</span></span></span><span class="MsoHyperlink"><span>
				</span></span>
				<span>workdir</span><span>)</span>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>使用<strong><span>WinZip</span></strong>或其它可以读取<span>.zip</span>文件的<span>Windows</span>工具将源码分发版解压缩到上述目录。</p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>启动<span>Visual Studio</span>。</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>从<span class="guimenu"><span>File</span></span>菜单，选择<span class="guimenuitem"><span>Open 
				Workspace</span></span>。</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>打开工作目录中的<span>MySQL</span><span>.dsw</span>工作区。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>从<span class="guimenu"><span>Build</span></span><span>
				</span>菜单，选择<span class="guisubmenu"><span>Set Active 
				Configuration</span></span>菜单。</p>
				<p>
				<span>7.<span>&nbsp;&nbsp;&nbsp;
				</span></span>点击窗口选择<span class="guimenuitem"><span>mysqld 
				- Win32 Debug</span></span>并点击<span class="guibutton"><span>OK</span></span>。</p>
				<p>
				<span>8.<span>&nbsp;&nbsp;&nbsp;
				</span></span>按<strong><span>F7</span></strong>开始构建调试服务器、库和客户端应用程序。</p>
				<p>
				<span>9.<span>&nbsp;&nbsp;&nbsp;
				</span></span>按同样方法编译发布版本。</p>
				<p>
				<span>10.</span>程序和库的调试版本位于<span>client_debug</span>和<span>lib_debug</span>目录。程序和库的发布版本位于<span>client_release</span>和<span>lib_release</span>目录。请注意如果你想要构建调试版本和发布版本，可以从<span class="guimenu"><span>Build</span></span>菜单选择<span class="guimenuitem"><span>Build 
				All</span></span>选项。</p>
				<p>
				<span>11.</span>测试服务器。使用前面的说明构建服务器时，默认<span>MySQL</span>基本目录和数据目录位于<span>C:\mysql</span>和<span>C:\mysql\data</span>。如果你想要使用源码树根目录和数据目录作为基本目录和数据目录来测试服务器，需要告诉服务器其路径名。可以在命令行用<span>--basedir</span>和<span>--datadir</span>选项来完成，或将相应选项放入选项文件<span>(</span>在<span>Windows</span>目录或<span><span>C</span><span>：<span>\my.cnf</span></span></span>中的<span>my.ini</span>文件<span>)</span>。如果想要使用的数据目录在其它地方，可以指定其路径名。</p>
				<p>
				<span>12.</span>根据你想要使用的服务器，从<span>client_release</span>或<span>client_debug</span>目录启动服务器。常用服务器启动说明见<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3节，“在Windows上安装MySQL”</a>。如果想要使用其它基本目录或数据目录，需要相应地更改指令。</p>
				<p>
				<span>13.</span>当服务器根据你的配置独立运行或作为服务时，尝试从<span>client_release</span>或<span>client_debug</span>目录中的<span>MySQL</span>交互式命令行实用工具连接它。</p>
				<p>如果构建的程序工作正常，停止服务器。按照以下步骤安装<span>MySQL</span>：</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>创建安装<span>MySQL</span>的目录。例如，要安装到<span><span>C</span><span>：<span>\mysql</span></span></span>，使用命令：</p>
				<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>mkdir C:\mysql</span></b></span></pre>
				<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>mkdir C:\mysql\bin</span></b></span></pre>
				<pre><span>4.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>mkdir C:\mysql\data</span></b></span></pre>
				<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>mkdir C:\mysql\share</span></b></span></pre>
				<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>C:\&gt; </span><span><b><span>mkdir C:\mysql\scripts</span></b></span></pre>
				<p>如果想要编译其它客户端程序并连接到<span>MySQL</span>，你还需要创建几个目录：</p>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\include</span></span></b></span></pre>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\lib</span></span></b></span></pre>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\lib\debug</span></span></b></span></pre>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\lib\opt</span></span></b></span></pre>
				<p>如果想要对<span>MySQL</span>进行基准检查，创建目录：</p>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\sql-bench</span></span></b></span></pre>
				<p>基准检查需要<span>Perl</span>支持。请参见<a href="#perl-support" title="2.13. Perl Installation Notes">2.13节，“Perl安装注意事项”</a>。</p>
				<p>
				<span>7.<span>&nbsp;&nbsp;&nbsp;
				</span></span>将下面的目录从<span>workdir</span>目录复制到<span><span>C</span><span>：<span>\mysql</span></span></span>目录：</p>
				<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>cd \workdir</span></b></span></pre>
				<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\workdir&gt; </span><span><b><span>copy client_release\*.exe C:\mysql\bin</span></b></span></pre>
				<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\workdir&gt; </span><span><b><span>copy client_debug\mysqld.exe C:\mysql\bin\mysqld-debug.exe</span></b></span></pre>
				<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\workdir&gt; </span><span><b><span>xcopy scripts\*.* C:\mysql\scripts /E</span></b></span></pre>
				<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>C:\workdir&gt; </span><span><b><span>xcopy share\*.* C:\mysql\share /E</span></b></span></pre>
				<p>如果想要编译其它客户端程序并连接到<span>MySQL</span>，还应当复制几个库和头文件：</p>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_debug\mysqlclient.lib C:\mysql\lib\debug</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_debug\libmysql.* C:\mysql\lib\debug</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_debug\zlib.* C:\mysql\lib\debug</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_release\mysqlclient.lib C:\mysql\lib\opt</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_release\libmysql.* C:\mysql\lib\opt</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_release\zlib.* C:\mysql\lib\opt</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy include\*.h C:\mysql\include</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy libmysql\libmysql.def C:\mysql\include</span></b></span></pre>
				<p>如果你想要对<span>MySQL</span>进行基准测试，你还应当：</p>
				<pre ><span>C:\workdir&gt; </span><span><b><span>xcopy sql-bench\*.* C:\mysql\bench /E</span></b></span></pre>
				<p>按照二进制<span>Windows</span>分发版相同的方法设置并启动服务器。请参见<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3节，“在Windows上安装MySQL”</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="windows-bitkeeper-build"></a>
				2.8.6.2.&nbsp;从最新的开发源码创建Windows源码安装包</h4></div></div></div>
				<p>要想从当前的<span>BitKeeper</span>源码树创建<span>Windows</span>源码安装包，使用下面的说明。请注意必须在运行<span>Unix</span>或类<span>Unix</span>操作系统的系统上执行该过程。例如，已知该过程在<span>Linux</span>上工作得很好。</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>复制<span>MySQL 5.1</span>的<span>BitKeeper</span>源码树。关于如何复制源码树的详细信息，相关说明参见<a href="#installing-source-tree" title="2.8.3. Installing from the Development Source Tree">2.8.3节，“从开发源码树安装”</a>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>配置和构建分发版，得到可工作的服务器二进制。实现的一个方法是在源码树顶级目录运行下面的命令：</p>
				<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>./BUILD/compile-pentium-max</span></b></span></pre>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>确保构建过程成功完成后，从源码树顶级目录运行下面的实用工具脚本：</p>
				<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>./scripts/make_win_src_distribution</span></b></span></pre>
				<p>该脚本创建在<span>Windows
				</span>系统中使用的源码安装包。可以根据你的需求为脚本提供不同的选项。它接受下面的选项：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--help</span></p>
				<p>显示帮助消息。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--debug</span></p>
				<p>打印关于脚本操作的信息，不创建包。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--tmp</span></p>
				<p>指定临时位置。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--suffix</span></p>
				<p>安装软件包后缀名。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--dirname</span></p>
				<p>复制文件的目录名<span>(</span>媒介之间<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--silent</span></p>
				<p>不打印正处理文件的详细列表。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--tar</span></p>
				<p>创建<span>tar.gz</span>安装软件包而不是<span>.zip</span>安装软件包。</p>
				<p>默认情况，<strong><span  style="font-family:
宋体">make_win_src_distribution</span></strong>创建<span>Zip-</span>格式的文件，文件名为<span>mysql-<i>VERSION</i>-win-src.zip</span>，其中<span><i><span>VERSION</span></i></span>代表<span>MySQL</span>源码树的版本。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>将创建的<span>Windows</span>源码安装包复制或上载到<span>Windows</span>机器上。要想编译，使用<a href="#windows-vc-plus-plus-build" title="2.8.6.1. Building MySQL Using VC++">2.8.6.1节，“使用VC++构建MySQL”</a>中的说明。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-client-compiling"></a>
			2.8.7.&nbsp;在Windows下编译MySQL客户端</h3></div></div></div><a class="indexterm" name="id2720028"></a><a class="indexterm" name="id2720038"></a>
			<p>在源码文件中，应当在<span>MySQL</span><span>.h</span>之前包括<span>my_global.h</span>：</p>
			<pre><span>#include &lt;my_global.h&gt;</span></pre>
			<pre><span>#include &lt;mysql.h&gt;</span></pre>
			<p>
			<span>my_global.h</span>包括你在<span>Windows</span>中编译程序所需要的<span>Windows</span>兼容文件<span>(</span>例如 
			<span>windows.h</span><span>)</span>。</p>
			<p>可以将代码连接到动态<span>libmysql.lib</span>库，它只是一个包装器以便根据需要装载<span>libmysql.dll</span>，或连接静态<span>mysqlclient.lib</span>库。</p>
			<p><span>MySQL</span>客户端库编译为线程库，因此你应当将代码编译为多线程。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="post-installation"></a>
		2.9.&nbsp;安装后的设置和测试</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#windows-post-installation">
			2.9.1. Windows下安装后的过程</a></span></dt><dt><span class="section">
			<a href="#unix-post-installation">
			2.9.2. Unix下安装后的过程</a></span></dt><dt><span class="section">
			<a href="#default-privileges">
			2.9.3. 使初始MySQL账户安全</a></span></dt></dl></div><a class="indexterm" name="id2720113"></a><a class="indexterm" name="id2720124"></a><a class="indexterm" name="id2720134"></a>
		<p>安装完<span>MySQL</span>后，有一些问题你应当处理。例如，在<span>Unix</span>中，你应当初始化数据目录并创建<span>MySQL</span>授权表。对于所有平台，一个重要安全问题是
		授权表中的初始账户没有密码。你应当指定密码以防止未授权访问<span>MySQL</span>服务器。你可以创建时区表以识别命名的时区。<span>(</span>目前，只在<span>Unix</span>上装了这些表。不久将在<span>Windows</span>中解决该问题）<span>。</span></p>
		<p>下面章节包括适用<span>Windows</span>系统和<span>Unix</span>系统的安装后的过程。另一节，<a href="#starting-server" title="2.9.2.3. Starting and Troubleshooting the MySQL Server">2.9.2.3节，“启动MySQL服务器以及其故障诊断和排除”</a>，适用所有平台；它描述了启动服务器时遇到问题时如何解决。<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3节，“使初始MySQL账户安全”</a>也适用所有平台。你应当按照说明确保你已经正确地为你的<span>MySQL</span>账户指定密码来保护其安全。</p>
		<p>如果你准备创建其它用户账户，你可以在<a href="database-administration.html#privilege-system" title="5.7. The MySQL Access Privilege System">5.7节，“MySQL访问权限系统”</a>和<a href="database-administration.html#user-account-management" title="5.8. MySQL User Account Management">5.8节，“MySQL用户账户管理”</a>找到关于<span>MySQL</span>访问控制系统和账户管理的信息。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-post-installation"></a>
			2.9.1.&nbsp;Windows下安装后的过程</h3></div></div></div>
			<p>在<span>Windows</span>中，不需要创建数据目录和授权表。<span>MySQL 
			Windows</span>分发版包括在数据目录下的<span>MySQL</span>数据库中的一套预初始化的账户的
			授权表。不要运行<span>Unix</span>中使用的<strong><span>mysql_install_db</span></strong>脚本。但是，如果你没有使用<span>Windows 
			Installation Wizard</span>（安装帮助）来安装<span>MySQL</span>，应当为账户指定密码。请参见<a href="#mysql-install-wizard-introduction" title="2.3.4.1. Introduction">2.3.4.1节，“前言”</a>。在<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3节，“使初始MySQL账户安全”</a>。</p>
			<p>设置密码前，你可能想要运行一些客户端程序来确保你能够连接服务器，并且操作正确。确保服务器在运行<span>(</span>参见<a href="#windows-server-first-start" title="2.3.10. Starting the Server for the First Time">2.3.10节，“首次启动服务器”</a><span>)</span>，然后发出下面的命令来验证你可以从服务器获取信息。输出应当类似于：</p>
			<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqlshow</span></b></span></pre>
			<pre><span>+-----------+</span></pre>
			<pre><span>| Databases |</span></pre>
			<pre><span>+-----------+</span></pre>
			<pre><span>| mysql&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| test&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------+</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqlshow mysql</span></b></span></pre>
			<pre><span>Database: mysql</span></pre>
			<pre><span>+--------------+</span></pre>
			<pre><span>|&nbsp;&nbsp;&nbsp; Tables&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+--------------+</span></pre>
			<pre><span>| columns_priv |</span></pre>
			<pre><span>| db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| func&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>| host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| tables_priv&nbsp; |</span></pre>
			<pre><span>| user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+--------------+</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysql -e &quot;SELECT Host,Db,User FROM db&quot; mysql</span></b></span></pre>
			<pre><span>+------+-------+------+</span></pre>
			<pre><span>| host | db&nbsp;&nbsp;&nbsp; | user |</span></pre>
			<pre><span>+------+-------+------+</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp; | test% |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+------+-------+------+</span></pre>
			<p>如果你正运行支持服务的<span>Windows</span>版本，你想让<span>MySQL</span>服务器在<span>Windows</span>启动时自动运行，参见<a href="#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12节，“以Windows服务方式启动MySQL”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="unix-post-installation"></a>
			2.9.2.&nbsp;Unix下安装后的过程</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#mysql-install-db">
				2.9.2.1. 与运行mysql_install_<span><strong class="command">db有关的问题</strong></span></a></span></dt><dt><span class="section">
				<a href="#automatic-start">
				2.9.2.2. 自动启动和停止MySQL</a></span></dt><dt><span class="section">
				<a href="#starting-server">
				2.9.2.3. 启动MySQL服务器以及其故障诊断和排除</a></span></dt></dl></div>
			<p>在<span>Unix</span>上安装<span>MySQL</span>后，需要初始化
			授权表、启动服务器，并确保服务器工作正常。你还要让服务器随系统的启动和停止自动启动和停止。应当为授权表中的账户指定密码。</p>
			<p>在<span>Unix</span>中，由<strong><span>mysql_install_db</span></strong>设置
			授权表。在某些安装中，该程序自动运行：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你使用<span>RPM</span>分发版在<span>Linux</span>上安装<span>MySQL</span>，服务器<span>RPM</span>运行<strong><span>mysql_install_db</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你使用<span>PKG</span>分发版在<span>Mac 
			OS X</span>上安装<span>MySQL</span>，安装器运行<strong><span>mysql_install_db</span></strong>。</p>
			<p>否则，你需要自己运行<strong><span  style="font-family:
宋体">mysql_install_db</span></strong>。</p>
			<p>下面的过程描述了如何初始化授权表<span> (</span>如果还没有初始化<span>)</span>并启动服务器。还推荐了一些你可以用来测试服务器是否可以访问以及是否工作正确的命令。关于自动启动和停止服务器的信息，参见<a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2节，“自动启动和停止MySQL”</a>。</p>
			<p>你完成过程并让服务器运行后，你应当为<strong><span>mysql_install_db</span></strong>创建的账户指定密码。<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3节，“使初始MySQL账户安全”</a>中列出了相关说明。</p>
			<p><span>在本节的例子中，服务器用<span>MySQL</span>登录账户的用户<span>ID</span>运行。假定存在这样的账户。如果不存在，要么创建账户，或用其它已有的用来运行服务器的登录账户来替代。</span></p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>进入<span>MySQL</span>的顶级安装目录，此处为<span><i><span>BASEDIR</span></i></span>：</p>
			<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd <i>BASEDIR</i></span></b></span></pre>
			<p><span><i>
			<span>BASEDIR</span></i></span>可能为<span>/usr/local/mysql</span><span>
			</span>或<span>/usr/local</span>。以下步骤假定你位于该目录。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>根据需要，运行<b><span>mysql_install_db</span></b><span>
			</span>程序设置含有确定如何让用户连接服务器的权限的初始<span>MySQL</span>授权表。如果你使用的分发版类型不能运行程序，你需要执行该步骤。</p>
			<p>典型，只有首次安装<span>MySQL</span>时，才需要运行<strong><span>mysql_install_db</span></strong>，因此如果你升级已有的安装你可以跳过该步骤，但<strong><span>mysql_install_db</span></strong>不会覆盖已有的
			授权表，因此可以在任何环境下安全运行。</p>
			<p>要想初始化授权表，根据<strong><span  style="font-family:
宋体">mysql_install_db</span></strong>是位于<span>bin</span>还是<span>scripts</span>目录下，使用下面的一个命令：</p>
			<pre ><span>shell&gt; </span><span><b><span>bin/mysql_install_db --user=mysql</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>scripts/mysql_install_db --user=mysql</span></b></span></pre>
			<p><strong>
			<span>mysql_install_db</span></strong>脚本创建数据目录、拥有所有数据库权限的<span>mysql</span>数据库和可以用来测试<span>MySQL</span>的<span>test</span>数据库。脚本为<span>root</span>账户和匿名用户账户创建
			授权表条目。账户一开始没有密码。<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3节，“使初始MySQL账户安全”</a>中描述了初始权限。简单说，这些权限允许<span>MySQL </span>
			<span>root</span>用户执行任何操作，允许任何人使用<span>test</span>名创建或使用数据库或用<span>test_</span>启动。</p>
			<p>一定要确保由<span>mysql</span>登录账户拥有数据库目录和文件，以便在以后运行时 
			服务器具有读、写访问权限。为此，如果你用<span><span>root</span><span>用户</span></span>运行<strong><span>mysql_install_db</span></strong>，应当使用<span>--user</span>选项。否则，当以<span>mysql</span>登录时，应当执行脚本，你可以省略命令中的<span>--user</span>选项。</p>
			<p><strong>
			<span>mysql_install_db</span></strong>在<span>mysql</span>数据库中创建几个表，包括<span>user</span>、<span>db</span>、<span>host</span>、 
			<span>tables_priv</span>、<span>columns_priv</span>和<span>func</span>以及其它。<a href="database-administration.html#privilege-system" title="5.7. The MySQL Access Privilege System">5.7节，“MySQL访问权限系统”</a>中有完整的列表和描述。</p>
			<p>如果你不想要<span>test</span>数据库，启动服务器后，可以用<strong><span>mysqladmin 
			-u root drop test</span></strong>卸掉。</p>
			<p>如果有<strong><span>mysql_install_db</span></strong>相关问题，参见<a href="#mysql-install-db" title="2.9.2.1. Problems Running mysql_install_db">2.9.2.1节，“与运行mysql_install_<span><strong class="command">db有关的问题</strong></span>”</a>。</p>
			<p>有一些选择运行<b><span>mysql_install_db</span></b>脚本<span>,</span>正如<span>MySQL</span>分发版中所提供的：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果想让初始权限与标准默认值不同，你可以在运行前修改<strong><span>mysql_install_db</span></strong>。然而，最好是在设置
			授权表后使用<span>GRANT</span>和<span>REVOKE</span>来更改权限。换句话说，你可以运行<strong><span>mysql_install_db</span></strong>，然后通过<span>MySQL
			</span>
			<span>root</span>用户使用<span>mysql 
			-u rootMySQL</span>来连接服务器，以便发出<span>GRANT</span>和<span>REVOKE</span>命令。</p>
			<p>如果你想要在几个机器上用相同的权限安装<span>MySQL</span>，可以将<span><span>GRANT</span><span>和<span>REVOKE</span></span></span>语句放入一个文件中，以脚本方式执行文件，运行<b><span>mysql_install_db</span></b>之后使用<span>mysql</span>。例如：</p>
			<pre><span>shell&gt; </span><span><b><span>bin/</span></b></span><strong><span > mysql_install_db</span></strong><span><b><span> --user=mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>bin/mysql -u root &lt; your_script_file</span></b></span></pre>
			<pre><span>&nbsp;</span></pre>
			<p>这样，你就可以避免在每台机器上手动发出命令。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>完全可以重新创建授权表。如果你刚刚知道如何使用<span><span>GRANT</span><span>和<span>REVOKE</span>，</span></span>并且运行<b><span>mysql_install_db</span></b><span>
			</span>之后进行了许多修改，想要关闭表重新启动，你可能想要这样操作。</p>
			<p>要想重新创建授权表，从含有<span>MySQL</span>数据库的目录中移走所有 
			<span>.frm</span>、<span>.MYI</span>和 
			<span>.MYD</span>文件。<span>(</span>这是数据目录下面的<span>mysql</span>目录，当你运行<strong><span  style="font-family:
宋体">mysqld --help</span></strong><span> </span>时，列为<span>datadir</span>值<span>)</span>。然后再次运行<b><span>mysql_install_db</span></b><span>
			</span>脚本。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以使用<span>--skip-grant-tables</span>选项手动启动<strong><span  style="font-family:
宋体">mysqld</span></strong>，并使用<strong><span>mysql</span></strong>自己增加权限信息：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql --skip-grant-tables &amp;</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>bin/mysql mysql</span></b></span></pre>
			<p>手动从<strong><span>mysql</span></strong>执行<b><span>mysql_install_db</span></b>中的<span>SQL</span>命令。确保后面钥运行<strong><span>mysqladmin 
			flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span></strong>，让服务器重载授权表。</p>
			<p>请注意不使用<strong><span  style="font-family:
宋体">mysql_install_db</span></strong>，不仅需要手动安装授权表，还需要先创建。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>启动<span>MySQL</span>服务器：</p>
			<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
			<p>一定要让<span>MySQL</span>服务器使用非权限<span>(non-</span><span>root</span><span>)
			</span>登录账户运行。为此，如果你以系统<span>root</span>运行<span>mysql_safe</span>，应当使用<span>--user</span>选项。否则，你应当用<span>mysql</span>登录到系统来执行脚本，这样可以省略命令中的<span>--user</span>选项。</p>
			<p> <a href="problems.html#changing-mysql-user" title="A.3.2. How to Run MySQL as a Normal User">
			A.3.2节，“如何以普通用户身份运行MySQL”</a>中给出了非特权用户运行<span>MySQL</span>的说明。</p>
			<p>
			如果在执行该步前你忘记了创建授权表，当你启动服务器时，在错误日志文件中将出现下面的消息：</p>
			<pre ><span>mysqld: Can&#39;t find file: &#39;host.frm&#39;</span></pre>
			<p>如果启动服务器时遇到其它问题，查阅<a href="#starting-server" title="2.9.2.3. Starting and Troubleshooting the MySQL Server">2.9.2.3节，“启动MySQL服务器以及其故障诊断和排除”</a>。</p>
			<p>
			<span>6.<span>&nbsp;&nbsp;&nbsp;
			</span></span>使用<strong><span>mysqladmin</span></strong>验证服务器在运行中。以下命令提供了简单的测试，可检查服务器是否已经启动并能响应连接：</p>
			<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqladmin version</span></b></span></pre>
			<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>bin/mysqladmin variables</span></b></span></pre>
			<p><span>&nbsp;</span><b><span>mysqladmin 
			version</span></b>的输出根据平台和<span>MySQL</span>版本的不同而稍有变化，但是应当类似于：</p>
			<pre ><span>shell&gt; </span><span><b><span>bin/mysqladmin version</span></b></span></pre>
			<pre ><b><span>mysqladmin</span></b><span>&nbsp; Ver 8.41 Distrib 5.1.2-alpha, for pc-linux-gnu on i686</span></pre>
			<pre ><span>Copyright (C) 2000 MySQL AB &amp; MySQL Finland AB &amp; TCX DataKonsult AB</span></pre>
			<pre ><span>This software comes with ABSOLUTELY NO WARRANTY. This is free software,</span></pre>
			<pre ><span>and you are welcome to modify and redistribute it under the GPL license</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>Server version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.1.2-alpha-Max</span></pre>
			<pre ><span>Protocol version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</span></pre>
			<pre ><span>Connection&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Localhost via UNIX socket</span></pre>
			<pre ><span>UNIX socket&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/lib/mysql/mysql.sock</span></pre>
			<pre ><span>Uptime:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 14 days 5 hours 5 min 21 sec</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>Threads: 1&nbsp; Questions: 366&nbsp; Slow queries: 0&nbsp; </span></pre>
			<pre ><span>Opens: 0&nbsp; Flush tables: 1&nbsp; Open tables: 19&nbsp; </span></pre>
			<pre ><span>Queries per second avg: 0.000</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<p>要想看还可以怎样使用<b><span>mysqladmin</span></b>，用<span>-- 
			help</span>选项调用它。</p>
			<p>
			<span>9.<span>&nbsp;&nbsp;&nbsp;
			</span></span>验证可以关闭服务器：</p>
			<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqladmin -u root shutdown</span></b></span></pre>
			<p>
			<span>11.</span>验证是否可以重启服务器。可以直接使用<strong><span>mysqld_safe</span></strong>或调用<b><span>mysqld</span></b>。例如：</p>
			<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql --log &amp;</span></b></span></pre>
			<p>如果<span>mysqld_safe</span>失败，参见<a href="#starting-server" title="2.9.2.3. Starting and Troubleshooting the MySQL Server">2.9.2.3节，“启动MySQL服务器以及其故障诊断和排除”</a>。</p>
			<p>
			<span>13.</span>进行一些简单的测试，验证你可以从服务器查询信息。输出应当类似于：</p>
			<pre><span>14.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqlshow</span></b></span></pre>
			<pre><span>15.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+-----------+</span></pre>
			<pre><span>16.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| Databases |</span></pre>
			<pre><span>17.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+-----------+</span></pre>
			<pre><span>18.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| mysql&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>19.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| test&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>20.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+-----------+</span></pre>
			<pre><span>21.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>22.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqlshow mysql</span></b></span></pre>
			<pre><span>23.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Database: mysql</span></pre>
			<pre><span>24.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------------------+</span></pre>
			<pre><span>25.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>26.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------------------+</span></pre>
			<pre><span>27.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| columns_priv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>28.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>29.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| func&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>30.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| help_category&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>31.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| help_keyword&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>32.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| help_relation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>33.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| help_topic&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>34.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>35.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| proc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>36.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| procs_priv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>37.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| tables_priv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>38.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>39.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone_leap_second&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>40.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>41.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone_transition&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>42.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone_transition_type |</span></pre>
			<pre><span>43.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>44.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------------------+</span></pre>
			<pre><span>45.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>46.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysql -e &quot;SELECT Host,Db,User FROM db&quot; mysql</span></b></span></pre>
			<pre><span>47.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+------+--------+------+</span></pre>
			<pre><span>48.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| host | db&nbsp;&nbsp;&nbsp;&nbsp; | user |</span></pre>
			<pre><span>49.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+------+--------+------+</span></pre>
			<pre><span>50.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| %&nbsp;&nbsp;&nbsp; | test&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>51.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| %&nbsp;&nbsp;&nbsp; | test_% |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>52.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+------+--------+------+</span></pre>
			<p>
			<span>53.</span>在<span>sql-bench</span>目录<span>(</span>在<span>MySQL</span>安装目录下<span>)</span>中有一个基准套件，可以用来比较<span>MySQL</span>在不同平台上的执行情况。基准套件在<span>Perl</span>中编写。它使用<span>Perl 
			DBI</span>模块来为各种数据库提供一个与数据库无关的接口，并且还需要其它<span>Perl</span>模块来运行基准套件。必须安装以下模块：</p>
			<pre><span>54.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>DBI</span></pre>
			<pre><span>55.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>DBD::mysql</span></pre>
			<pre><span>56.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Data::Dumper</span></pre>
			<pre><span>57.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Data::ShowTable</span></pre>
			<p>可以从<span>CPAN(<a target="_top"  href="http://www.cpan.org/">http://www.cpan.org/</a>)</span>获得这些模块。请参见<a href="#perl-installation" title="2.13.1. Installing Perl on Unix">2.13.1节，“在Unix中安装Perl”</a>。</p>
			<p><span>&nbsp;</span><span>sql-bench/Results</span>目录包含了在不同数据库和平台上的各种运行结果。要想进行测试，执行命令：</p>
			<pre ><span>shell&gt; </span><span><b><span>cd sql-bench</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>perl run-all-tests</span></b></span></pre>
			<p>如果没有<span>sql-bench</span>目录，你可能使用<span>RPM</span>文件安装了<span>MySQL</span>，没有使用源码<span>RPM</span>。<span>(</span>源码<span>RPM</span>包括<span>sql-bench</span><span> 
			benchmark</span>目录）<span>。 </span>此时，必须先安装基准套件后才能使用。有一个单独的<span>mysql-bench-VERSION-i386.rpm</span>基准<span>RPM</span>文件，其中包含了基准代码和数据。</p>
			<p>如果你有源码分发版，其<span>tests</span>子目录中也有一些测试可供运行。例如，要运行<span>auto_increment.tst</span>，从源码分发版的顶级目录执行该命令：</p>
			<pre ><span>shell&gt; </span><span><b><span>mysql -vvf test &lt; ./tests/auto_increment.tst</span></b></span></pre>
			<p>期望的结果被显示在<tt >“<span> 
			./tests/auto_increment.res</span>”</tt>文件中。</p>
			<p>
			<span>58.</span>至此，你应当可以运行服务器了。然而，初始<span>MySQL</span>账户均没有密码，因此应当使用<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3节，“使初始MySQL账户安全”</a>中的说明来指定密码。</p>
			<p><span>MySQL 5.1</span>安装过程在<span>MySQL</span>数据库中创建时区表。但是，必须手动装载表。相关说明参见<a href="database-administration.html#time-zone-support" title="5.10.8. MySQL Server Time Zone Support">5.10.8节，“MySQL服务器时区支持”</a>。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-db"></a>
				2.9.2.1.&nbsp;与运行mysql_install_<span><strong class="command">db有关的问题</strong></span></h4></div></div></div><a class="indexterm" name="id2721408"></a><a class="indexterm" name="id2721418"></a>
				<p><b><span>mysql_install_db</span></b><span>
				</span>脚本的目的是生成新的<span>MySQL</span>授权表。它不覆盖已有的<span>MySQL</span>授权表，并且它不影响任何其它数据。</p>
				<p>如果你想要重新创建授权表，首先停止<b><span>mysqld</span></b>服务器（如果它正运行）。然后重新命名数据目录下的<span>MySQL</span>目录并保存，然后运行<strong><span>mysql_install_db</span></strong>。例如：</p>
				<pre><span>shell&gt; </span><span><b><span>mv mysql-data-directory/mysql mysql-data-directory/mysql-old</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>mysql_install_db --user=mysql</span></b></span></pre>
				<p>本节列出了运行<strong><span  style="font-family:
宋体">mysql_install_db</span></strong>时你可能遇到的问题：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>
				mysql_install_db fails to install the grant tables</span></strong><span>
				</span></p>
				<p>你会发现<b><span>mysql_install_db</span></b>不能安装
				授权表，显示下面的消息后终止：</p>
				<pre ><span>Starting mysqld daemon with databases from XXXXXX</span></pre>
				<pre ><span>mysqld ended</span></pre>
				<p>在这种情况下，你应该很小心地检验日志文件！日志文件应该位于目录<tt >“<span>XXXXXX</span>”</tt>，用错误消息命名，并且应该指出为什么<span><b><span>mysqld</span></b></span>没启动。如果你不理解发生的事情，邮寄一份错误报告，包含日志文件！参见<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3节，“如何通报缺陷和问题”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong>
				<span>已经有一个</span><span>amysqld</span><span>进程在运行</span></strong></p>
				<p>
				表示服务器在运行，这种情况下可能已经创建了授权表。如果如此，则不再需要运行<strong><span>mysql_install_db</span></strong>，因为只需要运行一次<span>(</span>当你首次安装<span>MySQL</span>时<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>
				当一个服务器正运行时，安装第二个服务器不工作</span></strong></p>
				<p>这只有在当你已经有已存在的<strong><span>MySQL</span></strong>安装但是想要把新安装放在一个不同的地方时才会发生。例如，你可能已经有了一个产品安装，但为了测试想要同时运行<span>2</span>个安装。通常当你试着运行第二个服务器时，发生的问题是它试图和第一个使用同样的套接字和端口。在这种情况下，你将遇到错误消息：</p>
				<pre ><span>Can&#39;t start server: Bind on TCP/IP port:</span></pre>
				<pre ><span>Address already in use</span></pre>
				<pre ><span>Can&#39;t start server: Bind on unix socket...</span></pre>
				<p>关于设置多个服务器的说明，参见<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12节，“在同一台机器上运行多个MySQL服务器”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>你没有</span></strong><tt ><b>“<span> 
				/tmp </span>”</b></tt><strong><span>的写权限</span></strong></p>
				<p>如果你没有写权限在默认位置<span>(</span>在<tt >“<span>/tmp</span>”</tt>里<span>)</span>创建一个<span>Unix</span>套接字文件，或没有<tt >在“<span>/tmp</span>”</tt>创建临时文件的许可，在运行<span><b><span>mysql_install_db</span></b></span>或<span><b><span>mysqld</span></b>服务器</span>时，你将遇到一个错误。</p>
				<p>你可以在开始<span><b><span>mysql_install_db</span></b></span>或<span><b><span>mysqld</span></b>之前</span>执行以下命令指定一个不同的<span>Unix</span>套接字文件位置和临时目录：</p>
				<pre ><span>shell&gt; </span><span><b><span>TMPDIR=/<i>some_tmp_dir</i>/</span></b></span></pre>
				<pre ><span>shell&gt; </span><span><b><span>MYSQL_UNIX_PORT=/<i>some_tmp_dir</i>/mysql.sock</span></b></span></pre>
				<pre ><span>shell&gt; </span><span><b><span>export TMPDIR MYSQL_UNIX_PORT</span></b></span></pre>
				<p><span><i>
				<span>some_tmp_dir</span></i></span>应该是你有写许可的某个目录的全路径。</p>
				<p>然后，你应当能够用这些命令运行<strong><span>mysql_install_db</span></strong>并启动服务器：</p>
				<pre ><span>shell&gt; </span><span><b><span>bin/mysql_install_db --user=mysql</span></b></span></pre>
				<pre ><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
				<p>如果<b><span>mysql_install_db</span></b>位于<span>scripts</span>目录下，首先修改命令<span>scripts/mysql_install_db</span>。</p>
				<p>参见<a href="problems.html#problems-with-mysql-sock" title="A.4.5. How to Protect or Change the MySQL Socket File /tmp/mysql.sock">A.4.5节，“如何保护或更改MySQL套接字文件/tmp/mysql.sock<code class="filename"></code>”</a>。请参见<a href="environment-variables.html" title="Appendix F. Environment Variables">附录F：<i>环境变量</i></a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="automatic-start"></a>
				2.9.2.2.&nbsp;自动启动和停止MySQL</h4></div></div></div><a class="indexterm" name="id2721827"></a><a class="indexterm" name="id2721837"></a><a class="indexterm" name="id2721847"></a>
				<p>通常你可以用以下方法启动<b><span>mysqld</span></b>服务器：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>直接调用<b><span>mysqld</span></b>。该方法适合任何平台。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>作为<span>Windows</span>服务运行<span>MySQL</span>服务器。可以在支持服务的<span>Windows</span>版本<span>(</span>例如<span> 
				NT</span>、<span>2000</span>、<span>XP</span>和<span>2003)</span>上实现。可以将服务设置为在<span>Windows
				</span>启动时自动启动服务器，或根据需要启动的手动服务。相关说明参见<a href="#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12节，“以Windows服务方式启动MySQL”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>调用<b><span>mysqld_safe</span></b>，可以为<strong><span  style="font-family:
宋体">mysqld</span></strong>确定正确的选项然后使用这些选项来运行。该脚本适用于基于<span>BSD Unix</span>的系统。请参见<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>调用<b><span>mysql.server</span></b>。该脚本主要用于使用系统<span>V-style</span>运行目录的系统的启动和关闭，它通常安装到<span>mysql</span>下。<strong><span>mysql.server</span></strong>脚本调用<b><span>mysqld_safe</span></b>来启动服务器。请参见<a href="database-administration.html#mysql-server" title="5.1.4. mysql.server — MySQL Server Startup Script">5.1.4节，“mysql.server：MySQL服务器启动脚本”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>你可以在<span>Mac OS X</span>上安装一个单独的<span>MySQL 
				Startup Item</span>安装包来使系统启动时自动启动<span>MySQL</span>。<span>Startup 
				Item</span>调用<b><span>mysql.server</span></b>来启动服务器。详细介绍参见
              <a href="#mac-os-x-installation" title="2.5. Installing MySQL on Mac OS X">
				2.5节，“在Mac OS X上安装MySQL”</a>。</p>
				<p><b><span>mysql.server</span></b>和<b><span>mysqld_safe</span></b>脚本和<span>Mac 
				OS X Startup Item</span>可以用来手动启动服务器，或自动启动系统。<strong><span>mysql.server</span></strong>和<span>Startup 
				Item</span>还可以用来停止服务器。</p>
				<p>
				<span>mysql.server</span>脚本可以被用来启动或停止服务器，通过用<span>start</span>或<span>stop</span>参数调用它：<span>
				</span></p>
				<pre><span>shell&gt; </span><span><b><span>mysql.server start</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>mysql.server stop</span></b></span></pre>
				<p>在<span><b><span>mysql.server</span></b></span>启动服务器之前，它把目录改变到<strong><span>MySQL</span></strong>安装目录，然后调用<span><b><span>safe_mysqld</span></b></span>。如果你想要作为一些特定的用户运行服务器，在<span>/etc/my.cnf</span>选项文件的<span>[<b>mysqld</b>]</span>组增加相应<span>user</span>选项，如本节后面所示。<span>(</span>如果你有在一个非标准的地点安装的二进制分发版，你可能需要编辑<span><b><span>mysql.server</span></b></span>。修改它，运行<span><b><span>safe_mysqld</span></b></span>前，<span>cd</span>到正确的目录。注意如果你修改<span><b><span>mysql.server</span></b></span>，那么某个时候升级<strong><span>MySQL</span></strong>时，你的修改版本将被覆盖，因此你应该做一个你可重新安装的编辑过的版本的拷贝）<span>。
				</span></p>
				<p><span><b><span>
				mysql.server stop</span></b></span>通过向服务器发出一个信号停止它。你可手动执行<span><b><span>mysqladmin 
				shutdown</span></b></span>关闭服务器。</p>
				<p>要想在服务器上自动启动和停止<span>MySQL</span>，应在<tt >“<span>/etc/rc 
				* </span></tt>文件中适当的地方增加启动、停止命令。</p>
				<p>如果你使用<span>Linux</span>服务器<span>RPM</span>安装软件包<span>(</span><span>MySQL-server-VERSION.rpm</span><span>)</span>，<b><span>mysql.server</span></b>脚本安装在<span>/etc/init.d</span>目录中，名为<span>MySQL</span>。你不需要手动安装它。关于<span>Linux 
				RPM</span>软件包的详细信息参见<a href="#linux-rpm" title="2.4. Installing MySQL on Linux">2.4节，“在Linux下安装MySQL”</a>。</p>
				<p>一些供应商提供的<span>RPM</span>软件包安装的启动脚本名字不同，例如<b><span>mysqld</span></b>。</p>
				<p>如果从不自动安装<strong><span  style="font-family:
宋体">mysql.server</span></strong>的源码分发版或二进制分发版格式来安装<span>MySQL</span>，可以手动安装它。可以在<span>MySQL</span>安装目录下或<span>MySQL
				</span>源码树的<span>support-files</span>目录中找到脚本。</p>
				<p>要想手动安装<strong><span  style="font-family:
宋体">mysql.server</span></strong>，用名称<strong><span  style="font-family:
宋体">mysql</span></strong>将它复制到<span>/etc/init.d</span>目录，然后将它变为可执行文件。只需要将位置更改为<b><span>mysql.server</span></b><span>is</span>所在并执行这些命令的相应目录：</p>
				<pre><span>shell&gt; </span><span><b><span>cp mysql.server /etc/init.d/mysql</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>chmod +x /etc/init.d/mysql</span></b></span></pre>
				<p>旧的<span>Red Hat</span>系统使用<span>/etc/rc.d/init.d</span>目录，不使用<span>/etc/init.d</span>。相应地调节前面的命令。也可以首先创建指向<span>/etc/rc.d/init.d</span>的符号连接<span>/etc/init.d</span>：</p>
				<pre><span>shell&gt; </span><span><b><span>cd /etc</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>ln -s rc.d/init.d .</span></b></span></pre>
				<p>安装脚本后，用来激活它以便在系统启动时运行所需要的命令取决于你的操作系统。在<span>Linux</span>中，你可以使用<span>chkconfig</span>：</p>
				<pre><span>shell&gt; </span><span><b><span>chkconfig --addMySQL</span></b></span></pre>
				<p>在一些<span>Linux</span>系统中，还需要下面的命令来完全激活<span>MySQL</span>脚本：</p>
				<pre><span>shell&gt; </span><span><b><span>chkconfig --level 345MySQL on</span></b></span></pre>
				<p>在<span>FreeBSD</span>中，启动脚本通常应当位于<span>/usr/local/etc/rc.d/</span>。手册的<span>rc(8)</span>页内说明只有该目录脚本的基本名匹配<span>*.sh</span><span> 
				shell</span>文件名模式，脚本才会执行。目录内的其它文件或目录将被忽略掉。换句话说，在<span>FreeBSD</span>中，应当将<span>mysql.server</span>脚本安装为 
				<span>/usr/local/etc/rc.d/mysql.server.sh</span>以便自动启动。</p>
				<p>前面设置的另一种情况是，一些操作系统启动时也使用<span>/etc/rc.local</span>或<span>/etc/init.d/boot.local</span><span>
				</span>来启动其它服务。要想使用该方法启动<span>MySQL</span>，你可以在相应启动文件后面追加一条命令：</p>
				<pre><span>/bin/sh -c &#39;cd /usr/local/mysql; ./bin/mysqld_safe --user=mysql &amp;&#39;</span></pre>
				<p>对于其它系统，查阅操作系统的文档来查看安装启动脚本的方法。</p>
				<p>你也可以在一个全局<tt >“<span>/etc/my.cnf</span>”</tt>文件中增加<span><b><span>mysql.server</span></b></span>的选项。一个典型<tt >的“<span>/etc/my.cnf</span>”</tt>文件可能看起来像这样：</p>
				<pre><span>[mysqld]</span></pre>
				<pre><span>datadir=/usr/local/mysql/var</span></pre>
				<pre><span>socket=/var/tmp/mysql.sock</span></pre>
				<pre><span>port=3306</span></pre>
				<pre><span>user=mysql</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>[<b>mysql.server</b>]</span></pre>
				<pre><span>basedir=/usr/local/mysql</span></pre>
				<p><span>mysql.server</span>脚本使用下列变量：<span>basedir</span>、<span>datadir</span>和<span>pid-file</span>。定义后，必须将它们放到选项文件中，不能放到命令行。<strong><span>mysql.server</span></strong>只识别<span>start</span>和<span>stop</span>命令行参数。</p>
				<p>下面的表显示了服务器和每个启动脚本从选项文件读取哪个选项组：</p>
				<table border="1" cellpadding="0" id="table8">
					<tr>
						<td width="140">
						<p><strong>
						<span>脚本</span></strong></td>
						<td width="309">
						<p><strong>
						<span>选项组</span></strong></td>
					</tr>
					<tr>
						<td width="140">
						<p><strong>
						<span>mysqld</span></strong></td>
						<td width="309">
						<p>
						<span>[mysqld]</span><span>,
						</span>
						<span>[server]</span><span>,
						</span>
						<span>[mysqld-major-version]</span></td>
					</tr>
					<tr>
						<td width="140">
						<p><strong>
						<span>mysql.server</span></strong></td>
						<td width="309">
						<p>
						<span>[mysqld]</span><span>,
						</span>
						<span>[mysql.server]</span><span>,
						</span>
						<span>[server]</span></td>
					</tr>
					<tr>
						<td width="140">
						<p><strong>
						<span>mysqld_safe</span></strong></td>
						<td width="309">
						<p>
						<span>[mysqld]</span><span>,
						</span>
						<span>[server]</span><span>,
						</span>
						<span>[mysqld_safe]</span></td>
					</tr>
				</table>
				<p>
				<span  >[mysqld-major-version]</span><span>意味着名为</span><span  >[mysqld-5.0]</span>的<span>组</span><span>，</span><span  >[mysqld-5.1]</span><span>用于版本为<span>5.0.x</span></span><span>、</span><span >5.1.x</span><span>等的服务器。该特性可以用来指定只被给定发布系列的服务器读取的选项。</span></p>
				<p>为了向后兼容，<strong><span  style="font-family:
宋体">mysql.server</span></strong>还读取<span>[mysql_server]</span>组，<b><span>mysqld_safe</span></b>还读取<span>[safe_mysqld]</span>组。然而，当使用<span>MySQL 
				5.1</span>时，你应当更新选项文件，使用<span>[mysql.server]</span>和<span>[mysqld_safe]</span>组。</p>
				<p>参见<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="starting-server"></a>
				2.9.2.3.&nbsp;启动MySQL服务器以及其故障诊断和排除</h4></div></div></div><a class="indexterm" name="id2722543"></a><a class="indexterm" name="id2722554"></a>
				<p>如果启动服务器时有问题，可以尝试：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>指定你使用的储存引擎需要的任何特殊选项。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>确保服务器知道从哪里找到数据目录。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>确保服务器可以使用数据目录。数据目录和内容的所有权和允许必须设置成服务器可以访问和修改它们。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>检查错误日志查看服务器为何不启动。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>验证服务器想要使用的网络接口可用。</p>
				<p>一些储存引擎有一些选项可以控制其行为。你可以创建一个<span>my.cnf</span>文件并为计划使用的引擎设置启动选项。如果你将要使用支持事务处理表<span> 
				(</span><span>InnoDB</span>，<span>BDB</span><span>)</span>的储存引擎，应确保启动服务器之前按照你的期望对它们进行了配置：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你正使用<span>InnoDB</span>表，参阅<span>InnoDB</span><span>-specific</span>启动选项。如果你未指定选项，<span>InnoDB</span>使用默认值作为配置选项。请参见<a href="storage-engines.html#innodb-configuration" title="15.2.3. InnoDB Configuration">15.2.3节，“InnoDB配置”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你正使用<span>BDB</span><span> 
				(Berkeley DB)</span>表，你应当熟悉不同的<span>BDB</span><span>-specific</span>启动选项。请参见<a href="storage-engines.html#bdb-start" title="15.5.3. BDB Startup Options">15.5.3节，“BDB启动选项”</a>。</p>
				<p>当<b><span>mysqld</span></b>服务器启动时，它进入数据目录。在这里它可以找到数据库并写入日志文件。在<span>Unix</span>中，服务器还在数据目录中写<span>pid(</span>过程<span> 
				ID)</span>文件。</p>
				<p>当编译服务器时确定数据目录。这是服务器默认寻找数据目录的位置。如果数据目录位于系统中的其它位置，服务器不能正确工作。用<span>--verbose</span>和<span>--help</span>选项调用<b><span>mysqld</span></b>你可以找出默认路径设定值。</p>
				<p>如果默认值与你的系统中的<span>MySQL</span>安装布局不匹配，你可以在命令行中为<b><span>mysqld</span></b><span>
				</span>或<strong><span>mysqld_safe</span></strong>指定选项来覆盖它们。你还可以在选项文件中列出选项。</p>
				<p>要想明显指定数据目录的位置，使用<span>--datadir</span>选项。一般情况下，你可以告诉<b><span>mysqld</span></b>基本目录的位置，<span>MySQL</span>安装在该目录下，并且它在该目录中寻找数据目录。你可以使用<span>--basedir</span>选项来实现。</p>
				<p>要想检查指定路径选项的结果，用<span>--verbose</span>和<span>--help</span>选项调用<b><span>mysqld</span></b>。例如，如果你进入<b><span>mysqld</span></b>的安装目录，然后运行下面的命令，它显示启动服务器的结果，基本目录为<span>/usr/local</span>：</p>
				<pre><span>shell&gt; </span><span><b><span>./mysqld --basedir=/usr/local --verbose --help</span></b></span></pre>
				<p>你可以指定其它选项，例如<span>--datadir</span>，但是请注意<span>--verbose</span>和<span>--help</span>必须为最后的选项。</p>
				<p>一旦你确定了你想要的路径设定值，用<span>--verbose</span>和<span>-- 
				help</span>启动服务器。</p>
				<p>如果<b><span>mysqld</span></b>正在运行，执行下列命令你可以找出它所使用的路径设定值：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqladmin variables</span></b></span></pre>
				<p>或：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqladmin -h <i>host_name</i> variables</span></b></span></pre>
				<p><span><i>
				<span>host_name</span></i></span>是<span>MySQL</span>服务器主机的名称。</p>
				<p>如果启动<b><span>mysqld</span></b>时遇到<span>Errcode 
				13</span><span>(</span>意味着<span>Permission 
				denied</span><span>)</span>，这意味着数据目录或其内容的访问权限不允许服务器访问。此时，你需要更改所调用文件和目录的权限，使服务器有权使用它们。你还可以用<span>root</span>启动服务器，但是这样会造成安全问题，应当避免。</p>
				<p>在<span>Unix</span>中，进入数据目录，检查数据目录和其内容的所有权，确保服务器可以访问。例如，如果数据目录是<span>/usr/local/mysql/var</span>，使用命令：</p>
				<pre><span>shell&gt; </span><span><b><span>ls -la /usr/local/mysql/var</span></b></span></pre>
				<p>如果数据目录或其文件或子目录不属于你运行服务器使用的账户，将所有权改为该账户：</p>
				<pre><span>shell&gt; </span><span><b><span>chown </span><span>–</span><span>R mySQL /usr/local/mysql/var</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>chgrp </span><span>–</span><span>R mySQL /usr/local/mysql/var</span></b></span></pre>
				<p>如果服务器不能正确启动，检查错误日志文件，看看是否可以找到原因。日志文件位于数据目录<span>(</span>在<span>Windows</span>中一般为<span>C:\Program 
				Files\MySQL\MySQL Server 5.1\data</span>，<span>Unix</span>二进制分发版为<span>/usr/local/mysql/data</span>，<span>Unix</span>源码分发版为<span>/usr/local/var</span><span>)</span>。查找数据目录中的<span><i><span>host_name</span></i><span>.err</span></span>和<span><i><span>host_name</span></i><span>.log</span></span>文件，其中<span><i><span>host_name</span></i></span>是你的服务器主机名。然后检查文件的最后几行。在<span>Unix</span>中，可以使用<span>tail</span>来显示：</p>
				<pre><span>shell&gt; </span><span><b><span>tail <i>host_name</i>.err</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>tail <i>host_name</i>.log</span></b></span></pre>
				<p>错误日志包含指示服务器不能启动的信息。例如，你可以看见日志中：</p>
				<pre><span>000729 14:50:10&nbsp; bdb:&nbsp; Recovery function for LSN 1 27595 failed</span></pre>
				<pre><span>000729 14:50:10&nbsp; bdb:&nbsp; warning: ./test/t1.db: No such file or directory</span></pre>
				<pre><span>000729 14:50:10&nbsp; Can&#39;t init databases</span></pre>
				<p>这意味着你没有用<span>--bdb-no-recover</span>选项启动<strong><span>mysqld</span></strong>，<span>Berkeley 
				DB</span>恢复数据库时发现其日志文件有一些问题。要想继续，你应当将旧的<span>Berkeley 
				DB </span>日志文件从数据库目录移到其它地方，以后你可以在那儿检查它们。<span>BDB</span>日志文件以<span>log.0000000001</span>开头，按顺序命名。</p>
				<p>如果你运行支持<span>BDB</span><span>
				</span>表的<b><span>mysqld</span></b><span>,<b>mysqld</b></span>启动时内核崩溃，该可能是由于<span>BDB</span><span>
				</span>恢复日志的问题。此时，你可以尝试用<span>--bdb-no-recover</span>启动<b><span>mysqld</span></b>。如果有帮助，你应当从数据目录移走所有<span>BDB</span>日志文件并尝试不用<span>--bdb-no-recover</span>选项重新启动<b><span>mysqld</span></b>。</p>
				<p>如果出现下面的错误，说明其它程序<span>(</span>也许是另一个<strong><span>mysqld</span></strong>服务器<span>)</span>正使用<b><span>mysqld</span></b>正试图使用的<span>TCP/IP</span>端口或<span>Unix
				</span>套接字文件：</p>
				<pre><span>Can&#39;t start server: Bind on TCP/IP port: Address already in use</span></pre>
				<pre><span>Can&#39;t start server: Bind </span>在<span>Unix</span>中<span> socket...</span></pre>
				<p>使用<strong><span>ps</span></strong>来确定是否另有一个<strong><span>mysqld</span></strong>服务器正在运行。如果如此，关闭服务器重新启动<b><span>mysqld</span></b>。<span>(</span>如果另一个服务器正运行，你的确想要运行多个服务器，你可以在<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12节，“在同一台机器上运行多个MySQL服务器”</a>中发现相关信息<span>)</span>。</p>
				<p>如果没有其它服务器在运行，尝试执行命令 
				<span>telnet your-host-name 
				tcp-ip-port-number</span>。<span>(</span>默认<span>MySQL</span>端口号是<span>3306</span>）<span>。</span>然后按两次<span>Enter</span>（回车）键。如果出现<span>telnet: 
				Unable to connect to remote host: Connection refused</span>错误消息，其它程序正使用<b><span>mysqld</span></b>试图使用的<span> 
				TCP/IP</span>端口。你需要跟踪这是哪个程序并禁用它，或让<b><span>mysqld</span></b>用<span>--port</span>选项帧听其它端口。此时，当通过<span>TCP/IP</span>协议连接服务器时，你还需要为客户端程序指定端口号。</p>
				<p>端口不能访问的另一个原因可能是防火墙正运行，阻挡了与它的连接。如果如此，修改防火墙设置允许对该端口的访问。</p>
				<p>如果服务器已经启动但是你不能与它连接，你应当确保在<span>/etc/hosts</span>中有下面所示条目：</p>
				<pre><span>127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost</span></pre>
				<p>该问题只发生在没有工作线程库，并且<span>MySQL</span>必须配置为使用<span>MIT-pthreads</span>的系统。</p>
				<p>如果你不能启动<b><span>mysqld</span></b>，你可以使用<span>--debug</span>选项尝试编写一个跟踪文件来找到问题。请参见<a href="porting.html#making-trace-files" title="E.1.2. Creating Trace Files">E.1.2节，“创建跟踪文件”</a>。</p>
				<p>关于在<span>Windows</span>安装中排错的详细信息，参见<a href="#windows-troubleshooting" title="2.3.14. Troubleshooting a MySQL Installation Under Windows">2.3.14节，“在Windows环境下对MySQL安装的故障诊断与排除”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="default-privileges"></a>
			2.9.3.&nbsp;使初始MySQL账户安全</h3></div></div></div><a class="indexterm" name="id2723215"></a><a class="indexterm" name="id2723225"></a><a class="indexterm" name="id2723235"></a><a class="indexterm" name="id2723242"></a><a class="indexterm" name="id2723249"></a><a class="indexterm" name="id2723259"></a><a class="indexterm" name="id2723269"></a><a class="indexterm" name="id2723279"></a><a class="indexterm" name="id2723286"></a>
			<p><span>MySQL</span>安装过程包括设置含有授权表的<span>MySQL</span>数据库：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Windows</span>分发版包含预初始化的授权表，可以自动安装。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Unix</span>中，用<b><span>mysql_install_db</span></b>程序来安装
			授权表。可以通过一些安装方法来运行该程序。否则你需要手动执行。详细信息参见<a href="#unix-post-installation" title="2.9.2. Unix Post-Installation Procedures">2.9.2节，“Unix下安装后的过程”</a>。</p>
			<p>授权表定义了初始<span>MySQL</span>用户账户和访问权限。按照以下步骤对这些账户进行设置：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>用用户<span>root
			</span>创建两个账户。这些账户为超用户账户，可以执行任何操作。初始<span>root</span>账户的密码为空，因此任何人可以用<span>root</span>账户不用任何密码来连接<span>MySQL</span>服务器，并具有所有权限。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Windows</span>中，一个<span>root</span>账户用来从本机连接<span>MySQL</span>服务器，另一个允许从任何主机连接。</p>
			<p>
			<span >
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Unix</span>中，两个<span>root</span>账户均用于从本机连接。<span>必须从本机进行连接，一个账户主机名应指定为</span><span>localhost</span><span>，另一个账户为实际的主机名或<span>IP</span>号。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>创建了两个匿名用户账户，每个账户的用户名均为空。匿名账户没有密码，因此任何人可以使用匿名账户来连接<span>MySQL</span>服务器。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Windows</span>中，一个匿名账户用来从本机进行连接。它具有所有权限，同<span>root</span><span>
			</span>账户一样。另一个可以从任何主机上连接，具有<span>test</span>数据库或其它以<span>test</span>开始的数据库的所有权限。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Unix</span>中，两个匿名账户均用于从本机连接。<span>必须从本机进行连接，一个账户主机名应指定为</span><span>localhost</span><span>，另一个账户为实际的主机名或<span>IP</span>号</span>。两个账户具有<span>test</span>数据库或其它以<span>test</span>开始的数据库的所有权限。</p>
			<p>如前面所述，所有初始账户均没有密码。这意味着在你执行下述操作前，<span>MySQL</span>安装未受保护：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你想要防止客户端不使用密码用匿名用户来连接，你应当为匿名账户指定密码或删掉匿名账户。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>你应当为<span>MySQL </span>
			<span>root</span>账户指定密码。</p>
			<p>下面的说明描述了如何为初始<span>MySQL</span>账户设置密码，先为匿名账户设置然后为<span>root</span>账户设置。在例子中用实际密码替换“<span><i><span>newpwd</span></i></span>”。说明还包括如果你不想用匿名账户访问，如何删掉匿名账户。</p>
			<p>你可能想要在以后设置密码，因此不需要在进一步的设置或测试中指定密码。但是，一定要在实际生产作业、使用安装前设置好密码。</p>
			<p>要想为匿名账户指定密码，可以使用<span>SET 
			PASSWORD</span>或<span>UPDATE</span>。在两种情况中，一定要使用<span>PASSWORD()</span>函数为密码加密。</p>
			<p>在<span>Windows</span>中使用<span>PASSWORD</span>的方法：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;&#39;@&#39;localhost&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;&#39;@&#39;%&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<p>在<span>Unix</span>中使用<span>PASSWORD</span>的方法：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;&#39;@&#39;localhost&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;&#39;@&#39;<i>host_name</i>&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<p>用服务器主机名替换第二个<span>SET 
			PASSWORD</span>语句中的<span><i><span>host_name</span></i></span>。这是指定的<span>user</span>表中的<span>root</span><span> 
			non-</span><span>localhost</span>记录的<span>Host</span>列名。如果你不知道是哪个主机名，在<span>SET 
			PASSWORD</span>之前执行下面的语句：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT Host, User FROM mysql.user;</span></b></span></pre>
			<p>查找在<span>User</span>列有<span>root</span>和在<span>Host</span>列没有<span>localhost</span>的记录。然后在第二个<span>SET 
			PASSWORD</span>语句中使用该<span>Host</span>值。</p>
			<p>为匿名账户指定密码的另一种方法是使用<span>UPDATE</span>直接修改用户表。用<span>root</span>连接服务器，运行<span>UPDATE</span>语句为相应<span>user</span>表记录的<span>Password</span>列指定一个值。在<span>Windows</span>和<span>Unix</span>中的过程是相同的。下面的<span>UPDATE</span>语句同时为两个匿名账户指定密码：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>UPDATE mysql.user SET Password = PASSWORD(&#39;<i>newpwd</i>&#39;)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WHERE User = &#39;&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>在<span>user</span>表中直接使用<span>UPDATE</span>更新密码后，必须让服务器用<span>FLUSH 
			PRIVILEGES</span>重新读授权表。否则，重新启动服务器前，不会使用更改。</p>
			<p>如果你宁愿删除匿名账户，操作方法是：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>DELETE FROM mysql.user WHERE User = &#39;&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>可以在<span>Windows</span>和<span>Unix</span>中使用<span>DELETE</span>语句。在<span>Windows</span>中，如果你只想删掉具有与<span>root</span>相同权限的匿名账户，方法为：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>DELETE FROM mysql.user WHERE Host=&#39;localhost&#39; AND User=&#39;&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>该账户允许匿名访问，但是拥有全部的权限，因此删掉它可以提高安全。</p>
			<p>你可以用几种方法为<span>root</span>账户指定密码。以下介绍了三种方法：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>SET 
			PASSWORD</span>语句</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<b><span>mysqladmin</span></b>命令行客户端程序</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>UPDATE</span>语句</p>
			<p>要想使用<span>SET 
			PASSWORD</span>指定密码，用<span>root</span>连接服务器并执行两个<span>SET 
			PASSWORD</span>语句。一定要使用<span>PASSWORD()</span>函数来加密密码。</p>
			<p>在<span>Windows</span>中的语句：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;root&#39;@&#39;%&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<p>在<span>Unix</span>中的语句：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;root&#39;@&#39;<i>host_name</i>&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<p>用服务器主机名替换第二个<span>SET 
			PASSWORD</span>语句中的<span><i><span>host_name</span></i></span>。这是你指定匿名账户密码的主机名。</p>
			<p>要想使用<strong><span>mysqladmin</span></strong>为<span>root</span>账户指定密码，执行下面的命令：</p>
			<pre><span>&nbsp; shell&gt; <b>mysqladmin</b> -u root password &quot;</span><span><i><span>newpwd</span></i></span><span>&quot;</span></pre>
			<pre><span>&nbsp; shell&gt; <b>mysqladmin</b> -u root -h </span><span><i><span>host_name</span></i></span><span> password &quot;</span><span><i><span>newpwd</span></i></span><span>&quot;</span></pre>
			<p>上述命令适用于<span>Windows</span>和<span>Unix</span>。用服务器主机名替换第二个命令中的<span><i><span>host_name</span></i></span>。不一定需要将密码用双引号引起来，但是你如果密码中包含空格或专用于命令解释的其它字符，则需要用双引号引起来。</p>
			<p>你还可以使用<span>UPDATE</span>直接修改<span>user</span>表。下面的<span>UPDATE</span>语句可以同时为两个<span>root</span>账户指定密码：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>UPDATE mysql.user SET Password = PASSWORD(&#39;<i>newpwd</i>&#39;)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WHERE User = &#39;root&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>
			<span>UPDATE</span>语句适用于<span>Windows</span>和<span>Unix</span>。</p>
			<p>设置完密码后，当你连接服务器时你必须提供相应密码。例如，如果你想要用<strong><span>mysqladmin</span></strong><span>
			</span>关闭服务器，可以使用下面的命令：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin -u root -p shutdown</span></b></span></pre>
			<pre><span>Enter password: </span><span><b><span>(enter root password here)</span></b></span></pre>
			<p><strong><span>注释：</span></strong>如果你设置了<span>root</span>密码后忘记了密码，从<a href="problems.html#resetting-permissions" title="A.4.1. How to Reset the Root Password">A.4.1节，“如何复位根用户密码”</a>中查阅重设密码的方法。</p>
			<p>你可以使用<span>GRANT</span>语句设置新账户。相关说明参见<a href="database-administration.html#adding-users" title="5.8.2. Adding New User Accounts to MySQL">5.8.2节，“向MySQL增加新用户账户”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="upgrade"></a>
		2.10.&nbsp;升级MySQL</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#upgrading-from-5-0">
			2.10.1. 从5.0版升级</a></span></dt><dt><span class="section">
			<a href="#upgrading-grant-tables">
			2.10.2. 升级授权表</a></span></dt><dt><span class="section">
			<a href="#upgrading-to-arch">
			2.10.3. 将MySQL数据库拷贝到另一台机器</a></span></dt></dl></div><a class="indexterm" name="id2724118"></a>
		<p>做为一般原则，我们建议从一个发布系列升级到另一个发布系列时，你应当先升级到它的下一个系列而不要跳过。例如，如果你目前正运行<span>MySQL 
		3.23</span>，想要升级到较新的系列，要升级到<span>MySQL 4.0</span>而不要升级到<span>5.0</span>或<span>5.1</span>。</p>
		<p>下面的项列出了升级时的相关信息：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>从<span>MySQL 5.0</span>升级到<span>5.1</span>前<span>,</span>请阅读<a href="#upgrading-from-5-0" title="2.10.1. Upgrading from Version 5.0">2.10.1节，“从5.0版升级”</a>和<a href="news.html" title="Appendix D. MySQL Change History">附录D：<i>MySQL变更史</i></a>。其中提供了<span>MySQL 
		5.1</span>相对于<span>MySQL 5.0</span>的新特性或不同特性。如果你想要从<span>MySQL 
		5.0</span>以前的发布系列升级<span>,</span>应当依次升级到下一个发布系列，直到达到<span>MySQL 
		5.0</span>，然后再升级到<span>MySQL 5.1</span>。关于从<span>MySQL 
		5.0</span>升级的信息<span>,</span>参见<span>MySQL<em><span> 
		5.0 </span></em></span><em><span style="font-family:
宋体">参考手册</span></em>；对于更早的发布，参见<span>MySQL<em><span style="font-family:
宋体"> 4.1</span></em></span><em><span>参考手册</span></em>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>在升级前应先备份数据库。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果在<span>Windows</span>中运行<span>MySQL</span>服务器，参见<a href="#windows-upgrading" title="2.3.15. Upgrading MySQL on Windows">2.3.15节，“在Windows下升级MySQL”</a>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>从<span>MySQL 5.0</span>升级到<span>5.1</span>更改<span>MySQL</span>数据库中的
		授权表；增加了列和表以支持新功能。为了充分利用这些特性，应确保授权表是最新的。升级授权表的过程参见<a href="#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2节，“升级授权表”</a>。在升级前，你可能想要使用<strong><span>mysqldump</span></strong>来转储表；升级后，可以使用<strong><span>mysql</span></strong>或<span>mysqlimport</span>重建、重装
		授权表来重载<span>dump(</span>备份<span>)</span>文件。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果你正复制，关于升级复制设置的信息参见<a href="replication.html#replication-upgrade" title="6.6. Upgrading a Replication Setup">6.6节，“升级复制设置”</a>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果安装包括<b><span>mysqld<strong><span>-max</span></strong></span></b>服务器的<span>MySQL-Max</span>分发版，则后面要升级到非<span>Max</span>版的<span>MySQL</span>，<strong><span>mysqld_safe</span></strong>仍然试图运行旧的<b><span>mysqld<strong><span>-max</span></strong></span></b>服务器。如果升级，应当手动删掉旧的<b><span>mysqld<strong><span>-max</span></strong></span></b>服务器以确保<strong><span>mysqld_safe</span></strong>运行新的<b><span>mysqld</span></b>服务器。</p>
		<p>只要你的<span>MySQL</span>版本属于相同的发布系列，总是可以在不同的版本之间的相同架构上移动<span>MySQL</span>格式文件和数据文件。目前的产品发布系列是<span>5.1</span>。如果运行<span>MySQL</span>时更改字符集，必须对所有<span>MyISAM</span>表运行<strong><span>myisamchk 
		-r -q --set-character-set=</span></strong><span><b><i><span>charset</span></i></b></span>。否则，索引顺序将会出错，因为更改字符集也会更改排序。</p>
		<p>如果你使用新版本时比较小心，在安装新的<span>MySQL</span>前可以重新命名旧的<b><span>mysqld</span></b>。例如，如果你想要从<span>MySQL 
		5.0.13</span>升级到<span>5.1.10, </span>将当前的服务器从<b><span>mysqld</span></b>重新命名为<b><span>mysqld<strong><span>-5.0.13</span></strong></span><strong><span>。</span></strong></b>如果新的<b><span>mysqld</span></b>出现问题，只需要关闭并用旧的<b><span>mysqld</span></b>重新启动。</p>
		<p>升级后，如果你遇到重新编译的客户端程序问题，例如<span>Commands 
		out of sync</span>或不期望的内核转储，可能是编译程序时使用了旧的头文件或库文件。出现这种情况，应当检查<span>mysql.h</span>文件和<span>libmysqlclient.a</span>库的日期，以验证它们是否来自新的<span>MySQL</span>分发版。如果不是，用新的头文件和库重新编译程序。</p>
		<p>如果出现问题，例如新<b><span>mysqld</span></b>服务器不启动或没有密码不能连接，验证是否使用了以前安装的旧<span>my.cnf</span>文件。可以用<span>--print-defaults</span>选项检查<span>(</span>例如，<strong><span>mysqld 
		--print-defaults</span></strong><span>)</span>。如果显示程序名之外的其它内容，说明有一个活动<span>my.cnf</span>文件影响了服务器或客户端操作。</p>
		<p>当安装新的<span>MySQL</span>发布时，最好重建并重装<span>Perl
		</span><span>
		<span>DBD</span><span>：：<span>mysql</span></span></span><span>
		</span>模块。同样适用于其它<span>MySQL</span>接口，例如<span>PHP
		</span>
		<span>mysql</span>扩展名和<span>Python
		</span>
		<span>MySQLdb</span>模块。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="upgrading-from-5-0"></a>
			2.10.1.&nbsp;从5.0版升级</h3></div></div></div>
			<p><strong><span>当从<span>5.0</span>升级到<span>5.0.10</span>或更高版本时</span></strong>请注意<em><span>必须</span></em>运行<strong><span>mysql_fix_privilege_tables</span></strong><span>(</span>或在<span>Windows</span>中运行<span>mysql_fix_privilege_tables.sql</span><span>)</span>。否则，不能创建保存的过程。相关过程参见<a href="#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2节，“升级授权表”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="upgrading-grant-tables"></a>
			2.10.2.&nbsp;升级授权表</h3></div></div></div><a class="indexterm" name="id2724461"></a><a class="indexterm" name="id2724472"></a>
			<p>一些发布对授权表<span>(MySQL</span>数据库中的表<span>)</span>的结构进行了更改以增加新的权限或特性。当你更新到新版本<span> 
			MySQL</span>时，要想确保授权表最新，应当运行<strong><span>mysql_fix_privilege_tables</span></strong>脚本来更新
			授权表。相关过程参见<a href="database-administration.html#mysql-fix-privilege-tables" title="5.4. mysql_fix_privilege_tables — Upgrade MySQL System Tables">5.4节，“mysql_fix_privilege_tables：升级MySQL系统表”</a>。</p>
			<p>如果你从<span>MySQL 4.1</span>或更早版本升级，授权表升级过程为<span>CREATE 
			VIEW</span>和<span>SHOW 
			VIEW</span>权限增加了视图相关的列。这些权限位于全局和数据库 级。在这种情况下，<span>MySQL 
			5.1</span>版<span>MySQL<strong><span>_fix_privilege_ 
			tables</span></strong></span>将<span>user</span>表中的<span>Create_priv</span>值复制到<span>Create_view_priv</span>和 
			<span>Show_view_priv</span>列。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="upgrading-to-arch"></a>
			2.10.3.&nbsp;将MySQL数据库拷贝到另一台机器</h3></div></div></div><a class="indexterm" name="id2724552"></a><a class="indexterm" name="id2724562"></a><a class="indexterm" name="id2724569"></a>
			<p>你可以在支持相同浮点格式的不同架构之间为<span>MyISAM</span>表复制<span>.frm</span>、<span>.MYI</span>和<span>.MYD</span>文件。<span>(MySQL</span>关注所有字节交换问题）<span>。</span>请参见<a href="storage-engines.html#myisam-storage-engine" title="15.1. The MyISAM Storage Engine">15.1节，“MyISAM存储引擎”</a>。</p>
			<p>如果你需要在不同的架构之间转移数据库，可以使用<strong><span>mysqldump</span></strong>创建含有<span>SQL</span>语句的文件。然后你可以将文件转移到其它机器上，并将它输入到<span>MySQL</span>客户端。</p>
			<p>使用<strong><span>mysqldump --help</span></strong>来看有哪些选项可用。如果你正将数据移动到更新版本的<span>MySQL</span>，你应当使用<strong><span>mysqldump
			</span><span>–<span>opt</span></span><span>来</span></strong>利用各种优化性能来产生更小、可以更快处理的转储文件。</p>
			<p>在两台机器之间移动数据库的最简单<span>(</span>尽管不是最快<span>)</span>的方法是在数据库所在的机器上运行下面的命令：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin -h &#39;<i>other_hostname</i>&#39; create <i>db_name</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqldump --opt <i>db_name</i> | mysql -h &#39;<i>other_hostname</i>&#39; <i>db_name</i></span></b></span></pre>
			<p>如果你想要从远程机器通过慢速网络复制数据库，可以使用：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin create <i>db_name</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqldump -h &#39;<i>other_hostname</i>&#39; --opt --compress <i>db_name</i> | mysql <i>db_name</i></span></b></span></pre>
			<p>
			还可以将结果保存到文件中，然后将文件转移到目标机器上并将文件装载到数据库中。例如，可以在源机器上使用下面的命令将数据库备份到文件中：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqldump --quick <i>db_name</i> | gzip &gt; <i>db_name.contents</i>.gz</span></b></span></pre>
			<p><span>(</span>该例子中创建的文件是压缩格式）<span>。</span>将含有数据库内容的文件到目标机上并运行命令：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin create <i>db_name</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>gunzip &lt; <i>db_name.contents</i>.gz | mysql <i>db_name</i></span></b></span></pre>
			<p>还可以使用<strong><span>mysqldump</span></strong>和<strong><span>mysqlimport</span></strong>来转移数据库。对于大的表，比只是使用<strong><span>mysqldump</span></strong>要快得多。在下面的命令中，<span>DUMPDIR</span>代表用来保存<b><span>mysqld<strong><span>ump</span></strong></span></b>输出的目录全路径名。</p>
			<p>首先，创建保存输出文件的目录并备份数据库：</p>
			<pre><span>shell&gt; </span><span><b><span>mkdir DUMPDIR</span></b></span></pre>
			<pre><span>shell&gt;<b>mysqld</b></span><span><b><span>ump --tab=DUMPDIR <i>db_name</i></span></b></span></pre>
			<p>然后将<span>DUMPDIR</span>目录中的文件转移到目标机上相应的目录中并将文件装载到<span>MySQL</span>：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin create <i>db_name</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # create database</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cat DUMPDIR/*.sql | mysql <i>db_name</i>&nbsp;&nbsp; # create tables in database</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqlimport <i>db_name</i> DUMPDIR/*.txt&nbsp;&nbsp; # load data into tables</span></b></span></pre>
			<p>不要忘记复制<span>MySQL</span>数据库，因为授权表保存在该数据库中。你可能需要在新机器上用<span>MySQL
			</span>
			<span>root</span>用户运行命令，直到产生<span>MySQL</span>数据库。</p>
			<p>将<span>mysql</span>数据库导入目标机器后，执行<b><span>mysqladmin<strong><span> 
			flush-privileges</span></strong></span></b>，以便服务器重载授权表信息。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="downgrading"></a>
		2.11.&nbsp;降级MySQL</h2></div></div></div><a class="indexterm" name="id2724906"></a>
		<p>本节描述了旧版本<span>MySQL</span>比新版本工作得好的情况下，如何降级到旧的<span>MySQL</span>版本。</p>
		<p>如果你在同一发布系列<span>(</span>例如，从<span> 5.0.13 </span>
		到<span>5.0.12)</span>内降级，一般规则是只需要在旧版本的顶部安装新的二进制。不需要对数据库进行任何操作。但是，最好是先进行备份。</p>
		<p>下面的项列出了进行降级时应执行的操作：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>阅读你将要降级的发布系列的升级部分，确定它没有你需要的功能。<a href="#upgrade" title="2.10. Upgrading MySQL">2.10节，“升级MySQL”</a>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果该版本有降级部分，你也应当阅读。</p>
		<p>只要<span>MySQL</span>版本属于相同的发布系列，你总是可以在不同的版本之间的相同架构上移动<span>MySQL</span>格式文件和数据文件。目前的产品发布系列是<span>5.1</span>。</p>
		<p>如果你从一个发布系列降级到另一个发布系列，表储存格式可能不兼容。在这种情况下，你可以在降级嵌使用<strong><span>mysqldump</span></strong>来转储表。降级后，使用<strong><span>mysql</span></strong>或<span>mysqlimport</span>重载转储文件来重新创建表。请参见<a href="#upgrading-to-arch" title="2.10.3. Copying MySQL Databases to Another Machine">2.10.3节，“将MySQL数据库拷贝到另一台机器”</a>。</p>
		<p>表格式不向下兼容的一般迹象是降级时不能打开表。在这种情况下，使用下面的过程：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>停止你想要降级到的旧的<span>MySQL</span>服务器。</p>
		<p><span>2.<span>&nbsp;&nbsp;&nbsp;
		</span></span>重新启动将被降级的新的<span>MySQL</span>服务器。</p>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>使用<strong><span>mysqldump</span></strong>创建一个<span>dump</span>（转储）文件来转储不能被旧服务器访问的所有表。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>停止新<span>MySQL</span>服务器，重新启动旧<span>MySQL</span>服务器。</p>
		<p>将<span>dump</span>（转储）文件重载入旧服务器。表应当可访问。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="operating-system-specific-notes"></a>
		2.12.&nbsp;具体操作系统相关的注意事项</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#linux">
			2.12.1. Linux注意事项</a></span></dt><dt><span class="section">
			<a href="#mac-os-x">
			2.12.2. Mac OS X注意事项</a></span></dt><dt><span class="section">
			<a href="#solaris">
			2.12.3. Solaris注意事项</a></span></dt><dt><span class="section">
			<a href="#bsd-notes">
			2.12.4. BSD注意事项</a></span></dt><dt><span class="section">
			<a href="#other-unix-notes">
			2.12.5. 其它Unix注意事项</a></span></dt><dt><span class="section">
			<a href="#os-2">
			2.12.6. OS/2注意事项</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="linux"></a>
			2.12.1.&nbsp;Linux注意事项</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#linux-os">
				2.12.1.1. Linux操作系统注意事项</a></span></dt><dt><span class="section">
				<a href="#binary-notes-linux">
				2.12.1.2. Linux二进制分发版说明</a></span></dt><dt><span class="section">
				<a href="#source-notes-linux">
				2.12.1.3. Linux源码分发版说明</a></span></dt><dt><span class="section">
				<a href="#linux-post-install">
				2.12.1.4. Linux后期安装注意事项</a></span></dt><dt><span class="section">
				<a href="#linux-x86">
				2.12.1.5. Linux x86注意事项</a></span></dt><dt><span class="section">
				<a href="#linux-sparc">
				2.12.1.6. Linux SPARC注意事项</a></span></dt><dt><span class="section">
				<a href="#linux-alpha">
				2.12.1.7. Linux Alpha注意事项</a></span></dt><dt><span class="section">
				<a href="#linux-powerpc">
				2.12.1.8. Linux PowerPC注意事项</a></span></dt><dt><span class="section">
				<a href="#linux-mips">
				2.12.1.9. Linux MIPS注意事项</a></span></dt><dt><span class="section">
				<a href="#linux-ia-64">
				2.12.1.10. Linux IA-64注意事项</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
				本节讨论发现的在<span>Linux</span>中出现的问题。前面几节描述了一般操作系统相关的问题，使用二进制或源码分发版时可能出现的问题和安装后的问题。后面几节讨论在具体<span>Linux</span>平台上出现的问题。<p>
				请注意这些问题的大多数出现在旧的<span>Linux </span>
				版本中。如果你运行最新的版本，可能不会发现这些问题。</p>
				<h4 class="title"><a name="linux-os"></a>2.12.1.1.&nbsp;Linux操作系统注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>至少需要<span>Linux 2.0</span>版本。<p>
				<strong><span>警告：</span></strong>我们已经发现在<span>SMP</span>系统中<span>Linux 
				2.2.14 </span>和<span>MySQL</span>会出现一些奇怪的问题。我们还收到来自一些<span>MySQL</span>用户的报告说他们用内核<span>2.2.14</span>使用<span>MySQL</span>时遇到了严重的稳定性问题。如果你正使用该内核，应当升级到<span>2.2.19 
				(</span>或更新版<span>)</span>或到<span>2.4</span>内核。如果你有一个多<span>CPU</span>盒，应当考虑使用<span>2.4</span>，因为它能大大加速。你的系统将会更稳定。</p>
				<p>当使用<span>LinuxThreads</span>时，你应当至少可以看见有三个<b><span>mysqld</span></b><span>
				</span>进程在运行。这些实际上是线程。有一个线程是<span>LinuxThreads</span>管理器，一个线程处理连接，另一个线程处理告警和信号。</p>
				<h4 class="title"><a name="binary-notes-linux"></a>
				2.12.1.2.&nbsp;Linux二进制分发版说明</h4></div></div></div><a class="indexterm" name="id2725148"></a><a class="indexterm" name="id2725159"></a></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>的<span>Linux-Intel</span>二进制和<span>RPM</span>发布配置为最高的可能速度。我们一直在尝试使用可用的最快的稳定的编译器。<p>
				二进制发布用<span>-static</span><span>is</span>连接，说明一般情况你不需要关心系统库的版本。你也不需要安装<span>LinuxThreads</span>。用<span>-static</span><span>is</span>连接的程序稍微大于动态连接程序，但也稍微快一些<span>(3-5%)</span>。但是，静态连接程序的一个问题是你不能使用用户定义函数<span>(UDF)</span>。如果你将要写或使用<span>UDF(</span>只适用于<span>C</span>或<span>C++
				</span>编程人员<span>)</span>，你必须使用动态链接自己编译<span>MySQL</span>。</p>
				<p>二进制分发版的一个已知问题是在使用<span>libc</span>的旧的<span>Linux</span>系统<span>(</span>例如<span>Red 
				Hat 4.x</span>或<span>Slackware)</span>上，你会遇到一些<span>(</span>非致命<span>)</span>主机名解析问题。如果系统使用<span>libc</span>没有使用<span>glibc2,</span>你可能会遇到一些主机名解析和<span>getpwnam()</span>问题。这是因为<span>glibc</span>依靠一些外部库来执行主机名解析和<span>getpwent()</span><span>,
				</span>即使用<span>-static</span><span>is</span>编译也如此。这些问题出现在两个方面：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>当运行<strong><span>mysql_install_db</span></strong><b>时，</b>你会看见下面的错误消息：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Sorry, the host &#39;</span><span><i><span>xxxx</span></i></span><span>&#39; could not be looked up</span></pre>
				<p>你可以通过执行<b><span>mysql_install_db<strong><span> 
				--force</span></strong></span></b>来解决该问题，并不在<b><span>mysql_install_db</span></b>中执行<strong><span  style="font-family:
宋体">resolveip</span></strong>测试。不利方面是 你不能在授权表中使用主机名：除了<span>localhost</span>，必须使用<span>IP</span>号。如果你正使用不支持<span><span>—</span><span>force</span></span>的旧版本<span>MySQL</span>，必须使用文本编辑器手动卸载<span>mysql_install</span>中的<span>resolveip</span>测试。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>当你尝试用<span>--user</span>选项运行<strong><span>mysqld</span><span>时</span></strong>你还会看见下面的错误：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>getpwnam: No such file or directory</span></pre>
				<p>要解决该问题，使用<span>su</span>命令启动<strong><span>mysqld</span></strong>，不要指定<span>--user</span>选项。这样使系统自己更改<b><span>mysqld</span></b>进程的用户<span>ID</span>，<b><span>mysqld</span></b>不再需要这样做。</p>
				<p>另一个解决办法可以解决两个问题，即不使用二进制分发版。获得<span>MySQL</span>源码分发版<span>(RPM</span>或<span>tar.gz</span>格式<span>)</span>并安装。</p>
				<p>在一些<span>Linux 2.2</span>版本中，当客户端通过<span>TCP/IP</span>建立大量与<b><span>mysqld</span></b>服务器的新连接时，你可能会遇到错误<span>Resource 
				temporarily unavailable</span>。该问题是<span>Linux</span>在你关闭<span>TCP/IP</span>套接字的时间和系统实际释放该套接字的时间之间有一个延迟。只有有限数目的<span>TCP/IP</span>时段有空间，因此如果客户端试图在短时间内建立许多新<span>TCP/IP</span>连接时，你会遇到源不可用错误。例如，当你通过<span>TCP/IP</span>运行<span>MySQL</span><span> 
				test-connect</span>基准测试时你会看见该错误。</p>
				<p>我们已经多次向不同的<span> Linux </span>
				邮件列表询问该问题，但是一直没有找到合适的解决办法。唯一知道的“<span class="quote">解决办法</span>”是客户端使用永久连接，或，如果你在同一机器上运行数据库服务器和客户端，使用<span>Unix</span>套接字文件来连接，不要使用<span>TCP/IP</span>连接。</p>
				<h4 class="title"><a name="source-notes-linux"></a>
				2.12.1.3.&nbsp;Linux源码分发版说明</h4></div></div></div><a class="indexterm" name="id2725403"></a><a class="indexterm" name="id2725413"></a></div><div class="section"><div class="titlepage"><div><div>
				下面关于<span>glibc</span>的注意事项只适用你自己构建<span>MySQL</span>时。如果在<span>x86</span>机器上运行<span>Linux</span>，在大多数情况下最好使用我们的二进制。我们将二进制连接到了我们能找到的打了最好补丁的<span>glibc</span>版本，并使用了最优的编译器选项，尽力使它适合高负荷服务器。对于典型用户，即使对于超过<span>2GB</span>限制的大量并行连接或表设置，在大多数情况下，我们的二进制仍然是最佳选择。阅读下面的内容后，如果你不清楚怎样做，先试用我们的二进制看它是否满足你的需求。如果你发现它不够完善，那么你可以尝试你自己的构建。在这种情况下，我们很希望能看到相关注释，以便我们下次可以构建更好的二进制。<p>
				<strong>
				<span>
				MySQL</span></strong>在<span>Linux</span>上使用<span> 
				LinuxThreads </span>。如果你正在使用一个没有<span>glibc2</span>的老的<span>Linux</span>版本，你必须在尝试编译<strong><span>MySQL</span></strong>前安装<span>LinuxThreads</span>。你可以从<span><a target="_top"  href="http://dev.mysql.com/downloads/os-linux.html"><span>
				<u><span style="color:blue">
				http://dev.mysql.com/downloads/os-linux.html</span></u></span></a></span>获得<span>LinuxThreads</span>。</p>
				<p>注意：当你执行<span>INSERT 
				DELAYED</span>时，所用的包括<span>2.1.1</span>及以前的<span>glibc</span>版本在<span><span>pthread_</span><span>互斥<span>_timedwait()</span></span></span>处理上有一个致命错误，如果你正在使用<span>INSERT 
				DELAYED</span>，我们建议<strong><span>先升级</span></strong><span>glibc</span>。</p>
				<p>请注意<span>Linux </span>内核和<span>LinuxThreads</span>库默认情况下最多可以处理<span>1,024</span>个线程。如果你计划使用超过<span>1,000</span>个并行连接，需要对<span>LinuxThreads</span>进行一些更改，如下所示：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>将<span>sysdeps/unix/sysv/linux/bits/local_lim.h</span>中的<span>PTHREAD_THREADS_MAX
				</span>增加到<span>4096</span>，将<span>LinuxThreads/internals.h</span><span>
				</span>中的<span>STACK_SIZE</span>减少到<span>256KB</span>。路径相对于<span>glibc</span>的根目录。<span>(</span>请注意如果<span>STACK_SIZE</span>为默认值<span>2MB</span>，<span>MySQL</span>有<span>600-1000</span>个连接时不稳定）<span>。</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>重新编译<span>LinuxThreads</span>，生成新的<span>libpthreads.a</span>库，并重新连接<span>MySQL</span>。</p>
				<p>可以从<span><a target="_top"  href="http://www.volano.com/linuxnotes.html">http://www.volano.com/linuxnotes.html<span>
				</span></a></span>查阅关于<span>LinuxThreads</span>线程限制的详细信息。</p>
				<p>还有一个问题会严重影响<span>MySQL</span>的性能，特别是在<span>SMP</span>系统中。在<span>glibc</span><span> 
				2.1</span>的<span>LinuxThreads</span>中，对于拥有很多只是短时间内占有互斥体的线程的程序，不能很好地执行互斥。结果出现荒谬的现象：在许多情况下，如果你使用未修改的<span>LinuxThreads</span>连接<span>MySQL</span>，从<span>SMP</span>中去掉卸载处理器实际上会提高<span>MySQL</span>的性能。我们提供了一个<span>glibc</span><span> 
				2.1.3</span>的补丁来纠正该行为<span>(<a target="_top"  href="http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch">http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch<span>
				</span></a>)</span>。</p>
				<p>在<span>glibc</span><span> 
				2.2.2</span>中<span>,MySQL</span>使用修改后的互斥，这样甚至比打了补丁的<span>glibc</span><span> 
				2.1.3</span>还要好得多。但是，需要注意的是在某些条件下，当前<span>glibc</span><span> 
				2.2.2</span>中的互斥代码会高旋，影响了<span>MySQL</span>的性能。通过优化<b><span>mysqld</span></b>进程到最高优先级，可以降低在这种情况下出现这种问题的可能性。我们还可以通过补丁来纠正高旋问题，可以从<span>http://www.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch</span>下载。它集成高旋的纠正、线程最大数目和堆栈空间于一体。你需要用补丁<span>patch 
				-p0 &lt;/tmp/linuxthreads-2.2.2.patch</span>在<span>LinuxThreads</span>目录下使用。我们 
				希望在将来的<span>glibc</span><span> 
				2.2</span>发布中能以某种形式将它包括进来。在任何情况下，如果你连接<span>glibc</span><span> 
				2.2.2,</span>仍然需要纠正<span>STACK_SIZE</span>和 
				<span>
				<span>PTHREAD_THREADS_MAX</span><span>。</span></span>我们希望在将来能将默认值纠正到某种程度上可以接受的值，适合高负荷<span>MySQL</span>设置，因此用来产生你自己的构建的<span>&nbsp;
				</span>命令可以简化到到<strong><span>./configure; 
				make; make install</span></strong>。</p>
				<p>我们建议你使用这些补丁来构建专用的<span>libpthreads.a</span>静态版本，并只使用它同<span>MySQL</span>实现静态链接。我们知道这些补丁对于<span>MySQL</span>很安全 
				并大大改善了它的性能，但是我们还不能断言它在其它应用程序上的效果如何。如果你需要将其它使用<span>LinuxThreads</span>的应用程序同打了补丁的静态版本的库连接，或构建一个打了补丁的共享版本，并将它安装到系统中，你将自己承担风险。</p>
				<p>如果你在安装<span>MySQL</span>的过程中遇到任何奇怪的问题，或一些常用实用工具被悬挂起来，很可能是库或编译器相关问题。在这种情况下，使用我们的二进制来解决。</p>
				<p>如果你连接你自己的<span>MySQL</span>客户端程序，运行时你会看见下面的错误：</p>
				<pre><span>ld.so.1: fatal: libmysqlclient.so.#:</span></pre>
				<pre><span>open failed: No such file or directory</span></pre>
				<p>使用下面的方法可以避免该问题：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>-Wl,r/full/path/to/libmysqlclient.so</span>标记连接客户端，不要使用<span>-Lpath</span><span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>将<span>libmysqclient.so</span>复制到<span>/usr/lib</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>运行客户端程序前，将<span>libmysqlclient.so</span>所在目录的路径名增加到<span>LD_RUN_PATH</span>环境变量。</p>
				<p>如果使用<span>Fujitsu</span>编译器<span> (</span><span>fcc/FCC</span><span>)</span>，编译<span>MySQ</span>时可能会出现一些问题，因为<span>Linux</span>头文件主要面向<strong><span>gcc</span></strong>。以下的<strong><span>configure</span></strong>行应当结合<strong><span>fcc/FCC</span></strong>使用：</p>
				<pre><span>CC=fcc CFLAGS=&quot;-O -K fast -K lib -K omitfp -Kpreex -D_GNU_SOURCE \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -DCONST=const -DNO_STRTOLL_PROTO&quot; \</span></pre>
				<pre><span>CXX=FCC CXXFLAGS=&quot;-O -K fast -K lib \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -K omitfp -K preex --no_exceptions --no_rtti -D_GNU_SOURCE \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -DCONST=const -Dalloca=__builtin_alloca -DNO_STRTOLL_PROTO \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; &#39;-D_EXTERN_INLINE=static __inline&#39;&quot; \</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql --enable-assembler \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-mysqld-ldflags=-all-static --disable-shared \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-low-memory</span></pre>
				<h4 class="title"><a name="linux-post-install"></a>
				2.12.1.4.&nbsp;Linux后期安装注意事项</h4></div></div></div>
				<p>在<span>MySQL</span>安装目录或<span>MySQL</span>源码树下的<span>support-files</span>目录下可以找到<strong><span  style="font-family:
宋体">mysql.server</span></strong>。你可以将它安装为<span>/etc/init.d/mysql</span>，以便自动启动和关闭<span>MySQL</span>。请参见<a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2节，“自动启动和停止MySQL”</a>。</p>
				<p>如果<span>MySQL</span>不能打开足够的文件或连接，可能是你没有将<span>Linux</span>配置为处理足够的文件。</p>
				<p>在<span>Linux 2.2</span>及以上版本中，你可以检查分配的文件的数目：</p>
				<pre><span>shell&gt; </span><span><b><span>cat /proc/sys/fs/file -max</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>cat /proc/sys/fs/dquot-max</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>cat /proc/sys/fs/super-max</span></b></span></pre>
				<p>如果有超过<span>16MB</span>的内存，应当在启动脚本中增加如下内容<span>(</span>例如，在<span>SuSE 
				Linux</span>中：<span>/etc/init.d/boot.local</span><span>)</span>：</p>
				<pre><span>echo 65536 &gt; /proc/sys/fs/file-max</span></pre>
				<pre><span>echo 8192 &gt; /proc/sys/fs/dquot-max</span></pre>
				<pre><span>echo 1024 &gt; /proc/sys/fs/super-max</span></pre>
				<p>还可以用<span>root</span>从命令行运行<span>echo</span>命令，但是下一次重新启动计算机时这些设定值会丢掉。</p>
				<p>另外，可以使用许多<span>Linux</span>分发版使用的<span>sysctl</span>工具设置启动参数<span>(</span>包括<span>SuSE 
				Linux 8.0</span>和以后版本<span>)</span>。将下面的值放到文件 
				<span>/etc/sysctl.conf</span>中：</p>
				<pre><span># Increase some values for MySQL</span></pre>
				<pre><span>fs.file-max = 65536</span></pre>
				<pre><span>fs.dquot-max = 8192</span></pre>
				<pre><span>fs.super-max = 1024</span></pre>
				<p>你还应将以下内容加入<span>/etc/my.cnf</span>：</p>
				<pre><span>[<b>mysqld</b>_safe]</span></pre>
				<pre><span>open-files-limit=8192</span></pre>
				<p>这样服务器连接和打开文件的总数目可以达到<span>8,192</span>。</p>
				<p><span>LinuxThreads</span>的<span>STACK_SIZE</span>常数控制在寻址空间中线程堆栈的占用空间。它需要足够大，以保证每个线程堆栈有足够的空间，但是应足够小，防止某些线程的堆栈运行全局<b><span>mysqld</span></b>数据。遗憾的是，根据我们的发现，如果你用<span>mmap()</span>映射目前正使用的寻址，<span>Linux</span>成功运行<span>&nbsp;
				</span>后不会映射映射区，将会清空整个地址页上的数据而不会返回错误信息。因此，<b><span>mysqld</span></b>或其它线程应用程序的安全依靠创建线程的代码的“<span class="quote">绅士</span>”行为。用户必须采取措施以确保在任何时间运行线程的数目相对线程堆栈应足够低，以防止全局堆内存。使用<b><span>mysqld</span></b>时，你应当为<span>max_connections</span>变量设置合理的值强制该行为。</p>
				<p>如果你自己构建<span>MySQL</span>，你可以为<span>LinuxThreads</span>打补丁以便更好地使用堆栈。请参见<a href="#source-notes-linux" title="2.12.1.3. Linux Source Distribution Notes">2.12.1.3节，“Linux源码分发版说明”</a>。如果你不想为<span>LinuxThreads</span>打补丁，你应当将<span>max_connections</span>的值设置为不超过<span>500</span>。如果你有大的关键字缓冲区、大的堆内存表，或其它使<b><span>mysqld</span></b>分配大量内存的东西，或如果你用<span>2GB</span>的补丁运行<span>2.2</span>内核，<span>max_connections</span>的值应当更低。如果你正使用我们的二进制或<span>RPM</span>版本，可以安全地将<span>max_connections</span>设置为<span>1500</span>（假定没有大的关键字缓冲区或有大量数据的堆内存表。将<span>LinuxThreads</span>中的<span>STACK_SIZE</span>降低得越低，可以安全地创建越多的线程。我们推荐的值的范围为<span>128KB</span>到<span>256KB</span>。</p>
				<p>如果你正使用大量的并行连接，在<span>2.2</span>内核中你可能会遇到一个“特性”，即通过对进程的分支或克隆子进程的行为进行罚分，来试图防止轰炸攻击。这样你增加并行客户端的数量时，<span>MySQL</span>不能正确响应。在单<span>CPU</span>系统中，我们已经发现该现象，即线程创建地很慢；连接<span>MySQL</span>的时间很长<span>(</span>长达<span>1</span>分钟<span>)</span>，并且关闭的时间也很长。在多<span>CPU</span>系统中，我们已经观察到随着客户端数目的增加，查询速度逐渐下降。在寻求解决办法的过程中，我们收到了一个用户的内核补丁，他声称该补丁可以解决他的问题。从<span>http://www.mysql.com/Downloads/Patches/linux-fork.patch</span>可以下载该补丁。我们已经在开发和生产系统上对该补丁进行了广泛的测试。它可以大大改善<span>MySQL</span>的性能，而不会造成任何问题，我们向仍然在<span>2.2</span>内核运行高负荷服务器的用户推荐它。</p>
				<p>在<span>2.4</span>内核中已经对该问题进行了修复，因此如果你不满意当前系统的性能，不要为<span>2.2
				</span>内核打补丁，在<span>SMP</span>系统中升级到<span>2.4</span>版要容易地多，升级不仅可以修复错误，还可以使<span>SMP</span>更好地加速。</p>
				<p>我们已经在双<span>CPU</span>机器上在<span>2.4</span>内核中对<span>MySQL</span>进行了测试，发现<span>MySQL</span>的比例要好得多。<span>1,000</span>名客户查询时，还看不到速度有实质上的下降，<span>MySQL</span>的比例因子<span>(</span>最大吞吐量与一个客户端的吞吐量的比例<span>)</span>为<span>180%</span>。我们在四<span>-CPU</span>系统中也观察到了类似的结果：当客户数目上升到<span>1,000</span>名时还没有实质上的减慢<span>,
				</span>比例因子为<span>300%</span>。根据这些结果，对于使用<span>2.2</span>内核的高负荷<span>SMP</span>服务器，我们绝对建议升级到<span> 
				2.4</span>内核。</p>
				<p>我们已经发现，在<span>2.4</span>内核中应使用可能的最高优先级来运行<b><span>mysqld</span></b>进程，以获得最佳性能。可以通过为<strong><span>mysqld_safe</span></strong>加<span>renice 
				-20 $$</span>命令来实现。在四<span>-CPU</span>系统中的测试中，提高优先级在<span>400</span>个客户时会使吞吐量增加<span>60%</span>。</p>
				<p>我们目前还想搜集关于<span>MySQL</span>在<span>four-way</span>和<span>eight-way</span>系统上用<span>2.4</span>内核执行的性能的更详细信息。如果你访问了这些系统并进行了一些基准测试，请将结果用<span>email</span>发送到<span>&lt;<a  href="mailto:benchmarks@mysql.com">benchmarks@mysql.com</a>&gt;</span>。我们将对它们进行审查以包括进手册中。</p>
				<p>如果用<strong><span>ps</span></strong>运行<b><span>mysqld</span></b>服务器进程时发现进程死掉了，一半是<span>MySQL</span>中有缺陷或数据库表崩溃了。请参见<a href="problems.html#crashing" title="A.4.2. What to Do If MySQL Keeps Crashing">A.4.2节，“如果MySQL依然崩溃，应作些什么”</a>。</p>
				<p><span>如果<b><span>mysqld</span></b>死掉并给出</span><span  >SIGSEGV</span><span>信号，要想在<span>Linux</span>中对内核进行调试，你可以用</span><span>--core-file</span><span>选项启动<strong><span>mysqld</span></strong>。注意你还可能需要通过向</span><strong><span>mysqld_safe</span></strong><span>添加</span><strong><span>ulimit 
				-c 1000000</span></strong><span>或用</span><span>--core-file-size=1000000</span><span>启动</span><strong><span>mysqld_safe</span></strong><span>来加大内核文件的大小。请参见</span><a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a><span>。</span></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="linux-x86"></a>
				2.12.1.5.&nbsp;Linux x86注意事项</h4></div></div></div>
				<p><span>MySQL</span>需要<span>5.4.12</span>或更新版本的<span>libc</span>。已知它可以在<span>libc</span><span> 
				5.4.46</span>中工作。<span>glibc</span><span> 
				2.0.6</span>和更新版本应当也可以工作。<span>Red Hat</span>的<span>glibc</span><span> 
				RPM</span>有一些问题，因此如果你遇到问题，应看看是否有更新版。已知<span>glibc</span><span> 
				2.0.7-19</span>和<span>2.0.7-29 RPM</span>可以工作。</p>
				<p>如果你正使用<span>Red Hat 8.0</span>或更新的<span>glibc</span><span> 
				2.2.x</span>库，你会看见<b><span>mysqld</span></b>执行<span>gethostbyaddr()</span>时会死掉。这是因为新的<span>glibc</span>库在执行该调用时需要大于<span>128KB</span>的堆栈空间。要想修复该问题，用<span>--thread-stack=192K</span>选项启动<strong><span>mysqld</span></strong>。<span>(</span>在<span>MySQL 
				4</span>以前的版本中应使用<span><span>-O 
				thread_stack=192K</span><span>）</span></span><span>。
				</span>在<span>MySQL 4.0.10</span>和以上版本中，该堆栈空间值即为默认值，因此你不会看见该问题。</p>
				<p>如果你正使用<strong><span  style="font-family:
宋体">gcc</span></strong><span> 3.0</span>和以上版本编译<span>MySQL</span>，在编译<span>MySQL</span>前你必须先安装<span>libstdc++v3</span>库；如果不这样做，在联接过程中会遇到关于丢失<span>__cxa_pure_virtual</span>符号的错误。</p>
				<p>在一些旧的<span>Linux</span>分发版中，<strong><span>configure</span></strong>会生成如下错误：</p>
				<pre><span>Syntax error in sched.h. Change _P to __P in the</span></pre>
				<pre><span>/usr/include/sched.h file.</span></pre>
				<pre><span>See the Installation chapter in the Reference Manual.</span></pre>
				<p>只需要按照错误消息的提示操作。对只有一条下划线的<span>_P</span>名再增加一条下划线，然后重新尝试。</p>
				<p>编译时可能会出现警告。下面的警告可以忽略：</p>
				<pre><b><span>mysqld</span></b><span>.cc -o objs-thread/<b>mysqld</b>.o</span></pre>
				<pre><b><span>mysqld</span></b><span>.cc: In function `void init_signals()&#39;:</span></pre>
				<pre><b><span>mysqld</span></b><span>.cc:315: warning: assignment of negative value `-1&#39; to</span></pre>
				<pre><span>`long unsigned int&#39;</span></pre>
				<pre><b><span>mysqld</span></b><span>.cc: In function `void * signal_hand(void *)&#39;:</span></pre>
				<pre><b><span>mysqld</span></b><span>.cc:346: warning: assignment of negative value `-1&#39; to</span></pre>
				<pre><span>`long unsigned int&#39;</span></pre>
				<p>如果<b><span>mysqld</span></b>启动时总是出现转储内核， 
				问题可能是你使用了旧的<span>/lib/libc.a</span>。尝试重新对其命名，然后删掉<span>sql/<b>mysqld</b></span>并重新执行<strong><span  style="font-family:
宋体">make install</span></strong>然后再次尝试。已经报导在部分<span>Slackware</span>安装中出现了该问题。</p>
				<p>当链接<b><span>mysqld</span></b>时如果出现下面的错误，说明<span>libg++.a</span>安装不正确：</p>
				<pre><span>/usr/lib/libc.a(putc.o): In function `_IO_putc&#39;:</span></pre>
				<pre><span>putc.o(.text+0x0): multiple definiti</span>在<span>of `_IO_putc&#39;</span></pre>
				<p>你可以使用<span>libg++.a</span>运行<strong><span>configure</span></strong>来避免该问题：</p>
				<pre><span>shell&gt; </span><span><b><span>CXX=gcc ./configure</span></b></span></pre>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="linux-sparc"></a>
				2.12.1.6.&nbsp;Linux SPARC注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				在部分执行过程中，<span>readdir_r()</span>会中断。现象是<span>SHOW 
				DATABASES</span>语句总是返回空子集。可以在完成配置、进行编译前从<span>config.h</span>中删掉<span>HAVE_READDIR_R</span>来修复。<h4 class="title"><a name="linux-alpha"></a>
				2.12.1.7.&nbsp;Linux Alpha注意事项</h4></div></div></div>
				<p>我们已经用我们的基准和测试套件在<span>Alpha</span>中测试了<span>MySQL 
				5.1</span>，看起来工作得不错。</p>
				<p>我们目前在配置<span>Alpha EV6</span>处理器的<span>Compaq 
				DS20</span>机器上，在<span>SuSE Linux 7.0</span>中对<span>AXP</span>、内核<span>2.4.4-SMP</span>、<span>Compaq 
				C</span>编译器<span>(V6.2-505)</span>和<span>Compaq 
				C++</span>编译器<span>(V6.3-006)</span>构建<span>MySQL</span>二进制软件包。</p>
				<p>你可以从<span><a target="_top"  href="http://www.support.compaq.com/alpha-tools/"><span>
				<u><span style="color:blue">
				http://www.support.compaq.com/alpha-tools/</span></u> </span>
				</a></span>找到上述编译器。使用这些编译器，得到的<span>MySQL</span>性能比<strong><span>gcc</span></strong>要好<span>9-14%</span>。</p>
				<p>在<span>Alpha</span>版<span>MySQL</span>中，我们在编译选项中使用<span>-arch 
				generic</span>标记，可以确保二进制在所有<span>Alpha</span>处理器中运行。我们还采用静态编译以避免库问题。<strong><span>configure</span></strong>命令应为：</p>
				<pre><span>CC=ccc CFLAGS=&quot;-fast -arch generic&quot; CXX=cxx \</span></pre>
				<pre><span>CXXFLAGS=&quot;-fast -arch generic -noexceptions -nortti&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --disable-shared \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-charsets=complex --enable-thread-safe-client \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-mysqld-ldflags=-non_shared --with-client-ldflags=-non_shared</span></pre>
				<pre><span>&nbsp;</span></pre>
				<p>如果想要使用<strong><span  style="font-family:
宋体">egcs</span></strong>，可以使用下面的<strong><span>configure</span></strong>行：</p>
				<pre><span>CFLAGS=&quot;-O3 -fomit-frame-pointer&quot; CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-O3 -fomit-frame-pointer -felide-constructors \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --disable-shared</span></pre>
				<p>已知的在<span>Linux-Alpha</span>中运行<span>MySQL</span>的问题：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>gdb 
				4.18 </span>中不能调试线程应用程序。你应当使用<strong><span>gdb</span></strong><span> 
				5.1</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>使用<strong><span>gcc</span></strong>时如果你尝试静态链接<b><span>mysqld</span></b>，启动时映像会导致转储内核。换句话说，使用<strong><span>gcc</span></strong>时不要使用<span>--with-mysqld-ldflags=-all-static</span>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="linux-powerpc"></a>
				2.12.1.8.&nbsp;Linux PowerPC注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>应当可以在使用最新<span>glibc</span>安装软件包<span>(</span>用<span>glibc</span><span> 
				2.0.7</span>测试<span>)</span>的<span>MkLinux</span>上工作。<h4 class="title"><a name="linux-mips"></a>
				2.12.1.9.&nbsp;Linux MIPS注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				为了使<span>MySQL</span>在<span>Qube2(Linux Mips)</span>上工作，需要最新的<span>glibc</span>库。已知<span>glibc-2.0.7-29C2</span>可以工作。还必须使用<strong><span>egcs</span></strong><span> 
				C++</span>编译器<span>(<strong><span>egcs</span></strong> 
				1.0.2-9</span>、<strong><span>gcc</span></strong><span> 
				2.95.2</span>或更新版<span>)</span>。<h4 class="title"><a name="linux-ia-64"></a>
				2.12.1.10.&nbsp;Linux IA-64注意事项</h4></div></div></div>
				<p>要想让<span>MySQL</span>在<span>Linux IA-64</span>中编译<span>,</span>我们用 
				<strong><span>gcc</span></strong><span> 
				2.96</span>构建时使用下面的<strong><span>configure</span></strong>命令：</p>
				<pre><span>CC=gcc \</span></pre>
				<pre><span>CFLAGS=&quot;-O3 -fno-omit-frame-pointer&quot; \</span></pre>
				<pre><span>CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer -felide-constructors \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; ./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; &quot;--with-comment=Official MySQL binary&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-charsets=complex</span></pre>
				<p>在<span>IA-64</span>中<span>,MySQL</span>客户端二进制使用共享库。这意味着如果你将我们的二进制分发版安装到<span>/usr/local/mysql</span>之外的其它位置，需要将<span>libmysqlclient.so</span>安装目录路径加到<span>/etc/ld.so.conf</span>文件或<span>LD_LIBRARY_PATH</span>环境变量中。</p>
				<p>参见<a href="problems.html#link-errors" title="A.3.1. Problems Linking to the MySQL Client Library">A.3.1节，“与MySQL客户端库的链接问题”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mac-os-x"></a>
			2.12.2.&nbsp;Mac OS X注意事项</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#mac-os-x-10-x">2.12.2.1. Mac OS X 10.x (Darwin)</a></span></dt><dt><span class="section">
				<a href="#mac-os-x-server">2.12.2.2. Mac OS X Server 1.2 (Rhapsody)</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
			在<span>Mac OS X</span>中，<strong><span>tar</span></strong>不能处理长文件名。如果你需要解包<span>.tar.gz</span>分发版，应使用<strong><span>gnutar</span></strong>。<h4 class="title"><a name="mac-os-x-10-x"></a>2.12.2.1. Mac OS X 10.x (Darwin)</h4></div></div></div>
			<p><span>MySQL</span>应当可以在<span>Mac OS X 
			10.x(Darwin)</span>中工作，不会有重大问题。</p>
			<p>已知的问题有：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>连接时间<span>(</span><span>wait_timeout</span>、<span>interactive_timeout</span>和<span>net_read_timeout</span><span>)</span>值不理想。</p>
			<p>
			这可能是线程库中的信号处理问题，信号不能中断挂起的读命令，我们希望将来能对线程库进行更新以修复该问题。</p>
			<p>在<span>Darwin 6.3</span>中用下面的<strong><span>configure</span></strong>行对<span>Mac 
			OS X</span>二进制进行了编译：</p>
			<pre><span>CC=gcc CFLAGS=&quot;-O3 -fno-omit-frame-pointer&quot; CXX=gcc \</span></pre>
			<pre><span>CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer -felide-constructors \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti&quot; \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; ./configure --prefix=/usr/local/mysql \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-charsets=complex --enable-thread-safe-client \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; --enable-local-infile --disable-shared</span></pre>
			<p>参见<a href="#mac-os-x-installation" title="2.5. Installing MySQL on Mac OS X">2.5节，“在Mac OS X上安装MySQL”</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mac-os-x-server"></a>2.12.2.2. Mac OS X Server 1.2 (Rhapsody)</h4></div></div></div>
				<p>对于当前版本的<span>Mac OS X</span>服务器，编译<span>MySQL</span>之前不需要对操作系统进行更改。在服务器平台上的编译与客户端版本<span>Mac 
				OS X</span>相同。</p>
				<p>对于旧的版本<span>(Mac OS X Server 1.2, a.k.a. Rhapsody)</span>，在配置<span>MySQL</span>之前必须先安装<span>pthread</span>软件包。</p>
				<p>参见<a href="#mac-os-x-installation" title="2.5. Installing MySQL on Mac OS X">2.5节，“在Mac OS X上安装MySQL”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="solaris"></a>
			2.12.3.&nbsp;Solaris注意事项</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#solaris-2-7">
				2.12.3.1. Solaris 2.7/2.8注意事项</a></span></dt><dt><span class="section">
				<a href="#solaris-x86">
				2.12.3.2. Solaris x86注意事项</a></span></dt></dl></div><a class="indexterm" name="id2726836"></a><a class="indexterm" name="id2726843"></a><a class="indexterm" name="id2726853"></a><a class="indexterm" name="id2726863"></a><a class="indexterm" name="id2726873"></a><a class="indexterm" name="id2726880"></a>
			<p>在<span>Solaris</span>中，甚至在解压缩<span>MySQL</span>分发版时，你也会遇到问题，因为<span>Solaris
			<strong><span>tar</span></strong></span>不能处理长文件名。这说明解压缩<span>MySQL</span>分发版时会遇见错误。</p>
			<p>如果出现这种问题，必须使用<span>GNU <strong>
			<span>tar</span></strong>(<strong><span style="font-family:
宋体">gtar</span></strong>)</span>来解压缩分发版。可以从<span><a target="_top"  href="http://dev.mysql.com/downloads/os-solaris.html">http://dev.mysql.com/downloads/os-solaris.html</a></span>找到预编译的<span>Solaris</span>版本。</p>
			<p><span>Sun</span>原生线程只在<span>Solaris 2.5</span>和更高版本中工作。对于版本<span>2.4</span>和更早版本，<span>MySQL</span>自动使用<span>MIT-pthreads</span>。请参见<a href="#mit-pthreads" title="2.8.5. MIT-pthreads Notes">2.8.5节，“MIT-pthreads注意事项”</a>。</p>
			<p>如果你运行<strong><span  style="font-family:
宋体">configure</span></strong>时遇到下面的错误，说明编译器安装得有问题：</p>
			<pre><span>checking for restartable system calls... configure: error can not</span></pre>
			<pre><span>run test programs while cross compiling</span></pre>
			<p>在这种情况下，应当将编译器升级到较新的版本。还可以在<span>config.cache</span>文件中插入下面的行来解决该问题：</p>
			<pre><span>ac_cv_sys_restartable_syscalls=${ac_cv_sys_restartable_syscalls=&#39;no&#39;}</span></pre>
			<p>如果在<span>SPARC</span>上使用<span>Solaris</span>，建议使用编译器<strong><span>gcc</span></strong><span> 
			2.95.2</span>或<span>3.2</span>。可以从<span><a target="_top"  href="http://gcc.gnu.org/">http://gcc.gnu.org/</a></span>下载。请注意<strong><span>egcs</span></strong><span> 
			1.1.1</span>和<strong><span>gcc</span></strong><span> 
			2.8.1</span>不能在<span>SPARC</span>上可靠地工作。</p>
			<p>当使用<strong><span>gcc</span></strong><span> 
			2.95.2</span>时建议的<strong><span>configure</span></strong>行：</p>
			<pre><span>CC=gcc CFLAGS=&quot;-O3&quot; \</span></pre>
			<pre><span>CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors -fno-exceptions -fno-rtti&quot; \</span></pre>
			<pre><span>./configure --prefix=/usr/local/mysql --with-low-memory \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; --enable-assembler</span></pre>
			<p>如果你使用<span>UltraSPARC</span>系统，在<span >CFLAGS</span>和<span >CXXFLAGS</span>环境变量中加上<span><span>-mcpu=v8 
			-Wa,-xarch=v8plusa</span><span>，</span></span>性能可以提高<span>4%</span>。</p>
			<p>如果你有<span>Sun Forte 5.0(</span>或更新版<span>)</span>编译器，可以运行：</p>
			<pre><span>CC=cc CFLAGS=&quot;-Xa -fast -native -xstrconst -mt&quot; \</span></pre>
			<pre><span>CXX=CC CXXFLAGS=&quot;-noex -mt&quot; \</span></pre>
			<pre><span>./configure --prefix=/usr/local/mysql --enable-assembler</span></pre>
			<p>要想用<span>Sun Forte </span>编译器创建<span>64-</span>位二进制，使用下面的配置选项：</p>
			<pre><span>CC=cc CFLAGS=&quot;-Xa -fast -native -xstrconst -mt -xarch=v9&quot; \</span></pre>
			<pre><span>CXX=CC CXXFLAGS=&quot;-noex -mt -xarch=v9&quot; ASFLAGS=&quot;-xarch=v9&quot; \</span></pre>
			<pre><span>./configure --prefix=/usr/local/mysql --enable-assembler</span></pre>
			<p>要想使用<strong><span>gcc</span></strong>创建<span>64-</span>位<span>Solaris</span>二进制，在<span >CFLAGS</span>和<span><span>CXXFLAGS</span>中</span>增加<span>-m64</span>，并从<strong><span>configure</span></strong>行删掉<span>--enable-assembler</span>。</p>
			<p>在<span>MySQL</span>基准测试中，在<span>UltraSPARC</span>上使用<span>32</span>位模式的<span>Forte 
			5.0</span>，同使用带<span>-mcpu</span>标记的<strong><span>gcc</span></strong><span> 
			3.2</span>比较，速度提高了<span>4%</span>。</p>
			<p>如果创建了<span>64</span>位的<b><span>mysqld</span></b>二进制，速度要比<span>32-</span>位二进制慢<span>4%</span>，但是可以处理更多的线程和内存。</p>
			<p>当为<span>x86_64</span>使用<span>Solaris 10</span>时<span>,</span>你应当安装用<span>forcedirectio</span>选项保存<span>InnoDB</span>文件的文件系统。<span>(</span>默认情况不用该选项来安装<span>)</span>。如果不这样做，当在该平台上使用<span>InnoDB
			</span>储存引擎时将会造成严重的性能下降。</p>
			<p>如果<span>fdatasync</span>或<span>sched_yield</span>出现问题，你可以在<strong><span  style="font-family:
宋体">configure</span></strong>行加<span>LIBS=-lrt</span>修复该问题。</p>
			<p>对于早于<span>WorkShop 5.3</span>的编译器<span>,</span>你可能需要编辑<strong><span>configure</span></strong>脚本。应将该行：</p>
			<pre><span>#if !defined(__STDC__) || __STDC__ != 1</span></pre>
			<p>更该为：</p>
			<pre><span>#if !defined(__STDC__)</span></pre>
			<p>如果你用<span>-Xc</span><span>
			</span>选项打开<span>__STDC__</span>，<span>Sun
			</span>编译器不能用<span>Solaris </span>
			<span>pthreads.h</span><span>
			</span>头文件编译。这是一个<span>Sun </span>缺陷<span>(</span>中断的编译器或<span>include</span>文件<span>)</span>。</p>
			<p>如果运行<b><span>mysqld</span></b>时出现下面的错误消息，原因是你企图不启用<span>-mt</span><span> 
			multi-thread</span>选项而用<span>Sun</span>编译器编译<span>MySQL</span>：</p>
			<p><span>libc internal error: _rmutex_unlock: rmutex not 
			held</span></p>
			<p>将<span>-mt</span>加到<span>CFLAGS</span>和<span>CXXFLAGS</span>上并重新编译。</p>
			<p>如果你正使用<strong><span  style="font-family:
宋体">gcc</span></strong>的<span>SFW</span>版本<span>(</span>在<span>Solaris 
			8</span>安装包内<span>)</span>，运行<strong><span>configure</span></strong>之前你必须将<span>/opt/sfw/lib</span>加到环境变量<span>LD_LIBRARY_PATH</span>上。</p>
			<p>如果你正使用从<span>sunfreeware.com</span>下载的<strong><span>gcc</span></strong>，会遇到许多问题。要想避免，应当在运行机器上重新编译<strong><span>gcc</span></strong>和<span>GNU
			</span>
			<span>binutils</span>。</p>
			<p>如果你用<strong><span>gcc</span></strong>编译<span>MySQL</span>时遇到下面的错误，说明<strong><span>gcc</span></strong>配置不适合<span>Solaris</span>的版本：</p>
			<pre><span>shell&gt; </span><span><b><span>gcc -O3 -g -O2 -DDBUG_OFF&nbsp; -o thr_alarm ...</span></b></span></pre>
			<pre><span>./thr_alarm.c: In function `signal_hand&#39;:</span></pre>
			<pre><span>./thr_alarm.c:556: too many arguments to function `sigwait&#39;</span></pre>
			<p>在这种情况下正确的做法是得到最新版本的<strong><span>gcc</span></strong>，并用你当前的<strong><span>gcc</span></strong>编译器编译。至少对于<span>Solaris 
			2.5,</span>几乎所有二进制版本的<strong><span>gcc</span></strong>有旧的不再使用的<span>include</span>文件<span>,</span>中断了所有使用线程的程序，也可能会中断其它程序。</p>
			<p><span>Solaris</span>不提供静态版本的系统库<span>(</span><span>libpthreads</span>和<span>libdl</span><span>)</span>，因此你不能用<span>--static</span>编译<span>MySQL</span>。如果你试图这样做，会遇到下面的错误：</p>
			<pre><span>ld: fatal: library -ldl: not found</span></pre>
			<pre><span>undefined reference to `dlopen&#39;</span></pre>
			<pre><span>cannot find -lrt</span></pre>
			<p>如果你连接你自己的<span>MySQL</span>客户端程序，运行时会出现下面的错误：</p>
			<pre><span>ld.so.1: fatal: libmysqlclient.so.#:</span></pre>
			<pre><span>open failed: No such file or directory</span></pre>
			<p>可以通过下面的方法避免该问题：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>用<span>-Wl,r/full/path/to/libmysqlclient.so</span>标记而不要用<span>-Lpath</span><span>)</span>连接客户端。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>将<span>libmysqclient.so</span>复制到<span>/usr/lib</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>运行客户端程序前，将<span>libmysqlclient.so</span>目录的路径名加到<span>LD_RUN_PATH</span>环境变量上。</p>
			<p>如果你未安装<span>zlib</span>用 
			<span>-lz</span>连接时<strong><span>configure</span></strong>出现问题，你有两个选则：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你想要使用压缩通信协议，你需要从<span>ftp.gnu.org</span>获得并安装<span>zlib</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>构建<span>MySQL</span>时用<span>--with-named-z-libs=no</span>选项运行<strong><span>configure</span></strong>。</p>
			<p>如果你正使用<strong><span  style="font-family:
宋体">gcc</span></strong>，向<span>MySQL</span>调用用户定义函数<span>(UDF)</span>时出现问题，尝试向<span>UDF</span>连接行添加<span>-lgcc</span>到。</p>
			<p>如果想让<span>MySQL</span>自动启动，可以将<span>support-files/mysql.server</span>复制到<span><span>/etc/init.d</span><span>，</span></span>并创建<span>/etc/rc3.d/S99<b>mysql.server</b></span>符号连接。</p>
			<p>如果有太多进程试图快速连接<b><span>mysqld</span></b>，你应当能再<span>MySQL</span>日志只看见错误：</p>
			<pre><span>Error in accept: Protocol error</span></pre>
			<p>可以尝试用<span>--back_log=50</span>选项启动服务器来解决该问题。<span>(</span>在<span>MySQL 
			4</span>以前的版本中使用<span>-O 
			back_log=50</span>）<span>。 </span></p>
			<p><span>Solaris</span>不支持<span>setuid()</span><span>
			</span>应用程序所需的内核文件，因此如果你使用<span>--user</span>选项你不能从<b><span>mysqld</span></b>遇到内核文件。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="solaris-2-7"></a>
				2.12.3.1.&nbsp;Solaris 2.7/2.8注意事项</h4></div></div></div>
				<p>一般情况，可以在<span>Solaris 2.7</span>和<span>2.8</span>中使用<span>Solaris 
				2.6</span>二进制。大多数<span>Solaris 2.6</span>发布也适用<span>Solaris 
				2.7</span>和<span>2.8</span>。</p>
				<p><span>MySQL</span>应当能够自动检测到新的<span>Solaris</span>版本并解决下面的问题。</p>
				<p><span>Solaris 2.7/2.8</span>的<span>include</span>文件中有一些缺陷。当使用<strong><span>gcc</span><span>时</span></strong>你会看见下面的错误：</p>
				<pre><span>/usr/include/widec.h:42: warning: `getwc&#39; redefined</span></pre>
				<pre><span>/usr/include/wchar.h:326: warning: this is the location of the previous</span></pre>
				<pre><span>definition</span></pre>
				<p>如果出现该问题，修复的办法是将<span>/usr/include/widec.h</span>复制到<span>.../lib/gcc-lib/os/gcc-version/include</span>，并将<span>41</span>行从：</p>
				<pre><span>#if&nbsp;&nbsp;&nbsp;&nbsp; !defined(lint) &amp;&amp; !defined(__lint)</span></pre>
				<p>更改为：</p>
				<pre><span>#if&nbsp;&nbsp;&nbsp;&nbsp; !defined(lint) &amp;&amp; !defined(__lint) &amp;&amp; !defined(getwc)</span></pre>
				<p>另外，可以直接编辑<span>/usr/include/widec.h</span>。用任何一种方法修复后，应当删掉<span>config.cache</span>并再次运行<strong><span  style="font-family:
宋体">configure</span></strong>。</p>
				<p>如果运行<strong><span>make</span></strong>时遇到下面的错误，这是因为<strong><span>configure</span></strong>不能检测到<span>curses.h</span>文件<span>(</span>可能是因为<span>/usr/include/widec.h</span>中的错误<span>)</span>：</p>
				<pre><span>In file included from mysql.cc:50:</span></pre>
				<pre><span>/usr/include/term.h:1060: syntax error before `,&#39;</span></pre>
				<pre><span>/usr/include/term.h:1081: syntax error before `;&#39;</span></pre>
				<p>可以用下面任何一种方法解决该问题：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>CFLAGS=-DHAVE_CURSES_H 
				CXXFLAGS=-DHAVE_CURSES_H ./configure</span>配置。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>根据前面的讨论编辑<span>/usr/include/widec.h</span>并重新<strong><span>configure</span></strong>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>删掉<span>config.h</span>文件中的<span>#define 
				HAVE_TERM</span>行并重新运行<strong><span  style="font-family:
宋体">make</span></strong>。</p>
				<p>如果链接客户端程序时连接器找不到<span>-lz</span>，问题可能是<span>libz.so</span>文件安装到了<span>/usr/local/lib</span>。可以用下面任何一种方法解决该问题：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>向<span>LD_LIBRARY_PATH</span>增加<span>/usr/local/lib</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>增加到<span>libz.so</span><span> 
				from </span>
				<span>/lib</span>的连接。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果使用<span>Solaris 8,</span>可以安装<span>Solaris 
				8 CD</span>分发版中的可选项<span>zlib</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>构建<span>MySQL</span>时用<span>--with-named-z-libs=no</span>选项运行<strong><span>configure</span></strong>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="solaris-x86"></a>
				2.12.3.2.&nbsp;Solaris x86注意事项</h4></div></div></div>
				<p>在<span>x86 Solaris 8</span>上<span>,
				</span>如果使用<span>strip</span>删除调试符号，<strong><span>mysqld</span></strong>转储内核。</p>
				<p>如果正在<span> Solaris x86</span>上使用<strong><span>gcc</span></strong>或<strong><span>egcs</span></strong>，并且你碰到了在装载时的内核转储问题，应该使用下列<strong><span>configure</span></strong>命令：</p>
				<pre><span>CC=gcc CFLAGS=&quot;-O3 -fomit-frame-pointer -DHAVE_CURSES_H&quot; \</span></pre>
				<pre><span>CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-O3 -fomit-frame-pointer -felide-constructors \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti -DHAVE_CURSES_H&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql</span></pre>
				<p>
				用<span>libstdc++</span>库和与<span>C++</span>异常处理来避免这个问题。<span>
				</span></p>
				<p>如果这没有帮助，你应该编译一个调试版本并且用一个踪迹文件运行它或在<span>gdb</span>下运行它。请参见<a href="porting.html#using-gdb-on-mysqld" title="E.1.3. Debugging mysqld under gdb">E.1.3节，“在gdb环境下调试m<span><strong class="command">ysqld</strong></span>”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="bsd-notes"></a>
			2.12.4.&nbsp;BSD注意事项</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#freebsd">
				2.12.4.1. FreeBSD注意事项</a></span></dt><dt><span class="section">
				<a href="#netbsd">
				2.12.4.2. NetBSD注意事项</a></span></dt><dt><span class="section">
				<a href="#openbsd">
				2.12.4.3. OpenBSD 2.5版注意事项</a></span></dt><dt><span class="section">
				<a href="#bsdi">
				2.12.4.4. BSD/OS 2.x版注意事项</a></span></dt><dt><span class="section">
				<a href="#bsdi3">
				2.12.4.5. BSD/OS 3.x版注意事项</a></span></dt><dt><span class="section">
				<a href="#bsdi4">
				2.12.4.6. BSD/OS 4.x版注意事项</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
				本节提供在各种<span>BSD Unix</span>中使用<span>MySQL</span>的相关信息。<h4 class="title"><a name="freebsd"></a>
				2.12.4.1.&nbsp;FreeBSD注意事项</h4></div></div></div>
				<p>对于运行<span>MySQL</span>，推荐使用<span>FreeBSD 
				4.x</span>或更新版本，因为其线程包更加完整。要想遇到一个安全、稳定的系统，你应当只使用标记<span>-RELEASE</span>的<span>FreeBSD</span>内核。</p>
				<p>
				最容易因此是比较受喜欢的安装方法是使用<strong><span>mysql-server</span></strong>和<span>mysql-client</span>移植，可从<span><a  href="http://www.freebsd.org">http://www.freebsd.org</a></span>得到。</p>
				<p>使用这些移植的益处包括：</p>
				<ul type="disc">
					<li>
					一个全优化的工作在<span>FreeBSD</span>版本上的<strong><span>MySQL</span></strong>。</li>
					<li>
					自动配置和构建。</li>
					<li>
					启动脚本安装在<span>/usr/local/etc/rc.d</span>。</li>
				</ul>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>pkg_info -L</span>察看哪个文件被安装的能力</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你在那台机器上不再想要<strong><span>MySQL</span></strong>，用<span>pkg_delete</span>完全删除它们。</p>
				<p>
				建议在<span>FreeBSD 2.x</span>版上使用<span> 
				MIT-pthreads</span>，在版本<span>3</span>和以上版本用原生线程。在一些<span>2.2.x</span>的以后版本使用原生线程运行是可能的，但是你可能碰到<b><span>mysqld</span></b>关掉的问题。</p>
				<p>遗憾的是，<span>FreeBSD</span>调用的某些函数还不能完全保证线程安全。特别令人注意的是，包括<span>gethostbyname()</span>函数，<span> 
				MySQL</span>使用该函数将主机名转换为<span>IP</span>地址。在某些环境中，<b><span>mysqld</span></b>进程会突然造成<span>100%</span>的<span>CPU</span>负荷，不再响应。如果你遇到该问题，尝试使用<span>--skip-name-resolve</span>选项启动<span>MySQL</span>。</p>
				<p><span>另外，还可以将<span>FreeBSD 
				4.x</span>中的<span>MySQL</span>同<span>LinuxThreads</span>库连接，这样可以避免一些原生<span>FreeBSD</span>线程执行时的问题。为了更好地将<span>LinuxThreads</span>同原生线程进行对比，参见<span>Jeremy 
				Zawodny</span>的文章</span><em><span>FreeBSD 
				or Linux for your MySQL Server?</span></em><span>
				</span>地址：<span><a target="_top"  href="http://jeremy.zawodny.com/blog/archives/000697.html"><span><u><span style="color:blue">http://jeremy.zawodny.com/blog/archives/000697.html</span></u>
				</span></a></span>。</p>
				<p>在<span>FreeBSD</span>使用<span>LinuxThreads</span>的已知问题有：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>连接时间<span>(</span><span>wait_timeout</span>、<span>interactive_timeout</span>和<span>net_read_timeout</span><span>)</span>值不理想。现象是永久连接挂起较长时间，不能关闭，只有线程执行新命令时<span> 
				&#39;kill&#39;</span>线程方有效。</p>
				<p>这可能是线程库中的信号处理问题，信号不能中断挂起的读命令。期望在<span>FreeBSD 
				5.0</span>中修复。</p>
				<p><span>MySQL</span>构建进程需要<span>GNU make(<strong><span>gmake</span></strong>)</span>工作。如果没有<span>GNU
				<strong><span>make</span></strong></span>，必须在编译<span>MySQL</span>前先安装它。</p>
				<p>建议的在<span>FreeBSD</span>中用<strong><span>gcc</span></strong><span>(2.95.2</span>和以上版本<span>)</span>编译和安装<span>MySQL</span>的方法是：</p>
				<pre><span>CC=gcc CFLAGS=&quot;-O2 -fno-strength-reduce&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; CXX=gcc CXXFLAGS=&quot;-O2 -fno-rtti -fno-exceptions \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -felide-constructors -fno-strength-reduce&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; ./configure --prefix=/usr/local/mysql --enable-assembler</span></pre>
				<pre><span>gmake</span></pre>
				<pre><span>gmake install</span></pre>
				<pre><span>cd /usr/local/mysql</span></pre>
				<pre><span>bin/mysql_install_db --user=mysql</span></pre>
				<pre><span>bin/mysqld_safe &amp;</span></pre>
				<pre><span>&nbsp;</span></pre>
				<p>如果<strong><span>configure</span></strong>使用<span>MIT-pthreads</span>，应当阅读<span>MIT-pthreads</span>注意事项。请参见<a href="#mit-pthreads" title="2.8.5. MIT-pthreads Notes">2.8.5节，“MIT-pthreads注意事项”</a>。</p>
				<p>如果你从<span><b><span>make 
				install</span></b></span>遇到一个它不能找到<tt >“<span>/usr/include/pthreads</span>”</tt>的错误，<span><b><span>configure</span></b></span>没有检测出你需要<span>MIT-pthreads</span>。要修复该问题，移走<span>config.cache</span>，然后用<span>--with-mit-threads</span>选项重新运行<strong><span  style="font-family:
宋体">configure</span></strong>。</p>
				<p>
				确定让你的名字解析程序安装正确，否则当连接<b><span>mysqld</span></b>时，你可能会遇到解析延时或失败。保证在<tt >“<span>/etc/hosts</span>”</tt>文件中的<span>localhost</span>入口是正确的。<tt >“<span>/etc/hosts</span>”</tt>文件应该以下面一行开始：</p>
				<pre><span>127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost localhost.your.domain</span></pre>
				<p>已知<span>FreeBSD</span>的文件句柄限制默认值很低。请参见<a href="problems.html#not-enough-file-handles" title="A.2.17. File Not Found">A.2.17节，“文件未找到”</a>。使用<span>--open-files-limit</span>选项执行<strong><span>mysqld_safe</span></strong>启动服务器，或在<span>/etc/login.conf</span>为<strong><span>mysqld</span></strong>用户提高限制并用<span>cap_mkdb 
				/etc/login.conf</span>重建它。如果你不使用默认名<span>(</span>即使用<span>chpass 
				mysqld-user-name)</span>，还要保证为该用户设置在密码文件中的相应级别。请参见<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a>。</p>
				<p><span>FreeBSD</span>将进程空间限制到<span>512MB</span>，即使系统有很多的可用<span>RAM</span>也如此。因此你可能会遇到如下所示错误：</p>
				<pre><span>Out of memory (Needed 16391 bytes)</span></pre>
				<p>在当前版本的<span>FreeBSD(</span>至少<span>4.x</span>和更高版本<span>)</span>中，你可以在<span>/boot/loader.conf</span>文件中增加下面的条目并重启机器增加该限制<span>(</span>不能在运行时间用<strong><span>sysctl</span></strong>命令更改这些设定值<span>)</span>：</p>
				<pre><span>kern.maxdsiz=&quot;1073741824&quot; # 1GB</span></pre>
				<pre><span>kern.dfldsiz=&quot;1073741824&quot; # 1GB</span></pre>
				<pre><span>kern.maxssiz=&quot;134217728&quot; # 128MB</span></pre>
				<p>在旧版本的<span>FreeBSD</span>中，必须重新编译内核，以便更改进程的最大数据段空间。在这种情况下，应当查看<span>LINT</span>配置文件中的<span>MAXDSIZ</span>选项查看更详细的信息。</p>
				<p>如果<span>MySQL</span>的当前日期有问题，设置<span>TZ</span>变量将会有帮助。请参见<a href="environment-variables.html" title="Appendix F. Environment Variables">附录F：<i>环境变量</i></a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="netbsd"></a>
				2.12.4.2.&nbsp;NetBSD注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<p>
				为了在<span>NetBSD</span>上编译，你需要<span>GNU</span><span> 
				make</span>，否则当<span>make</span>试图在<span>C++</span>文件上运行<span>lint</span>时，编译将失败。</p>
				<h4 class="title"><a name="openbsd"></a>2.12.4.3.&nbsp;OpenBSD 
				2.5版注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				在<span>OpenBSD 2.5</span>上，可以用下列选项编译带原生线程的<strong><span>MySQL</span></strong>：<pre><span>CFLAGS=-pthread CXXFLAGS=-pthread ./configure --with-mit-threads=no</span></pre>
				<h4 class="title"><a name="bsdi"></a>2.12.4.4.&nbsp;BSD/OS 2.x版注意事项</h4></div></div></div>
				<p>如果在编译<strong><span>MySQ</span><span>L</span></strong>时，遇到下列错误<span>,
				</span>说明虚拟内存的<span><b><span>ulimit</span></b></span>值太低了：</p>
				<pre><span>item_func.h: In method</span></pre>
				<pre><span>`Item_func_ge::Item_func_ge(const Item_func_ge &amp;)&#39;:</span></pre>
				<pre><span>item_func.h:28: virtual memory exhausted</span></pre>
				<pre><span>make[2]: *** [item_func.o] Error 1</span></pre>
				<p>
				试试使用<span><b><span>ulimit 
				-v 80000</span></b></span>并再次运行<span><b><span>make</span></b></span>。如果这还不行并且你正在使用<span><b><span>bash</span></b></span>，试试换到<span><b><span>csh</span></b></span>或<span><b><span>sh</span></b></span>；一些<span>BSDI</span>用户报告了使用<span><b><span>bash</span></b></span>和<span><b><span>ulimit</span></b></span>有问题。</p>
				<p>如果你正在使用<span><b><span>gcc</span></b></span>，可能必须为<span><b><span>configure</span></b></span>使用<span>--with-low-memory</span>标志才能编<tt >译“<span>sql_yacc.cc</span>”</tt>。</p>
				<p>如果<span>MySQL</span>的当前日期有问题，设置<span>TZ</span>变量将会有帮助。请参见<a href="environment-variables.html" title="Appendix F. Environment Variables">附录F：<i>环境变量</i></a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="bsdi3"></a>
				2.12.4.5.&nbsp;BSD/OS 3.x版注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<p>
				升级到<span>BSD/OS 3.1</span>。如果不能升级，则安装<span>BSDI 
				patch M300-038</span>。</p>
				<p>在配置<strong><span style="font-family:
宋体;">MySQL</span></strong>时，使用下列命令<span>:</span></p>
				<pre><span>env CXX=shlicc++ CC=shlicc2 \</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --localstatedir=/var/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --without-perl \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-unix-socket-path=/var/mysql/mysql.sock</span></pre>
				<p>已知下面的项可以工作：</p>
				<pre><span>env CC=gcc CXX=gcc CXXFLAGS=-O3 \</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-unix-socket-path=/var/mysql/mysql.sock</span></pre>
				<p>
				如果你愿意，可以改变目录位置，或不指定任何位置而使用默认目录。</p>
				<p>
				如果在重负载下的性能有问题，试试使用<span>--skip-thread-priority</span>选项执行<strong><span>mysqld</span></strong>！这将以相同优先级运行所有线程；在<span>BSDI 
				3.1</span>上，可以得到较好的性能<span>(</span>至少直到<span>BSDI</span>可以修正其线程调度程序<span>)</span>。<span>
				</span></p>
				<p>如果在编译时遇到<span>virtual 
				memory exhausted</span>错误，试试使用<span><b><span>ulimit 
				-v 80000</span></b></span>并再次运行<span><b><span>make</span></b></span>。如果这还不行并且你正在使用<span><b><span>bash</span></b></span>，试试换到<span><b><span>csh</span></b></span>或<span><b><span>sh</span></b></span>；一些<span>BSDI</span>用户报告了使用<span><b><span>bash</span></b></span>和<span><b><span>ulimit</span></b></span>会有问题。</p>
				<h4 class="title"><a name="bsdi4"></a>2.12.4.6.&nbsp;BSD/OS 4.x版注意事项</h4></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			<span>BSDI 4.x</span>有一些线程有关的缺陷。如果你想要在这上面使用<strong><span>MySQL</span></strong>，应该安装所有与线程相关的补丁，至少应该安装<span>M400-023</span>。<p>
			在一些<span> BSDI 4.x</span>系统中，你可能会遇到共享库问题。现象是不能执行任何客户端程序，例如，<strong><span>mysqladmin</span></strong>。在这种情况下，需要重新配置，用<span>disable-shared</span>选项禁用库的共享以便进行配置。</p>
			<p>一些客户在<span>BSDI 4.0.1</span>中遇到了严重问题，即<b><span>mysqld</span></b>二进制过一会儿不能打开表。这是因为一些库<span>/</span>系统相关错误使<b><span>mysqld</span></b>未得到指令便更改了当前目录。</p>
			<p>修复方法是升级<span>MySQL</span>到最低<span>3.23.34</span>版或更高版，运行<strong><span>configure</span></strong>后，运行<strong><span>make</span><span style="font-family:
宋体;">前删掉</span></strong><span>config.h</span>中的行<span>#define 
			HAVE_REALPATH</span>。</p>
			<p>请注意这说明你不能通过符号连接将数据库目录连接到另一个数据库目录，或通过符号连接将表连接到<span>BSDI</span>上的另一个数据库。<span>(</span>可以通过符号连接连接到另一个硬盘<span>)</span>。</p>
			<h3 class="title"><a name="other-unix-notes"></a>
			2.12.5.&nbsp;其它Unix注意事项</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#hp-ux-10-20">
				2.12.5.1. HP-UX 10.20版注意事项</a></span></dt><dt><span class="section">
				<a href="#hp-ux-11-x">
				2.12.5.2. HP-UX 11.x版注意事项</a></span></dt><dt><span class="section">
				<a href="#ibm-aix">
				2.12.5.3. IBM-AIX注意事项</a></span></dt><dt><span class="section">
				<a href="#sunos">
				2.12.5.4. SunOS 4注意事项</a></span></dt><dt><span class="section">
				<a href="#alpha-dec-unix">
				2.12.5.5. Alpha-DEC-UNIX(Tru64)版注意事项</a></span></dt><dt><span class="section">
				<a href="#alpha-dec-osf1">
				2.12.5.6. Alpha-DEC-OSF/1注意事项</a></span></dt><dt><span class="section">
				<a href="#sgi-irix">
				2.12.5.7. SGI Irix注意事项</a></span></dt><dt><span class="section">
				<a href="#sco">
				2.12.5.8. SCO UNIX和OpenServer 5.0.x版注意事项</a></span></dt><dt><span class="section">
				<a href="#sco-unixware">
				2.12.5.9. SCO UnixWare 7.1.x和OpenUNIX 8.0.0版注意事项</a></span></dt><dt><span class="section">
				<a href="#sco-openserver">
				2.12.5.10. SCO OpenServer 6.0.x版注意事项</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="hp-ux-10-20"></a>
				2.12.5.1.&nbsp;HP-UX 10.20版注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<p>
				在<span>HP-UX</span>上编译<strong><span>MySQL</span></strong>时，有一些“小”问题。我们推荐您使用<span><b><span>gcc</span></b></span>而不是<span>HP-UX</span>自己的编译器，因为<span><b><span>gcc</span></b></span>可以生成更好的代码！</p>
				<p>我们推荐在<span>HP-UX</span>上使用<b><span>gcc</span></b><span> 
				2.95</span>，不使用高度优化标志<span>(</span>类似<span>-O6)</span>，因为这在<span>HP-UX
				</span>上可能不安全。</p>
				<p>下面的<strong><span>configure</span></strong>行在<strong><span>gcc</span></strong><span> 
				2.95</span>中应当工作：</p>
				<pre><span>CFLAGS=&quot;-I/opt/dce/include -fpic&quot; \</span></pre>
				<pre><span>CXXFLAGS=&quot;-I/opt/dce/include -felide-constructors -fno-exceptions \</span></pre>
				<pre><span>-fno-rtti&quot; \</span></pre>
				<pre><span>CXX=gcc \</span></pre>
				<pre><span>./configure --with-pthread \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=&#39;-ldce&#39; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql --disable-shared</span></pre>
				<p>下面的<strong><span>configure</span></strong>行在<strong><span>gcc</span></strong><span> 
				3.1</span>中应当工作：</p>
				<pre><span>CFLAGS=&quot;-DHPUX -I/opt/dce/include -O3 -fPIC&quot; CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-DHPUX -I/opt/dce/include -felide-constructors \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti -O3 -fPIC&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-charsets=complex --enable-thread-safe-client \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-local-infile&nbsp; --with-pthread \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=-ldce --with-lib-ccflags=-fPIC</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --disable-shared</span></pre>
				<h4 class="title"><a name="hp-ux-11-x"></a>2.12.5.2.&nbsp;HP-UX 
				11.x版注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				由于在标准<span> HP-UX</span>库中有一些严重错误，试图在<span>HP-UX 
				11.0</span>上运行<span>MySQL</span>前应当安装下面的补丁：<pre><span>PHKL_22840 Streams cumulative</span></pre>
				<pre><span>PHNE_22397 ARPA cumulative</span></pre>
				<p>这样可以解决在线程应用程序中运行<span>recv()</span>时得到<span>EWOULDBLOCK</span>和执行<span>accept()</span>时得到<span>EBADF</span>的问题。</p>
				<p>如果你在未打补丁的<span>HP-UX 11.x</span>系统中使用<strong><span>gcc</span></strong><span> 
				2.95.1</span>，可能会遇到下面的错误：</p>
				<pre><span>In file included from /usr/include/unistd.h:11,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from ../include/global.h:125,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from mysql_priv.h:15,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from item.cc:19:</span></pre>
				<pre><span>/usr/include/sys/unistd.h:184: declaration of C function ...</span></pre>
				<pre><span>/usr/include/sys/pthread.h:440: previous declaration ...</span></pre>
				<pre><span>In file included from item.h:306,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from mysql_priv.h:158,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from item.cc:19:</span></pre>
				<p>问题是<span>HP-UX</span>没有一致地定义<span>pthreads_atfork()</span>。它同<span>/usr/include/sys/unistd.h</span>：<span>184</span>和<span>/usr/include/sys/pthreads.h</span>：<span>440</span>中的原型冲突。</p>
				<p>一个解决办法是将<span>/usr/include/sys/unistd.h</span>复制到<span>MySQL</span><span>/include</span>并编辑<span>unistd.h</span>，对它进行更改以匹配<span>pthreads.h</span>中的定义。查找下列行：</p>
				<pre><span>extern int pthreads_atfork(void (*prepare)()</span>，<span>void (*parent)(),</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void (*child)())</span>；</pre>
				<p>将它更改为：</p>
				<pre><span>extern int pthreads_atfork(void (*prepare)(void)</span>，<span>void (*parent)(void),</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void (*child)(void))</span>；</pre>
				<p>更改完后，下面的<strong><span  style="font-family:
宋体">configure</span></strong>行应当工作：</p>
				<pre><span>CFLAGS=&quot;-fomit-frame-pointer -O3 -fpic&quot; CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-felide-constructors -fno-exceptions -fno-rtti -O3&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --disable-shared</span></pre>
				<p>如果你使用<span>HP-UX </span>编译器，可以使用下面的命令<span>(</span>已经用<strong><span>cc</span></strong><span> 
				B.11.11.04</span>进行了测试<span>)</span>：</p>
				<pre><span>CC=cc CXX=aCC CFLAGS=+DD64 CXXFLAGS=+DD64 ./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-character-set=complex</span></pre>
				<p>你可以忽略下面类型的任何错误：</p>
				<pre><span>aCC: warning 901: unknown option: `-3&#39;: use +help for online</span></pre>
				<pre><span>documentation</span></pre>
				<p>如果运行<strong><span>configure</span></strong>时遇到下面的错误，请验证在到<span>HP-UX 
				C</span>和<span>C++</span>编译器的路径前是否有到<span>K&amp;R</span>编译器的路径：</p>
				<pre><span>checking for cc option to accept ANSI C... no</span></pre>
				<pre><span>configure: error: MySQL requires an ANSI C compiler (and a C++ compiler).</span></pre>
				<pre><span>Try gcc. See the Installation chapter in the Reference Manual.</span></pre>
				<p>不能编译的另一个原因可能是你没有按照前面所述定义<span>+DD64</span>标记。</p>
				<p>对于<span>HP-UX 11</span>，另一个办法是使用<span><a target="_top"  href="http://dev.mysql.com/downloads/"><span><u><span style="color:blue">http://dev.mysql.com/downloads/</span></u></span></a></span>提供的<span>MySQL</span>二进制，这是我们已经构建并测试过的。我们也收到了<span>MySQL</span>的<span>HP-UX 
				10.20</span>二进制可以在<span>HP-UX 11</span>上成功运行的报告。如果你遇到问题，一定要检查<span>HP-UX</span>补丁的版本。</p>
				<h4 class="title"><a name="ibm-aix"></a>
				2.12.5.3.&nbsp;IBM-AIX注意事项</h4></div></div></div><a class="indexterm" name="id2728887"></a>
				<p><span>Autoconf</span>中没有了<span>xlC</span>自动检测，因此运行<strong><span>configure</span><span>前</span></strong>，需要设置许多变量。以下例子使用<span>IBM</span>编译器：</p>
				<pre><span>export CC=&quot;xlc_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192 &quot;</span></pre>
				<pre><span>export CXX=&quot;xlC_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192&quot;</span></pre>
				<pre><span>export CFLAGS=&quot;-I /usr/local/include&quot;</span></pre>
				<pre><span>export LDFLAGS=&quot;-L /usr/local/lib&quot;</span></pre>
				<pre><span>export CPPFLAGS=$CFLAGS</span></pre>
				<pre><span>export CXXFLAGS=$CFLAGS</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>./configure --prefix=/usr/local \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --localstatedir=/var/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --sbindir=&#39;/usr/local/bin&#39; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --libexecdir=&#39;/usr/local/bin&#39; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --enable-thread-safe-client \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --enable-large-files</span></pre>
				<pre><span>&nbsp;</span></pre>
				<p>可以从<span><a target="_top"  href="http://www-frec.bull.com/">http://www-frec.bull.com/</a></span>找到上述编译<span>MySQL</span>分发版的选项。</p>
				<p>如果你将前面的<strong><span  style="font-family:
宋体">configure</span></strong>行中的<span>-O3</span>改为<span>-O2</span>，必须删掉<span>-qstrict</span>选项。这是对<span>IBM 
				C</span>编译器的限制。</p>
				<p>如果你正在使用<strong><span>gcc</span></strong>或<span><b><span>egcs</span></b></span>编译<strong><span style="font-family:
宋体;">MySQL</span></strong>，<strong><span>必须</span></strong>使用<span>-fno-exceptions</span>标志，因为<strong><span>gcc</span><span>/</span><span>egcs</span></strong>的异常处理不是对线程安全的！（已经用<span><b><span>egcs</span></b></span><span>1.1</span>测试过）。<span>IBM</span>汇编程序也有一些已知问题，当使用<strong><span>gcc</span></strong>时可以生成坏的代码。</p>
				<p>在<span> AIX </span>上使用<span><b><span>egcs</span></b></span>和<span><b><span>gcc</span></b></span><b><span> 
				2.95</span></b>，我们推荐下列<strong><span>configure</span></strong>行：</p>
				<pre><span>CC=&quot;gcc -pipe -mcpu=power -Wa,-many&quot; \</span></pre>
				<pre><span>CXX=&quot;gcc -pipe -mcpu=power -Wa,-many&quot; \</span></pre>
				<pre><span>CXXFLAGS=&quot;-felide-constructors -fno-exceptions -fno-rtti&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --with-low-memory</span></pre>
				<p>为了成功编译，需要使用<span>-Wa,-many</span>选项。<span>IBM</span>知道该问题，但是由于工作区的原因，不急于修复它。我们不知道<strong><span>gcc</span></strong><span> 
				2.95</span>是否需要<span>-fno-exceptions</span>选项<span>,</span>但是因为<span>MySQL</span>不使用例外，并且该选项可以产生快速的代码，我们建议使用<strong><span>egcs</span></strong><span>/<strong><span>gcc</span></strong></span>时使用该选项。</p>
				<p>如果汇编码有问题，试试更改<span>-mcpu=<i>xxx</i></span>选项以匹配你的<span>CPU</span>。一般情况可能需要使用<span >power2</span>、<span >power</span>或<span >powerpc</span>。另外，你可能需要使用<span>604</span>或<span>604e</span>。我们不能绝对肯定但怀疑<span>power</span>一般应安全，即使在<span>power2</span>机器上也安全。</p>
				<p>如果你不知道你的<span>CPU</span>是什么样的，可以执行<span>uname 
				-m</span>命令。可以产生类似<span>000514676700</span>的字符串，格式为<span>xxyyyyyymmss</span>，其中<span>xx</span>和<span>ss</span>总是<span>00,yyyyyy</span>是唯一的系统<span>ID</span>，<span>mm</span>是<span>CPU 
				Planar</span>的<span>ID</span>。从<span><a target="_top"  href="http://www16.boulder.ibm.com/pseries/en_US/cmds/aixcmds5/uname.htm"><span><u><span style="color:blue">http://www16.boulder.ibm.com/pseries/en_US/cmds/aixcmds5/uname.htm</span></u></span></a></span>可以找到这些值的图表。</p>
				<p>该图表可以给出你可以使用的机器类型和机器型号，确定<span>CPU</span>的类型。</p>
				<p>如果遇到信号问题<span>(<strong><span>MySQL</span></strong></span>在高负载下出人意料地死掉<span>)</span>，你可能已经发现了与线程和信号有关的一个<span>OS
				</span>缺陷。在这种情况下，你可以用如下配置告诉<strong><span>MySQL</span></strong>不使用信号：</p>
				<pre><span>CFLAGS=-DDONT_USE_THR_ALARM CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-felide-constructors -fno-exceptions -fno-rtti \</span></pre>
				<pre><span>-DDONT_USE_THR_ALARM&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --with-debug \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-low-memory</span></pre>
				<p>这不影响<strong><span style="font-family:
宋体;">MySQL</span></strong>的性能，但是有副作用，就是不能用<span><b><span>mysqladmin 
				kill</span></b></span>或<span><b><span>mysqladmin 
				shutdown</span></b></span>杀死在一个连接上“睡眠”的客户端。相反，当客户端发出下一个命令时，它将死掉。</p>
				<p>在<span>AIX</span>的一些版本上用<span>libbind.a</span>链接使得<span>getservbyname</span>（）内核转储，这是<span>AIX</span>的一个缺陷并且应该报告<span>IBM</span>。</p>
				<p>对于<span>AIX 4.2.1</span>和<strong><span>gcc</span></strong>，进行下面的更改。</p>
				<p>配置完后，编辑<span>config.h</span>和<span>include/my_config.h</span>，将下面的行：</p>
				<pre><span>#define HAVE_SNPRINTF 1</span></pre>
				<p>更改为：</p>
				<pre><span>#undef HAVE_SNPRINTF</span></pre>
				<p>最后需要在<span>mysqld</span><span>.cc</span>中为<span>initgroups 
				()</span>添加：</p>
				<pre><span>#ifdef _AIX41</span></pre>
				<pre><span>extern &quot;C&quot; int initgroups(const char *,int);</span></pre>
				<pre><span>#endif</span></pre>
				<p>如果你需要为<b><span>mysqld</span></b>进程分配大量内存，只使用<strong><span>ulimit 
				-d unlimited</span></strong>是不够的。还可以需要修改<strong><span>mysqld_safe</span></strong>，增加下面的行：</p>
				<pre><span>export LDR_CNTRL=&#39;MAXDATA=0x80000000&#39;</span></pre>
				<p>关于使用大量内存的信息请查阅<span><a target="_top"  href="http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm"><span><u><span style="color:blue">http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm</span></u>
				</span></a></span>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sunos"></a>
				2.12.5.4.&nbsp;SunOS 4注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<p>
				在<span>SunOS 4</span>上，需要用<span>MIT-pthreads</span>编译<strong><span style="font-family:
宋体;">MySQL</span></strong>，反过来这意味着需要使用<span>GNU</span><span> 
				make</span>。</p>
				<p>
				一些<span>SunOS 4</span>系统的动态库和<span><b><span>libtool</span></b></span>有问题。可以使用下列<span><b><span>configure</span></b></span>行来避免这个问题：</p>
				<pre><span>./configure --disable-shared --with-mysqld-ldflags=-all-static</span></pre>
				<p>
				当编译<span>readline</span>时，可能会遇到关于重复定义的警告，可以忽略。<span>
				</span></p>
				<p>当编译<span><b><span>mysqld</span></b></span>的时候，将会遇到<span>implicit 
				declaration of function</span>警告，可以忽略。</p>
				<h4 class="title"><a name="alpha-dec-unix"></a>
				2.12.5.5.&nbsp;Alpha-DEC-UNIX(Tru64)版注意事项</h4></div></div></div>
				<p>如果你在<span>Digital Unix</span>上使用<strong><span>egcs</span></strong><span> 
				1.1.2</span>，应当升级到<strong><span>gcc</span></strong><span> 
				2.95.2,</span>因为<strong><span>egcs</span></strong>在<span>DEC</span>上有一些严重缺陷！</p>
				<p>
				当在<span>Digital UNIX</span>下编译线程程序时，文档推荐对于<span><b><span>cc</span></b></span>和<span><b><span>cxx</span></b></span>使用<span>-pthread</span>选项和<span>-lmach 
				-lexc</span>库（除了<span>-lpthread</span>外<span>)</span>。你应该象下面这样运行<span><b><span>configure</span></b></span>：</p>
				<pre><span>CC=&quot;cc -pthread&quot; CXX=&quot;cxx -pthread -O&quot; \</span></pre>
				<pre><span>./configure --with-named-thread-libs=&quot;-lpthread -lmach -lexc -lc&quot;</span></pre>
				<p>当编译<b><span>mysqld</span></b>时，会看见下面的警告：</p>
				<pre><span>mysqld.cc: In function void handle_connections()&#39;:</span></pre>
				<pre><span>mysqld.cc:626: passing long unsigned int *&#39; as argument 3 of</span></pre>
				<pre><span>accept(int,sockadddr *, int *)&#39;</span></pre>
				<p>
				你可以放心地忽略这些警告，它们的发生是因为<span><b><span>configure</span></b></span>只能检测出错误，而不是警告。</p>
				<p>如果直接从命令行启动服务器，当退出时，可能有死掉的问题。（当你退出时，重要进程收到一个<span>SIGHUP</span>信号<span>)</span>，如果如此，试着象这样启动服务器：</p>
				<pre><span>nohup mysqld [</span><span><i><span>options</span></i></span><span>] &amp;</span></pre>
				<p>
				<span>nohup</span>使得后面的命令忽视从终端发来的任何<span>SIGHUP</span>信号了。另外，通过运行<span><b><span>safe_mysqld</span></b></span>启动服务器，可以让<span><b><span>nohup</span></b></span>调用<span><b><span>mysqld</span></b></span>。请参见<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a>。</p>
				<p>如果编译<span>mysys/get_opt.c</span>时遇到问题，只需要从启动文件删掉<span>#define 
				_NO_PROTO</span>行。</p>
				<p>如果使用<span>Compaq</span>的<span>CC</span>编译器，下面的<strong><span>configure</span><span>行</span></strong>应当工作：</p>
				<pre><span>CC=&quot;cc -pthread&quot;</span></pre>
				<pre><span>CFLAGS=&quot;-O4 -ansi_alias -ansi_args -fast -inline speed all -arch host&quot;</span></pre>
				<pre><span>CXX=&quot;cxx -pthread&quot;</span></pre>
				<pre><span>CXXFLAGS=&quot;-O4 -ansi_alias -ansi_args -fast -inline speed all \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -arch host -noexceptions -nortti&quot;</span></pre>
				<pre><span>export CC CFLAGS CXX CXXFLAGS</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-low-memory \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-large-files \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-shared=yes \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=&quot;-lpthread -lmach -lexc -lc&quot;</span></pre>
				<pre><span>gnumake</span></pre>
				<p>如果用共享库编译时<strong><span  style="font-family:
宋体">libtool</span></strong>出现问题，应当能够在链接<strong><span  style="font-family:
宋体">mysql</span></strong>时通过下述命令解决该问题：</p>
				<pre><span>cd mysql</span></pre>
				<pre><span>/bin/sh ../libtool --mode=link cxx -pthread&nbsp; -O3 -DDBUG_OFF \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -O4 -ansi_alias -ansi_args -fast -inline speed \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -speculate all \ -arch host&nbsp; -DUNDEF_HAVE_GETHOSTBYNAME_R \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -o mysql&nbsp; mysql.o readline.o sql_string.o completion_hash.o \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; ../readline/libreadline.a -lcurses \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; ../libmysql/.libs/libmysqlclient.so&nbsp; -lm</span></pre>
				<pre><span>cd ..</span></pre>
				<pre><span>gnumake</span></pre>
				<pre><span>gnumake install</span></pre>
				<pre><span>scripts/mysql_install_db</span></pre>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="alpha-dec-osf1"></a>
				2.12.5.6.&nbsp;Alpha-DEC-OSF/1注意事项</h4></div></div></div>
				<p>如果遇到编译问题并安装了<span>DEC<b> </b></span>
				<span><b><span>CC</span></b></span>和<span><b><span>gcc</span></b></span>，尝试这样运行<span><b><span>configure</span></b></span>：</p>
				<pre><span>CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql</span></pre>
				<p>如果遇到<tt >“<span>c_asm.h</span>”</tt>文件的问题，可以创建并使用一个“哑<span>(dummy)</span>”<tt >“<span>c_asm.h</span>”</tt>文件：</p>
				<pre><span>touch include/c_asm.h</span></pre>
				<pre><span>CC=gcc CFLAGS=-I./include \</span></pre>
				<pre><span>CXX=gcc CXXFLAGS=-O3 \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql</span></pre>
				<p>请注意从<span><a target="_top"  href="http://ftp.support.compaq.com/public/unix/">http://ftp.support.compaq.com/public/unix/</a></span>下载最新的<span>DEC(Compaq)</span>补丁可以修复<strong><span>ld</span></strong>程序的下面问题。</p>
				<p>在<span>OSF1 V4.0D</span>和编译器<span>&quot;DEC 
				C V5.6-071 on Digital UNIX V4.0 (Rev. 878)&quot; </span>
				上，编译器有了一些奇怪的行为<span>(</span>未定义<span>asm</span>标志<span>)</span>。<span>/bin/ld</span>好象也被破坏<span>(</span>当链接<span><b><span>mysqld</span></b></span>时，发生<span>_exit 
				undefined</span>问题<span>)</span>。在这个系统上，从<span>OSF 
				4.0C</span>的版本替换了<span>/bin/ld</span>后，我们设法用下列<span><b><span>configure</span></b></span>命令行编译<strong><span>MySQL</span></strong>：</p>
				<pre><span>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</span></pre>
				<p>用<span>Digital</span>编译器“<span>C++ 
				V6.1-029”，下列命令应该工作：</span></p>
				<pre><span>CC=cc -pthread</span></pre>
				<pre><span>CFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -speculate all -arch host</span></pre>
				<pre><span>CXX=cxx -pthread</span></pre>
				<pre><span>CXXFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -speculate all -arch host -noexceptions -nortti</span></pre>
				<pre><span>export CC CFLAGS CXX CXXFLAGS</span></pre>
				<pre><span>./configure --prefix=/usr/mysql/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --with-mysqld-ldflags=-all-static --disable-shared \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --with-named-thread-libs=&quot;-lmach -lexc -lc&quot;</span></pre>
				<p>
				在<span>OSF1</span>的某些版本中，<span>alloca()</span>函数被破坏，通过删除定义<span>&#39;HAVE_ALLOCA&#39;</span><tt >的“<span>config.h</span>”</tt>的行更正它。<span>
				</span></p>
				<p>
				<span>alloca()</span>函数也可能在<span>/usr/include/alloca.h</span>里面有一个不正确的原型，源于此的警告可以忽略。<span>
				</span></p>
				<p>
				<span><b><span>configure</span></b></span>将自动地使用下列线程库： 
				 
				<span>
				--with-named-thread-libs=&quot;-lpthread -lmach -lexc -lc&quot;</span>。</p>
				<p>当使用<span><b><span>gcc</span></b></span>时，也可以试试这样运行<span><b><span>configure</span></b></span>：</p>
				<pre><span>CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ....</span></pre>
				<p>如果你的信号有问题<span>(<strong><span>MySQL</span></strong></span>出人意料地在高负载下死掉<span>)</span>，可能遇到了一个线程和信号有关的<span>OS
				</span>缺陷。在这种情况下，你可以告诉<strong><span>MySQL</span><span>按</span></strong>如下配置不使用信号：</p>
				<pre><span>CFLAGS=-DDONT_USE_THR_ALARM \</span></pre>
				<pre><span>CXXFLAGS=-DDONT_USE_THR_ALARM \</span></pre>
				<pre><span>./configure </span></pre>
				<p>这不影响<strong><span style="font-family:
宋体;">MySQL</span></strong>性能，但是有副作用，就是不能用<span><b><span>mysqladmin 
				kill</span></b></span>或<span><b><span>mysqladmin 
				shutdown</span></b></span>杀死在一个连接上“睡眠”的客户端。相反，当客户端发出下一个命令时，它将死掉。</p>
				<p>使用<strong><span>gcc</span></strong><span> 
				2.95.2,</span>会遇到下面的编译错误：</p>
				<pre><span>sql_acl.cc:1456: Internal compiler error in `scan_region&#39;,</span></pre>
				<pre><span>at except.c:2566</span></pre>
				<pre><span>Please submit a full bug report.</span></pre>
				<p>要修复该问题，应当进入<span>sql</span>目录并剪切、复制最后<strong><span>一</span></strong>行<strong><span>gcc</span></strong>，但应将<span>-O3</span><span>
				</span>改为<span>-O0</span><span> 
				(</span>或如果编译行没有任何<span>-O</span>选项，应在<strong><span  style="font-family:
宋体">gcc</span></strong>后面增加<span>-O0</span><span>)</span>。之后，可以回到顶级目录并重新运行<strong><span>make</span></strong>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sgi-irix"></a>
				2.12.5.7.&nbsp;SGI Irix注意事项</h4></div></div></div>
				<p>如果使用<span>Irix 6.5.3</span>或更新版，如果用拥有<span>CAP_SCHED_MGT</span>权限的用户<span>(</span>例如<span>root</span><span>)</span>运行<strong><span>mysqld</span></strong>或用下面的<span>shell</span>命令给<b><span>mysqld</span></b>服务器该权限，<strong><span>mysqld</span></strong>能够创建线程：</p>
				<pre><span>chcap &quot;CAP_SCHED_MGT+epi&quot; /opt/mysql/libexec/mysqld</span></pre>
				<p>可能需要在运行<span><b><span>configure</span></b></span>后且在编译前定义<tt >“<span>config.h</span>”</tt>里面的一些符号。</p>
				<p>
				在一些<span>Irix</span>实现中，<span>alloca()</span>函数被破坏。如果<span><b><span>mysqld</span></b></span>服务器死于一些<span>SELECT</span>语句，把<tt >“<span>config.h</span>”</tt>定义<span>HAVE_ALLOC</span>和<span>HAVE_ALLOCA_H</span>的行删除即可。如果<span><b><span>mysqladmin 
				create</span></b></span>不工作，把<tt >“<span>config.h</span>”</tt>定义<span>HAVE_READDIR_R</span>的行删除，你也可能必须删除<span>HAVE_TERM_H</span>行。<span>
				</span></p>
				<p><span>SGI</span>推荐将本页上的所有补丁作为一个整体来安装：</p>
				<p><span>
				<a target="_top"  href="http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html">
				http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html</a>
				</span></p>
				<p>
				至少，应该安装最新的核心卷<span>(rollup)</span>、最新的<span>rld</span>卷和最新的<span>libc</span>卷。<span>
				</span></p>
				<p>很明确，对于<span>pthreads</span>支持，需要本页上所有的<span>POSIX</span>补丁：</p>
				<p><span>
				<a target="_top"  href="http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html">
				http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html</a></span></p>
				<p>
				如果在编译<tt >“<span>mysql.cc</span>”</tt>时，遇到类似于下面的错误<span>:
				</span></p>
				<pre><span>&quot;/usr/include/curses.h&quot;, line 82: error(1084):</span></pre>
				<pre><span>invalid combinati</span>在<span>of type</span></pre>
				<p>那么应在<strong><span>MySQL</span></strong>源码树的顶级目录输入下列命令：</p>
				<pre><span>extra/replace bool curses_bool &lt; /usr/include/curses.h &gt; include/curses.h</span></pre>
				<pre><span>make</span></pre>
				<p>
				应该也有安排上的问题报告。如果只有一个线程正在运行，事情会变慢的。通过启动另外一个客户端来避免它，这可以导致此后其它线程的执行速度增加<span>2</span>到<span>10</span>倍。这是<span>Irix</span>线程难以理解的问题；可能必须临时准备找出解决方案直到它能被修正。</p>
				<p>
				<span>&nbsp;</span></p>
				<p>
				如果你正在用<span>gcc</span>编译，可以使用下列<span><b><span>configure</span></b></span>命令：</p>
				<p>
				<span>&nbsp;</span></p>
				<pre><span>CC=gcc CXX=gcc CXXFLAGS=-O3 \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --enable-thread-safe-client \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=-lpthread</span></pre>
				<p>在用原生<span>Irix C</span>和<span>C++</span>编译器<span>7.3.1.2</span>的<span>Irix 
				6.5.11</span>上<span>,</span>下面的项工作：</p>
				<pre><span>CC=cc CXX=CC CFLAGS=&#39;-O3 -n32 -TARG:platform=IP22 -I/usr/local/include \</span></pre>
				<pre><span>-L/usr/local/lib&#39; CXXFLAGS=&#39;-O3 -n32 -TARG:platform=IP22 \</span></pre>
				<pre><span>-I/usr/local/include -L/usr/local/lib&#39; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --with-innodb --with-berkeley-db \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-libwrap=/usr/local \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-curses-libs=/usr/local/lib/libncurses.a</span></pre>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sco"></a>
				2.12.5.8.&nbsp;SCO UNIX和OpenServer 5.0.x版注意事项</h4></div></div></div>
				<p>当前的移植仅在“<span>sco3.2v5.0.5</span>”<span>,</span>“<span>sco3.2v5.0.6<span>”和“</span>sco3.2v5.0.7<span>”系统上进行了测试</span></span>，在“<span>sco 
				3.2v4.2”上的移植也有很大进展。</span><span>OpenServer 
				5.0.8(Legend)</span>具有原生线程，允许文件大于<span>2GB</span>。目前最大的文件可以达到<span>2GB</span>。</p>
				<p>我们可以在<span>OpenServer</span>上用<strong><span>gcc</span></strong><span> 
				2.95.3</span>用下面的<strong><span>configure</span></strong>命令编译<span>MySQL</span>。</p>
				<pre><span>CC=gcc CXX=gcc ./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-thread-safe-client --with-innodb \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-openssl --with-vio --with-extra-charsets=complex</span></pre>
				<p>从<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserver5/opensrc/gnutools-5.0.7Kj">ftp://ftp.sco.com/pub/openserver5/opensrc/gnutools-5.0.7Kj</a></span>可以得到<strong><span>gcc</span></strong><b>。</b></p>
				<p>该开发系统需要在<span>OpenServer 5.0.6O</span>的<span>penServer 
				Execution Environment Supplement oss646B</span>和<span>oss656B</span>，<span>OpenSource</span>库位于<span> 
				gwxlibs</span>。所有<span>OpenSource</span>工具位于<span>opensrc</span>目录。可以从<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserver5/opensrc/">ftp://ftp.sco.com/pub/openserver5/opensrc/</a></span>获得。</p>
				<p>我们建议使用最新的<span>MySQL</span>产品发布。</p>
				<p><span>SCO</span>提供的操作系统补丁：<span>OpenServer 
				5.0.[0-6]</span>：<span><a  href="ftp://ftp.sco.com/pub/openserver5">ftp://ftp.sco.com/pub/openserver5</a></span>，<span>OpenServer 
				5.0.7</span>：<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserverv5/507">ftp://ftp.sco.com/pub/openserverv5/507</a></span>。</p>
				<p><span>SCO</span>提供的关于安全修复的信息：<span>Server 
				5.0.x</span>：<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/OpenServer">ftp://ftp.sco.com/pub/security/OpenServer</a></span>。</p>
				<p><span>OpenSever 5.0.x</span>系统上最大的文件的大小为<span>2GB</span>。</p>
				<p>在<span>OpenServer 5.0.x</span>上，可供串缓冲区、<span>clist</span>和锁定记录分配的总内存不能超出<span>60MB</span>。</p>
				<p>串缓冲区的分配单位为<span>4096 </span>字节的页，<span>clists</span>为<span>70</span>字节，锁定记录为<span>64</span>字节，因此为：</p>
				<p><span>(NSTRPAGES * 4096) + (NCLIST * 70) + (MAX_FLCKREC 
				* 64) &lt;= 62914560</span></p>
				<p>按照以下步骤来配置<span>Database Services</span>选项。如果你不确定应用程序是否需要，参见随应用程序提供的文档。</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>用<span>root</span>登录。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>编辑<span>/etc/conf/sdevice.d/suds</span>文件启用<span>SUDS</span>驱动程序。将第<span>2</span>个域内的<span>N</span>更改为<span>Y</span>。</p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>使用<span>mkdev 
				aio</span>或<span>Hardware/Kernel Manager</span>来启用对<span>asynchronous 
				I/O</span>的支持，并重新连接内核。要想让用户锁定内存用于该类<span>I/O</span>，更新<span>aiomemlock(F)</span>文件。应当对该文件进行更新，包括进可以使用<span>AIO</span>的用户和可以锁定的最大数量的内存。</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>许多应用程序使用<span>setuid</span>二进制，因此你只能指定单个用户
				。请参见随应用程序提供的文档来看是否应用程序是这种情况。</p>
				<p>完成该进程后，重新启动系统，创建包括这些更改的新内核。</p>
				<p>默认情况，<span>/etc/conf/cf.d/mtune</span>中的条目设置为：</p>
				<pre><span>Value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Min&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Max</span></pre>
				<pre><span>-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---</span></pre>
				<pre><span>NBUF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 450000</span></pre>
				<pre><span>NHBUF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288</span></pre>
				<pre><span>NMPBUF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 512</span></pre>
				<pre><span>MAX_INODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64000</span></pre>
				<pre><span>MAX_FILE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64000</span></pre>
				<pre><span>CTBUFSIZE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 256</span></pre>
				<pre><span>MAX_PROC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16000</span></pre>
				<pre><span>MAX_REGION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 160000</span></pre>
				<pre><span>NCLIST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 170&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 120&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16640</span></pre>
				<pre><span>MAXUP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16000</span></pre>
				<pre><span>NOFILES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;11000</span></pre>
				<pre><span>NHINODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>NAUTOUP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60</span></pre>
				<pre><span>NGROUPS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 128</span></pre>
				<pre><span>BDFLUSHR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 300</span></pre>
				<pre><span>MAX_FLCKREC&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16000</span></pre>
				<pre><span>PUTBUFSZ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20000</span></pre>
				<pre><span>MAXSLICE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100</span></pre>
				<pre><span>ULIMIT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4194303&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2048&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4194303</span></pre>
				<pre><span>* Streams Parameters</span></pre>
				<pre><span>NSTREAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32768</span></pre>
				<pre><span>NSTRPUSH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9</span></pre>
				<pre><span>NMUXLINK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096</span></pre>
				<pre><span>STRMSGSZ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16384&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288</span></pre>
				<pre><span>STRCTLSZ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
				<pre><span>STRMAXBLK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288</span></pre>
				<pre><span>NSTRPAGES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8000</span></pre>
				<pre><span>STRSPLITFRAC&nbsp;&nbsp;&nbsp; 80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100</span></pre>
				<pre><span>NLOG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</span></pre>
				<pre><span>NUMSP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 256</span></pre>
				<pre><span>NUMTIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8192</span></pre>
				<pre><span>NUMTRW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>* Semaphore Parameters</span></pre>
				<pre><span>SEMMAP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>SEMMNI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>SEMMNS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>SEMMNU&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>SEMMSL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 150</span></pre>
				<pre><span>SEMOPM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
				<pre><span>SEMUME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</span></pre>
				<pre><span>SEMVMX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32767&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32767&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32767</span></pre>
				<pre><span>SEMAEM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16384&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16384&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16384</span></pre>
				<pre><span>* Shared Memory Parameters</span></pre>
				<pre><span>SHMMAX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 131072&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2147483647</span></pre>
				<pre><span>SHMMIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span></pre>
				<pre><span>SHMMNI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2000</span></pre>
				<pre><span>FILE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64000</span></pre>
				<pre><span>NMOUNT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 256</span></pre>
				<pre><span>NPROC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16000</span></pre>
				<pre><span>NREGION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 160000</span></pre>
				<p>我们建议将这些值设置为：</p>
				<p>
				<span>NOFILES</span>应当为<span>4096</span>或<span>2048</span>。</p>
				<p>
				<span>MAXUP</span>应当为<span>2048</span>。</p>
				<p>要想更改内核，进入<span>/etc/conf/bin</span>并使用<strong><span>./idtune</span></strong><span>
				</span><span><i>
				<span>name parameter</span></i></span>来更改。例如，要将<span>SEMMS</span>改为<span>200</span>，用<span>root</span>账户执行命令：</p>
				<pre><span># cd /etc/conf/bin</span></pre>
				<pre><span># ./idtune SEMMNS 200</span></pre>
				<p>我们建议对该系统进行调节，但是使用的正确参数值取决于访问应用程序或数据库的用户数目和数据库空间<span>(</span>也就是使用的缓冲池<span>)</span>。下面的项影响<span>/etc/conf/cf.d/stune</span>中定义的内核参数：</p>
				<p>
				<span>SHMMAX</span><span>(</span>推荐设定值：<span>128MB)</span>和<span>SHMSEG</span><span>(</span>推荐设定值：<span>15)</span>。这些参数影响创建用户缓冲池的<span>MySQL</span>数据库引擎。</p>
				<p>
				<span>NOFILES</span>和<span>MAXUP</span>至少应达到<span>2048</span>。</p>
				<p>
				<span>MAXPROC</span>至少应当设置到<span>3000/4000(</span>取决于用户数<span>)</span>或更大值。</p>
				<p>建议使用下面的公式来计算<span>SEMMSL</span>、<span>SEMMNS</span>和<span>SEMMNU</span>的值：</p>
				<pre><span>SEMMSL = 13</span></pre>
				<p>发现<span>13</span>最适合进程和<span>MySQL</span>。</p>
				<p>
				<span>SEMMNS</span><span> 
				= </span>
				<span>SEMMSL</span><span> 
				* </span>系统上运行的<span>db</span>服务器数目。</p>
				<p>
				<span>将<span>SEMMNS</span></span>设置为<span>SEMMSL</span>值乘以你在该系统上一次运行的<span>db</span>服务器的<span>(</span>最大<span>)</span>数目。</p>
				<pre><span>SEMMNU = SEMMNS</span></pre>
				<p>将<span>SEMMNU</span>值设置为等于<span>SEMMNS</span>值。可以将该值设置为<span>75%</span>的<span>SEMMNS</span>，但是这是一个保守的估计。</p>
				<p>至少需要安装<span>&quot;SCO OpenServer Linker and Application 
				Development Libraries&quot;</span>或<span>OpenServer</span>开发系统来使用<strong><span>gcc</span></strong>。你不能只使用<span>GCC 
				Dev</span>系统，而不安装它们。</p>
				<p>你应当获得<span>FSU PTHREADS</span>安装软件包并先安装它。可以从<span><a target="_top"  href="http://moss.csc.ncsu.edu/~mueller/ftp/pub/PART/pthreads.tar.gz">http://moss.csc.ncsu.edu/~mueller/ftp/pub/PART/pthreads.tar.gz</a></span>获得。你还可以从
          <a href="ftp://ftp.zenez.com/pub/zenez/prgms/FSU-threads-3.14.tar.gz" target="_top">
				ftp://ftp.zenez.com/pub/zenez/prgms/FSU-threads-3.14.tar.gz</a>获得预编译的安装软件包。</p>
				<p><span>FSU Pthreads</span>能用带<span>tcpip</span>的<span>SCO 
				UNIX 4.2</span>编译，或使用<span>OpenServer 3.0</span>或<span>Open 
				Desktop 3.0(OS 3.0 ODT 3.0)</span>，安装带有使用一个<span>GCC 
				2.5.X</span>的<span>SCO</span>开发系统。对<span>ODT</span>或<span>OS 
				3.0</span>，将需要一个<span>GCC </span><span>
				2.5.x</span>的良好移植。没有一个良好的移植会有很多问题。对这个产品的移植需要<span>SCO 
				UNIX</span>开发系统，没有它，缺少所需的库和链接器。还需要<span>SCO-3.2v4.2-includes.tar.gz</span>。该文件包含<span>SCO
				</span>开发<span>include </span>文件的更改这是构建<span>MySQL</span>所需要的。需要用这些修改的头文件替换已有系统的<span>include</span>文件。可以从 
				<span>
				<a target="_top"  href="ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz">
				ftp<span>:</span>//ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz</a></span>获得。</p>
				<p>为了在系统上构造<span>FSU Pthreads</span>，需要做的工作是运行<span>GNU
				<strong><span>make</span></strong></span>。启动<span>FSU-threads-3.14.tar.gz</span>中的<span>Makefile</span>生成<span>FSU-</span>线程。</p>
				<p>在<tt >“<span>thread/src</span>”</tt>目录下运行<span><b><span>./configure</span></b></span>并且选择<span>SCO 
				OpenServer</span>选项。这个命令拷贝<tt >“<span>Makefile.SCO5”</span></tt>到<tt >“<span>Makefile</span>”</tt>。然后运行<strong><span>make</span></strong>。</p>
				<p>为了在默认<tt >的“<span>/usr/include</span>”</tt>目录安装，作为<span>root</span>登录，然后<span>cd</span><span>
				</span><tt >到“<span>thread/src</span>”</tt>目录，并运行<span><b><span>make 
				install</span></b></span>。</p>
				<p>记得在制作<strong><span>MySQL</span></strong>时要使用<span>GNU</span><span>
				<b>make</b></span>。</p>
				<p><strong><span>注释：</span></strong>如果你不是作为<span>root</span>启动<span><b><span>safe_mysqld</span></b></span>，将可能每进程只有
				默认的<span>110</span>个打开的文件。<span><b><span>mysqld</span></b></span>将在日志文件写下关于此的注解。</p>
				<p>用<span>SCO 3.2V4.2</span>时<span>,</span>应当使用<span>FSU 
				PTHREADS 3.14</span>或更新版。以下<strong><span  style="font-family:
宋体">configure</span></strong>命令应当工作：</p>
				<pre><span>CFLAGS=&quot;-D_XOPEN_XPG4&quot; CXX=gcc CXXFLAGS=&quot;-D_XOPEN_XPG4&quot; \</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=&quot;-lgthreads -lsocket -lgen -lgthreads&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-curses-libs=&quot;-lcurses&quot;</span></pre>
				<p>你可能遇到<span>include</span>文件的某些问题。在这种情况下，你能在<span><a  href="ftp://www.mysql.com/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz">ftp://www.mysql.com/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz</a></span>找到新的<span>SCO</span>特定的<span>include</span>文件。你应该在<strong><span>MySQL</span></strong>源码树<tt >的“<span>include</span>”</tt>目录下打开这个文件。<span>
				</span></p>
				<p><span>SCO</span>开发注意事项：</p>
				<ul type="disc">
					<li>
					<strong>
					<span>
					MySQL</span></strong>应该自动地检测<span>FSU Pthreads</span>并且用<span>-lgthreads 
					-lsocket -lgthreads</span>选项链接<span><b><span>mysqld</span></b></span>。<span>
					</span></li>
					<li>
					<span>SCO</span>开发库在<span>FSU 
					Pthreads</span>是重入<span>(reentrant)</span>的。<span>SCO</span>宣称它的库函数是重入的，因此他们一定在<span>FSU 
					Pthreads</span>中是重入的。在<span> OpenServer</span>上的<span> 
					FSU Pthreads </span>试图使用<span>SCO</span>方案制作重入的库。<span>
					</span></li>
					<li>
					<span>FSU Pthreads(</span>至少在<span><a target="_top"  href="ftp://:/ftp.zenez.com">ftp::/ftp.zenez.com</a></span>的版本<span>)</span>链接了<span>GNU</span><span> 
					malloc</span>，如果你遇到内存使用的问题，确定<tt >“<span>gmalloc.o</span>”</tt>包含在<tt >“<span>libgthreads.a</span>”</tt>和<tt >“<span>libgthreads.so</span>”</tt>中。<span>
					</span></li>
				</ul>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>FSU Pthreads</span>中，下列系统调用是<span>pthreads</span>感知的：<span>read()</span>、<span>write()</span>、<span>getmsg()</span>、<span>connect()</span>、<span>accept()</span>、<span>select()</span>和<span>wait()</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>CSSA-2001-SCO.35.2(</span>补丁列为定制<span>erg711905-dscr_remap</span>安全补丁<span>(</span>版本<span> 
				2.0.0))</span>中断<span>FSU</span>线程并使<b><span>mysqld</span></b>不稳定。如果你想在<span> 
				OpenServer 5.0.6</span>机器上运行<strong><span>mysqld</span></strong>必须删除它。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你使用<span>SCO OpenServer 5,</span>可能需要用<span>-DDRAFT7<span> 
				in </span>CFLAGS</span>重新编译<span>FSU pthreads</span>。否则，<b><span>mysqld</span></b>启动时<span>InnoDB</span>会挂起。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserver5">ftp://ftp.sco.com/pub/openserver5</a></span>提供了<span>OpenServer 
				5.0.x</span>的操作系统补丁。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/sse">ftp://ftp.sco.com/pub/security/sse</a></span>和<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/sse">ftp://ftp.sco.com/pub/security/sse</a></span>提供了<span>OpenServer 
				5.0.x</span>的安全修复和<span>libsocket.so.2</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Pre-OSR506</span>安全修复。在<span><a target="_top"  href="ftp://stage.caldera.com/pub/security/openserver/">ftp://stage.caldera.com/pub/security/openserver/</a></span>或<span><a target="_top"  href="ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/">ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/</a></span>提供了<span>libsocket.so.2</span>和<span>libresolv.so.1</span>的<span>telnetd</span>修复，以及在<span>pre-OSR506</span>系统上的安装说明。</p>
				<p>最好在编译<span>/</span>使用<span>MySQL</span>之前安装这些补丁。</p>
				<p><span>Legend/ OpenServer 6.0.0</span>有原生线程，没有<span>2GB</span>文件大小限制。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sco-unixware"></a>
				2.12.5.9.&nbsp;SCO UnixWare 7.1.x和OpenUNIX 8.0.0版注意事项</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				我们建议使用最新的<span>MySQL</span>产品发布。<p>我们可以用下面的<strong><span  style="font-family:
宋体">configure</span><span style="font-weight:
normal">命令</span></strong>在<span>UnixWare 7.1.x</span>中编译<span>MySQL</span>：</p>
				<pre><span>CC=&quot;cc&quot; CFLAGS=&quot;-I/usr/local/include&quot; \</span></pre>
				<pre><span>CXX=&quot;CC&quot; CXXFLAGS=&quot;-I/usr/local/include&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-thread-safe-client --with-berkeley-db=./bdb \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-innodb --with-openssl --with-extra-charsets=complex</span></pre>
				<p>如果你想要使用<strong><span  style="font-family:
宋体">gcc</span></strong>，必须使用<strong><span>gcc</span></strong><span> 
				2.95.3</span>或更新版。</p>
				<pre><span>CC=gcc CXX=g++ ./configure --prefix=/usr/local/mysql</span></pre>
				<p>当构建<span>MySQL</span>时不使用<span>UnixWare 
				7.1.4</span>或<span>OpenServer 6.0.0</span>中的<span>Berkeley 
				DB</span>版本。<span>MySQL</span>使用自己的<span>Berkeley 
				DB</span>。用来构建静态和动态库的<strong><span  style="font-family:
宋体">configure</span><span style="font-weight:
normal">命令</span></strong>在<span><i><span>src_directory</span></i><span>/bdb/build_unix/</span></span>中，但是它不在<span>MySQL</span>自己的<span>BDB</span>版本中。工作区如下所示。</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>按常规配置<span>MySQL</span>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>进入<span>（<span>cd</span>）<span>bdb/build_unix/</span></span></p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>将<span> 
				-p Makefile</span>复制<span>(cp)</span>到<span>Makefile.sav</span></p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>使用同样的选项并运行<strong><span  style="font-family:
宋体">../dist/configure</span></strong>。</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>运行<strong><span>gmake</span></strong>。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>cp -p Makefile.sav 
				Makefile</span></p>
				<p>
				<span>7.<span>&nbsp;&nbsp;&nbsp;
				</span></span>进入顶级源目录并运行<strong><span  style="font-family:
宋体">gmake</span></strong>。</p>
				<p>允许生成共享和动态库并工作。</p>
				<p><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/unixware7">ftp://ftp.sco.com/pub/unixware7</a></span>提供了<span>UnixWare 
				7.1.1</span>的操作系统补丁<span>,</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/unixware7/713/">ftp://ftp.sco.com/pub/unixware7/713/</a>
				</span>提供了<span>UnixWare 7.1.3</span>的操作系统补丁<span>, 
				UnixWare 7.1.4</span>的见<span><a target="_top"  href="ftp://ftp.sco.com/pub/unixware7/714/">ftp://ftp.sco.com/pub/unixware7/714/</a>, 
				OpenUNIX 8.0.0</span>的见 <span>
				<a target="_top"  href="ftp://ftp.sco.com/pub/openunix8">
				ftp://ftp.sco.com/pub/openunix8</a> </span>。</p>
				<p><span>SCO</span>提供的安全修复相关信息：<span>OpenUNIX</span>见<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/OpenUNIX">ftp://ftp.sco.com/pub/security/OpenUNIX</a></span>，<span>UnixWare</span>见 
				<span>
				<a target="_top"  href="ftp://ftp.sco.com/pub/security/UnixWare">
				ftp://ftp.sco.com/pub/security/UnixWare</a></span>。</p>
				<p>默认情况，在<span>UnixWare 7.1.1</span>系统中最大文件的大小为<span>1GB</span>，但是<span>UnixWare 
				7.1.4</span>中文件大小限制是<span>1 TB</span>（用<span>VXFS</span>）。一些<span>OS</span>实用程序 
				的限制是<span>2GB</span>。在<span>UnixWare 7</span>中可能的最大文件大小是<span>1TB</span>（用<span>VXFS</span>）。</p>
				<p>在<span>UnixWare 7.1.4</span>中，你不需要采取措施来获得大文件支持，但在<span>UnixWare 
				7.1.x</span>的以前版本中需要启用大文件支持，可以运行<span>fsadm</span>。</p>
				<pre><span># fsadm -Fvxfs -o largefiles /</span></pre>
				<pre><span># fsadm /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * Note</span></pre>
				<pre><span># ulimit unlimited</span></pre>
				<pre><span># cd /etc/conf/bin</span></pre>
				<pre><span># ./idtune SFSZLIM 0x7FFFFFFF&nbsp;&nbsp;&nbsp;&nbsp; ** Note</span></pre>
				<pre><span># ./idtune HFSZLIM 0x7FFFFFFF&nbsp;&nbsp;&nbsp;&nbsp; ** Note</span></pre>
				<pre><span># ./idbuild -B</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>* This should report &quot;largefiles&quot;.</span></pre>
				<pre><span>** 0x7FFFFFFF represents infinity for these values.</span></pre>
				<p>用<span>shutdown</span>重启系统。</p>
				<p>默认情况，<span>/etc/conf/cf.d/mtune</span>中的条目设置为：</p>
				<pre><span>Value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Min&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Max</span></pre>
				<pre><span>-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---</span></pre>
				<pre><span>SVMMLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x9000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>HVMMLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x9000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>SSTKLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x2000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>HSTKLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x2000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<p>我们建议将这些值设置为：</p>
				<pre><span>SDATLIM 0x7FFFFFFF</span></pre>
				<pre><span>HDATLIM 0x7FFFFFFF</span></pre>
				<pre><span>SSTKLIM 0x7FFFFFFF</span></pre>
				<pre><span>HSTKLIM 0x7FFFFFFF</span></pre>
				<pre><span>SVMMLIM 0x7FFFFFFF</span></pre>
				<pre><span>HVMMLIM 0x7FFFFFFF</span></pre>
				<pre><span>SFNOLIM 2048</span></pre>
				<pre><span>HFNOLIM 2048</span></pre>
				<p>
				我们建议对该系统进行调节，但是使用的正确参数值取决于访问应用程序或数据库的用户数目和数据库空间<span>(</span>也就是使用的缓冲池<span>)</span>。下面的项影响<span  >/etc/conf/cf.d/stune</span>中定义的内核参数：</p>
				<p>
				<span  >
				SHMMAX</span><span>(</span>推荐设定值：<span>128MB)</span>和<span  >SHMSEG</span><span>(</span>推荐设定值：<span>15)</span>。这些参数影响创建用户缓冲池的<span>MySQL</span>数据库引擎。</p>
				<p>
				<span>SFNOLIM</span>和<span>HFNOLIM</span>至少应达到<span>2048</span>。</p>
				<p>
				<span>NPROC</span>至少应当设置到<span>3000/4000(</span>取决于用户数<span>)</span>。</p>
				<p>建议使用下面的公式来计算<span  >SEMMSL</span>、<span  >SEMMNS</span>和<span  >SEMMNU</span>的值：</p>
				<pre><span>SEMMSL = 13</span></pre>
				<p>据发现<span>13</span>最适合进程和<span>MySQL</span>。</p>
				<p>
				<span>SEMMNS</span><span> 
				= </span>
				<span>SEMMSL</span><span> 
				* </span>系统上运行的<span>db</span>服务器数目。</p>
				<p>将<span  >SEMMNS</span>设置为<span  >SEMMSL</span>值乘以你在该系统上一次运行的<span>db</span>服务器的<span>(</span>最大<span>)</span>数目。</p>
				<p>
				<span>SEMMNU</span><span> 
				= </span>
				<span>SEMMNS</span><span>
				</span></p>
				<p>将<span  >SEMMNU</span>值设置为等于<span  >SEMMNS</span>值。可以将该值设置为<span>75%</span>的<span  >SEMMNS</span>，但是这是一个保守的估计。</p>
				<h4 class="title"><a name="sco-openserver"></a>2.12.5.10.&nbsp;SCO 
				OpenServer 6.0.x版注意事项</h4></div></div></div>
				<p><span>OpenServer6</span>的主要改进包括：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>大文件支持，可达到<span>1 TB</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>多处理器支持，从<span>4</span>个处理器增加到<span>32</span>个处理器。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>增加的内存支持，可达到<span>64GB</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>将<span>UnixWare</span>的功能扩展到<span>OpenServer6</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>性能的改进</p>
				<p><span>OpenServer6.0.0</span>具有：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>/bin</span>，用于与<span>OpenServer5.0.x</span>相同行为的命令。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>/u95/bin</span>用于标准的命令，例如大文件系统<span>(LFS)</span>支持。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>/udk/bin</span>用于<span>UnixWare 
				7.1.4</span>中相同的命令，默认是<span>LFS</span>支持。</p>
				<p>下面是在<span>OpenServer6</span>上设置<span>PATH</span>的指导。如果用户想使用传统的<span>OpenServer5.0.x</span>，则路径应当首先为<span>/bin</span>。如果用户需要<span>LFS</span>支持，则 
				路径应当为<span><span>/u95/bin</span><span>：<span>/bin</span></span></span>。如果用户首选<span>UnixWare 
				7</span>支持，则路径应为<span><span>/udk/bin</span><span>：<span>/u95/bin</span>：<span>/bin</span>：</span></span>。</p>
				<p>我们建议使用最新的<span>MySQL</span>产品发布。</p>
				<p>我们可以在<span>OpenServer 6.0.x</span>用下面的<strong><span>configure</span><span>命令</span></strong>编译<span>MySQL</span>：</p>
				<pre><span>CC=&quot;cc&quot; CFLAGS=&quot;-I/usr/local/include&quot; \</span></pre>
				<pre><span>CXX=&quot;CC&quot; CXXFLAGS=&quot;-I/usr/local/include&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-thread-safe-client --with-berkeley-db=./bdb \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-innodb --with-openssl --with-extra-charsets=complex \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-readline</span></pre>
				<p>如果你想要使用<strong><span  style="font-family:
宋体">gcc</span></strong>，必须使用<strong><span>gcc</span></strong><span>2.95.3</span>或更新版。</p>
				<pre><span>CC=gcc CXX=g++ ./configure --prefix=/usr/local/mysql</span></pre>
				<p>当构建<span>MySQL</span>时不使用<span>UnixWare 
				7.1.4</span>或<span>OpenServer 6.0.0</span>中的<span>Berkeley 
				DB</span>版本。<span>MySQL</span>使用自己的<span>Berkeley 
				DB</span>。用来构建静态和动态库的<strong><span  style="font-family:
宋体">configure</span><span style="font-weight:
normal">命令</span></strong>在<span><i><span>src_directory</span></i><span>/bdb/build_unix/</span></span>中，但是它不在<span>MySQL</span>自己的<span>BDB</span>版本中。工作区如下所示。</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>按常规配置<span>MySQL</span>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>进入<span>（<span>cd</span>）<span>bdb/build_unix/</span></span></p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>将<span> 
				-p Makefile</span>复制<span>(cp)</span>到<span>Makefile.sav</span></p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>使用同样的选项并运行<strong><span  style="font-family:
宋体">../dist/configure</span></strong>。</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>运行<strong><span>gmake</span></strong>。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>cp -p Makefile.sav 
				Makefile</span></p>
				<p>
				<span>7.<span>&nbsp;&nbsp;&nbsp;
				</span></span>进入顶级源目录并运行<strong><span  style="font-family:
宋体">gmake</span></strong>。</p>
				<p>允许生成共享和动态库并工作。<span>OpenServer6.0.0 </span>还需要<span>MySQL</span>源码树的补丁和适用于<span>bdb/dist/config.guess</span>的<span>config.guess</span>的补丁。你可以从<span><a target="_top"  href="ftp://ftp.zenez.com/pub/zenez/prgms/mysql-4.1.12-osr6-patches.tar.gz">ftp://ftp.zenez.com/pub/zenez/prgms/mysql-4.1.12-osr6-patches.tar.gz</a></span>和<span><a target="_top"  href="ftp://ftp.zenez.com/pub/zenez/prgms/mysql-4.x.x-osr6-patches">ftp://ftp.zenez.com/pub/zenez/prgms/mysql-4.x.x-osr6-patches</a></span>下载补丁。有一个<span  >README</span>文件可以提供帮助。</p>
				<p><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserver6">ftp://ftp.sco.com/pub/openserver6</a></span>提供了<span>OpenServer6</span>的操作系统补丁。</p>
				<p><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/OpenServer">ftp://ftp.sco.com/pub/security/OpenServer</a></span>提供关于安全修复的信息。</p>
				<p>默认情况，在<span>OpenServer6.0.0</span>系统的最大文件大小为<span>1TB</span>。一些操作系统工具的限制是<span>2GB</span>。在<span>UnixWare 
				7</span>中最大文件大小可以是<span>1TB</span>（用<span> 
				VXFS</span>或<span>HTFS</span>）。</p>
				<p>默认情况，<span>/etc/conf/cf.d/mtune</span>中的条目设置为：</p>
				<pre><span>Value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Min&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Max</span></pre>
				<pre><span>-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;-------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---</span></pre>
				<pre><span>SVMMLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x9000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>HVMMLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x9000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>SSTKLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x2000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>HSTKLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x2000&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x7FFFFFFF</span></pre>
				<p>我们建议将这些值设置为：</p>
				<pre><span>SDATLIM 0x7FFFFFFF</span></pre>
				<pre><span>HDATLIM 0x7FFFFFFF</span></pre>
				<pre><span>SSTKLIM 0x7FFFFFFF</span></pre>
				<pre><span>HSTKLIM 0x7FFFFFFF</span></pre>
				<pre><span>SVMMLIM 0x7FFFFFFF</span></pre>
				<pre><span>HVMMLIM 0x7FFFFFFF</span></pre>
				<pre><span>SFNOLIM 2048</span></pre>
				<pre><span>HFNOLIM 2048</span></pre>
				<p>
				我们建议对该系统进行调节，但是使用的正确参数值取决于访问应用程序或数据库的用户数目和数据库空间<span>(</span>也就是使用的缓冲池<span>)</span>。下面的项影响<span  >/etc/conf/cf.d/stune</span>中定义的内核参数：</p>
				<p>
				<span  >
				SHMMAX</span><span>(</span>推荐设定值：<span>128MB)</span>和<span  >SHMSEG</span><span>(</span>推荐设定值：<span>15)</span>。这些参数影响创建用户缓冲池的<span>MySQL</span>数据库引擎。</p>
				<p>
				<span>SFNOLIM</span>和<span>HFNOLIM</span>至少应达到<span>2048</span>。</p>
				<p>
				<span>NPROC</span>至少应当设置到<span>3000/4000(</span>取决于用户数<span>)</span>。</p>
				<p>建议使用下面的公式来计算<span  >SEMMSL</span>、<span  >SEMMNS</span>和<span  >SEMMNU</span>的值：</p>
				<pre><span>SEMMSL = 13</span></pre>
				<p>发现<span>13</span>最适合进程和<span>MySQL</span>。</p>
				<p>
				<span>SEMMNS</span><span> 
				= </span>
				<span>SEMMSL</span><span> 
				* </span>系统上运行的<span>db</span>服务器数目。</p>
				<p>将<span  >SEMMNS</span>设置为<span  >SEMMSL</span>值乘以你在该系统上一次运行的<span>db</span>服务器的<span>(</span>最大<span>)</span>数目。</p>
				<p>
				<span>SEMMNU</span><span> 
				= </span>
				<span>SEMMNS</span><span>
				</span></p>
				<p>将<span  >SEMMNU</span>值设置为等于<span  >SEMMNS</span>值。可以将该值设置为<span>75%</span>的<span  >SEMMNS</span>，但是这是一个保守的估计。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="os-2"></a>
			2.12.6.&nbsp;OS/2注意事项</h3></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
		<strong><span>
		MySQL</span></strong>使用太多的打开文件。因此，应该增加类似下面的东西到<tt >“<span>CONFIG.SYS</span>”</tt>文件：<pre><span>SET EMXOPT=-c -n -h1024</span></pre>
		<p>如果不这样做，将可能碰到下列错误：</p>
		<pre><span >File &#39;</span><i><span>xxxx</span></i><span >&#39; not found (Errcode: 24)</span><span>｀</span></pre>
		<p>
		当<span>OS/2 Warp 3</span>上使用<strong><span style="font-family:
宋体;">MySQL</span></strong>时，要求<span>FixPack 29</span>或以上版本。用<span>OS/2 
		Wrap 4</span>，要求<span>FixPack 4</span>或以上版本。这是<span>Pthreads</span>库的一个要求。<strong><span>MySQ</span><span>L</span></strong>必须安装在支持长文件名的一个分区上，如<span>HPFS</span>、<span>FAT32</span>等等。</p>
		<p>
		<tt >“<span>INSTALL.CMD</span>”</tt>脚本必须从<span>OS/2</span>自己的<tt >“<span>CMD.EXE</span>”</tt>运行并且不能工作在替代外壳如<tt >“<span>4OS2.EXE</span></tt>”。</p>
		<p>
		<tt >“<span>scripts/mysql-install-db</span>”</tt>脚本已经被重新命名了：它称为<tt >“<span>install.cmd</span>”</tt>并且是一个<span>REXX</span>脚本，将安装
		默认的<strong><span>MySQL</span></strong>安全配置并为<strong><span>MySQL</span></strong>创建<span>WorkPlace 
		Shell</span>图标。</p>
		<p>
		动态模块支持通过编译但没有充分测试，动态模块应该使用<span>Pthreads</span>运行时刻库编译。</p>
		<p>
		<span>&nbsp;</span></p>
		<pre><span>gcc -Zdll -Zmt -Zcrtdll=pthrdrtl -I../include -I../regex -I.. \</span></pre>
		<pre><span>&nbsp;&nbsp;&nbsp; -o example udf_example.cc -L../lib -lmysqlclient udf_example.def</span></pre>
		<pre><span>mv example.dll example.udf</span></pre>
		<p><strong><span>注释：</span></strong>由于<span>OS/2</span>的限制，<span>UDF</span>模块名字的词干不能超过<span>8</span>个字符。模块存储在<tt >“<span>/mysql2/udf</span>”</tt>目录；<span>safe-mysqld.cmd</span>脚本将把这个目录放在<span>BEGINLIBPATH</span>环境变量中。当使用<span>UDF</span>模块时，指定的扩展名被忽略<span>--</span>它被假定为<tt >“<span>.udf</span>”</tt>。例如，在<span> 
		Unix</span>上，共享模块可能被命名<tt >为“<span>example.so</span>”</tt>并且可以象这样从它装载函数：</p>
		<p><span>mysql&gt;
		</span><span>CREATE FUNCTION metaphon RETURNS STRING SONAME &#39;example.so&#39;</span><span><b>；</b></span></p>
		<p>在<span>OS/2</span>中<span>, </span>模块被命名为<span  >example.udf</span>，但是不能指定模块扩展名：</p>
		<pre><span >mysql&gt; </span><b><span>CREATE FUNCTION metaphon RETURNS STRING SONAME &#39;example&#39;</span></b><span><b><span>；</span></b></span></pre>
		<h2 class="title"><a name="perl-support"></a>
		2.13.&nbsp;Perl安装注意事项</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#perl-installation">
			2.13.1. 在Unix中安装Perl</a></span></dt><dt><span class="section">
			<a href="#activestate-perl">
			2.13.2. 在Windows下安装ActiveState Perl</a></span></dt><dt><span class="section">
			<a href="#perl-support-problems">
			2.13.3. 使用Perl DBI/DBD接口的问题<code class="literal"></code></a></span></dt></dl></div><a class="indexterm" name="id2731838"></a><a class="indexterm" name="id2731848"></a>
		<p>
		<span>Perl</span>对<strong><span style="
">MySQ</span><span>L</span></strong>的支持借助<span>DBI</span><span>/</span><span>DBD</span>客户端接口。接口要求<span>Perl 
		5.6.0</span>或以后版本。如果你的<span>Perl</span>版本更旧，接口<em><span>将不能工作</span></em>。</p>
		<p>如果想要在<span>Perl DBI</span>中使用事务，需要有<span>1.2216</span>版或更新版<span><span>DBD</span><span>：：</span><span>mysql</span></span>。建议使用<span>2.9003</span>版或更新版。</p>
		<p>如果你使用<span>MySQL 4.1</span>客户端库，必须使用<span><span>DBD</span><span>：：<span>mysql</span></span></span><span> 
		2.9003</span>或更新版。</p>
		<p><span>MySQL</span>分发版不包含<span>Perl</span>支持。可以从<span><a target="_top"  href="http://search.cpan.org">http://search.cpan.org</a></span>获得<span>Unix</span>需要的模块，或在<span>Windows</span>中使用<span>ActiveState
		<strong><span>ppm</span></strong></span>程序。以下章节描述了如何做。</p>
		<p>如果你想要运行<span>MySQL</span>基准脚本，必须安装<span>Perl</span>支持。请参见<a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">7.1.4节，“MySQL基准套件”</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="perl-installation"></a>
			2.13.1.&nbsp;在Unix中安装Perl</h3></div></div></div>
			<p><strong>
			<span>MySQL</span></strong><span> 
			Perl</span>支持也要求你安装了<strong><span style="font-family:
宋体;">MySQL</span></strong>客户端编程支持<span>(</span>库和头文件<span>)</span>。大多数安装中安装了必要的文件。但是，如果你在<span>Linux</span>中从<span>RPM</span>文件安装<span>MySQL</span>，确保安装了开发者<span>RPM</span>。客户端程序在客户端<span>RPM</span>中，但是客户端编程支持在开发者<span>RPM</span>。</p>
			<p>如果你想要安装<span>Perl</span>支持，需要的文件能从<span><a target="_top"  href="http://search.cpan.org">http://search.cpan.org</a></span>的<span>CPAN 
			(Comprehensive Perl Archive Network)</span>获得。</p>
			<p>在<span>Unix</span>中安装<span>Perl</span>模块最简单的方法是使用<span>CPAN</span>模块。例如：</p>
			<pre><span>shell&gt; </span><span><b><span>perl -MCPAN -e shell</span></b></span></pre>
			<pre><span>cpan&gt; install DBI</span></pre>
			<pre><span>cpan&gt; install DBD::mysql</span></pre>
			<p><span>
			<span>DBD</span><span>：：<span>mysql</span></span></span>安装运行许多测试。测试中使用默认用户名和密码尝试连接本地<span>MySQL</span>服务器。<span>(</span>默认用户名是<span>Unix</span>中的登录名和<span>Windows</span>中的<span>ODBC</span>。默认密码“没有<span class="quote">密码。</span>”<span>)
			</span>如果你不能通过这些值连接服务器<span> (</span>例如，如果你的账户有密码<span>)</span>，测试失败。可以使用<span  >force 
			install DBD::mysql</span>忽略失败的测试。</p>
			<p>
			<span>DBI</span>需要<span  >Data::Dumper</span>模块。应该可以安装；如果不能，应当在安装<span>DBI</span>前安装<span  >Data::Dumper</span>模块。</p>
			<p>还可以下载<strong><span  style="font-family:
宋体">tar</span></strong>文件压缩格式的模块分发版，并手动构建模块。例如，解压缩和构建<span>DBI</span>分发版的过程为：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span>&nbsp;</span>将分发版解压缩到当前目录：</p>
			<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><b><span>gunzip &lt; DBI-<i>VERSION</i>.tar.gz | tar xvf </span></b><span><b><span>-</span></b></span></pre>
			<p>该命令创建目录 
			<span>DBI-</span><i><span  >VERSION</span></i>。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>进入解压缩分发版的顶级目录：</p>
			<pre><span>4.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd DBI-</span></b></span><b><i><span>VERSION</span></i></b></pre>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>构建分发版并编译：</p>
			<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>perl Makefile.PL</span></b></span></pre>
			<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make test</span></b></span></pre>
			<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<p>
			<span><b><span>make test</span></b></span>命令很重要，因为它验证模块正在工作。注意：在你<span  >DBD::mysql</span>安装期间运行该命令试验接口代码时，<strong><span>MySQL</span></strong>服务器必须正在运行，否则测试将失败。<span>
			</span></p>
			<p>
			无论何时你安装一个新版本的<strong><span>MySQL</span></strong>，重建并且重新安装<span  >DBD::mysql</span>分发版是一个好主意<span>,
			</span>特别是在升级<strong><span>MySQL</span></strong>后，观察所有异常，如<span>DBI</span>脚本失败。<span>
			</span></p>
			<p>如果你没有权限在系统目录下安装<span>Perl</span>模块，或如果你安装本地<span>Perl</span>模块，下列参考书可以帮助你：<span><a target="_top"  href="http://servers.digitaldaze.com/extensions/perl/modules.html#modules">http://servers.digitaldaze.com/extensions/perl/modules.html#modules</a></span></p>
			<p>在标题“<span><span>Installing 
			New Modules that Require Locally Installed Modules</span><span>”</span></span>下面查找。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="activestate-perl"></a>
			2.13.2.&nbsp;在Windows下安装ActiveState Perl</h3></div></div></div><a class="indexterm" name="id2732167"></a><a class="indexterm" name="id2732177"></a><a class="indexterm" name="id2732188"></a>
			<p>在<span>Windows</span>中，应当按照以下步骤安装带<span>ActiveState 
			Perl</span>的<span>MySQL </span>
			<span>DBD</span>模块：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>从<span><a target="_top"  href="http://www.activestate.com/Products/ActivePerl/">http://www.activestate.com/Products/ActivePerl/</a></span>获得<span>ActiveState 
			Perl</span>并安装。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>打开控制台窗口<span>(</span>“<span class="quote"><span>DOS</span>窗口</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果需要，设置<span  >HTTP_proxy</span>变量。例如，你可以试试：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>set HTTP_proxy=my.proxy.com:3128</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>启动<span>PPM</span>程序：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>C</span>：<span>\&gt; </span><span><b><span>C</span><span>：<span>\perl\bin\ppm.pl</span></span></b></span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你还没有安装<span>DBI</span>，则安装：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ppm&gt; install DBI</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果成功，运行下面的命令：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>install\</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ftp://ftp.de.uu.net/pub/CPAN/authors/id/JWIED/DBD-mysql-1.2212.x86.ppd</span></pre>
			<p>该进程应当在<span>ActiveState Perl 5.6</span>或更新版本中工作。</p>
			<p>如果你不能使上述步骤工作，应该安装<strong><span>MyODBC</span></strong>驱动程序并且通过<span>ODBC</span>连接<strong><span style="
">MySQL</span></strong>服务器：</p>
			<pre><span>use DBI;</span></pre>
			<pre><span>$dbh= DBI-&gt;connect(&quot;DBI:ODBC:$dsn&quot;,$user,$password) ||</span></pre>
			<pre>die "Got error $DBI::errstr when connecting to $dsn\n";</pre>
		</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="perl-support-problems"></a>
			2.13.3.&nbsp;使用Perl DBI/DBD接口的问题<code class="literal"></code></h3></div></div></div><a class="indexterm" name="id2732326"></a><a class="indexterm" name="id2732336"></a>
			<p>如果<span>Perl</span>报告它不能发现<span  >../mysql/mysql.so</span>模块，可能试因为<span>Perl</span>不能定位共享库<span  >libmysqlclient.so</span>。</p>
			<p>可以使用下面的方法修复该问题：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>用<span  >perl 
			Makefile.PL -static -config</span>而不要用<span  >perl 
			Makefile.PL</span>编译<span><span>DBD</span><span>：：<span>mysql</span></span></span>分发版。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>将<span  >libmysqlclient.so</span>复制到其它共享库所在的目录<span> 
			(</span>可能为<span>/usr/lib</span><span>
			</span>或<span>/lib</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>修改用来编译<span><span>DBD</span><span>：：<span>mysql</span></span></span>的<span>-L</span>选项，反应<span  >libmysqlclient.so</span>的实际位置。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Linux</span>中，你可以将<span  >libmysqlclient.so</span>的目录路径名增加到<span  >/etc/ld.so.conf</span>文件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>将<span  >libmysqlclient.so</span>的目录路径名增加到<span  >LD_RUN_PATH</span>环境变量。一些系统使用<span  >LD_LIBRARY_PATH</span>。</p>
			<p>注意如果连接器没有找到另一个库，你还可能需要修改<span>-L</span>选项。例如，如果因为<span>libc</span>在<span>/lib</span>下并且连接命令指定了<span>-L/usr/lib</span>，连接器不能找到它，将<span>-L</span>选项更改为<span>-L/lib</span>或在连接命令中增加<span>-L/lib</span>。</p>
			<p>如果你遇到下面的<span><span>DBD</span><span>：：<span>mysql</span></span></span>错误，你可能使用了<strong><span  style="font-family:
宋体">gcc</span></strong><span>(</span>或使用了用<strong><span>gcc</span></strong>编译的旧的二进制<span>)</span>：</p>
			<pre><span>/usr/bin/perl: can&#39;t resolve symbol &#39;__moddi3&#39;</span></pre>
			<pre><span>/usr/bin/perl: can&#39;t resolve symbol &#39;__divdi3&#39;</span></pre>
			<p>当构建<span  >mysql.so</span>库是在连接命令中增加<span>-L/usr/lib/gcc-lib/... 
			-lgcc</span><span>(</span>当编译<span>Perl</span>客户端时检查生成<span  >mysql.so</span>的<strong><span>make</span></strong>的输出<span>)</span>。<span>-L</span>选项应指定<span>libgcc.a</span>在系统中的安装目录的路径名。</p>
			<p>该问题的另一个原因是<span>Perl</span>和<span>MySQL</span>没有用<strong><span>gcc</span></strong>编译。在这种情况下，你可以用<strong><span>gcc</span></strong>编译二者来解决。</p>
			<p>当你运行测试时你会从<span><span>DBD</span><span>：：<span>mysql</span></span></span>看见下面的错误：</p>
			<pre><span>t/00base............install_driver(mysql) failed:</span></pre>
			<pre><span>Can&#39;t load &#39;../blib/arch/auto/DBD/mysql/mysql.so&#39; for module DBD::mysql:</span></pre>
			<pre><span>../blib/arch/auto/DBD/mysql/mysql.so: undefined symbol:</span></pre>
			<pre><span>uncompress at /usr/lib/perl5/5.00503/i586-linux/DynaLoader.pm line 169.</span></pre>
			<p>这意味着你需要在连接行包括<span>-lz</span><span>
			</span>压缩库。可以通过更改文件<span  >lib/DBD/mysql/Install.pm</span>的下列行来实现：</p>
			<pre><span>$sysliblist .= &quot; -lm&quot;;</span></pre>
			<p>更改为：</p>
			<pre><span>$sysliblist .= &quot; -lm -lz&quot;;</span></pre>
			<p>然后，你必须运行<strong><span  style="font-family:
宋体">make realclean</span></strong><span> </span>然后重新安装。</p>
			<p>如果你想要在<span>SCO</span>上安装<span>DBI</span>，需要在<span>DBI-</span><span><i><span>xxx</span></i></span><span>
			</span>和每个子目录中编辑<span  >Makefile</span>。请注意下面的更新假定使用<strong><span>gcc</span></strong><span> 
			2.95.2</span>或更新版：</p>
			<pre><span>旧：</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>新：</span></pre>
			<pre><span>CC = cc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CC = gcc</span></pre>
			<pre><span>CCCDLFLAGS = -KPIC -W1,-Bexport&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CCCDLFLAGS = -fpic</span></pre>
			<pre><span>CCDLFLAGS = -wl,-Bexport&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CCDLFLAGS =</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>LD = ld&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LD = gcc -G -fpic</span></pre>
			<pre><span>LDDLFLAGS = -G -L/usr/local/lib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDDLFLAGS = -L/usr/local/lib</span></pre>
			<pre><span>LDFLAGS = -belf -L/usr/local/lib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDFLAGS = -L/usr/local/lib</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>LD = ld&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LD = gcc -G -fpic</span></pre>
			<pre><span>OPTIMISE = -Od&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OPTIMISE = -O1</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>旧：</span></pre>
			<pre><span>CCCFLAGS = -belf -dy -w0 -U M_XENIX -DPERL_SCO5 -I/usr/local/include</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>新：</span></pre>
			<pre><span>CCFLAGS = -U M_XENIX -DPERL_SCO5 -I/usr/local/include</span></pre>
			<p>这些更改是必需的，因为用<strong><span>icc</span></strong>或<strong><span>cc</span></strong>编译的<span>Perl</span>动态装载器不装载<span>DBI</span>模块。</p>
			<p>如果你想要在不支持动态链接<span>(</span>例如<span> SCO)</span>的系统中使用<span>Perl</span>模块，可以生成一个包括<span>DBI</span>和<span><span>DBD</span><span>：：<span>mysql</span></span></span>的静态版本的<span>Perl</span>。方法是生成一个用<span>DBI</span>代码连接的<span>Perl</span>版本，并将它安装到当前<span>Perl</span>的顶级目录。然后构建一个含<span>DBD</span>代码连接的<span>Perl</span>版本并安装。</p>
			<p>在<span>SCO</span>中，必须将下面的环境变量设置为：</p>
			<pre><span>LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib:/usr/progressive/lib</span></pre>
			<p><span>Or</span>：</p>
			<pre><span>LD_LIBRARY_PATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; /usr/progressive/lib:/usr/skunk/lib</span></pre>
			<pre><span>LIBPATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; /usr/progressive/lib:/usr/skunk/lib</span></pre>
			<pre><span>MANPATH=scohelp:/usr/man:/usr/local1/man:/usr/local/man:\</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; /usr/skunk/man:</span></pre>
			<p>首先，在<span>DBD</span>分发版的安装目录运行下述命令来创建一个包括静态连接的<span>DBD</span>模块的<span>Perl</span>：</p>
			<pre><span>shell&gt; </span><span><b><span>perl Makefile.PL -static -config</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make perl</span></b></span></pre>
			<p>然后必须安装新的<span>Perl</span>。<strong><span>make 
			perl</span></strong>的输出表示安装时需要执行的<strong><span>make</span></strong>命令。在<span>SCO</span>中，为<strong><span>make 
			-f Makefile.aperl inst_perl MAP_TARGET=perl</span></strong>。</p>
			<p>然后，使用刚刚创建的<span>Perl</span>，在<span><span>DBD</span><span>：：<span>mysql</span></span></span>分发版的安装目录运行下述命令来创建另一个<span>Perl</span>，应包括静态连接的<span><span>DBD</span><span>：：<span>mysql</span></span></span>：</p>
			<pre><span>shell&gt; </span><span><b><span>perl Makefile.PL -static -config</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make perl</span></b></span></pre>
			<p>最后，应当安装新的<span>Perl</span>。<strong><span>make 
			perl</span><span>的</span></strong>输出指示了使用的命令。</div></div></div><div><hr>
	<p>
	这是MySQL参考手册的翻译版本，关于MySQL参考手册，请访问<a target="_top"  href="http://dev.mysql.com/doc/mysql/en">dev.mysql.com.</a>。原始参考手册为英文版，与英文版参考手册相比，本翻译版可能不是最新的。</div>
</body></html>
