<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 5. Database Administration</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="prev" href="using-mysql-programs.html" title="Chapter 4. Using MySQL Programs"><link rel="next" href="replication.html" title="Chapter 6. Replication in MySQL">
</head><body><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="database-administration"></a>
	第5章：数据库管理</h2></div></div></div><div class="toc"><p><b>目录</b></p><dl><dt><span class="section"><a href="database-administration.html#server-side-scripts">
		5.1. MySQL服务器和服务器启动脚本</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#server-side-overview">
			5.1.1. 服务器端脚本和实用工具概述</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-max">
			5.1.2. mysq<span><strong class="command">ld-max扩展My</strong></span>SQL服务器</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-safe">
			5.1.3. mysqld_safe：MySQL服务器启动脚本</a></span></dt><dt><span class="section"><a href="database-administration.html#mysql-server">
			5.1.4. mysql.server：MySQL服务器启动脚本</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-multi">
			5.1.5. mysqld_multi：管理多个MySQL服务器的程序</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#instance-manager">
		5.2. mysqlmanager：MySQL实例管理器</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#instance-manager-startup-process">
			5.2.1. 用MySQL实例管理器启动MySQL服务器</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-security">
			5.2.2. 连接到MySQL实例管理器并创建用户账户</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-command-line-options">
			5.2.3. MySQL实例管理器命令行选项</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-configuration-files">
			5.2.4. MySQL实例管理器配置文件</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-commands">
			5.2.5. MySQL实例管理器识别的命令</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#mysqld">
		5.3. mysqld：MySQL服务器</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#server-options">5.3.1. <span><strong class="command">
			mysqld</strong></span>命令行选项</a></span></dt><dt><span class="section"><a href="database-administration.html#server-sql-mode">
			5.3.2. SQL服务器模式</a></span></dt><dt><span class="section"><a href="database-administration.html#server-system-variables">
			5.3.3. 服务器系统变量</a></span></dt><dt><span class="section"><a href="database-administration.html#server-status-variables">
			5.3.4. 服务器状态变量</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#mysql-fix-privilege-tables">
		5.4. mysql_fix_privilege_tables：升级MySQL系统表</a></span></dt><dt><span class="section"><a href="database-administration.html#server-shutdown">
		5.5. MySQL服务器关机进程</a></span></dt><dt><span class="section"><a href="database-administration.html#security">
		5.6. 一般安全问题</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#security-guidelines">
			5.6.1. 通用安全指南</a></span></dt><dt><span class="section"><a href="database-administration.html#security-against-attack">
			5.6.2. 使MySQL在攻击者面前保持安全</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges-options">
			5.6.3. Mysqld安全相关启动选项<span><strong class="command"></strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#load-data-local">
			5.6.4. LOAD DATA LOCAL安全问题<code class="literal"></code></a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#privilege-system">
		5.7. MySQL访问权限系统</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#what-privileges">
			5.7.1. 权限系统的作用</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges">
			5.7.2. 权限系统工作原理</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges-provided">
			5.7.3. MySQL提供的权限</a></span></dt><dt><span class="section"><a href="database-administration.html#connecting">
			5.7.4. 与MySQL服务器连接</a></span></dt><dt><span class="section"><a href="database-administration.html#connection-access">
			5.7.5. 访问控制, 阶段1：连接核实</a></span></dt><dt><span class="section"><a href="database-administration.html#request-access">
			5.7.6. 访问控制, 阶段2：请求核实</a></span></dt><dt><span class="section"><a href="database-administration.html#privilege-changes">
			5.7.7. 权限更改何时生效</a></span></dt><dt><span class="section"><a href="database-administration.html#access-denied">
			5.7.8. 拒绝访问错误的原因<code class="literal"></code></a></span></dt><dt><span class="section"><a href="database-administration.html#password-hashing">
			5.7.9. MySQL 4.1中的密码哈希处理</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#user-account-management">
		5.8. MySQL用户账户管理</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#user-names">
			5.8.1. MySQL用户名和密码</a></span></dt><dt><span class="section"><a href="database-administration.html#adding-users">
			5.8.2. 向MySQL增加新用户账户</a></span></dt><dt><span class="section"><a href="database-administration.html#removing-users">
			5.8.3. 从MySQL删除用户账户</a></span></dt><dt><span class="section"><a href="database-administration.html#user-resources">
			5.8.4. 限制账户资源</a></span></dt><dt><span class="section"><a href="database-administration.html#passwords">
			5.8.5. 设置账户密码</a></span></dt><dt><span class="section"><a href="database-administration.html#password-security">
			5.8.6. 使你的密码安全</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-connections">
			5.8.7. 使用安全连接</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#disaster-prevention">
		5.9. 备份与恢复</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#backup">
			5.9.1. 数据库备份</a></span></dt><dt><span class="section"><a href="database-administration.html#backup-strategy-example">
			5.9.2. 示例用备份与恢复策略</a></span></dt><dt><span class="section"><a href="database-administration.html#point-in-time-recovery">
			5.9.3. 自动恢复</a></span></dt><dt><span class="section"><a href="database-administration.html#table-maintenance">
			5.9.4. 表维护和崩溃恢复</a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk">
			5.9.5. myisamchk：MyISAM表维护实用工具</a></span></dt><dt><span class="section"><a href="database-administration.html#maintenance-schedule">
			5.9.6. 建立表维护计划</a></span></dt><dt><span class="section"><a href="database-administration.html#table-info">
			5.9.7. 获取关于表的信息</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#localisation">
		5.10. MySQL本地化和国际应用</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#character-sets">
			5.10.1. 数据和排序用字符集</a></span></dt><dt><span class="section"><a href="database-administration.html#languages">
			5.10.2. 设置错误消息语言</a></span></dt><dt><span class="section"><a href="database-administration.html#adding-character-set">
			5.10.3. 添加新的字符集</a></span></dt><dt><span class="section"><a href="database-administration.html#character-arrays">
			5.10.4. 字符定义数组</a></span></dt><dt><span class="section"><a href="database-administration.html#string-collating">
			5.10.5. 字符串比较支持</a></span></dt><dt><span class="section"><a href="database-administration.html#multi-byte-characters">
			5.10.6. 多字节字符支持</a></span></dt><dt><span class="section"><a href="database-administration.html#problems-with-character-sets">
			5.10.7. 字符集问题</a></span></dt><dt><span class="section"><a href="database-administration.html#time-zone-support">
			5.10.8. MySQL服务器时区支持</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#log-files">
		5.11. MySQL日志文件</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#error-log">
			5.11.1. 错误日志</a></span></dt><dt><span class="section"><a href="database-administration.html#query-log">
			5.11.2. 通用查询日志</a></span></dt><dt><span class="section"><a href="database-administration.html#binary-log">
			5.11.3. 二进制日志</a></span></dt><dt><span class="section"><a href="database-administration.html#slow-query-log">
			5.11.4. 慢速查询日志</a></span></dt><dt><span class="section"><a href="database-administration.html#log-file-maintenance">
			5.11.5. 日志文件维护</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#multiple-servers">
		5.12. 在同一台机器上运行多个MySQL服务器</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#multiple-windows-servers">
			5.12.1. 在Windows下运行多个服务器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-unix-servers">
			5.12.2. 在Unix中运行多个服务器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-server-clients">
			5.12.3. 在多服务器环境中使用客户端程序</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#query-cache">
		5.13. MySQL查询高速缓冲</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#query-cache-how">
			5.13.1. 查询高速缓冲如何工作</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-in-select">
			5.13.2. 查询高速缓冲SELECT选项</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-configuration">
			5.13.3. 查询高速缓冲配置</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-status-and-maintenance">
			5.13.4. 查询高速缓冲状态和维护</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div>
		<p>本章涵盖了<span>MySQL</span>安装管理主题，例如配置服务器、管理用户账户和备份。</p>
		<h2 class="title"><a name="server-side-scripts"></a>
		5.1.&nbsp;MySQL服务器和服务器启动脚本</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#server-side-overview">
			5.1.1. 服务器端脚本和实用工具概述</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-max">
			5.1.2. mysq<span><strong class="command">ld-max扩展My</strong></span>SQL服务器</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-safe">
			5.1.3. mysqld_safe：MySQL服务器启动脚本</a></span></dt><dt><span class="section"><a href="database-administration.html#mysql-server">
			5.1.4. mysql.server：MySQL服务器启动脚本</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-multi">
			5.1.5. mysqld_multi：管理多个MySQL服务器的程序</a></span></dt></dl></div>
		<p><span>MySQL</span>服务器，即<strong>mysqld</strong>，是在<span>MySQL</span>安装中负责大部分工作的主程序。服务器随附了几个相关脚本，当你安装<span>MySQL</span>时它们可以执行设置操作，或者是帮助你启动和停止服务器的帮助程序。</p>
		<p>本节提供了服务器和相关程序的概述，以及服务器启动脚本相关信息。关于配置服务器的信息参见<a href="database-administration.html#mysqld" title="5.3. mysqld — The MySQL Server">5.3节，“mysqld：MySQL服务器”</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="server-side-overview"></a>
			5.1.1.&nbsp;服务器端脚本和实用工具概述</h3></div></div></div><a class="indexterm" name="id2742599"></a>
			<p><span>MySQL</span>程序采用各种不同的选项。但每个<span>MySQL</span>程序提供一个<span>--help</span>选项<span>,</span>你可以用来查阅程序选项相关说明。例如，你可以试试<strong><span>mysqld 
			--help</span></strong>。</p>
			<p>你可以在命令行中或在选项文件中指定选项来替换所有标准程序中的默认选项。参见<a href="using-mysql-programs.html#program-options" title="4.3. Specifying Program Options">4.3节，“指定程序选项”</a>。</p>
			<p>下面简单描述了<span>MySQL</span>服务器和服务器相关程序：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>mysqld</span></strong></p>
			<p><span>SQL</span>后台程序<span>(</span>即<span>MySQL</span>服务器<span>)</span>。要想使用客户端程序，该程序必须运行，因为客户端通过连接服务器来访问数据库。参见<a href="database-administration.html#mysqld" title="5.3. mysqld — The MySQL Server">5.3节，“mysqld：MySQL服务器”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqld-max</span></p>
			<p>包括更多特性的一个服务器版本。参见<a href="database-administration.html#mysqld-max" title="5.1.2. The mysqld-max Extended MySQL Server">5.1.2节，“mysq<span><strong class="command">ld-max扩展My</strong></span>SQL服务器”</a></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqld_safe</span></p>
			<p>服务器启动脚本。如果<strong><span>mysqld-max</span></strong>存在<span>,<strong><span>mysqld_safe</span></strong></span>试图启动它，否则启动<strong><span>mysqld</span></strong>。参见<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysql.server</span></p>
			<p>
			服务器启动脚本。该脚本用于使用包含为特定级别的运行启动服务的脚本的运行目录的系统。它调用<strong><span>mysqld_safe</span></strong>来启动<span>MySQL</span>服务器。参见<a href="database-administration.html#mysql-server" title="5.1.4. mysql.server — MySQL Server Startup Script">5.1.4节，“mysql.server：MySQL服务器启动脚本”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqld_multi</span></p>
			<p>服务器启动脚本，可以启动或停止系统上安装的多个服务器。参见<a href="database-administration.html#mysqld-multi" title="5.1.5. mysqld_multi — Program for Managing Multiple MySQL Servers">5.1.5节，“mysqld_multi：管理多个MySQL服务器的程序”</a></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysql_install_db</span></p>
			<p>该脚本用默认权限创建<span>MySQL</span>授权表。通常只是在系统上首次安装<span>MySQL</span>时执行一次。参见<a href="installing.html#unix-post-installation" title="2.9.2. Unix Post-Installation Procedures">2.9.2节，“Unix下安装后的过程”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			mysql_fix_</span></strong><span class="MsoHyperlink"><span>
			</span></span><strong><span>
			privilege_tables</span></strong></p>
			<p>在升级安装后，如果新版本<span>MySQL</span>中的
			授权表有更改，则使用该脚本来更改授权表。参见<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2节，“升级授权表”</a>。</p>
			<p>服务器主机上还运行其它几个程序：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>myisamchk</span></p>
			<p>用来描述、检查、优化和维护<span>MyISAM</span>表的实用工具。在<a href="database-administration.html#myisamchk" title="5.9.5. myisamchk — MyISAM Table-Maintenance Utility">5.9.5节，“myisamchk：MyISAM表维护实用工具”</a>中描述了<strong><span>myisamchk</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>make_binary_distribution</span></p>
			<p>该程序可以生成编译过的<span>MySQL</span>的二进制版本。可以通过<span>FTP</span>上传到<span>ftp.mysql.com</span>的<span>/pub/mysql/upload/</span>，供其它<span>MySQL</span>用户使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqlbug</span></p>
			<p><span>MySQL </span>
			缺陷报告脚本。它可以用来向<span>MySQL</span>邮件系统发送缺陷报告。<span>(</span>你也可以访问<span><a target="_top"  href="http://bugs.mysql.com/">http://bugs.mysql.com/</a></span>在线创建缺陷报告文件。参见<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3节，“如何通报缺陷和问题”</a>）<span>。 </span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysqld-max"></a>
			5.1.2.&nbsp;mysq<span><strong class="command">ld-max扩展My</strong></span>SQL服务器</h3></div></div></div><a class="indexterm" name="id2742998"></a>
			<p><span>MySQL-Max</span>服务器是<strong><span>mysqld</span></strong><span> 
			MySQL</span>服务器的一个版本，包含了更多的特性。</p>
			<p>该分发版的使用取决于你的平台：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对于<span>Windows</span>，<span>MySQL</span>二进制分发版包括标准服务器<span> 
			(</span><span>mysqld.exe</span><span>)</span>和<span>MySQL-Max</span>服务器<span>(<strong><span>mysqld-max.exe</span></strong>)</span>，因此你不再需要专用分发版。只需要使用一个常规<span>Windows</span>分发版，可以从<span><a target="_top"  href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a></span>获得。参见<a href="installing.html#windows-installation" title="2.3. Installing MySQL on Windows">2.3节，“在Windows上安装MySQL”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对于<span>Linux</span>，如果你使用<span>RPM</span>分发版安装<span>MySQL</span>，首先使用常规<span>MySQL-server</span><span> 
			RPM</span>来安装标准<strong><span>mysqld</span></strong>服务器。然后使用<span>MySQL-Max</span><span> 
			RPM</span>来安装<strong><span>mysqld-max</span></strong>服务器。<span>MySQL-Max</span><span> 
			RPM</span>假定你已经安装了常规服务器<span>RPM</span>。关于<span>Linux 
			RPM</span>软件包的详细信息，参见<a href="installing.html#linux-rpm" title="2.4. Installing MySQL on Linux">2.4节，“在Linux下安装MySQL”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>所有其它<span>MySQL-Max</span>分发版包含一个<strong><span>mysqld</span></strong>服务器，但具有更多的特性。</p>
			<p>你可以从<span>MySQL AB</span>网址<span><a target="_top"  href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a></span>找到<span>MySQL-Max</span>二进制版本。</p>
			<p><span>MySQL AB</span>使用下面的<strong>configure</strong>选项构建<span>MySQL-Max</span>服务器：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-server-suffix=-max</span></p>
			<p>该选项为<strong><span>mysqld</span></strong>版本字符串添加一个<span>-max</span>后缀。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-innodb</span></p>
			<p>该选项启用<span>InnoDB</span>存储引擎支持。<span>MySQL-Max</span>服务器包括<span>InnoDB</span>支持。在<span>MySQL 
			4.0</span>及以上版本中，默认<span>InnoDB</span>包括在所有二进制分发版中，因此你不需要用<span>MySQL-Max</span>服务器只是用来获取<span>InnoDB</span>支持。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-bdb</span></p>
			<p>该选项启用<span>Berkeley DB (BDB)</span>存储引擎支持。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-blackhole-storage-engine</span></p>
			<p>该选项启用<span>BLACKHOLE</span>存储引擎支持。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>USE_SYMDIR</span></p>
			<p>启用该定义来为<span>Windows</span>打开数据库符号链接支持。符号链接支持适用于所有<span>Windows</span>服务器，因此<span>Max</span>服务器不需要支持该特性。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-ndbcluster</span></p>
			<p>该选项启用<span>NDB Cluster</span>存储引擎支持。目前<span>(5.1.2-alpha)</span>只有<span>Linux</span>、<span>Solaris</span>和<span>Mac 
			OS X</span>支持<span>Cluster</span>。已有一些用户报告在<span>BSD
			</span>操作系统上成功使用了从源码构建的<span>MySQL Cluster</span>，但目前还没有得到官方支持。</p>
			<p><span>MySQL-Max</span>二进制分发版对于想要安装预编译程序的用户很方便。如果你使用源码分发版构建<span>MySQL</span>，你可以通过在配置时启用<span>MySQL-Max</span>二进制分发版构建所用的相同的特性来构建你自己的<span>Max-like</span>服务器。</p>
			<p><span>MySQL-Max</span>服务器包括<span>BerkeleyDB (BDB)</span>存储引擎，但并非所有平台支持<span>BDB</span>。</p>
			<p><span>Solaris</span>、<span>Mac OS X</span>和<span>Linux(</span>在大多数平台上<span>)</span>的<span>MySQL-Max</span>服务器包括<span>NDB 
			CLUSTER</span>存储引擎支持。请注意必须用<span>ndbcluster</span>选项启动服务器，以便使服务器做为<span>MySQL 
			Cluster</span>的一部分来运行。<span>(</span>详细信息参见<a href="ndbcluster.html#mysql-cluster-configuration" title="17.4. MySQL Cluster Configuration">17.4节，“MySQL簇的配置”</a>）<span>。 </span></p>
			<p>下面的表显示了<span>MySQL-Max</span>二进制在哪个平台上包括<span>BDB</span>和<span>/</span>或<span>NDB 
			CLUSTER</span>支持：</p>
			<table border="1" cellpadding="0" id="table1">
				<tr>
					<td>
					<p><strong><span>系统</span></strong></td>
					<td>
					<p><strong>
					<span>BDB</span><span>支持</span></strong></td>
					<td>
					<p><strong>
					<span>NDB</span><span>支持</span></strong></td>
				</tr>
				<tr>
					<td>
					<p><span>AIX 4.3</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>HP-UX 11.0</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Linux-Alpha</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>Y</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Linux-IA-64</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Linux-Intel</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>Y</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Mac OS X</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>NetWare</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>SCO OSR5</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Solaris-SPARC</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>Y</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Solaris-Intel</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>Y</span></td>
				</tr>
				<tr>
					<td>
					<p><span>UnixWare</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Windows NT/2000/XP</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
			</table>
			<p>要想找出你的服务器支持哪个存储引擎，执行下面的语句：</p>
			<pre><span>mysql&gt; </span><span><b><span>SHOW ENGINES;</span></b></span></pre>
			<pre><span>+------------+---------+----------------------------------------------------------------+</span></pre>
			<pre><span>| Engine&nbsp;&nbsp;&nbsp;&nbsp; | Support | Comment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+------------+---------+----------------------------------------------------------------+</span></pre>
			<pre><span>| MyISAM&nbsp;&nbsp;&nbsp;&nbsp; | DEFAULT | Default engine as of MySQL 3.23 with great performance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| MEMORY&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Hash based, stored in memory, useful for temporary tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| HEAP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Alias for MEMORY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>| MERGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Collection of identical MyISAM tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| MRG_MYISAM | YES&nbsp;&nbsp;&nbsp;&nbsp; | Alias for MERGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| ISAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Obsolete storage engine, now replaced by MyISAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| MRG_ISAM&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Obsolete storage engine, now replaced by MERGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| InnoDB&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Supports transactions, row-level locking, and foreign keys&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| INNOBASE&nbsp;&nbsp; | YES&nbsp; &nbsp;&nbsp;&nbsp;| Alias for INNODB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| BDB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Supports transactions and page-level locking&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| BERKELEYDB | YES&nbsp;&nbsp;&nbsp;&nbsp; | Alias for BDB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| NDBCLUSTER | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Clustered, fault-tolerant, memory-based tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| NDB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Alias for NDBCLUSTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| EXAMPLE&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Example storage engine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>| ARCHIVE&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Archive storage engine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| CSV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | CSV storage engine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| FEDERATED&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Federated MySQL storage engine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>| BLACKHOLE&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | /dev/null storage engine (anything you write to it disappears) |</span></pre>
			<pre><span>+------------+---------+----------------------------------------------------------------+</span></pre>
			<pre><span>18 rows in set (0.00 sec)</span></pre>
			<p><span>(</span>另参见<a href="sql-syntax.html#show-engines" title="13.5.4.8. SHOW ENGINES Syntax">13.5.4.8节，“SHOW 
		ENGINES语法”</a>）<span>。 </span></p>
			<p>你还可以使用下面的语句代替<span>SHOW 
			ENGINES</span>，并检查你感兴趣的存储引擎的变量值：</p>
			<pre><span>mysql&gt; </span><span><b><span>SHOW VARIABLES LIKE &#39;have%&#39;;</span></b></span></pre>
			<pre><span>+-----------------------+----------+</span></pre>
			<pre><span>| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------------------+----------+</span></pre>
			<pre><span>| have_archive&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_bdb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_blackhole_engine | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_compress&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_crypt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_csv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_example_engine&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_federated_engine | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_geometry&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_innodb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_isam&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_ndbcluster&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | DISABLED |</span></pre>
			<pre><span>| have_openssl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;|</span></pre>
			<pre><span>| have_partition_engine | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_query_cache&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_raid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_rtree_keys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_symlink&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------------------+----------+</span></pre>
			<pre><span>18 rows in set (0.01 sec)</span></pre>
			<p>
			<span>SHOW</span>命令的精确输出随使用的<span>MySQL</span>版本<span>(</span>和启用的特性<span>)</span>的不同而有变化。第<span>2</span>列的值表示各特性支持的服务器级别，如下所示：</p>
			<table border="1" cellpadding="0" id="table2">
				<tr>
					<td>
					<p><strong><span>值</span></strong></td>
					<td>
					<p><strong><span>含义</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>YES</span></td>
					<td>
					<p><span>&nbsp;</span>支持该特性并已经激活。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>NO</span></td>
					<td>
					<p><span>&nbsp;</span>不支持该特性。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>DISABLED</span></td>
					<td>
					<p><span>&nbsp;</span>支持该特性但被禁用。</td>
				</tr>
			</table>
			<p>
			<span>NO</span>值表示编译的服务器不支持该特性，因此在运行时不能激活。</p>
			<p>出现<span>DISABLED</span>值是因为服务器启动时该特性被禁用，或没有给出启用它的所有选项。在后一种情况，<span><i><span>host_</span><span>名<span>.err</span></span></i></span>错误日志文件应包含该选项被禁用的原因。</p>
			<p>如果服务器支持<span>InnoDB</span>或<span>BDB</span>存储引擎，你还可以看见<span>DISABLED</span>，但在运行启动时使用了<span>--skip-innodb</span>或<span>--skip-bdb</span>选项。对于<span>NDB 
			CLUSTER</span>存储引擎，<span>DISABLED</span>表示服务器支持<span>MySQL 
			Cluster</span>，但启动时未启用<span>--ndb-cluster</span>选项。</p>
			<p>所有<span>MySQL</span>服务器支持<span>MyISAM</span>表，因为<span>MyISAM</span>是
			默认存储引擎。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysqld-safe"></a>
			5.1.3.&nbsp;mysqld_safe：MySQL服务器启动脚本</h3></div></div></div>
			<p>在<span>Unix</span>和<span>NetWare</span>中推荐使用<strong><span>mysqld_safe</span></strong>来启动<strong><span>mysqld</span><span>服务器</span></strong>。<strong><span>mysqld_safe</span></strong>增加了一些安全特性，例如当出现错误时重启服务器并向错误日志文件写入运行时间信息。本节后面列出了<span>NetWare</span>的特定行为。</p>
			<p><strong><span>注</span></strong>释：为了保持同旧版本<span>MySQL</span>的向后兼容性，<span>MySQL</span>二进制分发版仍然包括<strong><span>safe_mysqld</span></strong>作为<strong><span>mysqld_safe</span></strong>的符号链接。但是，你不应再依赖它，因为再将来将删掉它。</p>
			<p>默认情况下，<strong>mysqld_safe</strong>尝试启动可执行<strong>mysqld-max</strong>（如果存在），否则启动<strong><span>mysqld</span></strong>。该行为的含义是：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Linux</span>中，<span>MySQL-Max</span><span> 
			RPM</span>依赖该<strong><span>mysqld_safe</span></strong>的行为。<span>RPM</span>安装可执行<strong><span>mysqld-max</span></strong>，使<strong><span>mysqld_safe</span></strong>从该点起自动使用可执行命令。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你安装包括<strong><span>mysqld-max</span></strong>服务器的<span>MySQL-Max</span>分发版，后面升级到非<span>-Max</span>的<span>MySQL</span>版本，<strong><span>mysqld_safe</span></strong>仍然试图运行旧的 
			<strong><span>mysqld-max</span><span>服务器</span></strong>。升级时，你应手动删除旧的<strong><span>mysqld-max</span><span>服务器</span></strong>以确保<strong><span>mysqld_safe</span></strong>运行新的<strong><span>mysqld</span><span>服务器</span></strong>。</p>
			<p>要想越过默认行为并显式指定你想要运行哪个服务器，为<strong><span>mysqld_safe</span></strong>指定<span>--mysqld</span>或<span>--mysqld-version</span>选项。</p>
			<p><strong><span>mysqld_safe</span></strong>的许多选项与<strong>mysqld</strong>的相同的。参见<a href="database-administration.html#server-options" title="5.3.1. mysqld Command-Line Options">5.3.1节，“<span><strong class="command">mysqld</strong></span>命令行选项”</a>。</p>
			<p>所有在命令行中为<strong>mysqld_safe</strong>指定的选项被传递给<strong>mysqld<span>。</span></strong>如果你想要使用<strong><span>mysqld</span></strong>不支持的<strong><span>mysqld_safe</span><span>的</span></strong>选项，不要在命令行中指定。相反，在选项文件的<span>[mysqld_safe]</span>组内将它们列出来。参见<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>。</p>
			<p><strong><span>mysqld_safe</span></strong>从选项文件的<span>[mysqld]</span>、<span>[server]</span>和<span>[mysqld_safe]</span>部分读取所有选项。为了保证向后兼容性，它还读取 
			<span>[safe_mysqld]</span>部分，尽管在<span>MySQL 
			5.1</span>安装中你应将这部分重新命名为<span>[mysqld_safe]</span>。</p>
			<p><strong><span>mysqld_safe</span></strong>支持下面的选项：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--help</span></p>
			<p>显示帮助消息并退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--autoclose</span></p>
			<p><span>(</span>只在<span>NetWare</span>中<span>)</span>在<span>NetWare</span>中，<strong><span>mysqld_safe</span></strong>可以保持窗口。当你关掉<strong><span>mysqld_safe</span></strong><span> 
			NLM</span>时，窗口不按默认设置消失。相反，它提示用户输入：</p>
			<pre ><span>*&lt;NLM has terminated; Press any key to close the screen&gt;*</span></pre>
			<p>如果你想让<span>NetWare</span>自动关闭窗口，在<strong><span>mysqld_safe</span></strong>中使用<span>--autoclose</span>选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--basedir=<i>path</i></span></p>
			<p><span>MySQL</span>安装目录的路径。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--core-file-size=<i>size</i></span></p>
			<p><strong>
			<span>mysqld</span></strong>能够创建的内核文件的大小。选项值传递给<strong><span>ulimit 
			-c</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--datadir=<i>path</i></span></p>
			<p>数据目录的路径。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span>
			<span>--defaults-extra-file=<i>path</i></span></p>
			<p>除了通用选项文件所读取的选项文件名。如果给出，必须首选该选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--defaults-file=<i>path</i></span></p>
			<p>读取的代替通用选项文件的选项文件名。如果给出，必须首选该选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--ledir=<i>path</i></span></p>
			<p>包含<strong><span>mysqld</span></strong>程序的目录的路径。使用该选项来显式表示服务器位置。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-error=<i>path</i></span></p>
			<p>将错误日志写入给定的文件。参见<a href="database-administration.html#error-log" title="5.11.1. The Error Log">5.11.1节，“错误日志”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>--mysqld=<i>prog_</i></span><i><span>name</span></i></span></p>
			<p>想要启动的服务器程序名<span>(</span>在<span>ledir</span>目录<span>)</span>。如果你使用<span>MySQL</span>二进制分发版但有二进制分发版之外的数据目录需要该选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--mysqld-version =<i>suffix</i></span></p>
			<p>该选项类似<span>--mysqld</span>选项，但你只指定服务器程序名的后缀。基本名假定为<strong><span>mysqld</span><span>。</span></strong>例如，如果你使用<span>--mysqld-version 
			=max</span>，<strong><span>mysqld_safe</span></strong>启动<span>ledir</span>目录中的<strong><span>mysqld-max</span></strong>程序。如果<span>--mysqld-version</span>的参数为空，<strong>mysqld_safe</strong>使用目录中的<strong>mysqld</strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>--nice=</span><i><span>priority</span></i></span></p>
			<p>使用<span>nice</span>程序根据给定值来设置服务器的调度优先级。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--no-defaults</span></p>
			<p>不要读任何选项文件。如果给出，必须首选该选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--open-files-limit=<i>count</i></span></p>
			<p><strong>
			<span>mysqld</span></strong>能够打开的文件的数量。选项值传递给 
			<strong><span>ulimit -n</span></strong>。请注意你需要用<span>root</span>启动<strong><span>mysqld_safe</span></strong>来保证正确工作！</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--pid-file=path</span></p>
			<p>进程<span>ID</span>文件的路径。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--port=<i>port_num</i></span></p>
			<p><span>&nbsp;</span>用来帧听<span>TCP/IP</span>连接的端口号。端口号必须为<span>1024</span>或更大值，除非<span>MySQL</span>以<span>root</span>系统用户运行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			--skip-character-set-client-handshake</span></p>
			<p>忽略客户端发送的字符集信息，使用服务器的默认字符集。<span>(</span>选择该选项，<span>MySQL</span>的动作与<span>MySQL 
			4.0</span>相同）<span>。 </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--socket=path</span></p>
			<p>用于本地连接的<span>Unix</span>套接字文件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--timezone=<i>zone</i></span></p>
			<p>为给定的选项值设置<span>TZ</span>时区环境变量。从操作系统文档查阅合法的时区规定格式。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--user={<i>user_name</i> |
			<i>user_id</i>}</span></p>
			<p>以用户名<span><i><span>user_name</span></i></span>或数字用户<span>ID</span><span><i><span> 
			user_id</span></i></span>运行<strong><span>mysqld</span><span>服务器</span></strong>。<span>(</span>本文中的“<span class="quote">用户</span>”指系统登录账户，而不是
			授权表中的<span>MySQL</span>用户）<span>。
			</span></p>
			<p>执行<strong><span>mysqld_safe</span></strong>时，必须先给出<span>--defaults-file</span>或<span>--defaults-extra-option</span>，或不使用选项文件。例如，该命令将不使用选项文件：</p>
			<pre><span>mysqld_safe --port=</span><span><i><span>port_num</span></i></span><span> --defaults-file=</span><span><i><span>file_name</span></i></span></pre>
			<p>相反，使用下面的命令：</p>
			<pre><span>mysqld_safe --defaults-file=</span><span><i><span>file_name</span></i></span><span> --port=</span><span><i><span>port_num</span></i></span></pre>
			<p>一般情况<strong><span>mysqld_safe</span></strong>脚本可以启动从源码或二进制<span>MySQL</span>分发版安装的服务器，即使这些分发版将服务器安装到稍微不同的位置。<span>(</span>参见<a href="installing.html#installation-layouts" title="2.1.5. Installation Layouts">2.1.5节，“安装布局”</a>）<span>。 <strong><span>
			mysqld_safe</span></strong></span>期望下面的其中一个条件是真的：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以根据调用<strong><span>mysqld_safe</span></strong>的目录找到服务器和数据库。在二进制分发版中，<strong><span>mysqld_safe</span></strong>看上去在<span>bin</span>和<span>data</span>目录的工作目录下。对于源码分发版，为<span>libexec</span>和<span>var</span>目录。如果你从<span>MySQL</span>安装目录执行<strong><span>mysqld_safe</span></strong>应满足该条件<span>(</span>例如，二进制分发版为<span>/usr/local/mysql</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果不能根据工作目录找到服务器和数据库，<strong><span>mysqld_safe</span></strong>试图通过绝对路径对它们定位。典型位置为<span>/usr/local/libexec</span>和<span>/usr/local/var</span>。实际位置由构建分发版时配置的值确定如果<span>MySQL</span>安装到配置时指定的位置，它们应该是正确的。</p>
			<p>因为<strong><span>mysqld_safe</span></strong>试图通过工作目录找到服务器和数据库，只要你从<span>MySQL</span>安装目录运行<strong><span>mysqld_safe</span></strong><b>，</b>可以将<span>MySQL</span>二进制分发版安装到其它位置：</p>
			<pre><span>shell&gt; </span><span><b><span>cd mysql_installation_directory</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>bin/mysqld_safe &amp;</span></b></span></pre>
			<p>如果<strong><span>mysqld_safe</span></strong>失败，即使从<span>MySQL</span>安装目录调用仍然失败，你可以指定<span>--ledir</span>和<span>--datadir</span>选项来指示服务器和数据库在你的系统中的安装目录。</p>
			<p>一般情况，你不应编辑<strong><span>mysqld_safe</span></strong>脚本。相反，应使用命令行选项或<span>my.cnf</span>选项文件的<span>[mysqld_safe]</span>部分的选项来配置<strong><span>mysqld_safe</span></strong>。一般不需要编辑<strong><span>mysqld_safe</span></strong>来正确启动服务器。但是，如果你编辑，将来升级<span>MySQL</span>后会覆盖你修改的<strong><span>mysqld_safe</span></strong>版本，因此你应对你修改的版本进行备份以便将来重装。</p>
			<p>在<span>NetWare</span>中，<strong><span>mysqld_safe</span></strong>是一个<span>NetWare 
			Loadable Module (NLM)</span>，从原<span>Unix shell</span>脚本移植。它执行：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>检查系统和选项。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>检查<span>MyISAM</span>表。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>保持<span>MySQL</span>服务器窗口。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>启动并监视<strong><span>mysqld</span></strong>，如果因错误终止则重启。</p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span><strong>
			<span>将</span><span>mysqld</span><span>的</span></strong>错误消息发送到数据目录中的<span><i><span>host_name.err
			</span></i></span>文件。</p>
			<p>
			<span>6.<span>&nbsp;&nbsp;&nbsp;
			</span></span>将<strong><span>mysqld_safe</span></strong>的屏幕输出发送到数据目录中的<span><i><span>host_name.safe</span></i></span>文件。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-server"></a>
			5.1.4.&nbsp;mysql.server：MySQL服务器启动脚本</h3></div></div></div>
			<p>在<span>Unix</span>中的<span>MySQL</span>分发版包括<strong><span>mysql.server</span></strong>脚本。它可以用于使用<span>System 
			V-style</span>运行目录来启动和停止系统服务的系统，例如<span>Linux</span>和<span>Solaris</span>。它还用于<span>MySQL</span>的<span>Mac 
			OS X Startup Item</span>。</p>
			<p><strong><span>mysql.server</span></strong>位于<span>MySQL</span>源码树<span>MySQL</span>安装目录下的<span>support-files</span>目录中。</p>
			<p>如果你使用<span>Linux </span>服务器<span>RPM</span>软件包<span>(</span><span>MySQL-server-VERSION.rpm</span><span>)</span>，<strong><span>mysql.server</span></strong>脚本将安装到<span>/etc/init.d</span>目录下，名为<span>mysql</span>。你不需要 
			手动安装。关于<span>Linux RPM</span>软件包的详细信息参见<a href="installing.html#linux-rpm" title="2.4. Installing MySQL on Linux">2.4节，“在Linux下安装MySQL”</a>。</p>
			<p>一些卖方提供的<span>RPM</span>软件包安装的启动脚本用其它名，例如<strong><span>mysqld</span><span>。</span></strong></p>
			<p>如果你从不自动安装<strong><span>mysql.server</span></strong>的源码分发版或二进制分发版格式安装<span>MySQL</span>，也可以手动安装。相关说明参见<a href="installing.html#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2节，“自动启动和停止MySQL”</a>。</p>
			<p><strong>
			<span>mysql.server</span></strong>从 
			<span>[mysql.server]</span>和选项文件的<span>[mysqld]</span>部分读取选项。<span>(</span>为了保证向后兼容性，它还读取 
			<span>[safe_mysqld]</span>部分，尽管在<span>MySQL 
			5.1</span>安装中你应将这部分重新命名为<span>[mysqld_safe]</span>）<span>。</span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysqld-multi"></a>
			5.1.5.&nbsp;mysqld_multi：管理多个MySQL服务器的程序</h3></div></div></div>
			<p><strong><span>mysqld_multi</span></strong>可以管理多个帧听不同<span>Unix</span>套接字文件和<span>TCP/IP</span>端口的连接的<strong><span>mysqld</span></strong><span>
			</span>进程。它可以启动或停止服务器，或报告它们的当前状态。</p>
			<p>程序寻找<span>my.cnf</span>中的<span>[mysqld<i>N</i>]</span>组<span>(</span>或<span>--config-file</span>选项指定的文件<span>)</span>。<span><i><span>N</span></i></span><span>
			</span>可以为任何正整数。在下面的讨论中该数字指选项组号，或<span><i><span>GNR</span></i></span>。组号区别各选项组，并用作<strong><span>mysqld_multi</span></strong>的参数来指定想要启动、停止哪个服务器或获取哪个服务器的状态报告。这些组中的选项与将用来启动<strong><span>mysqld</span></strong>的<span>[mysqld]</span>组中的相同。<span>(</span>例如，参见<a href="installing.html#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2节，“自动启动和停止MySQL”</a>）<span>。</span>但是，当使用多个服务器时，需要每个服务器使用自己的选项值，例如<span>Unix</span>套接字文件和<span>TCP/IP</span>端口号。关于在多服务器环境中，每个服务器对应唯一选项的详细信息，参见<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12节，“在同一台机器上运行多个MySQL服务器”</a>。</p>
			<p>要想调用<strong><span>mysqld_multi</span></strong>，使用下面的语法：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_multi [<i>options</i>] {start|stop|report} [<i>GNR</i>[,<i>GNR</i>] ...]</span></b></span></pre>
			<p>
			<span>start</span>、<span>stop</span>和<span>report</span>表示你想要执行的操作。你可以在单个服务器或多个服务器上执行指定的操作，取决于选项名后面的<span><i><span>GNR</span></i></span><span>
			</span>列。如果没有该列，<strong><span>mysqld_multi</span></strong>为选项文件中的所有服务器执行该操作。</p>
			<p>每个<span><i><span>GNR</span></i></span>值代表一个选项组号或组号范围。<span><i><span>GNR</span></i></span>值应为选项文件中组名末尾的号。例如，组<span>[mysqld17]</span>的<span><i><span>GNR</span></i></span>为<span>17</span>。要想指定组号的范围，用破折号间隔开第<span>1</span>个和最后<span>1</span>个号。<span><i><span>GNR</span></i></span>值<span>10-13</span>代表组<span>[mysqld10]</span>到<span>[mysqld13]</span>。可以在命令行中指定多个组或组范围，用逗号间隔开。<span><i><span>GNR</span></i></span>列不能有空格字符<span>(</span>空格或<span>tab)</span>；空格字符后面的内容将被忽略掉。</p>
			<p>该命令使用选项组<span>[mysqld17]</span>启动单个服务器：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_multi start 17</span></b></span></pre>
			<p>该命令停止多个服务器，使用选项组<span>[mysql8]</span>和<span>[mysqld10]</span>至<span>[mysqld13]</span>：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_multi stop 8,10-13</span></b></span></pre>
			<p>使用该命令列出设置选项文件的示例：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_multi --example</span></b></span></pre>
			<p><strong><span>mysqld_multi</span></strong>支持下面的选项：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--config-file=<i>name</i></span></p>
			<p>指定选项文件名。这关系到<strong><span>mysqld_multi</span></strong>从哪里寻找<span>[mysqld<i>N</i>]</span>选项组。没有该选项，从通用<span>my.cnf</span>文件读所有选项。选项不影响 
			<strong><span>mysqld_multi</span></strong>从哪里读取自己的选项，总是从通用<span>my.cnf</span>文件的<span>[mysqld_multi]</span>组读取。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--example</span></p>
			<p>显示示例选项文件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--help</span></p>
			<p>显示帮助消息并退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log=<i>name</i></span></p>
			<p>指定日志文件名。如果该文件存在，后面为日志输出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--mysqladmin=<i>prog_name</i></span></p>
			<p>用来停止服务器的<strong><span>mysqladmin</span></strong>二进制。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--mysqld=<i>prog_name</i></span></p>
			<p>可用的<strong><span>mysqld</span></strong>二进制。请注意你还可以将该选项的值指定为<strong><span>mysqld_safe</span></strong>。选项被传递给 
			<strong><span>mysqld</span><span>。</span></strong>确保在<span>PATH</span>环境变量设定值或<strong><span>mysqld_safe</span></strong>中有<strong><span>mysqld</span></strong>所在目录。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--no-log</span></p>
			<p>按照标准输出打印日志信息，不要写入日志文件。默认情况下，输出写入日志文件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--password=<i>password</i></span></p>
			<p>调用<strong><span>mysqladmin</span></strong>时使用的<span>MySQL</span>账户的密码。请注意该密码值不是可选项，不象其它<span>MySQL</span>程序。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--silent</span><span>
			</span></p>
			<p>禁用警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--tcp-ip</span></p>
			<p>通过<span>TCP/IP</span>端口而不是<span>Unix</span>套接字文件来连接每个<span>MySQL</span>服务器。<span>(</span>如果找不到套接字文件， 
			服务器仍然可以运行，但只能通过<span> TCP/IP</span>端口访问）<span>。</span>默认情况下，使用<span>Unix</span>套接字文件进行连接。该选项影响<span>stop</span>和<span>report</span>操作。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--user=<i>user_name</i></span></p>
			<p>调用<strong><span>mysqladmin</span></strong>时使用的<span>MySQL</span>账户的用户名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--verbose</span><span>
			</span></p>
			<p>更详细。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--version</span></p>
			<p>显示版本信息并退出。</p>
			<p>关于<strong><span>mysqld_multi</span></strong>的一些注解：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>确保停止<strong><span>mysqld</span><span>服务器</span></strong><span>(</span>用<strong><span>mysqladmin</span></strong>程序<span>)</span>的<span>MySQL</span>账户在各个服务器中的用户名和密码相同。并且应确保账户具有<span>SHUTDOWN</span>权限。如果你想要管理的服务器的管理账户有许多不同的用户名或密码，你需要在每个服务器上创建一个账户，并具有相同的用户名和密码。例如，你可以执行下面的命令为每个服务器设置一个普通<span>multi_admin</span>账户：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u root -S /tmp/mysql.sock -p<i>root_password</i></span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT SHUTDOWN ON *.*</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>TO &#39;multi_admin&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;multipass&#39;</span><span>；</span></b></span></pre>
			<p>参见<a href="database-administration.html#privileges" title="5.7.2. How the Privilege System Works">5.7.2节，“权限系统工作原理”</a>。你必须为每个<strong><span>mysqld</span><span>服务器执行该操作</span></strong>。当连接时适当更改连接参数。请注意账户名的主机部分必须允许你用<span>multi_admin</span>从你想要运行<strong><span>mysqld_multi</span></strong>的主机进行连接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你使用<strong><span>mysqld_safe</span></strong>来启动<strong><span>mysqld</span></strong><span>(</span>例如，<span>--mysqld=mysqld_safe</span><span>)</span>，<span>--pid-file</span>选项很重要。每个<strong><span>mysqld</span></strong>应有自己的进程<span>ID</span>文件。使用<strong><span>mysqld_safe</span></strong>而不使用<strong><span>mysqld</span></strong>的好处是<strong><span>mysqld_safe</span></strong>“<span class="quote">守护</span>”其<strong><span>mysqld</span></strong>进程，如果用<span><span>kill
			</span>
			<span>
			–</span><span>9</span></span>发送的信号或由于其它原因（例如分段故障）进程终止，则重启进程。请注意<strong><span>mysqld_safe</span></strong>脚本需要你从某个位置启动它。这说明运行<strong><span>mysqld_multi</span></strong>前你必须进入某个目录。如果启动时有问题，请参见<strong><span>mysqld_safe</span></strong>脚本。特别是要检查下列行：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>----------------------------------------------------------------</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>MY_PWD=`pwd`</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span># Check if we are starting this relative (for the binary release)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>if test -d $MY_PWD/data/mysql -a -f ./share/mysql/english/errmsg.sys -a \</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>-x ./bin/mysqld</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>----------------------------------------------------------------</span></pre>
			<p>参见<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a>。上述行执行的测试应成功，否则你可能遇到了问题。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>每个<strong><span>mysqld</span></strong>的<span>Unix</span>套接字文件和<span>TCP/IP</span>端口号必须不同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>你可能想要为<strong><span>mysqld</span></strong>使用<span>--user</span>选项，但为此你需要用<span>Unix
			</span>
			<span>root</span>用户运行<strong><span>mysqld_multi</span></strong>脚本。选项文件中有选项不要紧；如果你不是超级用户，并且你用自己的<span>Unix</span>账户重启<strong><span>mysqld</span></strong>进程，你只会得到警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>重要</span></strong>：确保<strong><span>mysqld</span></strong>进程启动所用<span>Unix</span>账户可以完全访问数据目录。<em><span>不要</span></em>使用<span>Unix 
			root</span>账户，除非你<em><span>知道</span></em>你在做什么。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>非常重要</span></strong>：使用<strong><span>mysqld_multi</span></strong>前，确保理解传递给<strong><span>mysqld</span><span>服务器的</span></strong>选项的含义以及你<i>为什么</i>想要独立的<strong><span>mysqld</span></strong>进程。应清楚 
			在相同的数据目录下使用多个<strong><span>mysqld</span><span>服务器</span></strong>的危险。使用单独的数据目录，除非你<em><span>知道</span></em>你在做什么。在线程系统中，在相同的数据目录下启动多个服务器不会得到超性能。参见<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12节，“在同一台机器上运行多个MySQL服务器”</a>。</p>
			<p>下面的示例显示了你如何设置选项文件来使用<strong><span>mysqld_multi</span></strong>。专门省去第<span>1</span>个和第<span>5</span>个<span>[mysqld<i>N</i>]</span>组来说明你的选项文件可以稍有不同。这样给你更大的灵活性。<strong><span>mysqld</span></strong>程序重启或停止的顺序由它们在选项文件中的顺序决定。</p>
			<pre><span># This file should probably be in your home dir (~/.my.cnf)</span></pre>
			<pre><span># or /etc/my.cnf</span></pre>
			<pre><span># Version 2.1 by Jani Tolonen</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld_multi]</span></pre>
			<pre><span>mysqld&nbsp;&nbsp;&nbsp;&nbsp; = /usr/local/bin/mysqld_safe</span></pre>
			<pre><span>mysqladmin = /usr/local/bin/mysqladmin</span></pre>
			<pre><span>user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = multi_admin</span></pre>
			<pre><span>password&nbsp;&nbsp; = multipass</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld2]</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock2</span></pre>
			<pre><span>port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 3307</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /usr/local/mysql/var2/hostname.pid2</span></pre>
			<pre><span>datadir&nbsp;&nbsp;&nbsp; = /usr/local/mysql/var2</span></pre>
			<pre><span>language&nbsp;&nbsp; = /usr/local/share/mysql/english</span></pre>
			<pre><span>user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = john</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld3]</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock3</span></pre>
			<pre><span>port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 3308</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /usr/local/mysql/var3/hostname.pid3</span></pre>
			<pre><span>datadir&nbsp;&nbsp;&nbsp; = /usr/local/mysql/var3</span></pre>
			<pre><span>language&nbsp;&nbsp; = /usr/local/share/mysql/swedish</span></pre>
			<pre><span>user&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= monty</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld4]</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock4</span></pre>
			<pre><span>port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 3309</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /usr/local/mysql/var4/hostname.pid4</span></pre>
			<pre><span>datadir&nbsp;&nbsp;&nbsp; = /usr/local/mysql/var4</span></pre>
			<pre><span>language&nbsp;&nbsp; = /usr/local/share/mysql/estonia</span></pre>
			<pre><span>user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = tonu</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld6]</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock6</span></pre>
			<pre><span>port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 3311</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /usr/local/mysql/var6/hostname.pid6</span></pre>
			<pre><span>datadir&nbsp;&nbsp;&nbsp; = /usr/local/mysql/var6</span></pre>
			<pre><span>language&nbsp;&nbsp; = /usr/local/share/mysql/japanese</span></pre>
			<pre><span>user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = jani</span></pre>
			<p>参见<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="instance-manager"></a>
		5.2.&nbsp;mysqlmanager：MySQL实例管理器</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#instance-manager-startup-process">
			5.2.1. 用MySQL实例管理器启动MySQL服务器</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-security">
			5.2.2. 连接到MySQL实例管理器并创建用户账户</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-command-line-options">
			5.2.3. MySQL实例管理器命令行选项</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-configuration-files">
			5.2.4. MySQL实例管理器配置文件</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-commands">
			5.2.5. MySQL实例管理器识别的命令</a></span></dt></dl></div>
		<p><span>MySQL</span>实例管理器<span>(IM)</span>是通过<span>TCP/IP</span>端口运行的后台程序，用来监视和管理<span>MySQL</span>数据库服务器实例。<span>MySQL</span>实例管理器 
		适合<span>Unix-</span>类操作系统和<span>Windows</span>。</p>
		<p>可以在<span>mysqld_safe</span>脚本使用<span>MySQL</span>实例管理器来启动和停止<span>MySQL</span>服务器，<strong><span>甚至可以从一个远程主机</span></strong>。<span>MySQL</span>实例管理器还执行<strong><span>mysqld_multi</span></strong>脚本的功能<span>(</span>和大多数语法<span>)</span>。下面为<span>MySQL</span>实例管理器的详细描述。</p>
		<div class="section">
			<div class="titlepage">
				<div>
					<div>
						<h3 class="title">
						<a name="instance-manager-startup-process"></a>
			5.2.1.&nbsp;用MySQL实例管理器启动MySQL服务器</h3></div></div></div>
			<p>一般情况，用<strong><span>mysql.server</span></strong>脚本启动<span>MySQL Database Server</span>（<span>MySQL</span>数据库服务器），通常驻留在<span>/etc/init.d/</span><span>
			</span>文件夹。默认情况下该脚本调用<strong><span>mysqld_safe</span></strong>脚本。但是，你可以在脚本中将<span>use_mysqld_safe</span>变量设置为<span>0</span><span>(</span>零<span>)</span>以便使用<span>MySQL</span>实例管理器来启动服务器。</p>
			<p>在这种情况下，<span>Instance Manager</span>的行为取决于<span>MySQL</span>配置文件中的选项。如果没有配置文件，<span>MySQL</span>实例管理器创建<span>mysqld</span>实例并试图用默认<span>(</span>编译嵌入的<span>)</span>配置来启动。这说明如果<strong><span>mysqld</span><span>没有</span></strong>安装到
			默认位置，<span>IM</span>不能猜出它的位置。如果你已经在非标准位置安装了<span>MySQL</span>服务器，你应使用配置文件。参见<a href="installing.html#installation-layouts" title="2.1.5. Installation Layouts">2.1.5节，“安装布局”</a>。</p>
			<p>如果有配置文件，<span>IM</span>将分析配置文件搜索<span>[mysqld]</span>部分<span>(</span>例如<span>[mysqld]</span>、<span>[mysqld1]</span>、<span>[mysqld2]</span>等<span>)</span>。每个部分指定一个实例。启动时<span>IM</span>将启动所有找到的实例。<span>IM</span>关闭时默认停止所有实例。</p>
			<p>请注意有一个特殊选项<span>mysqld-path</span><span>(</span><span>mysqld-path 
			= <i>path-to-mysqld- binary</i></span><span>)</span>，只能用<span>IM</span>识别。使用该变量让<span>IM</span>知道<strong><span>mysqld</span></strong>二进制驻留在哪儿。你还应该为服务器设置<span>basedir</span>和<span>datadir</span>选项。</p>
			<p>启用<span>MySQL</span>实例管理器的典型<span>MySQL</span>服务器启动<span>/</span>关闭循环为：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>&nbsp;</span>用<strong><span>/etc/init.d/mysql</span></strong>脚本启动<span>MySQL</span>实例管理器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>&nbsp;MySQL</span>实例管理器启动所有实例并监视它们。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果某个服务器实例失败，<span>MySQL</span>实例管理器重启它。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果<span>MySQL</span>实例管理器被关闭<span>(</span>例如用<strong><span>/etc/init.d/mysql 
			stop</span></strong>命令<span>)</span>，所有实例被<span>MySQL</span>实例管理器关闭。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="instance-manager-security"></a>
			5.2.2.&nbsp;连接到MySQL实例管理器并创建用户账户</h3></div></div></div>
			<p>使用<span>MySQL</span>客户端<span>-</span>服务器协议来处理同<span>MySQL</span>实例管理器之间的通信。你不能使用标准<strong><span 
>mysql</span></strong>客户端程序和<span>MySQL C API</span>来连接<span>IM</span>。<span>IM</span>支持客户端工具和<span>mysql-4.1</span>或以后的版本所分发的库所用的<span>MySQL</span>客户端<span>-</span>服务器协议版本。</p>
			<p><span>IM</span>将用户信息保存到密码文件中。密码文件的默认位置为<span>/etc/mysqlmanager.passwd</span>。</p>
			<p>密码应类似于：</p>
			<pre><span>petr:*35110DC9B4D8140F5DE667E28C72DD2597B5C848</span></pre>
			<p>要想生成密码用<strong><span 
>--passwd</span></strong>选项调用<span>IM</span>。则输出可以重定向到<span>/etc/mysqlmanager.passwd</span>文件以添加新用户。下面为示例命令。</p>
			<pre><span>./mysqlmanager --passwd &gt;&gt; /etc/mysqlmanager.passwd</span></pre>
			<pre><span>Creating record for new user.</span></pre>
			<pre><span>Enter user name: mike</span></pre>
			<pre><span>Enter password: &lt;password&gt;</span></pre>
			<pre><span>Re-type password: &lt;password&gt;</span></pre>
			<p>下面的行将加到<span>/etc/mysqlmanager.passwd</span>：</p>
			<pre><span>mike:*00A51F3F48415C7D4E8908980D443C29C69B60C9</span></pre>
			<p>如果<span>/etc/mysqlmanager.passwd</span>文件中没有该条，则不能连接<span>IM</span>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="instance-manager-command-line-options"></a>
			5.2.3.&nbsp;MySQL实例管理器命令行选项</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			<span>MySQL</span>实例管理器支持许多命令行选项。执行<strong><span>./mysqlmanager 
			--help</span></strong>命令可以简单列出。有下面的选项：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--help</span>，<span>-?</span><span>
			</span></p>
			<p>显示帮助消息并退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--bind-address=<i>name</i></span></p>
			<p>绑定地址用于连接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-mysqld-path=<i>name</i></span></p>
			<p>在<span>Unix</span>中，如果实例部分没有路径，则为寻找<span>MySQL</span>服务器二进制的地点。例如：<span>default-mysqld-path 
			= /usr/sbin/mysqld</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--defaults-file=<i>file_name</i></span></p>
			<p>从给定文件读<span>Instance 
			Manager</span>和<span>MySQL</span>服务器设定值。所有<span>Instance 
			Manager</span>更改的配置将加入该文件。只能用于<span>Instance Manager</span>的第一选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--install</span></p>
			<p>在<span>Windows</span>中，将<span>Instance 
			Manager</span>安装为<span>Windows</span>服务。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log=<i>name</i></span></p>
			<p><span>IM</span>日志文件的路径。结合<strong><span>--run-as-service</span></strong>选项使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--monitoring-interval=<i>Seconds</i></span></p>
			<p>监视实例的间隔，单位为秒。<span>Instance 
			Manager</span>将尝试连接每个监视的实例来检查它们是否是活动的<span>/</span>没有挂起。出现故障，<span>IM</span>将重启几次<span>(</span>实际上是多次<span>)</span>实例。可以用<span>nonguarded</span>选项为特定实例禁用该行为。如果未给定任何值，
			默认使用<span>20</span>秒。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--passwd</span>，<span>-P</span></p>
			<p>编写<span>passwd</span>文件并退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--password-file=<i>name</i></span></p>
			<p>从该文件中寻找<span>Instance 
			Manager</span>用户和密码。默认文件是<span>/etc/mysqlmanager.passwd</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--pid-file=<i>name</i></span></p>
			<p>使用的进程<span>ID</span>文件。默认情况下，该文件文件名为<span>mysqlmanager.pid</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>-- port=<i>port_num</i></span></p>
			<p>用于连接的端口号。<span>(IANA</span>分配的
			默认端口号为<span>2273)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--print-defaults</span><span>
			</span></p>
			<p>打印当前的默认值并退出。只能用作<span>Instance 
			Manager</span>的第一选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--remove</span></p>
			<p>在<span>Windows</span>中，删掉<span>Instance 
			Manager Windows</span>服务。假定前面已经用<span>--install</span>运行了<span>Instance 
			Manager</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--run-as-service</span></p>
			<p>
			使完善进程变为后台程序并启动。完善进程很简单，不易崩溃。出现故障后它将自己重启<span>IM</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--socket=<i>name</i></span></p>
			<p><span>Unix</span>中用于连接的套接字文件。默认情况下，文件名为<span>/tmp/mysqlmanager.sock</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--standalone</span></p>
			<p>在<span>Windows</span>中以单机模式运行<span>Instance 
			Manager</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--user=<i>name</i></span></p>
			<p>启动并运行<strong><span 
>mysqlmanager</span></strong>的用户名。建议使用运行<strong><span>mysqld</span><span
宋体;">服务器</span></strong>的用户账户来运行<strong><span>mysqlmanager</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--version</span><span>,
			</span>
			<span>-V</span></p>
			<p>输出版本信息并退出。</p>
			<h3 class="title"><a name="instance-manager-configuration-files"></a>
			5.2.4.&nbsp;MySQL实例管理器配置文件</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			<span>Instance Manager</span>使用标准<span>my.cnf</span>文件。它使用<span>[manager]</span>部分为自己读取选项并读取<span>[mysqld]</span>部分来创建实例。<span>[manager]</span>部分包含上述列出的选项。下面为<span>[manager]</span>部分示例：<pre><span># MySQL Instance Manager options section</span></pre>
			<pre><span>[manager]</span></pre>
			<pre><span>default-mysqld-path = /usr/local/mysql/libexec/mysqld</span></pre>
			<pre><span>socket=/tmp/manager.sock</span></pre>
			<pre><span>pid-file=/tmp/manager.pid</span></pre>
			<pre><span>password-file = /home/cps/.mysqlmanager.passwd</span></pre>
			<pre><span>monitoring-interval = 2</span></pre>
			<pre><span>port = 1999</span></pre>
			<pre><span>bind-address = 192.168.1.5</span></pre>
			<p><span>MySQL</span>实例管理器只在<span>Unix</span>中读取并管理<span>/etc/my.cnf</span>文件。在<span>Windows</span>中，<span>MySQL</span>实例管理器从<span>Instance 
			Manager</span>的安装目录读取<span>my.ini</span>文件。用<span>--defaults-file=<i>file_ 
			name</i></span>选项可以更改默认选项文件的位置。</p>
			<p>实例部分指定启动时给每个实例的选项。这些主要是普通<span>MySQL</span>服务器选项，但有一些<span>IM-</span>专用选项：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqld-path = 
			&lt;path-to-mysqld-binary&gt;</span></p>
			<p><strong>
			<span>mysqld</span><span>服务器</span></strong>二进制的路径。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>shutdown-delay = <i>
			Seconds</i></span></p>
			<p><span>IM</span>应等待实例关闭的秒数。
			默认为<span>35</span>秒。超过延迟时间后，<span>IM</span>假定实例正挂起并试图“<span><span>kill
			</span>
			<span>
			–</span><span>9</span><span>”</span></span>它。如果你使用带<span>large</span>表的<span>InnoDB</span>，你应当增加该值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>nonguarded</span></p>
			<p>如果你想要为某个实例禁用<span>IM</span>监视功能，应设置该选项。</p>
			<p>下面给出了几个实例示例。</p>
			<pre><span>[mysqld]</span></pre>
			<pre><span>mysqld-path=/usr/local/mysql/libexec/mysqld</span></pre>
			<pre><span>socket=/tmp/mysql.sock</span></pre>
			<pre><span>port=3307</span></pre>
			<pre><span>server_id=1</span></pre>
			<pre><span>skip-stack-trace</span></pre>
			<pre><span>core-file</span></pre>
			<pre><span>skip-bdb</span></pre>
			<pre><span>log-bin</span></pre>
			<pre><span>log-error</span></pre>
			<pre><span>log=mylog</span></pre>
			<pre><span>log-slow-queries</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld2]</span></pre>
			<pre><span>nonguarded</span></pre>
			<pre><span>port=3308</span></pre>
			<pre><span>server_id=2</span></pre>
			<pre><span>mysqld-path= /home/cps/mysql/trees/mysql-5.1/sql/mysqld</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock5</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /tmp/hostname.pid5</span></pre>
			<pre><span>datadir= /home/cps/mysql_data/data_dir1</span></pre>
			<pre><span>language=/home/cps/mysql/trees/mysql-5.1/sql/share/english</span></pre>
			<pre><span>log-bin</span></pre>
			<p><span>log=/tmp/fordel.log</span></p>
			<h3 class="title"><a name="instance-manager-commands"></a>
			5.2.5.&nbsp;MySQL实例管理器识别的命令</h3></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
		一旦你已经为<span>MySQL</span>实例管理器设置了一个密码文件并且<span>IM</span>正在运行，你可以连接它。你可以使用<strong><span 
>mysql</span></strong>客户端工具通过标准<span>MySQL API</span>来连接。以下是<span>MySQL</span>实例管理器目前可以接收的命令的清单和例子。<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>START INSTANCE &lt;instance_name&gt;</span></p>
		<p>该命令将试图启动一个实例：</p>
		<pre ><span>mysql&gt; </span><span><b><span>START INSTANCE mysqld4;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0,00 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>STOP INSTANCE &lt;instance_name&gt;</span></p>
		<p>将试图停止一个实例：</p>
		<pre ><span>mysql&gt; </span><span><b><span>STOP INSTANCE mysqld4;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0,00 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW INSTANCES</span></p>
		<p>显示所有载入的实例名：</p>
		<pre ><span>mysql&gt; </span><span><b><span>show instances;</span></b></span></pre>
		<pre ><span>+---------------+---------+</span></pre>
		<pre ><span>| instance_name | status&nbsp; |</span></pre>
		<pre ><span>+---------------+---------+</span></pre>
		<pre ><span>| mysqld3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | offline |</span></pre>
		<pre ><span>| mysqld4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | online&nbsp; |</span></pre>
		<pre ><span>| mysqld2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | offline |</span></pre>
		<pre ><span>+---------------+---------+</span></pre>
		<pre ><span>3 rows in set (0,04 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW INSTANCE STATUS 
		&lt;instance_name&gt;</span></p>
		<p>显示选定的实例的状态和版本信息：</p>
		<pre ><span>mysql&gt; </span><span><b><span>SHOW INSTANCE STATUS mysqld3;</span></b></span></pre>
		<pre ><span>+---------------+--------+---------+</span></pre>
		<pre ><span>| instance_name | status | version |</span></pre>
		<pre ><span>+---------------+--------+---------+</span></pre>
		<pre ><span>| mysqld3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | online | unknown |</span></pre>
		<pre ><span>+---------------+--------+---------+</span></pre>
		<pre ><span>1 row in set (0.00 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW INSTANCE OPTIONS 
		&lt;instance_name&gt;</span></p>
		<p>显示实例使用的选项：</p>
		<pre ><span>mysql&gt; </span><span><b><span>SHOW INSTANCE OPTIONS mysqld3;</span></b></span></pre>
		<pre ><span>+---------------+---------------------------------------------------+</span></pre>
		<pre ><span>| option_name&nbsp;&nbsp; | value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>+---------------+---------------------------------------------------+</span></pre>
		<pre ><span>| instance_name | mysqld3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
		<pre ><span>| mysqld-path&nbsp;&nbsp; | /home/cps/mysql/trees/mysql-4.1/sql/mysqld&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 3309&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| socket&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | /tmp/mysql.sock3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| pid-file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | hostname.pid3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| datadir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | /home/cps/mysql_data/data_dir1/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| language&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | /home/cps/mysql/trees/mysql-4.1/sql/share/english |</span></pre>
		<pre ><span>+---------------+---------------------------------------------------+</span></pre>
		<pre ><span>7 rows in set (0.01 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW &lt;instance_name&gt; LOG FILES</span></p>
		<p>
		该命令提供实例使用的所有日志文件。结果包含日志文件的路径和日志文件的大小。如果没有在配置文件中指定日志文件的路径<span> 
		(</span>例如<span>log=/var/mysql.log</span><span>)</span>，<span>IM</span>试图猜出它的位置。如果<span>IM</span>不能猜出日志文件的位置，你应明确指定日志文件的位置。</p>
		<pre ><span>mysql&gt; </span><span><b><span>SHOW mysqld LOG FILES;</span></b></span></pre>
		<pre ><span>+-------------+------------------------------------+----------+</span></pre>
		<pre ><span>| Logfile&nbsp;&nbsp;&nbsp;&nbsp; | Path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Filesize |</span></pre>
		<pre ><span>+-------------+------------------------------------+----------+</span></pre>
		<pre ><span>| ERROR LOG&nbsp;&nbsp; | /home/cps/var/mysql/owlet.err&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 9186&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| GENERAL LOG | /home/cps/var/mysql/owlet.log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 471503&nbsp;&nbsp; |</span></pre>
		<pre ><span>| SLOW LOG&nbsp;&nbsp;&nbsp; | /home/cps/var/mysql/owlet-slow.log | 4463&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>+-------------+------------------------------------+----------+</span></pre>
		<pre ><span>3 rows in set (0.01 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW &lt;instance_name&gt; LOG 
		{ERROR | SLOW | GENERAL} size[,offset_from_end]</span></p>
		<p>该命令查找指定的日志文件的一部分。因为大多数用户关注最新的日志消息，用<span>size</span>参数定义你想要从日志末尾开始索取的字节数。你可以指定可选<span>offset_from_end</span>参数从日志文件中部索取数据。下面的示例可以索取<span>21</span>个字节的数据，从日志文件末尾开始<span>23</span>个字节，<span>2</span>个字节用于结束：</p>
		<pre ><span>mysql&gt; </span><span><b><span>SHOW mysqld LOG GENERAL 21, 2;</span></b></span></pre>
		<pre ><span>+---------------------+</span></pre>
		<pre ><span>| Log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;|</span></pre>
		<pre ><span>+---------------------+</span></pre>
		<pre ><span>| using password: YES |</span></pre>
		<pre ><span>+---------------------+</span></pre>
		<pre ><span>1 row in set (0.00 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SET instance_name.option_name=option_value</span></p>
		<p>该命令编辑指定的实例的配置文件以更改<span>/</span>增加实例选项。<span>IM</span>假定配置文件位于<span>/etc/my.cnf</span>。你应检查文件是否存在，并具有合适的权限。</p>
		<pre ><span>mysql&gt; </span><span><b><span>SET mysqld2.port=3322;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0.00 sec)</span></pre>
		<p>在<span>MySQL</span>服务器重启前，对配置文件进行的更改不会生效。并且，执行<span>FLUSH 
		INSTANCES</span>命令后，才会将这些更改保存到<span>Instance Manager</span>的实例设定值的本地缓存中。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>UNSET 
		instance_name.option_name</span></p>
		<p>该命令从实例的配置文件删除一个选项。</p>
		<pre ><span>mysql&gt; </span><span><b><span>UNSET mysqld2.port;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0.00 sec)</span></pre>
		<p>在<span>MySQL</span>服务器重启前，对配置文件进行的更改不会生效。并且，执行<span>FLUSH 
		INSTANCES</span>命令后，才会将这些更改保存到<span>Instance Manager</span>的实例设定值的本地缓存中。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>FLUSH INSTANCES</span></p>
		<p>该命令强制<span>IM</span>重读配置文件并清空内部结构。编辑配置文件后应执行该命令。该命令不重启实例：</p>
		<pre ><span>mysql&gt; </span><span><b><span>FLUSH INSTANCES;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0.04 sec)</span></pre>
		<h2 class="title"><a name="mysqld"></a>
		5.3.&nbsp;mysqld：MySQL服务器</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#server-options">5.3.1. <span><strong class="command">
			mysqld</strong></span>命令行选项</a></span></dt><dt><span class="section"><a href="database-administration.html#server-sql-mode">
			5.3.2. SQL服务器模式</a></span></dt><dt><span class="section"><a href="database-administration.html#server-system-variables">
			5.3.3. 服务器系统变量</a></span></dt><dt><span class="section"><a href="database-administration.html#server-status-variables">
			5.3.4. 服务器状态变量</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
			<strong><span>mysqld</span></strong>是<span>MySQL</span>服务器。下面讨论<span>MySQL</span>服务器的配置：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>服务器支持的启动选项 </p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如何设置服务器<span>SQL</span>模式</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>服务器系统变量 </p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>服务器状态变量</p>
			<h3 class="title"><a name="server-options"></a>5.3.1. <span><strong class="command">mysqld</strong></span>命令行选项</h3></div></div></div><a class="indexterm" name="id2747244"></a><a class="indexterm" name="id2747254"></a><a class="indexterm" name="id2747264"></a>
			<p>当启动<strong><span>mysqld</span><span>服务器</span></strong>时，你可以使用<a href="using-mysql-programs.html#program-options" title="4.3. Specifying Program Options">4.3节，“指定程序选项”</a>中描述的方法指定程序选项。最常用的方法是在选项文件中或在命令行提供选项。但是，在大多数情况下，希望服务器每次运行时使用相同的选项。最好的方法是确保将它们列在选项文件中。参见<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>。</p>
			<p><strong><span>mysqld</span></strong>从<span>[mysqld]</span>和<span>[server]</span>组读取选项。<strong><span 
>mysqld_safe</span></strong>从<span>[mysqld]</span>、<span>[server]</span>、<span>[mysqld_safe]</span>和<span>[safe_mysqld]</span>组读取选项。<strong><span 
>mysql.server</span></strong>从 
			<span>[mysqld]</span>和<span>[mysql.server]</span>组读取选项。嵌入式<span>MySQL</span>服务器通常从<span>[server]</span>、<span>[embedded]</span>和<span>[<i>xxxxx_SERVER</i>]</span>组读取选项，其中<span><i><span>xxxxx</span></i></span>是服务器嵌入的应用程序名。</p>
			<p><strong><span>mysqld</span></strong>接受许多命令行选项。执行<strong><span>mysqld 
			--help</span></strong>可以简单列出来。要想看全部列表列，使用命令<strong><span>mysqld 
			--verbose --help</span></strong>。</p>
			<p>下面列出了一些最常用的服务器选项。其它的选项在其它地方描述：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>影响安全的选项：参见<a href="database-administration.html#privileges-options" title="5.6.3. Startup Options for mysqld Concerning Security">5.6.3节，“Mysqld安全相关启动选项<span><strong class="command"></strong></span>”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>SSL-</span>相关选项：参见<a href="database-administration.html#ssl-options" title="5.8.7.6. SSL Command-Line Options">5.8.7.6节，“SSL命令行选项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>二进制日志控制选项：参见<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3节，“二进制日志”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>复制相关选项：参见<a href="replication.html#replication-options" title="6.8. Replication Startup Options">6.8节，“复制启动选项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>特定存储引擎相关选项：参见<a href="storage-engines.html#myisam-start" title="15.1.1. MyISAM Startup Options">15.1.1节，“MyISAM启动选项”</a>、<a href="storage-engines.html#bdb-start" title="15.5.3. BDB Startup Options">15.5.3节，“BDB启动选项”</a>和<a href="storage-engines.html#innodb-start" title="15.2.4. InnoDB Startup Options">15.2.4节，“InnoDB启动选项”</a>。</p>
			<p>你还可以将变量名作为一个选项，设置服务器系统变量的值，如本节后面所述。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--help</span>，<span>-?</span></p>
			<p>显示简短的帮助消息并退出。使用<span>--verbose</span>和<span>--help</span>选项来看全部内容。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--allow-suspicious-udfs</span></p>
			<p>该选项控制是否用户定义的函数只有一个<span>xxx</span>符，用作可载入的主函数。默认情况下，该选项被关闭，只有至少有一个附属符的<span>UDF&nbsp;
			</span>可以载入。这样可以防止从未包含合法<span>UDF</span>的共享文件装载函数。参见<a href="extending-mysql.html#udf-security" title="27.2.3.6. User-Defined Function Security Precautions">27.2.3.6节，“用户定义函数安全注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--ansi</span></p>
			<p>使用标准<span>(ANSI)SQL</span>语法代替<span>MySQL</span>语法。参见<a href="introduction.html#ansi-mode" title="1.8.3. Running MySQL in ANSI Mode">1.8.3节，“在ANSI模式下运行MySQL”</a>。使用<span>--sql-mode</span>选项可以更精确控制服务器<span>SQL</span>模式。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--basedir=<i>path</i>, -b
			<i>path</i></span></p>
			<p><span>MySQL</span>安装目录的路径。通常所有路径根据该路径来解析。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--bind-address=<i>IP</i></span></p>
			<p>待绑定的<span>IP</span>地址。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--bootstrap</span></p>
			<p><strong>
			<span>mysql_install_db</span></strong>脚本使用该选项来创建<span>MySQL</span>授权表，不需要启动<span>MySQL</span>服务器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--console</span></p>
			<p>将错误日志消息写入<span>stderr</span>和<span>stdout</span>，即使指定了<span>--log-error</span>。在<span>Windows</span>中，如果使用该选项，<strong><span>mysqld</span></strong>不关闭控制台窗口。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--character-sets-dir=<i>path</i></span></p>
			<p>字符集安装的目录。参见<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1节，“数据和排序用字符集”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--chroot=path</span></p>
			<p>通过<span>chroot()</span>系统调用在启动过程中将<strong><span>mysqld</span></strong>服务器放入一个封闭环境中。这是推荐的一个安全措施。请注意使用该选项可以 
			限制<span>LOAD 
			DATA INFILE</span>和<span>SELECT 
			... INTO OUTFILE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--character-set-server=<i>charset</i></span></p>
			<p>使用<span><i><span>charset</span></i></span>作为
			默认服务器字符集。参见<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1节，“数据和排序用字符集”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--core-file</span></p>
			<p>如果<strong><span>mysqld</span></strong>终止，写内核文件。在某些系统中，你还必须为<strong><span>mysqld_safe</span></strong>指定<span>--core-file-size
			</span>选项。参见<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3节，“mysqld_safe：MySQL服务器启动脚本”</a>。请注意对于一些系统，例如<span>Solaris</span>，如果你使用<span>--user</span>选项不会获得内核文件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--collation-server=<i>collation</i></span></p>
			<p>使用<span><i><span>collation</span></i></span>作为
			默认服务器校对规则。参见<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1节，“数据和排序用字符集”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--datadir=<i>path</i>, -h
			<i>path</i></span></p>
			<p>数据目录的路径。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--debug[=<i>debug_options</i>]</span><span>,
			</span>
			<span>-# [<i>debug_options</i>]</span></p>
			<p>如果<span>MySQL</span>配置了<span>--with-debug</span>，你可以使用该选项来获得一个跟踪文件，跟踪<strong><span>mysqld</span></strong>正进行的操作。<span><i><span>debug_options</span></i></span>字符串通常为<span><span>&#39;d:t:o</span><span>，<i><span>file_name</span></i><span>&#39;</span></span></span>。参见<a href="porting.html#making-trace-files" title="E.1.2. Creating Trace Files">E.1.2节，“创建跟踪文件”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>DEPRECATED</span></em>)
			</span>
			<span>--default-character-set=<i>charset</i></span></p>
			<p>使用<span><i><span>char</span><span>设置</span></i></span>作为
			默认字符集。由于<span>--character-set-server</span>，反对使用该选项。参见<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1节，“数据和排序用字符集”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-collation=<i>collation</i></span></p>
			<p>使用<span><i><span>collation</span></i></span><span>
			</span>作为默认校对规则。由于<span>--collation-server</span>，反对使用该选项。参见<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1节，“数据和排序用字符集”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-storage-engine=<i>type</i></span></p>
			<p>该选项为<span>--default-table-type</span>的同义词。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-table-type=<i>type</i></span></p>
			<p>设置表的默认类型。参见<a href="storage-engines.html">第15章：</a><a href="storage-engines.html" title="Chapter 15. Storage Engines and Table Types"><i>存储引擎和表类型</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-time-zone=<i>type</i></span></p>
			<p>设置默认服务器时区。该选项设置全局<span>time_zone</span>系统变量。如果未给出该选项，
			默认时区与系统时区相同<span>(</span>用<span>system_time_zone</span>系统变量值给定<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--delay-key-write[= OFF | 
			ON | ALL]</span></p>
			<p>如何使用<span>DELAYED 
			KEYS</span>选项。键写入延迟会造成再次写<span>MyISAM</span>表时键缓冲区不能被清空。<span>OFF</span>禁用延迟的键写入。<span>ON</span>启用用<span>DELAYED 
			KEYS</span>选项创建的表的延迟的键写入。<span>ALL</span>延迟所有<span>MyISAM</span>表的键写入。参见<a href="optimization.html#server-parameters" title="7.5.2. Tuning Server Parameters">7.5.2节，“调节服务器参数”</a>。参见<a href="storage-engines.html#myisam-start" title="15.1.1. MyISAM Startup Options">15.1.1节，“MyISAM启动选项”</a>。</p>
			<p><strong>
			<span>注</span></strong>释：如果你将该变量设置为<span>ALL</span>，你不应从另一个正使用<span>MyISAM</span>表的程序中使用<span>MyISAM</span>表<span>(</span>例如从另一个<span>MySQL</span>服务器或用<strong><span>myisamchk</span></strong><span>)</span>。这样操作会导致索引破坏。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--des-key-file=<i>file_name</i></span></p>
			<p>从该文件读<span>DES_ENCRYPT()</span>和<span>DES_DECRYPT()</span>使用的
			默认键。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--enable-named-pipe</span></p>
			<p>启用命名管道支持。该选项只适用<span>Windows NT</span>、<span>2000</span>、<span>XP</span>和<span>2003</span>系统，并且只适用支持命名管道连接的<strong><span>mysqld-nt</span></strong>和<strong><span>mysqld-max-nt</span></strong>服务器。</p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--exit-info[=<i>flags</i>]</span><span>,
			</span>
			<span>-T [<i>flags</i>]</span></p>
			<p>这是不同标志的一个位掩码，你可以用来调试<strong><span>mysqld</span><span
宋体;">服务器</span></strong>。不要使用该选项，除非你<i>确切</i>知道它在做什么！</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--external-locking</span></p>
			<p>启用系统锁定。请注意如果你在<span>lockd</span>不能完全工作的系统上使用该选项<span>(</span>例如在<span>Linux</span>中<span>)</span>，<strong><span>mysqld</span></strong>容易死锁。该选项以前叫<span>--enable-locking</span>。</p>
			<p><strong>
			<span>注</span></strong>释：如果你在许多<span>MySQL</span>进程中使用该选项来更新<span>MyISAM</span>表，你必须确保满足下述条件：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>使用正被另一个进程更新的表的查询的缓存不可使用。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>不应在共享表中使用<span>--delay-key-write=ALL</span>或<span>DELAY_KEY_WRITE=1</span>。</p>
			<p>最简单的方法是结合使用<span>--external-locking</span>和<span><span>--delay-key-write=OFF 
			--query-cache-size=0</span><span>。</span></span></p>
			<p><span>(</span>默认不能实现，因为在许多设置中，结合使用上述选项很有用）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--flush</span></p>
			<p>执行<span>SQL</span>语句后向硬盘上清空更改。一般情况执行<span>SQL</span>语句后<span> 
			MySQL</span>向硬盘写入所有更改，让操作系统处理与硬盘的同步。参见<a href="problems.html#crashing" title="A.4.2. What to Do If MySQL Keeps Crashing">A.4.2节，“如果MySQL依然崩溃，应作些什么”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--init-file=<i>file</i></span></p>
			<p>启动时从该文件读<span>SQL</span>语句。每个语句必须在同一行中并且不应包括注释。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--language=<i>lang_name</i>, 
			-L <i>lang_name</i></span></p>
			<p>用给定语言给出客户端错误消息。<span><i><span>lang_name</span></i></span>可以为语言名或语言文件安装目录的全路径名。参见<a href="database-administration.html#languages" title="5.10.2. Setting the Error Message Language">5.10.2节，“设置错误消息语言”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--large-pages</span></p>
			<p>一些硬件<span>/</span>操作系统架构支持大于
			默认值<span>(</span>通常<span>4 
			KB)</span>的内存页。实际支持取决于使用的硬件和<span>OS</span>。大量访问内存的应用程序通过使用较大的页，降低了<span>Translation 
			Lookaside Buffer (TLB)</span>损失，可以改善性能。</p>
			<p>目前，<span>MySQL</span>只在<span>Linux</span>中支持大页面<span>(</span>在<span>Linux</span>中被称作<span>HugeTLB)</span>。我们已经计划将该支持扩展到<span>FreeBSD</span>、<span>Solaris</span>和其它可能的平台。</p>
			<p>在<span>Linux</span>中可以使用大页面前，需要配置<span>HugeTLB</span>内存池。参考<span>Linux</span>内核源码中的<span>hugetlbpage.txt</span>文件。</p>
			<p>默认情况下该选项被禁用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>---log[=<i>file</i>]</span><span>,
			</span>
			<span>-l [<i>file</i>]</span></p>
			<p>日志连接和对文件的查询。参见<a href="database-administration.html#query-log" title="5.11.2. The General Query Log">5.11.2节，“通用查询日志”</a>。如果你不指定文件名，<span>MySQL</span>使用<span><i><span>host_name</span></i><span>.log</span></span>作为文件名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-bin=[<i>file</i>]</span></p>
			<p>二进制日志文件。将更改数据的所有查询记入该文件。用于备份和复制。参见<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3节，“二进制日志”</a>。建议指定一个文件名<span>(</span>原因参见<a href="problems.html#open-bugs" title="A.8.1. Open Issues in MySQL">A.8.1节，“MySQL中的打开事宜”</a><span>)</span>，否则<span>MySQL</span>使用<span><i><span>host_name</span></i><span>-bin</span></span>作为日志文件基本名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-bin-index[=<i>file</i>]</span></p>
			<p>二进制日志文件名的索引文件。参见<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3节，“二进制日志”</a>。如果你不指定文件名，并且如果你没有在<span>--log-bin</span>中指定，<span>MySQL</span>使用<span><i><span>host_name</span></i><span>-bin.index</span></span>作为文件名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			--log-bin-trust-routine-creators[={0|1}]</span></p>
			<p>没有参数或参数为<span>1,</span>该选项将系统变量<span>log_bin_trust_routine_creators</span>设置为<span>1</span>。为参数<span> 
			0</span>时，该选项将系统变量设置为<span>0</span>。<span>log_bin_trust_routine_creators</span>影响<span>MySQL</span>如何对保存的程序的创建强加限制。参见<a href="stored-procedures.html#stored-procedure-logging" title="20.4. Binary Logging of Stored Routines and Triggers">20.4节，“存储子程序和触发程序的二进制日志功能”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-error[=<i>file</i>]</span></p>
			<p>该文件的日志错误和启动消息。参见<a href="database-administration.html#error-log" title="5.11.1. The Error Log">5.11.1节，“错误日志”</a>。如果你不指定文件名，<span>MySQL</span>使用<span><i><span>host_name.err</span></i></span>作为文件名。如果文件名没有扩展名，则加上<span>.err</span>扩展名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-isam[=<i>file</i>]</span></p>
			<p>将所有<span>MyISAM</span>更改记入该文件<span>(</span>只有调试<span>MyISAM</span>时才使用<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>DEPRECATED</span></em>)
			</span>
			<span>--log-long-format</span></p>
			<p>
			记录激活的更新日志、二进制更新日志、和慢查询日志的大量信息。例如，所有查询的用户名和时间戳将记录下来。不赞成选用该选项，因为它现在代表
			默认记录行为。<span>(</span>参见<span>--log-short-format</span>描述）<span>。</span><span>--log-queries-not-using-indexes</span>选项适合将未使用索引的查询记录到慢查询日志中。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			--log-queries-not-using-indexes</span></p>
			<p>如果你结合<span>--log-slow-queries</span>使用该选项，未使用索引的查询也被记录到慢查询日志中。参见<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4节，“慢速查询日志”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-short-format</span></p>
			<p>
			记录激活的更新日志、二进制更新日志、和慢查询日志的少量信息。例如，用户名和时间戳不记录下来。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			---log-slow-admin-statements</span></p>
			<p>将慢管理语句例如<span>OPTIMIZE 
			TABLE</span>、<span>ANALYZE 
			TABLE</span>和<span>ALTER 
			TABLE</span>记入慢查询日志。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-slow-queries[=<i>file</i>]</span></p>
			<p>将所有执行时间超过<span>long_query_time</span><span>
			</span>秒的查询记入该文件。参见<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4节，“慢速查询日志”</a>。详细信息参见<span>--log-long-format</span>和<span>--log-short-format</span>选项描述。</p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-warnings</span><span>,
			</span>
			<span>-W</span></p>
			<p>将警告例如<span>Aborted 
			connection...</span>打印到错误日志。建议启用该选项，例如，如果你使用复制<span> 
			(</span>你可以得到关于所发生事情的详细信息，例如关于网络故障和重新连接的消息<span>)</span>。默认情况下启用该选项；要想禁用它，使用<span>--skip-log-warnings</span>。中断的连接不会记入错误日志，除非值大于<span>1</span>。参见<a href="problems.html#communication-errors" title="A.2.10. Communication Errors and Aborted Connections">A.2.10节，“通信错误和失效连接”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--low-priority-updates</span></p>
			<p>表修改<span>(</span><span>INSERT</span><span>,
			</span>
			<span>REPLACE</span><span>,
			</span>
			<span>DELETE</span><span>,
			</span>
			<span>UPDATE</span><span>)</span>比选择的优先级要低。也可以通过<span>{INSERT 
			| REPLACE | DELETE | UPDATE} LOW_PRIORITY ...</span><span>
			</span>来降低某个查询的优先级来实现，或通过<span>SET 
			LOW_PRIORITY_UPDATES=1</span>来更改一个线程的优先级。参见<a href="optimization.html#table-locking" title="7.3.2. Table Locking Issues">7.3.2节，“表锁定事宜”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>&nbsp;--memlock</span></p>
			<p><strong>
			<span>将</span><span>mysqld</span></strong><span>
			</span>进程锁定在内存中。在支持<span>mlockall()</span>系统调用的系统上有效，例如<span>Solaris</span>。如果操作系统使<strong><span>mysqld</span></strong>在硬盘上交换时出现问题，可以为你提供帮助。请注意使用该选项时需要以<span>root</span>运行服务器，但从安全考虑并不是一个好注意。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--myisam-recover [=<i>option</i>[,<i>option</i>...]]]</span></p>
			<p>将存储引擎<span>MyISAM</span>设置为恢复模式。该选项值是<span>DEFAULT</span>、<span>BACKUP</span>、<span>FORCE</span>或<span>QUICK</span>值的任何组合。如果你指定多个值，用逗号间隔开。你还可以使用<span>&quot;&quot;</span>值来禁用该选项。使用如果该选项，当<strong><span>mysqld</span></strong>打开<span>MyISAM</span>表时，检查是否表标记为崩溃或没有正确关闭。<span>(</span>只有用<span>--skip-external-locking</span><span>are</span>运行时，最后的选项才工作）<span>。
			</span>如果是这种情况，<strong><span>mysqld</span></strong>则检查 
			表。如果表被破坏，<strong><span>mysqld</span></strong>试图维护它。</p>
			<p>下面的选项影响维护工作：</p>
			<table border="1" cellpadding="0" id="table3">
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>选项</span></strong></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>DEFAULT</span></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p>与没有使用<span>--myisam-recover</span>选项相同。</td>
				</tr>
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>BACKUP</span></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p>如果在恢复过程中，数据文件被更改了，将<span><i><span>tbl_name</span></i><span>.MYD</span></span>文件备份为<span><i><span>tbl_name-datetime</span></i><span>.BAK</span></span>。</td>
				</tr>
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>FORCE</span></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p>即使<span>.MYD</span>文件将丢掉多个行也进行恢复。</td>
				</tr>
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>QUICK</span></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p>如果没有删除块，不要检查表中的行。</td>
				</tr>
			</table>
			<p>在表自动修复前，<span>MySQL</span>错误日志添加一条注解。如果你不想用户干涉干涉大多数问题，你应使用<span>BACKUP,FORCE</span>选项。该选项强制维护表，即使一些行将会被删除也不例外，但它保持旧的数据文件做为备份，以便你可以在后来进行检查。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--ndb-connectstring=<i>connect_string</i></span></p>
			<p>当使用<span>NDB</span>存储引擎时，可以指出通过设置连接字符串选项来分发群集配置的管理服务器。相关语法参见<a href="ndbcluster.html#mysql-cluster-connectstring" title="17.4.4.2. The MySQL Cluster connectstring">17.4.4.2节，“MySQL簇连接字符串”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--ndbcluster</span></p>
			<p>如果二进制支持<span>NDB 
			CLUSTER</span>存储引擎，使用该选项可以代替禁用<span>MySQL Cluster</span>支持的
			默认设置。参见<a href="ndbcluster.html">第17章：</a><a href="ndbcluster.html" title="Chapter 17. MySQL Cluster"><i>MySQL簇</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--old-passwords</span></p>
			<p>强制服务器为新密码生成短<span>(4.1</span>前<span>)</span>密码哈希。如果服务器必须支持旧客户端程序，为保证兼容性这很有用。参见<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9节，“MySQL 4.1中的密码哈希处理”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--one-thread</span></p>
			<p>只使用一个线程<span>(</span>用于在<span>Linux</span>中调试<span>)</span>。只有服务器启用了调试，该选项才可用。参见<a href="porting.html#debugging-server" title="E.1. Debugging a MySQL Server">E.1节，“调试MySQL服务器”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--open-files-limit=<i>count</i></span></p>
			<p>用来更改<strong><span>mysqld</span></strong>文件描述符的数量。如果没有设置或设置为<span>0</span>，则<strong><span>mysqld</span></strong>通过<span>setrlimit()</span>使用该值来保存文件描述符。如果该值为<span>0</span>，则<strong><span>mysqld</span></strong><span>
			</span>保存<span>max_connections*5</span>或<span>max_connections 
			+ table_cache*2</span><span>(</span>取较大者<span>)</span>个文件。如果<strong><span 
>mysqld</span></strong>给出你错误<span>&quot;</span>打开的文件太多。<span>&quot;</span>，你应试试增加该值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--pid-file=path</span></p>
			<p><strong>
			<span>mysqld_safe</span></strong>使用的进程<span>ID</span>文件的路径。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--port=<i>port_num</i>, -P
			<i>port_num</i></span></p>
			<p>帧听<span>TCP/IP</span>连接时使用的端口号。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--safe-mode</span></p>
			<p>跳过一些优化阶段。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>DEPRECATED</span></em>)
			</span>
			<span>--safe-show-database</span></p>
			<p>参见<a href="database-administration.html#privileges-provided" title="5.7.3. Privileges Provided by MySQL">5.7.3节，“MySQL提供的权限”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--safe-user-create</span></p>
			<p>启用后如果用户没有<span>mysql.user</span>表或表中列的<span>INSERT</span>权限，则用户不能用<span>GRANT</span>语句创建新用户。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--secure-auth</span></p>
			<p>不允许使用旧<span>(4.1</span>之前<span>)</span>密码的账户进行鉴定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--shared-memory</span></p>
			<p>启用本地客户端的共享内存连接。该选项只用于<span>Windows</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--shared-memory-base-name=<i>name</i></span></p>
			<p>共享内存连接名。该选项只用于<span>Windows</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-bdb</span></p>
			<p>禁用<span>BDB</span>存储引擎。这样可以节省内存，并可能加速某些操作。如果你需要<span>BDB</span>表则不要使用该选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-concurrent-insert</span></p>
			<p>关闭在同一时间在<span>MyISAM</span>表中选择和插入的能力。<span>(</span>只有你发现缺陷时才使用该选项）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-external-locking</span></p>
			<p>不要使用系统锁定。要想使用<strong><span>myisamchk</span></strong>，你必须关闭服务器。<span>(</span>参见<a href="introduction.html#stability" title="1.4.3. MySQL Stability">1.4.3节，“MySQL稳定性”</a>）<span>。 </span>要避免该需求，使用<span>MySQL 
			Monitor</span>中的<span>CHECK 
			TABLE</span>和<span>REPAIR 
			TABLE</span>来检查并维护<span>MyISAM</span>表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-grant-tables</span></p>
			<p>该选项使服务器不使用权限系统。该权限允许访问服务器的用户<i>不受限制地访问</i>所有<em><span>数据库</span></em>。你可以从系统外壳命令行执行<strong><span>mysqladmin 
			flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span></strong>命令，或执行<span>MySQL </span>
			<span>FLUSH PRIVILEGES</span>语句让运行的服务器重新开始使用
			授权表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-host-cache</span></p>
			<p>为了更快地在名称<span>-IP</span>之间进行解析，不要使用内部主机名缓存。相反，每次客户端连接时查询<span>DNS</span>服务器。参见<a href="optimization.html#dns" title="7.5.6. How MySQL Uses DNS">7.5.6节，“MySQL如何使用DNS”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-innodb</span></p>
			<p>禁用<span>InnoDB</span>存储引擎。这样可以节省内存，并可能加速某些操作。如果你需要<span>BDB</span>表则不要使用该选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-name-resolve</span></p>
			<p>不要解析正检查客户端连接的主机名。只使用<span>IP</span>号。如果你使用该项，
			授权表中的所有<span>Host</span>列值必须为<span>IP</span>号或<span>localhost</span>。参见<a href="optimization.html#dns" title="7.5.6. How MySQL Uses DNS">7.5.6节，“MySQL如何使用DNS”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-ndbcluster</span></p>
			<p>禁用<span>NDB 
			CLUSTER</span>存储引擎。这是支持<span>NDB 
			CLUSTER</span>存储引擎的二进制的默认设置，说明只有用<span>--ndbcluster</span>选项显式覆盖<span>--skip-ndbcluster</span>选项时，系统才为该存储引擎分配内存和其它资源。使用示例参见<a href="ndbcluster.html#mysql-cluster-quick" title="17.4.3. Quick Test Setup of MySQL Cluster">17.4.3节，“MySQL簇的快速测试设置”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-networking</span></p>
			<p>不帧听<span>TCP/IP</span>连接。必须通过命名管道或共享内存<span>(</span>在<span>Windows</span>中<span>)</span>或<span>Unix</span>套接字文件<span>(</span>在<span>Unix</span>中<span>)</span>完成<strong><span>mysqld</span></strong>的相互操作。对于只允许本地客户端的系统，大力推荐该选项。参见<a href="optimization.html#dns" title="7.5.6. How MySQL Uses DNS">7.5.6节，“MySQL如何使用DNS”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--standalone</span></p>
			<p>只适合基于<span>Windows-NT</span>的系统；指导<span>MySQL</span>服务器不做为服务来运行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--symbolic-links</span><span>,
			</span>
			<span>--skip-symbolic-links</span></p>
			<p>启用或禁用符号链接支持。在<span>Windows</span>和<span>Unix</span>中，该选项的作用是不同的：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Windows</span>中，启用符号链接，你可以通过创建包含实际目录路径的<span>directory.sym</span>文件来建立数据库目录的符号链接。参见<a href="optimization.html#windows-symbolic-links" title="7.6.1.3. Using Symbolic Links for Databases on Windows">7.6.1.3节，“在Windows平台上使用关于数据库的符号链接”</a>。</p>
			<p>在<span>Unix</span>中，启用符号链接表示你可以用<span>CREATE 
			TABLE</span>语句的<span>INDEX 
			DIRECTORY</span>或<span>DATA 
			DIRECTORY</span>选项将<span>MyISAM</span>索引文件或数据文件链接到另一个目录。如果你删除或重新命名表，符号链接所指的文件也被删除或重新命名。参见<a href="sql-syntax.html#create-table" title="13.1.5. CREATE TABLE Syntax">13.1.5节，“CREATE 
					TABLE语法”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-safemalloc</span></p>
			<p>如果<span>MySQL</span>配置了<span>--with-debug=full</span>，所有<span>MySQL</span>程序在内存分配和释放时检查内存是否溢出。检查很慢，因此如果你不需要你可以用<span>--skip-safemalloc</span>选项来避免。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-show-database</span></p>
			<p>使用该选项，只允许具有<span>SHOW 
			DATABASES</span>权限的用户执行<span>SHOW 
			DATABASES</span>语句，该语句显示所有数据库名。不使用该选项，允许所有用户执行<span>SHOW 
			DATABASES</span>，但只向具有<span>SHOW 
			DATABASES</span>权限或部分数据库权限的用户显示每个数据库名。请注意全局权限为数据库的一种权限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-stack-trace</span></p>
			<p>不跟踪写堆栈。当调试运行<strong><span>mysqld</span></strong>时该选项有用。在一些系统中，你还必须使用该选项来获得内核文件。参见<a href="porting.html#debugging-server" title="E.1. Debugging a MySQL Server">E.1节，“调试MySQL服务器”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-thread-priority</span></p>
			<p>在快速响应中禁用线程优先级。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--socket=path</span></p>
			<p>在<span>Unix</span>中，该选项指定用于本地连接的<span>Unix</span>套接字文件。
			默认值是<span>/tmp/mysql.sock</span>。在<span>Windows</span>中，该选项指定本地连接所使用的管道名。
			默认值是<span>MySQL</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--sql-mode=<i>value</i>[,<i>value</i>[,<i>value</i>...]]</span></p>
			<p>将<span>MySQL</span>设置为<span>SQL</span>模式。参见<a href="database-administration.html#server-sql-mode" title="5.3.2. The Server SQL Mode">5.3.2节，“SQL服务器模式”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--temp-pool</span></p>
			<p>
			该选项使服务器创建的大多数临时文件使用一系列文件名，而不是每个新文件使用唯一的文件名。这样解决了在<span>Linux</span>内核中用 
			不同的名创建许多新文件的问题。在以前，<span>Linux</span>似乎“泄漏”内存，因为它被直接分配到<span>directory 
			entry</span>缓存而不是硬盘缓存。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--transaction-isolation=<i>level</i></span></p>
			<p>设置默认事务隔离级别，可以<span>READ-UNCOMMITTED</span>、<span><span>READ-COMMITTEE</span><span>、<span>REPEATABLE-READ</span></span></span>或<span>SERIALIZABLE</span>。参见<a href="sql-syntax.html#set-transaction" title="13.4.6. SET TRANSACTION Syntax">13.4.6节，“SET 
				TRANSACTION语法”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--tmpdir=<i>path</i>, -t
			<i>path</i></span></p>
			<p>创建临时文件的目录路径。默认<span>/tmp</span>目录在太小不能容纳临时表的分区时该选项很有用。该选项接受<span>round-robin</span>模式的几个路径。在<span>Unix</span>中路径应用冒号<span>(</span>‘<span>:</span>’<span>)
			</span>间隔开，在<span>Windows</span>、<span>NetWare</span>和<span>OS/2</span>中用分号<span>(</span>‘<span>；</span>’<span>)
			</span>间隔开。如果<span>MySQL</span>服务器为复制从机，你不应让<span>--tmpdir</span>指向基于内存的文件系统中的目录或服务器主机重启时会清除的目录。复制从机需要临时文件，机器重启时可以复制临时表或执行<span>LOAD 
			DATA INFILE</span>操作。如果服务器重启时临时文件目录中的文件丢失，复制失败。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--user={<i>user_name</i> |
			<i>user_id</i>}, -u {<i>user_name</i> | <i>user_id</i>}</span></p>
			<p>用<span><i><span>user_name</span></i></span>或数字用户<span>ID</span><span><i><span> 
			user_id</span></i></span>运行<strong><span>mysqld</span><span>服务器</span></strong>。<span>(</span>“<span class="quote">用户</span>”指系统登录账户，而不是
			授权表中所列的<span>MySQL</span>用户）<span>。
			</span></p>
			<p>用<span>root</span>启动<strong><span>mysqld</span><span>时<i>强制</i>使用</span></strong>该选项。服务器在启动序列中更改用户<span>ID</span>，让它做为具体用户而不是<span>root</span>运行。参见<a href="database-administration.html#security-guidelines" title="5.6.1. General Security Guidelines">5.6.1节，“通用安全指南”</a>。</p>
			<p>要避免用户在<span>my.cnf</span>文件中添加<span>--user=root</span>选项<span>(</span>使服务器用<span>root</span>运行<span>)</span>时可能出现的安全漏洞，<strong><span>mysqld</span></strong>只使用指定的第<span>1</span>个<span>--user</span>选项，如果有多个<span>--user</span>选项则会出现警告。在命令行选项前处理<span>/etc/my.cnf</span>和<span>$MYSQL_HOME/my.cnf</span>中的选项，因此建议你在<span>/etc/my.cnf</span>中放一个<span>--user</span>选项，并指定<span>root</span>之外的其它值。在其它<span>--user</span>选项前先找到<span>/etc/my.cnf</span>中的选项，确保服务器用其它用户运行，如果找到其它<span>--user</span>选项则会出现警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--version</span><span>,
			</span>
			<span>-V</span></p>
			<p>显示版本信息并退出。</p>
			<p>你可以使用<span>--<i>var_name</i>=<i>value</i></span>形式的选项为服务器系统变量。例如，<span>--key_buffer_size=32M</span>将变量<span>key_buffer_size</span>设为<span>32MB</span>。</p>
			<p>请注意设置变量时，<span>MySQL</span>可以自动将它纠正到某个给定范围内，或如果只允许某个值，则将设置值调节到最接近允许的值。</p>
			<p>还可以通过<span>--set-variable=<i>var_name</i>=<i>value</i></span>或<span>-O
			<i>var_name</i>=<i>value</i></span>语法来设置变量。但是，现在不赞成使用该语法。</p>
			<p>
          <a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">
			5.3.3节，“服务器系统变量”</a>完全描述了全部系统变量。调节服务器参数部分包括如何对他们进行优化。参见<a href="optimization.html#server-parameters" title="7.5.2. Tuning Server Parameters">7.5.2节，“调节服务器参数”</a>。</p>
			<p>你可以用<span>SET</span>语句更改大多数服务器系统变量的值。参见<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3节，“SET语法”</a>。</p>
			<p>如果你想用<span>SET </span>限制启动项可设的最大值，你可以使用<span>--maximum-var_name</span>命令行选项来定义。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="server-sql-mode"></a>
			5.3.2.&nbsp;SQL服务器模式</h3></div></div></div>
			<p><span>MySQL</span>服务器可以以不同的<span>SQL</span>模式来操作，并且可以为不同客户端应用不同模式。这样每个应用程序可以根据自己的需求来定制服务器的操作模式。</p>
			<p>模式定义<span>MySQL</span>应支持哪些<span>SQL</span>语法，以及应执行哪种数据验证检查。这样可以更容易地在不同的环境中使用<span>MySQL</span>，并结合其它数据库服务器使用<span>MySQL</span>。</p>
			<p>你可以用<span>--sql-mode=&quot;<i>modes</i>&quot;</span>选项启动<strong><span>mysqld</span><span>来</span></strong>设置默认<span>SQL</span>模式。如果你想要重设，该值还可以为空<span>(</span><span>--sql-mode 
			=&quot;&quot;</span><span>)</span>。</p>
			<p>你还可以在启动后用<span>SET [SESSION|GLOBAL] 
			sql_mode=&#39;<i>modes</i>&#39;</span>语句设置<span>sql_mode</span>变量来更改<span>SQL</span>模式。设置 
			<span>GLOBAL</span>变量时需要拥有<span>SUPER</span>权限，并且会影响从那时起连接的所有客户端的操作。设置<span>SESSION</span>变量只影响当前的客户端。任何客户端可以随时更改自己的会话 
			<span>sql_mode</span>值。</p>
			<p><span><i><span>Modes</span></i></span><span>is</span>是用逗号<span>(</span>‘<span>，</span>’<span>)</span>间隔开的一系列不同的模式。你可以用<span>SELECT 
			@@sql_mode</span>语句查询当前的模式。默认值是空<span>(</span>没有设置任何模式<span>)</span>。</p>
			<p>主要重要<span>sql_mode</span>值为：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ANSI</span></p>
			<p>更改语法和行为，使其更符合标准<span>SQL</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>STRICT_TRANS_TABLES</span></p>
			<p>
			如果不能将给定的值插入到事务表中，则放弃该语句。对于非事务表，如果值出现在单行语句或多行语句的第<span>1</span>行，则放弃该语句。本节后面给出了更详细的描述。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>TRADITIONAL</span></p>
			<p><span>Make MySQL</span>的行为象“<span class="quote">传统</span>”<span>SQL</span>数据库系统。该模式的简单描述是当在列中插入不正确的值时“给出<span class="quote">错误而不是警告</span>”。<strong><span>注</span></strong>释：一旦发现错误立即放弃<span>INSERT</span><span>/</span><span>UPDATE</span>。如果你使用非事务存储引擎，这种方式不是你想要的，因为出现错误前进行的数据更改不会“滚动”，结果是更新“只进行了一部分”。</p>
			<p>本手册指“<span class="quote">严格模式</span>”，表示至少<span>STRICT 
			_TRANS_TABLES</span>或<span>STRICT 
			_ALL_TABLES</span>被启用的模式。</p>
			<p>下面描述了支持的所有模式：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ALLOW_INVALID_DATES</span></p>
			<p>在严格模式下不要检查全部日期。只检查<span>1</span>到<span>12</span>之间的月份和<span>1</span>到<span>31</span>之间的日。这在<span>Web</span>应用程序中，当你从三个不同的字段获取年、月、日，并且想要确切保存用户插入的内容<span>(</span>不进行日期验证<span>)</span>时很重要。该模式适用于<span>DATE</span>和<span>DATETIME</span>列。不适合<span>TIMESTAMP</span>列，<span>TIMESTAMP</span>列需要验证日期。</p>
			<p>启用严格模式后，服务器需要合法的月和日，不仅仅是分别在<span>1</span>到<span>12</span>和<span>1</span>到<span>31</span>范围内。例如，禁用严格模式时<span>&#39;2004-04-31&#39;</span>是合法的，但启用严格模式后是非法的。要想在严格模式允许遮掩固定日期，还应启用<span>ALLOW_INVALID_DATES</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ANSI_QUOTES</span></p>
			<p>将‘<span>&quot;</span>’视为识别符引号<span>(</span>‘<span>`</span>’引号字符<span>)</span>，不要视为字符串的引号字符。在<span>ANSI</span>模式，你可以仍然使用‘<span>`</span>’来引用识别符。启用<span>ANSI_QUOTES</span>后，你不能用双引号来引用字符串，因为它被解释为识别符。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ERROR_FOR_DIVISION_BY_ZERO</span></p>
			<p>在严格模式，在<span>INSERT</span>或<span>UPDATE</span>过程中，如果被零除<span>(</span>或<span><span>MOD(X</span><span>，<span>0)</span></span></span><span>)</span>，则产生错误<span>(</span>否则为警告<span>)</span>。如果未给出该模式，被零除时<span>MySQL</span>返回<span>NULL</span>。如果用到<span>INSERT 
			IGNORE</span>或<span>UPDATE 
			IGNORE</span>中，<span>MySQL</span>生成被零除警告，但操作结果为<span>NULL</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>HIGH_NOT_PRECEDENCE</span></p>
			<p>
			<span>NOT</span>操作符的优先顺序是表达式例如<span>NOT 
			a BETWEEN b AND c</span>被解释为<span>NOT 
			(a BETWEEN b AND c)</span>。在一些旧版本<span>MySQL</span>中， 
			表达式被解释为<span>(NOT a) BETWEEN 
			b AND c</span>。启用<span>HIGH_NOT_PRECEDENCE</span><span>SQL</span>模式，可以获得以前的更高优先级的结果。</p>
			<pre ><span>mysql&gt; </span><span><b><span>SET sql_mode = &#39;&#39;;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT NOT 1 BETWEEN -5 AND 5;</span></b></span></pre>
			<pre ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; 0</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SET sql_mode = &#39;broken_not&#39;;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT NOT 1 BETWEEN -5 AND 5;</span></b></span></pre>
			<pre ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; 1</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>IGNORE_SPACE</span></p>
			<p>允许函数名和‘<span>(</span>’之间有空格。强制将所有函数名视为保存的字。结果是，如果你想要访问保存为字的数据库、表或列名，你必须引用它。例如，因为有<span>USER()</span>函数，<span>mysql</span>数据库中的<span>user</span>表名和该表内的<span>User</span>列被保存下来，因此你必须引用它们：</p>
			<pre ><span>SELECT &quot;User&quot; FROM mysql.&quot;user&quot;;</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_AUTO_CREATE_USER</span></p>
			<p>防止<span>GRANT</span>自动创建新用户，除非还指定了密码。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_AUTO_VALUE_ON_ZERO</span></p>
			<p>
			<span>NO_AUTO_VALUE_ON_ZERO</span>影响<span>AUTO_INCREMENT</span>列的处理。一般情况，你可以向该列插入<span>NULL</span>或<span>0</span>生成下一个序列号。<span>NO_AUTO_VALUE_ON_ZERO</span>禁用<span>0</span>，因此只有<span>NULL</span>可以生成下一个序列号。</p>
			<p>如果将<span>0</span>保存到表的<span>AUTO_INCREMENT</span>列，该模式会很有用。<span>(</span>不推荐采用该惯例<span>)</span>。例如，如果你用<strong><span>mysqldump</span></strong>转储表并重载，<span>MySQL</span>遇到<span>0</span>值一般会生成新的序列号，生成的表的内容与转储的表不同。重载转储文件前启用<span>NO_AUTO_VALUE_ON_ZERO</span>可以解决该问题。<strong><span 
>mysqldump</span></strong>在输出中自动包括启用<span>NO_AUTO_VALUE_ON_ZERO</span>的语句。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_BACKSLASH_ESCAPES</span></p>
			<p>禁用反斜线字符<span>(</span>‘<span>\</span>’<span>)</span>做为字符串内的退出字符。启用该模式，反斜线则成为普通字符。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_DIR_IN_CREATE</span></p>
			<p>创建表时，忽视所有<span>INDEX 
			DIRECTORY</span>和<span>DATA 
			DIRECTORY</span>指令。该选项对从复制服务器有用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_ENGINE_SUBSTITUTION</span></p>
			<p>如果需要的存储引擎被禁用或未编译，可以防止自动替换存储引擎。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_FIELD_OPTIONS</span></p>
			<p>不要在<span>SHOW 
			CREATE TABLE</span>的输出中打印<span>MySQL</span>专用列选项。该模式在可移植模式（<span>portability 
			mode</span>）下用于<strong><span>mysqldump</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_KEY_OPTIONS</span></p>
			<p>不要在<span>SHOW 
			CREATE TABLE</span>的输出中打印<span>MySQL</span>专用索引选项。该模式在可移植模式（<span>portability 
			mode</span>）下用于<strong><span>mysqldump</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_TABLE_OPTIONS</span></p>
			<p>不要在<span>SHOW 
			CREATE TABLE</span>的输出中打印<span>MySQL</span>专用表选项（例如<span>ENGINE</span>）。该模式在可移植模式（<span>portability 
			mode</span>）下用于<strong><span 
>mysqldump</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_UNSIGNED_SUBTRACTION</span></p>
			<p>在减运算中，如果某个操作数没有符号，不要将结果标记为<span>UNSIGNED</span>。请注意这样使<span>UNSIGNED 
			BIGINT</span>不能<span>100%</span>用于上下文中。参见<a href="functions.html#cast-functions" title="12.8. Cast Functions and Operators">12.8节，“Cast函数和操作符”</a>。</p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><span>NO_</span><span  style="font-size: 10.5pt">ZERO</span><span>_DATE</span></span></p>
			<p>在严格模式，不要将 
			<span>&#39;0000-00-00&#39;</span>做为合法日期。你仍然可以用<span>IGNORE</span>选项插入零日期。在非严格模式，可以接受该日期，但会生成警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_ZERO_IN_DATE</span></p>
			<p>在严格模式，不接受月或日部分为<span>0</span>的日期。如果使用<span>IGNORE</span>选项，我们为类似的日期插入<span>&#39;0000-00-00&#39;</span>。在非严格模式，可以接受该日期，但会生成警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ONLY_FULL_GROUP_BY</span></p>
			<p>不要让<span>GROUP 
			BY</span>部分中的查询指向未选择的列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>PIPES_AS_CONCAT</span></p>
			<p>将<span>||</span>视为字符串连接操作符（＋）<span>(</span>同<span>CONCAT()</span><span>)</span>，而不视为<span>OR</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>REAL_AS_FLOAT</span></p>
			<p>将<span>REAL</span>视为<span>FLOAT</span>的同义词，而不是<span>DOUBLE</span>的同义词。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>STRICT_TRANS_TABLES</span></p>
			<p>为所有存储引擎启用严格模式。非法数据值被拒绝。后面有详细说明。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>STRICT_TRANS_TABLES</span></p>
			<p>
			为事务存储引擎启用严格模式，也可能为非事务存储引擎启用严格模式。后面有详细说明。</p>
			<p>严格模式控制<span>MySQL</span>如何处理非法或丢失的输入值。有几种原因可以使一个值为非法。例如，数据类型错误，不适合列，或超出范围。当新插入的行不包含某列的没有显示定义<span>DEFAULT</span>子句的值，则该值被丢失。</p>
			<p>对于事务表，当启用<span>STRICT_ALL_TABLES</span>或<span>STRICT_TRANS_TABLES</span>模式时，如果语句中有非法或丢失值，则会出现错误。语句被放弃并滚动。</p>
			<p>对于非事务表，如果插入或更新的第<span>1</span>行出现坏值，两种模式的行为相同。语句被放弃，表保持不变。如果语句插入或修改多行，并且坏值出现在第<span>2</span>或后面的行，结果取决于启用了哪个严格选项：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对于<span>STRICT_ALL_TABLES</span>，<span>MySQL</span>返回错误并忽视剩余的行。但是，在这种情况下，前面的行已经被插入或更新。这说明你可以部分更新，这可能不是你想要的。要避免这点，最好使用单行语句，因为这样可以不更改表即可以放弃。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对于<span>STRICT_TRANS_TABLES</span>，<span>MySQL</span>将非法值转换为最接近该列的合法值并插入调整后的值。如果值丢失，<span>MySQL</span>在列中插入隐式
			默认值。在任何情况下，<span>MySQL</span>都会生成警告而不是给出错误并继续执行语句。<a href="sql-syntax.html#create-table" title="13.1.5. CREATE TABLE Syntax">13.1.5节，“CREATE 
				TABLE语法”</a>描述了隐式默认值。</p>
			<p>严格模式不允许非法日期，例如<span>&#39;2004-04-31&#39;</span>。它不允许禁止日期使用“零”部分，例如<span>&#39;2004-04-00&#39;</span>或“<span class="quote">零</span>”日期。要想禁止，应在严格模式基础上，启用<span>NO_ZERO_IN_DATE</span>和<span>NO_ZERO_DATE</span><span> 
			SQL</span>模式。</p>
			<p>如果你不使用严格模式<span>(</span>即不启用<span>STRICT_TRANS_TABLES</span>或<span>STRICT_ALL_TABLES</span>模式<span>)</span>，对于非法或丢失的值，<span>MySQL</span>将插入调整后的值并给出警告。在严格模式，你可以通过<span>INSERT 
			IGNORE</span>或<span>UPDATE 
			IGNORE</span>来实现。参见<a href="sql-syntax.html#show-warnings" title="13.5.4.22. SHOW WARNINGS Syntax">13.5.4.22节，“SHOW 
			WARNINGS语法”</a>。</p>
			<p>下面的特殊模式快速组合了前面所列的模式。</p>
			<p>其中包括大多数最新版本<span>MySQL</span>中的所有模式值。旧版本中，组合模式不包括新版本中没有的不适用的具体模式值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ANSI</span></p>
			<p>等同<span>REAL_AS_FLOAT</span>、<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>。参见<a href="introduction.html#ansi-mode" title="1.8.3. Running MySQL in ANSI Mode">1.8.3节，“在ANSI模式下运行MySQL”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>DB2</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、<span>NO_FIELD_OPTIONS</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>MAXDB</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、<span>NO_FIELD_OPTIONS</span>、 
			 
			<span>NO_AUTO_CREATE_USER</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>MSSQL</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、 
			 
			<span>NO_FIELD_OPTIONS</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>MYSQL323</span><span>
			</span></p>
			<p>等同<span>NO_FIELD_OPTIONS</span>、<span>HIGH_NOT_PRECEDENCE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>MYSQL40</span></p>
			<p>等同<span>NO_FIELD_OPTIONS</span>、<span>HIGH_NOT_PRECEDENCE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ORACLE</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、<span>NO_FIELD_OPTIONS</span>、<span>NO_AUTO_CREATE_USER</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>POSTGRESQL</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、<span>NO_FIELD_OPTIONS</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>TRADITIONAL</span></p>
			<p>等同STRICT_TRANS_TABLES、STRICT_ALL_TABLES、NO_ZERO_IN_DATE、NO_ZERO_DATE、ERROR_FOR_DIVISION_BY_ZERO、NO_AUTO_CREATE_USER。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="server-system-variables"></a>
			5.3.3.&nbsp;服务器系统变量</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#dynamic-system-variables">
				5.3.3.1. 动态系统变量</a></span></dt></dl></div><a class="indexterm" name="id2751856"></a><a class="indexterm" name="id2751862"></a><a class="indexterm" name="id2751869"></a><a class="indexterm" name="id2751879"></a>
			<p>
			服务器将维护许多表示其配置的系统变量。所有变量均有默认值。可以在命令行中或选项文件设置选项在服务器启动时对它们进行设置。大多数可以在运行时使用<span>SET</span>语句来设置。</p>
			<p><strong><span>mysqld</span><span>服务器</span></strong>维护两种变量。全局变量影响服务器的全局操作。会话变量影响具体客户端连接相关操作。</p>
			<p>服务器启动时，将所有全局变量初始化为默认值。可以在选项文件或命令行中指定的选项来更改这些默认值。服务器启动后，通过连接服务器并执行<span>SET 
			GLOBAL <i>var_name</i></span>语句可以更改动态全局变量。要想更改全局变量，必须具有<span>SUPER</span>权限。</p>
			<p>服务器还为每个客户端连接维护会话变量。连接时使用相应全局变量的当前值对客户端会话变量进行初始化。客户可以通过<span>SET 
			SESSION <i>var_name</i></span>语句来更改动态会话变量。设置会话变量不需要特殊权限，但客户可以只更改自己的会话变量，而不更改其它客户的会话变量。</p>
			<p>
			任何访问全局变量的客户端都可以看见对全局变量的更改。但是，它只影响在更改后连接的从该全局变量初始化相应会话变量的客户端。它不会影响已经连接上的客户端的会话变量<span>(</span>甚至是执行<span>SET 
			GLOBAL</span>语句的客户端<span>)</span>。</p>
			<p>当使用启动选项设置变量时，变量值可以使用后缀<span>K</span>、<span>M</span>或<span>G</span>分别表示千字节、兆字节或<span>gigabytes</span>。例如，下面的命令启动服务器时的键值缓冲区大小为<span>16 
			megabytes</span>：</p>
			<pre><span>mysqld --key_buffer_size=16M</span></pre>
			<p>后缀的大小写美关系；<span>16M</span>和<span>16m</span>是同样的。</p>
			<p>运行时，使用<span>SET</span>语句来设置系统变量。此时，不能使用后缀，但值可以采取下列表达式：</p>
			<pre><span>mysql&gt; </span><span><b><span>SET sort_buffer_size = 10 * 1024 * 1024;</span></b></span></pre>
			<p>要想显式指定是否设置全局或会话变量，使用<span>GLOBAL</span>或<span>SESSION</span>选项：</p>
			<pre><span>mysql&gt; </span><span><b><span>SET GLOBAL sort_buffer_size = 10 * 1024 * 1024;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET SESSION sort_buffer_size = 10 * 1024 * 1024;</span></b></span></pre>
			<p>两个选项均没有，则语句设置会话变量。</p>
			<p>
          <a href="database-administration.html#dynamic-system-variables" title="5.3.3.1. Dynamic System Variables">
			5.3.3.1节，“动态系统变量”</a>中列出了可以在运行时设置的变量。</p>
			<p>如果你想用<span>SET</span>语句限制系统变量可设的最大值，可以在服务器启动时通过<span>--maximum-<i>var_name</i></span>形式的选项来指定。例如，要想防止<span>query_cache_size</span>的值运行时超过<span>32MB</span>，使用选项<span>--maximum-query_cache_size=32M</span>。</p>
			<p>你可以通过<span>SHOW VARIABLES</span>语句查看系统变量及其值。详细信息参见<a href="language-structure.html#system-variables" title="9.4. System Variables">9.4节，“系统变量”</a>。</p>
			<pre class="programlisting">mysql&gt; <strong class="userinput">SHOW VARIABLES;</strong>
+---------------------------------+-------------------------------------------+
| Variable_name                   | Value                                     |
+---------------------------------+-------------------------------------------+
| auto_increment_increment        | 1                                         |
| auto_increment_offset           | 1                                         |
| automatic_sp_privileges         | ON                                        |
| back_log                        | 50                                        |
| basedir                         | /home/jon/bin/mysql/                      |
| binlog_cache_size               | 32768                                     |
| bulk_insert_buffer_size         | 8388608                                   |
| character_set_client            | latin1                                    |
| character_set_connection        | latin1                                    |
| character_set_database          | latin1                                    |
| character_set_results           | latin1                                    |
| character_set_server            | latin1                                    |
| character_set_system            | utf8                                      |
| character_sets_dir              | /home/jon/bin/mysql/share/mysql/charsets/ |
| collation_connection            | latin1_swedish_ci                         |
| collation_database              | latin1_swedish_ci                         |
| collation_server                | latin1_swedish_ci                         |
| completion_type                 | 0                                         |
| concurrent_insert               | 1                                         |
| connect_timeout                 | 5                                         |
| datadir                         | /home/jon/bin/mysql/var/                  |
| date_format                     | %Y-%m-%d                                  |
| datetime_format                 | %Y-%m-%d %H:%i:%s                         |
| default_week_format             | 0                                         |
| delay_key_write                 | ON                                        |
| delayed_insert_limit            | 100                                       |
| delayed_insert_timeout          | 300                                       |
| delayed_queue_size              | 1000                                      |
| div_precision_increment         | 4                                         |
| engine_condition_pushdown       | OFF                                       |
| expire_logs_days                | 0                                         |
| flush                           | OFF                                       |
| flush_time                      | 0                                         |
| ft_boolean_syntax               | + -&gt;&lt;()~*:""&amp;|                            |
| ft_max_word_len                 | 84                                        |
| ft_min_word_len                 | 4                                         |
| ft_query_expansion_limit        | 20                                        |
| ft_stopword_file                | (built-in)                                |
| group_concat_max_len            | 1024                                      |
| have_archive                    | YES                                       |
| have_bdb                        | NO                                        |
| have_blackhole_engine           | YES                                       |
| have_compress                   | YES                                       |
| have_crypt                      | YES                                       |
| have_csv                        | YES                                       |
| have_example_engine             | NO                                        |
| have_federated_engine           | NO                                        |
| have_geometry                   | YES                                       |
| have_innodb                     | YES                                       |
| have_isam                       | NO                                        |
| have_ndbcluster                 | DISABLED                                  |
| have_openssl                    | NO                                        |
| have_partition_engine           | YES                                       |
| have_query_cache                | YES                                       |
| have_raid                       | NO                                        |
| have_rtree_keys                 | YES                                       |
| have_symlink                    | YES                                       |
| init_connect                    |                                           |
| init_file                       |                                           |
| init_slave                      |                                           |
| innodb_additional_mem_pool_size | 1048576                                   |
| innodb_autoextend_increment     | 8                                         |
| innodb_buffer_pool_awe_mem_mb   | 0                                         |
| innodb_buffer_pool_size         | 8388608                                   |
| innodb_checksums                | ON                                        |
| innodb_commit_concurrency       | 0                                         |
| innodb_concurrency_tickets      | 500                                       |
| innodb_data_file_path           | ibdata1:10M:autoextend                    |
| innodb_data_home_dir            |                                           |
| innodb_doublewrite              | ON                                        |
| innodb_fast_shutdown            | 1                                         |
| innodb_file_io_threads          | 4                                         |
| innodb_file_per_table           | OFF                                       |
| innodb_flush_log_at_trx_commit  | 1                                         |
| innodb_flush_method             |                                           |
| innodb_force_recovery           | 0                                         |
| innodb_lock_wait_timeout        | 50                                        |
| innodb_locks_unsafe_for_binlog  | OFF                                       |
| innodb_log_arch_dir             |                                           |
| innodb_log_archive              | OFF                                       |
| innodb_log_buffer_size          | 1048576                                   |
| innodb_log_file_size            | 5242880                                   |
| innodb_log_files_in_group       | 2                                         |
| innodb_log_group_home_dir       | ./                                        |
| innodb_max_dirty_pages_pct      | 90                                        |
| innodb_max_purge_lag            | 0                                         |
| innodb_mirrored_log_groups      | 1                                         |
| innodb_open_files               | 300                                       |
| innodb_support_xa               | ON                                        |
| innodb_sync_spin_loops          | 20                                        |
| innodb_table_locks              | ON                                        |
| innodb_thread_concurrency       | 20                                        |
| innodb_thread_sleep_delay       | 10000                                     |
| interactive_timeout             | 28800                                     |
| join_buffer_size                | 131072                                    |
| key_buffer_size                 | 8388600                                   |
| key_cache_age_threshold         | 300                                       |
| key_cache_block_size            | 1024                                      |
| key_cache_division_limit        | 100                                       |
| language                        | /home/jon/bin/mysql/share/mysql/english/  |
| large_files_support             | ON                                        |
| large_page_size                 | 0                                         |
| large_pages                     | OFF                                       |
| license                         | GPL                                       |
| local_infile                    | ON                                        |
| locked_in_memory                | OFF                                       |
| log                             | ON                                        |
| log_bin                         | ON                                        |
| log_bin_trust_routine_creators  | OFF                                       |
| log_error                       | /home/jon/bin/mysql/var/master1.err       |
| log_slave_updates               | OFF                                       |
| log_slow_queries                | OFF                                       |
| log_warnings                    | 1                                         |
| long_query_time                 | 10                                        |
| low_priority_updates            | OFF                                       |
| lower_case_file_system          | OFF                                       |
| lower_case_table_names          | 0                                         |
| max_allowed_packet              | 1048576                                   |
| max_binlog_cache_size           | 4294967295                                |
| max_binlog_size                 | 1073741824                                |
| max_connect_errors              | 10                                        |
| max_connections                 | 100                                       |
| max_delayed_threads             | 20                                        |
| max_error_count                 | 64                                        |
| max_heap_table_size             | 16777216                                  |
| max_insert_delayed_threads      | 20                                        |
| max_join_size                   | 4294967295                                |
| max_length_for_sort_data        | 1024                                      |
| max_relay_log_size              | 0                                         |
| max_seeks_for_key               | 4294967295                                |
| max_sort_length                 | 1024                                      |
| max_tmp_tables                  | 32                                        |
| max_user_connections            | 0                                         |
| max_write_lock_count            | 4294967295                                |
| multi_range_count               | 256                                       |
| myisam_data_pointer_size        | 6                                         |
| myisam_max_sort_file_size       | 2147483647                                |
| myisam_recover_options          | OFF                                       |
| myisam_repair_threads           | 1                                         |
| myisam_sort_buffer_size         | 8388608                                   |
| ndb_autoincrement_prefetch_sz   | 32                                        |
| ndb_cache_check_time            | 0                                         |
| ndb_force_send                  | ON                                        |
| ndb_index_stat_cache_entries    | 32                                        |
| ndb_index_stat_enable           | ON                                        |
| ndb_index_stat_update_freq      | 20                                        |
| ndb_use_exact_count             | ON                                        |
| ndb_use_transactions            | ON                                        |
| net_buffer_length               | 16384                                     |
| net_read_timeout                | 30                                        |
| net_retry_count                 | 10                                        |
| net_write_timeout               | 60                                        |
| new                             | OFF                                       |
| old_alter_table                 | OFF                                       |
| old_passwords                   | OFF                                       |
| open_files_limit                | 1024                                      |
| optimizer_prune_level           | 1                                         |
| optimizer_search_depth          | 62                                        |
| pid_file                        | /home/jon/bin/mysql/var/hostname.pid1     |
| port                            | 3306                                      |
| preload_buffer_size             | 32768                                     |
| protocol_version                | 10                                        |
| query_alloc_block_size          | 8192                                      |
| query_cache_limit               | 1048576                                   |
| query_cache_min_res_unit        | 4096                                      |
| query_cache_size                | 0                                         |
| query_cache_type                | ON                                        |
| query_cache_wlock_invalidate    | OFF                                       |
| query_prealloc_size             | 8192                                      |
| range_alloc_block_size          | 2048                                      |
| read_buffer_size                | 131072                                    |
| read_only                       | OFF                                       |
| read_rnd_buffer_size            | 262144                                    |
| relay_log_purge                 | ON                                        |
| relay_log_space_limit           | 0                                         |
| rpl_recovery_rank               | 0                                         |
| secure_auth                     | OFF                                       |
| server_id                       | 1                                         |
| skip_external_locking           | ON                                        |
| skip_networking                 | OFF                                       |
| skip_show_database              | OFF                                       |
| slave_compressed_protocol       | OFF                                       |
| slave_load_tmpdir               | /tmp/                                     |
| slave_net_timeout               | 3600                                      |
| slave_skip_errors               | OFF                                       |
| slave_transaction_retries       | 10                                        |
| slow_launch_time                | 2                                         |
| socket                          | /tmp/mysql.sock                           |
| sort_buffer_size                | 2097144                                   |
| sql_mode                        |                                           |
| sql_notes                       | ON                                        |
| sql_warnings                    | ON                                        |
| storage_engine                  | MyISAM                                    |
| sync_binlog                     | 0                                         |
| sync_frm                        | ON                                        |
| sync_replication                | 0                                         |
| sync_replication_slave_id       | 0                                         |
| sync_replication_timeout        | 10                                        |
| system_time_zone                | EST                                       |
| table_cache                     | 64                                        |
| table_lock_wait_timeout         | 50                                        |
| table_type                      | MyISAM                                    |
| thread_cache_size               | 0                                         |
| thread_stack                    | 196608                                    |
| time_format                     | %H:%i:%s                                  |
| time_zone                       | SYSTEM                                    |
| timed_mutexes                   | OFF                                       |
| tmp_table_size                  | 33554432                                  |
| tmpdir                          |                                           |
| transaction_alloc_block_size    | 8192                                      |
| transaction_prealloc_size       | 4096                                      |
| tx_isolation                    | REPEATABLE-READ                           |
| updatable_views_with_limit      | YES                                       |
| version                         | 5.1.2-alpha-log                           |
| version_comment                 | Source distribution                       |
| version_compile_machine         | i686                                      |
| version_compile_os              | suse-linux                                |
| wait_timeout                    | 28800                                     |
+---------------------------------+-------------------------------------------+
218 rows in set (0.03 sec)
</pre><a class="indexterm" name="id2752453"></a>
			<p>此处描述了大多数系统变量。没有版本的变量在所有<span>MySQL 5.1 </span>
			发布中适用。关于其使用历史信息，请参见<em><span>MySQL 
			5.0</span><span
>参考指南</span></em>和<em><span>MySQL 4.1</span><span>参考指南</span></em>。<span>InnoDB</span>系统变量列于
          <a href="storage-engines.html#innodb-start" title="15.2.4. InnoDB Startup Options">
			15.2.4节，“InnoDB启动选项”</a>。</p>
			<p>若没有另行规定，缓冲区大小、长度和堆栈大小的单位均为字节。</p>
			<p>关于这些变量的调节信息参见<a href="optimization.html#server-parameters" title="7.5.2. Tuning Server Parameters">7.5.2节，“调节服务器参数”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>auto_increment_increment</span></p>
			<p>
			<span>auto_increment_increment</span>和<span>auto_increment_offset</span>用于主服务器－主服务器（<span>master-to-master</span>）复制，并可以用来控制<span>AUTO_INCREMENT</span>列的操作。两个变量均可以设置为全局或局部变量，并且假定每个值都可以为<span>1</span>到<span>65,535</span>之间的整数值。将其中一个变量设置为<span>0</span>会使该变量为<span>1</span>。如果试图将这些变量设置为大于<span>65,535</span>或小于<span>0</span>的值，则会将该值设置为<span>65,535</span>。如果向将<span>auto_increment_increment</span>或<span><span>auto_increment_off</span><span>set</span></span>设置为非整数值，则会给出错误，并且变量的实际值在这种情况下保持不变。</p>
			<p>这两个变量影响<span>AUTO_INCREMENT</span>列的方式：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			auto_increment_increment</span>控制列中的值的增量值。例如<span>:
			</span></p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SHOW VARIABLES LIKE &#39;auto_inc%&#39;;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_increment | 1&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_offset&nbsp;&nbsp;&nbsp; | 1&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;2 rows in set (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; CREATE TABLE autoinc1 (col INT NOT NULL AUTO_INCREMENT PRIMARY KEY);</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 0 rows affected (0.04 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SET @auto_increment_increment=10;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 0 rows affected (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SHOW VARIABLES LIKE &#39;auto_inc%&#39;;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_increment | 10&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_offset&nbsp;&nbsp;&nbsp; | 1&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;2 rows in set (0.01 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; INSERT INTO autoinc1 VALUES (NULL), (NULL), (NULL), (NULL);</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 4 rows affected (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Records: 4&nbsp; Duplicates: 0&nbsp; Warnings: 0</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SELECT col FROM autoinc1;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| col |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp;&nbsp; 1 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 11 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 21 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 31 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;4 rows in set (0.00 sec)</span></pre>
			<p><span>(</span>注明如何使用<span>SHOW 
			VARIABLES</span>来获取这些变量的当前值）<span>。</span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			auto_increment_offset</span>确定<span>AUTO_INCREMENT</span>列值的起点。假定在与前面的例子的相同的会话中执行下面的命令：</p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SET @auto_increment_offset=5;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 0 rows affected (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SHOW VARIABLES LIKE &#39;auto_inc%&#39;;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_increment | 10&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_offset&nbsp;&nbsp;&nbsp; | 5&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;2 rows in set (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; CREATE TABLE autoinc2 (col INT NOT NULL AUTO_INCREMENT PRIMARY KEY);</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 0 rows affected (0.06 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; INSERT INTO autoinc2 VALUES (NULL), (NULL), (NULL), (NULL);</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 4 rows affected (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Records: 4&nbsp; Duplicates: 0&nbsp; Warnings: 0</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SELECT col FROM autoinc2;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| col |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp;&nbsp; 5 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 15 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 25 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 35 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;4 rows in set (0.02 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp;</span></pre>
			<p>如果<span><span>auto_increment_off</span><span>set</span></span>的值大于<span>auto_increment_increment</span>的值，则<span>auto_increment_offset</span>的值被忽略。</p>
			<p>如果其中一个或两个变量被更改了，然后更改插入到包含<span>AUTO_INCREMENT</span>列的表中的新行，结果可能看上去有问题，由于计算<span>AUTO_INCREMENT</span>系列值时没有考虑列内已经存在的值，并且插入的下一个值是列内最小的值，大于<span>AUTO_INCREMENT</span>列内已有的最大值。换句话说，数值的计算方法为：</p>
			<p>
			<span>auto_increment_offset+ <i>
			N</i> * auto_increment_increment</span></p>
			<p>其中<span><i><span>N</span></i></span>为系列内的正整数值<span>[1,2,3,...]</span>。例如：</p>
			<pre ><span>mysql&gt; </span><span><b><span>SHOW VARIABLES LIKE &#39;auto_inc%&#39;;</span></b></span></pre>
			<pre ><span>+--------------------------+-------+</span></pre>
			<pre ><span>| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre ><span>+--------------------------+-------+</span></pre>
			<pre ><span>| auto_increment_increment | 10&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre ><span>| auto_increment_offset&nbsp;&nbsp;&nbsp; | 5&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre ><span>+--------------------------+-------+</span></pre>
			<pre ><span>2 rows in set (0.00 sec)</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT col FROM autoinc1;</span></b></span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>| col |</span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>|&nbsp;&nbsp; 1 |</span></pre>
			<pre ><span>|&nbsp; 11 |</span></pre>
			<pre ><span>|&nbsp; 21 |</span></pre>
			<pre ><span>|&nbsp; 31 |</span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>4 rows in set (0.00 sec)</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>INSERT INTO autoinc1 VALUES (NULL), (NULL), (NULL), (NULL);</span></b></span></pre>
			<pre ><span>Query OK, 4 rows affected (0.00 sec)</span></pre>
			<pre ><span>Records: 4&nbsp; Duplicates: 0&nbsp; Warnings: 0</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT col FROM autoinc1;</span></b></span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>| col |</span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>|&nbsp;&nbsp; 1 |</span></pre>
			<pre ><span>|&nbsp; 11 |</span></pre>
			<pre ><span>|&nbsp; 21 |</span></pre>
			<pre ><span>|&nbsp; 31 |</span></pre>
			<pre ><span>|&nbsp; 35 |</span></pre>
			<pre ><span>|&nbsp; 45 |</span></pre>
			<pre ><span>|&nbsp; 55 |</span></pre>
			<pre ><span>|&nbsp; 65 |</span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>8 rows in set (0.00 sec)</span></pre>
			<p>
			<span>auto_increment_increment</span>和<span>auto_increment_offset</span>所示的值可以生成系列<span>5 
			+ </span><span><i>
			<span>N</span></i></span><span> 
			* 10,</span>即，<span>[5,15,25,35,45,...]</span>。在<span>INSERT</span>前<span>col</span><span>
			</span>列内最大的值为<span>31,</span><span>AUTO_INCREMENT</span>数列的下一个值为<span>35,</span>因此<span>col</span>中插入的值从该点开始，结果如<span>SELECT</span>查询所示。</p>
			<p>
			一定要记住不可能将这两个变量的结果限制到一个表中，因此不会替代其它数据库管理系统提供的序列；这些变量控制<span>MySQL</span>服务器上<strong><span>all</span></strong>表<span>AUTO_INCREMENT</span>列的所有行为。如果某个变量设为全局变量，则只有通过局部设置将全局值更改和覆盖后或<strong><span>mysqld</span></strong>重启后其作用方可改变；如果局部设置，则新值影响所有表的<span>AUTO_INCREMENT</span>列，在这个会话期间当前用户在这些表中插入了新行，除非在会话期间更改了这些值。</p>
			<p>
			<span>auto_increment_increment</span>的
			默认值为<span>1</span>。参见<a href="replication.html#replication-auto-increment" title="6.12. Auto-Increment in Multi-Master Replication">6.12节，“多服务器复制中的Auto-Increment”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>auto_increment_offset</span></p>
			<p>该变量的默认值为<span>1</span>。详见<span>auto_increment_increment</span>的描述。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>back_log</span></p>
			<p><span>MySQL</span>有的主要连接请求的数量。当主<span>MySQL</span>线程在短时间内得到许多连接请求时发挥作用。主线程需要花一些时间<span>(</span>尽管很少<span>)</span>来检查连接并启动一个新线程。<span>back_log</span>值说明<span>MySQL</span>临时停止响应新请求前在短时间内可以堆起多少请求。如果你需要在短时间内允许大量连接，可以增加该数值。</p>
			<p>换句话说，该值为“进”<span>TCP/IP</span>连接帧听队列的大小。操作系统有该队列自己的限制值。本手册中<span>Unix
			</span><span>listen()</span>系统调用页应有更详细的信息。该变量最大值请查阅<span>OS</span>文档。企图将<span>back_log</span>设置为高于你的操作系统限值是徒劳无益的。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>basedir</span></p>
			<p><span>MySQL</span>安装基准目录。可以用<span>--basedir</span>选项设置该变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_cache_size</span></p>
			<p>为<span>BDB</span>表缓存索引和行分配的缓冲区的大小。如果你不使用<span>BDB</span>表，你应用<span>--skip-bdb</span>启动<strong><span>mysqld</span></strong>以便不浪费该缓存。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>bdb_home</span></p>
			<p>
			<span>BDB</span>表基准目录。应与<span>datadir</span>变量的值相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_log_buffer_size</span></p>
			<p>为<span>BDB</span>表缓存索引和行分配的缓冲区的大小。如果你不使用<span>BDB</span>表，你应将该值设置为<span>0</span>或用<span>--skip-bdb</span>启动<strong><span>mysqld</span></strong>以便不浪费该缓存。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_logdir</span></p>
			<p>
			<span>BDB</span>存储引擎写它日志文件的目录。可以用<span>--bdb-logdir</span>选项设置该变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_max_lock</span></p>
			<p>在<span>BDB</span>表下可以激活的最大锁数<span>(</span>默认为<span>10,000)</span>。如果当你执行长事务或当<strong><span>mysqld</span></strong>必须检查许多行来计算查询时出现下面的错误，你应增加该值：</p>
			<pre ><span>bdb: Lock table is out of available locks</span></pre>
			<pre ><span>Got error 12 from ...</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_shared_data</span></p>
			<p>如果你正使用<span>--bdb-shared-data</span>应为<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>bdb_tmpdir</span></p>
			<p>
			<span>--bdb-tmpdir</span>选项的值。</p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			binlog_cache_size</span></p>
			<p>在事务过程中容纳二进制日志<span>SQL</span>语句的缓存大小。二进制日志缓存是服务器支持事务存储引擎并且服务器启用了二进制日志<span>(</span><span>--log-bin</span>选项<span>)</span>的前提下为每个客户端分配的内存。如果你经常使用大的，多语句事务，你可以增加该值以获得更有的性能。<span>Binlog_cache_use</span>和<span>Binlog_cache_disk_use</span>状态变量可以用来调整该变量的大小。参见<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3节，“二进制日志”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bulk_insert_buffer_size</span></p>
			<p>
			<span>MyISAM</span><span>
			</span>使用专用树状缓存来使<span>INSERT 
			... SELECT</span>、<span><span>INSERT 
			... VALUES (...)</span>、<span>(...)</span>、<span> 
			...</span></span>和<span>LOAD 
			DATA INFILE</span>的大块插入更快。该变量用每线程的字节数限制缓存树的大小。将它设置为<span>0</span>禁用优化。<strong><span>注</span></strong>释：只有向非空表添加数据时才使用该缓存。
			默认值是<span>8MB</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			character_set_client</span></p>
			<p>来自客户端的语句的字符集。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			character_set_connection</span></p>
			<p>用于没有字符集导入符的文字和数字－字符串转换。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			character_set_database</span></p>
			<p>
			默认数据库使用的字符集。当默认数据库更改时，服务器则设置该变量。如果没有默认数据库，变量的值同<span>character_set_server</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>character_set_results</span></p>
			<p>用于向客户端返回查询结果的字符集。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>character_set_</span><span> 
			server</span></span></p>
			<p>服务器的默认字符集。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>character_set_</span><span>system</span></span></p>
			<p>服务器用来保存识别符的字符集。该值一定是<span>utf8</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			character_sets_dir</span></p>
			<p>字符集安装目录。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			collation_connection</span></p>
			<p>连接字符集的校对规则。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			collation_database</span></p>
			<p>
			默认数据库使用的校对规则。当默认数据库改变时服务器则设置该变量。如果没有默认数据库，变量的值同<span>collation_server</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			collation_server</span></p>
			<p>服务器的默认校对规则。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>completion_type</span></p>
			<p>事务结束类型：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>如果该值为<span>0(</span>默认<span>)</span>，<span>COMMIT</span>和<span>ROLLBACK</span>不受影响。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>如果该值为<span>1</span>，<span>COMMIT</span>和<span>ROLLBACK</span>分别等同于<span>COMMIT 
			AND CHAIN</span>和<span>ROLLBACK 
			AND CHAIN</span>。<span>(</span>新事务用刚刚结束的事务相同的间隔等级立即启动）<span>。
			</span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>如果该值为<span>2</span>，<span>COMMIT</span>和<span>ROLLBACK</span>分别等同于<span><span>COMM</span><span>它<span>RELEASE</span></span></span>和<span>ROLLBACK 
			RELEASE</span>。<span>(</span>事务终止后，服务器断开）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			concurrent_insert</span></p>
			<p>如果为<span>ON</span><span>(</span>默认值<span>)</span>，<span>MySQL</span>允许<span>INSERT</span>和<span>SELECT</span>语句在中间没有空数据块的<span>MyISAM</span>表中并行运行。你可以用<span>--safe</span>或<span>--skip-new</span>启动<strong><span>mysqld</span></strong>关闭该选项。</p>
			<p>该变量为整数，有<span>3</span>个值：</p>
			<table border="1" cellpadding="0" id="table4">
				<tr>
					<td width="44" style="width:33.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>值</span></strong></td>
					<td width="866" style="width:649.85pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td width="44" style="width:33.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>0</span></td>
					<td width="866" style="width:649.85pt;padding:.75pt .75pt .75pt .75pt">
					<p>关</td>
				</tr>
				<tr>
					<td width="44" style="width:33.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>1</span></td>
					<td width="866" style="width:649.85pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>(</span>默认<span>)</span>在没有空数据块的<span>MyISAM</span>表中启用并行插入</td>
				</tr>
				<tr>
					<td width="44" style="width:33.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>2</span></td>
					<td width="866" style="width:649.85pt;padding:.75pt .75pt .75pt .75pt">
					<p>为所有<span>MyISAM</span>表启用并行插入。如果表有空记录或正被另一线程使用，新行将插入到表的最后。如果表未使用，<span>MySQL</span>将进行普通读锁定并将新行插入空记录。</td>
				</tr>
			</table>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>connect_timeout</span></p>
			<p><strong>
			<span>mysqld</span><span>服务器</span></strong>用<span>Bad 
			handshake</span>响应前等待连接包的秒数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>datadir</span></p>
			<p><span>MySQL</span>数据目录。可以用<span>--datadir</span>选项设置该变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			date_format</span></p>
			<p>该变量未使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			datetime_format</span></p>
			<p>该变量未使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>default_week_format</span></p>
			<p>
			<span>WEEK()</span><span>
			</span>函数使用的默认模式。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			delay_key_write</span></p>
			<p>该选项只适用<span>MyISAM</span>表。它具有下述值可以影响<span>CREATE 
			TABLE</span>语句使用的<span>DELAY_KEY_WRITE</span>表选项的处理。</p>
			<table border="1" cellpadding="0" id="table5">
				<tr>
					<td>
					<p><strong><span>选项</span></strong></td>
					<td>
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>OFF</span></td>
					<td>
					<p>
					<span>DELAY_KEY_WRITE</span>被忽略。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>ON</span></td>
					<td>
					<p><span>MySQL</span>在<span>CREATE 
					TABLE</span>中用<span>DELAY_KEY_WRITE</span>选项。这是
					默认值。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>ALL</span></td>
					<td>
					<p>用启用<span>DELAY_KEY_WRITE</span>选项创建表的相同方法对所有新打开表的进行处理。</td>
				</tr>
			</table>
			<p>如果启用了<span>DELAY_KEY_WRITE</span>，说明使用该项的表的键缓冲区在每次更新索引时不被清空，只有关闭表时才清空。遮掩盖可以大大加快键的写操作，但如果你使用该特性，你应用<span>--myisam-recover</span>选项启动服务器，为所有<span>MyISAM</span>表添加自动检查<span>(</span>例如，<span>--myisam-recover=BACKUP,FORCE</span><span>)</span>。参见<a href="database-administration.html#server-options" title="5.3.1. mysqld Command-Line Options">5.3.1节，“<span><strong class="command">mysqld</strong></span>命令行选项”</a>和<a href="storage-engines.html#myisam-start" title="15.1.1. MyISAM Startup Options">15.1.1节，“MyISAM启动选项”</a>。</p>
			<p>请注意<span>--external-locking</span>不为使用延迟键写入的表提供索引破坏保护。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			delayed_insert_limit</span></p>
			<p>插入<span>delayed_insert_limit</span><span>
			</span>延迟行后，<span>INSERT 
			DELAYED</span><span> </span>处理器线程检查是否有挂起的<span>SELECT</span>语句。如果有，在继续插入延迟的行之前，允许它们先执行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			delayed_insert_timeout</span></p>
			<p>
			<span>INSERT DELAYED</span>处理器线程终止前应等待<span>INSERT</span>语句的时间。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>delayed_queue_size</span></p>
			<p>这是各个表中处理<span>INSERT 
			DELAYED</span>语句时队列中行的数量限制。如果队列满了，执行<span>INSERT 
			DELAYED</span>语句的客户端应等待直到队列内再有空间。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>div_precision_increment</span></p>
			<p>该变量说明用<span>/</span>操作符执行除操作的结果可增加的精确度的位数。
			默认值是<span>4</span>。最小和最大值分别为<span>0</span>和<span>30</span>。下面的示例说明了增加
			默认值的结果。</p>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT 1/7;</span></b></span></pre>
			<pre ><span>+--------+</span></pre>
			<pre ><span>| 1/7&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre ><span>+--------+</span></pre>
			<pre ><span>| 0.1429 |</span></pre>
			<pre ><span>+--------+</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SET div_precision_increment = 12;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT 1/7;</span></b></span></pre>
			<pre ><span>+----------------+</span></pre>
			<pre ><span>| 1/7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre ><span>+----------------+</span></pre>
			<pre ><span>| 0.142857142857 |</span></pre>
			<pre ><span>+----------------+</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			engine_condition_pushdown</span></p>
			<p>该变量适用于<span>NDB</span>。默认值为<span>0(</span><span>OFF</span><span>)</span>：如果你执行类似查询<span>SELECT 
			* FROM t WHERE mycol = 42</span>，其中<span>mycol</span>为没有索引的列，当满了的表扫描每个<span>NDB</span>节点时，执行该查询。每个节点使用<span>WHERE</span>条件将每一行发送给<span>MySQL</span>服务器。如果<span>engine_condition_pushdown</span>被设置为<span>1(</span><span>ON</span><span>)</span>，该条件“<span class="quote"><span>pushed 
			down</span></span>”给存储引擎并发送给<span>NDB</span>节点。每个节点都执行扫描，并只向<span>MySQL</span>服务器发送回匹配条件的行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			expire_logs_days</span></p>
			<p>二进制日志自动删除的天数。默认值为<span>0,</span>表示“没有<span class="quote">自动删除</span>”。启动时和二进制日志循环时可能删除。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>flush</span></p>
			<p>如果用<span>--flush</span>选项启动<strong><span>mysqld</span></strong>该值为<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			flush_time</span></p>
			<p>如果设为非零值，每隔<span>flush_time</span>秒则关闭所有表以释放硬盘资源并同步未清空的数据。我们建议只在<span>Windows 
			9x</span>或<span>Me</span>，或有最小资源的系统中使用该选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			ft_boolean_syntax</span></p>
			<p>使用<span>IN 
			BOOLEAN MODE</span>执行的布尔全文搜索支持的操作符系列。参见<a href="functions.html#fulltext-boolean" title="12.7.1. Boolean Full-Text Searches">12.7.1节，“布尔全文搜索”</a>。</p>
			<p>默认变量值为 
			<span>&#39;+ -&gt;&lt;()~*:&quot;&quot;&amp;|&#39;</span>。更改这些值的规则是：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>操作符函数由其在字符串内的位置决定。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>替换值必须是<span>14</span>个字符。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>每个字符必须为<span>ASCII</span>码非文字数字字符。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>第<span>1</span>个或第<span>2</span>个字符必须为空格。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>除非语句在第<span>11</span>个字符和第<span>12</span>个字符处引用了操作符，否则不允许复制。这两个字符可以不相同，但这是唯一可能的两个。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>位置<span>10</span>、<span>13</span>和<span>14(</span>默认设置为‘<span>:</span>’、‘<span>&amp;</span>’和‘<span>|</span>’<span>)</span>保留用于将来扩展。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ft_max_word_len</span></p>
			<p>
			<span>FULLTEXT</span>索引中所包含的字的最大长度。</p>
			<p><strong>
			<span>注</span></strong>释：更改该变量后必须重建<span>FULLTEXT</span>索引。应使用<span>REPAIR 
			TABLE <i>tbl_name</i> QUICK</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ft_min_word_len</span></p>
			<p>
			<span>FULLTEXT</span>索引中所包含的字的最小长度。</p>
			<p><strong>
			<span>注</span></strong>释：更改该变量后必须重建<span>FULLTEXT</span>索引。应使用<span>REPAIR 
			TABLE <i>tbl_name</i> QUICK</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			ft_query_expansion_limit</span></p>
			<p>使用<span>WITH 
			QUERY EXPANSION</span>进行全文搜索的最大匹配数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			ft_stopword_file</span></p>
			<p>
			用于读取全文搜索的停止字清单的文件。该文件中的所有字都会用到；注释不重要。默认情况下，使用内嵌式停止字清单<span>(</span>如<span>myisam/ft_static.c</span>文件中所定义<span>)</span>。将该变量设置为空字符串<span>(</span><span>&#39;&#39;</span><span>)</span>则禁用停止字过滤。</p>
			<p><strong>
			<span>注</span></strong>释：更改该变量或停止字文件的内容后必须重建<span>FULLTEXT</span>索引。应使用<span>REPAIR 
			TABLE <i>tbl_name</i> QUICK</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			group_concat_max_len</span></p>
			<p>允许的<span>GROUP_CONCAT()</span>函数结果的最大长度。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_archive</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持<span>ARCHIVE</span>表则为<span>YES</span>，否则为<span>NO</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_bdb</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持<span>BDB</span>表则为<span>YES</span>。如果使用<span>--skip-bdb</span>则为<span>DISABLED</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_blackhole_engine</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持<span>BLACKHOLE</span>表则为<span>YES</span>，否则为<span>NO</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_compress</span></p>
			<p>是否<span>zlib</span>压缩库适合该服务器。如果不适合，不能使用<span>COMPRESS()</span>和<span>UNCOMPRESS()</span>函数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_crypt</span></p>
			<p>是否<span>crypt()</span>系统调用适合该服务器。如果不适合，不能使用<span>CRYPT()</span>函数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_csv</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持<span>ARCHIVE</span>表则为<span>YES</span>，否则为<span>NO</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			have_example_engine</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持<span>EXAMPLE</span>表则为<span>YES</span>，否则为<span>NO</span>。</p>
			<p>
			<span>have_federated_engine</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持<span>FEDERATED</span>表则为<span>YES</span>，否则为<span>NO</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			have_geometry</span></p>
			<p>是否服务器支持空间数据类型。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_innodb</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持<span>InnoDB</span>表则为<span>YES</span>。如果使用<span>--skip-innodb</span>则为<span>DISABLED</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_isam</span></p>
			<p>在<span>MySQL 5.1</span>中<span>,</span>只是为了向后兼容显示该值，并且总是<span>NO</span>，因为不再支持<span>ISAM</span>表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_ndbcluster</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持<span>NDB 
			CLUSTER</span>表则为<span>YES</span>。如果使用了<span>--skip-ndbcluster</span>则为<span>DISABLED</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_partition_engine</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持分区则为<span>YES</span>。在<span>MySQL 
			5.1.1</span>中加入。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_openssl</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持客户端<span>/</span>服务器协议的<span>SSL(</span>加密<span>)</span>则为<span>YES</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			have_query_cache</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持查询缓存则为<span>YES</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_raid</span></p>
			<p>如果<strong><span>mysqld</span></strong>支持<span>RAID</span>选项则为<span>YES</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>have_rtree_</span><span>keys</span></span></p>
			<p>
			<span>RTREE</span>索引是否可用。<span>(</span>用于<span>MyISAM</span>表的空间索引）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			have_symlink</span></p>
			<p>是否启用符号链接支持。在<span>Unix</span>中需要用于支持<span>DATA 
			DIRECTORY</span>和<span>INDEX 
			DIRECTORY</span>表选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>init_connect</span></p>
			<p>服务器为每个连接的客户端执行的字符串。字符串由一个或多个<span>SQL</span>语句组成。要想指定多个语句，用分号间隔开。例如，每个客户端开始时默认启用<span>autocommit</span>模式。没有全局服务器变量可以规定<span>autocommit</span>默认情况下应禁用，但可以用<span>init_connect</span>来获得相同的效果：</p>
			<pre ><span>SET GLOBAL init_connect=&#39;SET AUTOCOMMIT=0&#39;;</span></pre>
			<p>
			还可以在命令行或选项文件中设置该变量。要想使用选项文件设置变量，应包括下述行：</p>
			<pre ><span>[mysqld]</span></pre>
			<pre ><span>init_connect=&#39;SET AUTOCOMMIT=0&#39;</span></pre>
			<p>请注意<span>init_connect</span>的内容并不为拥有<span>SUPER</span>权限的用户执行；实际是内容设置错误<span>(</span>包含错误查询，例如语法错误<span>)</span>，这样使所有连接失败。不为<span>SUPER</span>用户执行，使<span>SUPER</span>用户可以打开连接并固定<span>init_connect</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>init_file</span></p>
			<p>启动服务器时用<span>--init-file</span>选项指定的文件名。文件中包含服务器启动时要执行的<span>SQL</span>语句。每个语句必须在同一行中并且不能包括注释。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>init_slave</span></p>
			<p>该变量类似<span>init_connect</span>，但是每次<span>SQL</span>线程启动时从服务器应执行该字符串。该字符串的格式与<span>init_connect</span>变量相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>innodb_<i>xxx</i></span></p>
			<p>
			<span>InnoDB</span>系统变量列入<a href="storage-engines.html#innodb-start" title="15.2.4. InnoDB Startup Options">15.2.4节，“InnoDB启动选项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>interactive_timeout</span></p>
			<p>服务器关闭交互式连接前等待活动的秒数。交互式客户端定义为在<span>mysql_real_connect()</span>中使用<span>CLIENT_INTERACTIVE</span>选项的客户端。又见<span>wait_timeout</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			join_buffer_size</span></p>
			<p>用于完全联接的缓冲区的大小<span>(</span>当不使用索引的时候使用联接操作<span>)</span>。一般情况获得快速联接的最好方法是添加索引。当增加索引时不可能通过增加<span>join_buffer_size</span>值来获得快速完全联接。将为两个表之间的每个完全联接分配联接缓冲区。对于多个表之间不使用索引的复杂联接，需要多联接缓冲区。</p>
			<p>
			<span>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>key_buffer_size</span></span></p>
			<p>
			<span>MyISAM</span>表的索引块分配了缓冲区，由所有线程共享。<span>key_buffer_size</span>是索引块缓冲区的大小。键值缓冲区即为键值缓存。</p>
			<p>
			<span>key_buffer_size</span>的最大允许设定值为<span>4GB</span>。有效最大值可以更小，取决于可用物理<span>RAM</span>和操作系统或硬件平台强加的每个进程的<span>RAM</span>限制。</p>
			<p>增加该值，达到你可以提供的更好的索引处理<span>(</span>所有读和多个写操作<span>)</span>。通常为主要运行<span>MySQL</span>的机器内存的<span>25%</span>。但是，如果你将该值设得过大<span>(</span>例如，大于总内存的<span>50%)</span>，系统将转换为页并变得极慢。<span>MySQL</span>依赖操作系统来执行数据读取时的文件系统缓存，因此你必须为文件系统缓存留一些空间。</p>
			<p>同时写多行时要想速度更快，应使用<span>LOCK 
			TABLES</span>。参见<a href="sql-syntax.html#lock-tables" title="13.4.5. LOCK TABLES and UNLOCK TABLES Syntax">13.4.5节，“LOCK 
				TABLES和UNLOCK TABLES语法”</a>。</p>
			<p>你可以通过执行<span>SHOW 
			STATUS</span>语句并检查<span>Key_read_requests</span>、<span>Key_reads</span>、<span>Key_write_requests</span>和<span>Key_writes</span>状态变量来检查键值缓冲区的性能。参见<a href="sql-syntax.html#show" title="13.5.4. SHOW Syntax">13.5.4节，“SHOW语法”</a>。</p>
			<p>
			<span>Key_reads/Key_read_requests</span>比例一般应小于<span>0.01</span>。如果你使用更新和删除，<span>Key_writes/Key_write_requests</span>比例通常接近<span>1</span>，但如果你更新时会同时影响到多行或如果你正使用<span>DELAY_KEY_WRITE</span>表选项，可能小得多。</p>
			<p>用<span>key_buffer_size</span>结合<span>Key_blocks_unused</span>状态变量和缓冲区块大小，可以确定使用的键值缓冲区的比例。从<span>key_cache_block_size</span>服务器变量可以获得缓冲区块大小。使用的缓冲区的比例为：</p>
			<pre ><span>1 - ((Key_blocks_unused * key_cache_block_size) / key_buffer_size)</span></pre>
			<p>该值为约数，因为键值缓冲区的部分空间被分配用作内部管理结构。</p>
			<p>可以创建多个<span>MyISAM</span>键值缓存。<span>4GB</span>限制可以适合每个缓存，而不是一个组。参见<a href="optimization.html#myisam-key-cache" title="7.4.6. The MyISAM Key Cache">7.4.6节，“MyISAM键高速缓冲”</a>。</p>
			<p>
			<span>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>key_cache_age_threshold</span></span></p>
			<p>该值控制将缓冲区从键值缓存热子链<span>(sub-chain)</span>降级到温子链<span>(sub-chain)</span>。如果值更低，则降级更快。最小值为<span>100</span>。
			默认值是<span>300</span>。参见<a href="optimization.html#myisam-key-cache" title="7.4.6. The MyISAM Key Cache">7.4.6节，“MyISAM键高速缓冲”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			key_cache_block_size</span></p>
			<p>键值缓存内块的字节大小。默认值是<span>1024</span>。参见<a href="optimization.html#myisam-key-cache" title="7.4.6. The MyISAM Key Cache">7.4.6节，“MyISAM键高速缓冲”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			key_cache_division_limit</span></p>
			<p>
			键值缓存缓冲区链热子链和温子链的划分点。该值为缓冲区链用于温子链的百分比。允许的值的范围为<span>1</span>到<span>100</span>。
			默认值是<span>100</span>。参见<a href="optimization.html#myisam-key-cache" title="7.4.6. The MyISAM Key Cache">7.4.6节，“MyISAM键高速缓冲”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>language</span></p>
			<p>错误消息所用语言。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span><span>large_file_support</span></p>
			<p><strong>
			<span>mysqld</span></strong>编译时是否使用了大文件支持选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>large_pages</span></p>
			<p>说明是否启用了大页面支持。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>license</span></p>
			<p>服务器的许可类型。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			local_infile</span></p>
			<p>是否<span>LOCAL</span>支持<span>LOAD 
			DATA INFILE</span>语句。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			locked_in_memory</span></p>
			<p>是否用<span><span>–</span><span>memlock</span></span>将<strong><span>mysqld</span></strong>锁在内存中。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>log</span></p>
			<p>是否启用将所有查询记录到常规查询日志中。参见<a href="database-administration.html#query-log" title="5.11.2. The General Query Log">5.11.2节，“通用查询日志”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>log_bin</span></p>
			<p>是否启用二进制日志。参见<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3节，“二进制日志”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>log_bin_trust_routine_creators</span></p>
			<p>
			若启用了二进制记录，则该变量适用。它控制是否可以信任保存的程序的作者不会创建向二进制日志写入不安全事件的程序。如果设置为<span>0(</span>默认情况<span>)</span>，不允许用户创建或修改保存的程序，除非他们不仅拥有<span>CREATE 
			ROUTINE</span>或<span>ALTER 
			ROUTINE</span>权限还拥有<span>SUPER</span>权限。</p>
			<p>设置为<span>0</span>还强制限制，程序必须用<span>DETERMINISTIC</span><span>
			</span>特征或用<span>READS SQL 
			DATA</span>或<span>NO 
			SQL</span>特征声明。如果变量设置为<span>1,MySQL</span>不对保存程序的创建强加限制。</p>
			<p>参见<a href="stored-procedures.html#stored-procedure-logging" title="20.4. Binary Logging of Stored Routines and Triggers">20.4节，“存储子程序和触发程序的二进制日志功能”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			log_error</span></p>
			<p>错误日志的位置。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			log_slave_updates</span></p>
			<p>
			是否从服务器从主服务器收到的更新应记入从服务器自己的二进制日志。要想生效，必须启用从服务器的二进制记录。参见<a href="replication.html#replication-options" title="6.8. Replication Startup Options">6.8节，“复制启动选项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			log_slow_queries</span></p>
			<p>是否记录慢查询。用<span>long_query_time</span>变量的值来确定“慢查询”。参见<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4节，“慢速查询日志”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			log_warnings</span></p>
			<p>是否产生其它警告消息。默认情况下启用。放弃的连接不记入错误日志，除非值大于<span>1</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			long_query_time</span></p>
			<p>如果查询时间超过该值，则增加<span>Slow_queries</span>状态变量。如果你正使用<span>--log-slow-queries</span>选项，则查询记入慢查询日志文件。用实际时间测量该值，而不是<span>CPU</span>时间，因此低于轻负载系统阈值的查询可能超过重负载系统的阈值。参见<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4节，“慢速查询日志”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			low_priority_updates</span></p>
			<p>如果设置为<span>1</span>，所有<span><span>INSERT</span>、<span>UPDATE</span>、<span>DELETE</span></span>和<span>LOCK 
			TABLE WRITE</span>语句将等待直到受影响的表没有挂起的<span>SELECT</span>或<span>LOCK 
			TABLE READ</span>。该变量以前叫做<span>sql_low_priority_updates</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			lower_case_file_system</span></p>
			<p>该变量说明是否数据目录所在的文件系统对文件名的大小写敏感。<span>ON</span>说明对文件名的大小写不敏感，<span>OFF</span>表示敏感。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span><span>
			lower_case_table_names</span></p>
			<p>如果设置为<span>1,</span>表名用小写保存到硬盘上，并且表名比较时不对大小写敏感。如果设置为<span>2</span>，按照指定的保存表名，但按照小写来比较。该选项还适合数据库名和表的别名。参见<a href="language-structure.html#name-case-sensitivity" title="9.2.2. Identifier Case Sensitivity">9.2.2节，“识别符大小写敏感性”</a>。</p>
			<p>如果你正使用<span>InnoDB</span>表，你应在所有平台上将该变量设置为<span>1</span>，强制将名字转换为小写。</p>
			<p>如果运行<span>MySQL</span>的系统对文件名的大小写不敏感<span>(</span>例如<span>Windows</span>或<span>Mac 
			OS X)</span>，你不应将该变量设置为<span>0</span>。如果启动时没有设置该变量，并且数据目录所在文件系统对文件名的大小写不敏感，<span>MySQL</span>自动将<span>lower_case_table_names</span>设置为<span>2</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_allowed_packet</span></p>
			<p>包或任何生成的<span>/</span>中间字符串的最大大小。</p>
			<p>包消息缓冲区初始化为<span>net_buffer_length</span>字节，但需要时可以增长到<span>max_allowed_packet</span>字节。该值默认很小，以捕获大的<span>(</span>可能是错误的<span>)</span>数据包。</p>
			<p>如果你使用大的<span>BLOB</span><span>
			</span>列或长字符串，你必须增加该值。应同你想要使用的最大的<span>BLOB</span>一样大。<span>max_allowed_packet</span>的协议限制为<span>1GB</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_binlog_cache_size</span></p>
			<p>如果多语句事务需要更大的内存，你会得到错误<span>Multi-statement 
			transaction required more than &#39;max_binlog_cache_size&#39; bytes of 
			storage</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_binlog_size</span></p>
			<p>
			如果二进制日志写入的内容超出给定值，日志就会发生滚动。你不能将该变量设置为大于<span>1GB</span>或小于<span>4096</span>字节。
			默认值是<span>1GB</span>。</p>
			<p>
			请注意如果你正使用事务：事务以一个块写入二进制日志，因此不不能被几个二进制日志拆分。因此，如果你有大的事务，二进制日志可能会大于<span>max_binlog_size</span>。</p>
			<p>如果<span>max_relay_log_size</span>为<span>0,
			</span>
			<span>max_binlog_size</span>的值也适用<span>于中继日志</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_connect_errors</span></p>
			<p>如果中断的与主机的连接超过该数目，该主机则阻塞后面的连接。你可以用 
			 
			<span>FLUSH HOSTS</span>语句解锁锁定的主机。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_connections</span></p>
			<p>允许的并行客户端连接数目。增大该值则增加<strong><span>mysqld</span></strong><span>
			</span>需要的文件描述符的数量。关于文件描述符限制的注释参见<a href="optimization.html#table-cache" title="7.4.9. How MySQL Opens and Closes Tables">7.4.9节，“MySQL如何打开和关闭表”</a>。还可参见<a href="problems.html#too-many-connections" title="A.2.6. Too many connections">A.2.6节，“连接数过多”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_delayed_threads</span></p>
			<p>不要启动大于该数目的线程来处理<span>INSERT 
			DELAYED</span>语句。如果所有<span>INSERT 
			DELAYED</span>线程已经在使用，你想在新表中插入数据，行 插入时好像未指定<span>DELAYED</span>属性。如果你将该值设置为<span>0,MySQL</span>不会创建线程来处理<span>DELAYED</span>行；其结果是完全禁用了<span>DELAYED</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_error_count</span></p>
			<p>保存由<span>SHOW 
			ERRORS</span>或<span>SHOW 
			WARNINGS</span>显示的错误、警告和注解的最大数目。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_heap_table_size</span></p>
			<p>该变量设置<span>MEMORY</span><span> 
			(</span><span>HEAP</span><span>)</span>表可以增长到的最大空间大小。该变量用来计算<span>MEMORY</span>表的<span>MAX_ROWS</span>值。在已有的<span>MEMORY</span>表上设置该变量没有效果，除非用<span>CREATE 
			TABLE</span>或<span>TRUNCATE 
			TABLE</span>等语句重新创建表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_insert_delayed_threads</span></p>
			<p>该变量为<span>max_delayed_threads</span>的同义词。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_join_size</span></p>
			<p>不允许可能需要检查多于<span>max_join_size</span>行<span>(</span>为单个表语句<span>)</span>或行组合<span>(</span>为多个表语句<span>)</span>或可能执行大于<span>max_join_size</span>次硬盘查询的<span>SELECT</span>语句。通过设置该值，你可以捕获键使用不正确并可能花很长时间的<span>SELECT</span>语句。如果用户想要执行没有<span>WHERE</span>子句的花较长时间或返回数百万行的联接，则设置它。</p>
			<p>将该变量设置为<span>DEFAULT</span>之外的值，将<span>SQL_BIG_SELECTS</span>的值重设为<span><span>0</span><span>。</span></span>如果你重新设置<span>SQL_BIG_SELECTS</span>值，<span>max_join_size</span>变量被忽略。</p>
			<p>
			如果查询结果位于查询缓存中，则不检查结果大小，因为前面已经计算了结果，不会要求服务器将它发送给客户端。</p>
			<p>该变量以前叫做<span>sql_max_join_size</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_length_for_sort_data</span></p>
			<p>确定使用的<span>filesort</span>算法的索引值大小的限值。参见<a href="optimization.html#order-by-optimization" title="7.2.12. How MySQL Optimizes ORDER BY">7.2.12节，“MySQL如何优化ORDER BY<code class="literal"></code>”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_relay_log_size</span></p>
			<p>
			如果复制从服务器写入中继日志时超出给定值，则滚动中继日志。通过该变量你可以对中继日志和二进制日志设置不同的限制。但是，将该变量设置为<span>0</span>，<span>MySQL</span>可以对二进制日志和中继日志使用<span>max_binlog_size</span>。<span>max_relay_log_size</span>必须设置在<span>4096</span>字节和<span>1GB(</span>包括<span>)</span>之间，或为<span>0</span>。
			默认值是<span>0</span>。参见<a href="replication.html#replication-implementation-details" title="6.3. Replication Implementation Details">6.3节，“复制实施细节”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_seeks_for_key</span></p>
			<p>限制根据键值寻找行时的最大搜索数。<span>MySQL</span>优化器假定当用扫描键在表内搜索匹配的行时，不需要超过该数量的键值搜索，而不管键的实际基数是什么<span>(</span>参见<a href="sql-syntax.html#show-index" title="13.5.4.11. SHOW INDEX Syntax">13.5.4.11节，“SHOW 
				INDEX语法”</a><span>)</span>。将该值设置为较低的值<span>(100?)</span>，你可以强制<span>MySQL</span>选择键值而不选择表扫描。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_sort_length</span></p>
			<p>当排序<span>BLOB</span>或<span>TEXT</span>值时使用的字节数。只使用每个值的前<span>max_sort_length</span>字节；其它的被忽略。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_tmp_tables</span></p>
			<p>客户端可以同时打开的临时表的最大数。<span>(</span>但该选项还未生效）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_user_connections</span></p>
			<p>任何给定的<span>MySQL</span>账户允许的最大同时连接数。<span>0</span>值表示“没有<span class="quote">限制</span>”。</p>
			<p>该变量具有全局范围和<span>(</span>只读<span>)</span>会话范围。会话变量的的值与全局变量的值相同，除非当前账户具有非零<span>MAX_USER_CONNECTIONS</span>资源限制。在这种情况下，会话值反应了账户限制。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_write_lock_count</span></p>
			<p>超过写锁定限制后，允许部分读锁定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>myisam_data_pointer_size</span></p>
			<p>默认指针大小，单位是字节，当未指定<span>MAX_ROWS</span>选项时，<span>CREATE 
			TABLE</span>使用该变量创建<span>MyISAM</span>表。该变量不能小于<span>2</span>或大于<span>7</span>。 
			默认值是<span>6</span>。参见<a href="problems.html#full-table" title="A.2.11. The table is full">A.2.11节，“表已满”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>DEPRECATED</span></em>)
			</span>
			<span>
			myisam_max_extra_sort_file_size</span></p>
			<p><strong>
			<span>注</span></strong>释：<span>MySQL 
			5.1</span>不支持该变量。详细信息参见<em><span>MySQL 
			5.0 </span><span>参考手册</span></em>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>myisam_max_sort_file_size</span></p>
			<p>重建<span>MyISAM</span>索引<span>(</span>在<span>REPAIR 
			TABLE</span>、<span>ALTER 
			TABLE</span>或<span>LOAD 
			DATA INFILE</span>过程中<span>)</span>时，允许<span>MySQL</span>使用的临时文件的最大空间大小。如果文件的大小超过该值，则使用键值缓存创建索引，要慢得多。该值的单位为字节。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			myisam_recover_options</span></p>
			<p>
			<span>--myisam-recover</span>选项的值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			myisam_repair_threads</span></p>
			<p>如果该值大于<span>1</span>，在<span>Repair 
			by sorting</span>过程中并行创建<span>MyISAM</span>表索引<span>(</span>每个索引在自己的线程内<span>)</span>。
			默认值是<span>1</span>。<strong><span>注</span></strong>释：多线程维护仍然是<em><span>alpha</span></em><span>
			</span>编码。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			myisam_sort_buffer_size</span></p>
			<p>当在<span>REPAIR 
			TABLE</span>或用<span>CREATE 
			INDEX</span>创建索引或<span>ALTER 
			TABLE</span>过程中排序 
			<span>MyISAM</span>索引分配的缓冲区。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>myisam_stats_method</span></p>
			<p>当为<span>MyISAM</span>表搜集关于索引值分发的统计信息时服务器如何处理<span>NULL</span>值。该变量有两个可能的值，<span>nulls_equal</span>和<span>nulls_unequal</span>。对于<span>nulls_equal</span>，认为所有<span>NULL</span>索引值时相等的，并形成一个数值组，其空间大小等于<span>NULL</span>值的数。对于<span>nulls_unequal</span>，<span>NULL</span>值认为是不相等的，每个<span>NULL</span>形成一个数值组，大小为<span>1</span>。</p>
			<p>方法用于生成表统计信息，影响优化器如何选择索引来执行查询，详细描述见<a href="optimization.html#myisam-index-statistics" title="7.4.7. MyISAM Index Statistics Collection">7.4.7节，“MyISAM索引统计集合”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			multi_read_range</span></p>
			<p>指定范围选择过程中发送到存储引擎的范围的最大值。默认值是<span>256</span>。向引擎发送多个范围可以大大改进某些选择的性能，特别是对<span>NDBCLUSTER</span>。该引擎需要向所有节点发送范围请求，同时发送许多请求可以大大降低通信成本。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			named_pipe</span></p>
			<p><span>(</span>只适用<span>Windows)</span>说明服务器是否支持命名管道连接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			net_buffer_length</span></p>
			<p>
			在查询之间将通信缓冲区重设为该值。一般情况不应改变，但如果内存很小，可以将它设置为期望的客户端发送的<span>SQL</span>语句的长度。如果语句超出该长度，缓冲区自动扩大，直到<span>max_allowed_packet</span>字节。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			net_read_timeout</span></p>
			<p>中断读前等待连接的其它数据的秒数。当服务器从客户端读数时，<span>net_read_timeout</span>指控制何时中断的超时值。当服务器向客户端写时，<span>net_write_timeout</span>指控制何时中断的超时值。又见<span>slave_net_timeout</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			net_retry_count</span></p>
			<p>如果某个通信端口的读操作中断了，在放弃前重试多次。在<span>FreeBSD</span>中该值应设得很高，因为内部中断将发送至所有线程。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>net_write_timeout</span></p>
			<p>中断写之前等待块写入连接的秒数。又见<span>net_read_timeout</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>new</span></p>
			<p>在<span>MySQL 4.0</span>中使用该变量来打开<span>4.1</span>中的一些行为，并用于向后兼容性。在<span>MySQL 
			5.1</span>中<span>,</span>它的值一直是<span>OFF.</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			old_passwords</span></p>
			<p>是否服务器应为<span>MySQL</span>用户账户使用<span>pre-4.1-style</span>密码。参见<a href="problems.html#old-client" title="A.2.3. Client does not support authentication protocol">A.2.3节，“客户端不支持鉴定协议”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>one_shot</span></p>
			<p>这不是一个变量，但当设置变量是可以使用它。其描述见<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3节，“SET语法”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>one_shot</span></p>
			<p>这不是一个变量，但当设置变量是可以使用它。其描述见<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3节，“SET语法”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>open_files_</span><span>limit</span></span></p>
			<p>操作系统允许<strong><span 
>mysqld</span></strong>打开的文件的数量。这是系统允许的实际值，可能与你在启动选项中赋给<strong><span>mysqld</span></strong>的值不同。若在系统中<span>MySQL</span>不能更改打开的文件的数量，则该值为<span>0</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			optimizer_prune_level</span></p>
			<p>在查询优化从优化器搜索空间裁减低希望局部计划中使用的控制方法。<span>0</span>值禁用该方法，以便优化器进行穷举搜索。值为<span>1</span>使优化器根据中间方案中得出的行数来裁减方案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			optimizer_search_depth</span><span> </span></p>
			<p>
			查询优化器进行的搜索的最大深度。如果值大于查询中的关系数则查询方案比较佳，但生成查询执行方案需要的时间更长。值大于查询中的关系数则返回的执行方案更快，但方案远没有优化。如果设置为<span>0,
			</span>系统自动选择合理的值。如果设置为查询中使用的表的最大数加<span>2,</span>优化器转换为<span>MySQL 
			5.0.0(</span>和以前的版本<span>)</span>中使用的算法并搜索。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>pid_file</span></p>
			<p>进程<span>ID (PID)</span>文件的路径名。可以用<span>--pid-file</span>选项设置该变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>plugin_dir</span></p>
			<p>插件目录的路径。在<span>MySQL 5.1.2</span>中加入了该变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>port</span></p>
			<p>服务器帧听<span>TCP/IP</span>连接所用端口。可以用<span>--port</span>选项设置该变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			preload_buffer_size</span></p>
			<p>重载索引时分配的缓冲区大小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			protocol_version</span></p>
			<p><span>MySQL</span>服务器使用的客户端<span>/</span>服务器协议的版本。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_alloc_block_size</span></p>
			<p>
			为查询分析和执行过程中创建的对象分配的内存块大小。如果内存分段过程中遇到问题，将该变量增加一位会有帮助。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_limit</span></p>
			<p>不要缓存大于该值的结果。默认值是<span>1048576(1MB)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_min_res_unit</span></p>
			<p>查询缓存分配的最小块的大小<span>(</span>字节<span>)</span>。
			默认值是<span>4096(4KB)</span>。关于该变量的调节信息参见<a href="database-administration.html#query-cache-configuration" title="5.13.3. Query Cache Configuration">5.13.3节，“查询高速缓冲配置”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_size</span></p>
			<p>为缓存查询结果分配的内存的数量。默认值是<span>0</span>，即禁用查询缓存。请注意即使<span>query_cache_type</span>设置为<span>0</span>也将分配此数量的内存。详细信息参见<a href="database-administration.html#query-cache-configuration" title="5.13.3. Query Cache Configuration">5.13.3节，“查询高速缓冲配置”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_type</span></p>
			<p>设置查询缓存类型。设置<span>GLOBAL</span>值可以设置后面的所有客户端连接的类型。客户端可以设置<span>SESSION</span>值以影响他们自己对查询缓存的使用。下面的表显示了可能的值：</p>
			<table border="1" cellpadding="0" id="table6">
				<tr>
					<td>
					<p><strong><span>选项</span></strong></td>
					<td>
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>0</span>或<span>OFF</span></td>
					<td>
					<p>不要缓存或查询结果。请注意这样不会取消分配的查询缓存区。要想取消，你应将<span>query_cache_size</span>设置为<span>0</span>。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>1</span>或<span>ON</span></td>
					<td>
					<p>缓存除了以<span>SELECT 
					SQL_NO_CACHE</span>开头的所有查询结果。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>2</span>或<span>DEMAND</span></td>
					<td>
					<p>只缓存以<span>SELECT 
					SQL_NO_CACHE</span>开头的查询结果。</td>
				</tr>
			</table>
			<p>该变量默认设为<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_wlock_invalidate</span></p>
			<p>一般情况，当客户端对<span>MyISAM</span>表进行<span>WRITE</span>锁定时，如果查询结果位于查询缓存中，则其它客户端未被锁定，可以对该表进行查询。将该变量设置为<span>1</span>，则可以对表进行<span>WRITE</span>锁定，使查询缓存内所有对该表进行的查询变得非法。这样当锁定生效时，可以强制其它试图访问表的客户端来等待。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_prealloc_size</span></p>
			<p>
			用于查询分析和执行的固定缓冲区的大小。在查询之间该缓冲区不释放。如果你执行复杂查询，分配更大的<span>query_prealloc_size</span>值可以帮助提高性能，因为它可以降低查询过程中服务器分配内存的需求。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			range_alloc_block_size</span></p>
			<p>范围优化时分配的块的大小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			read_buffer_size</span></p>
			<p>每个线程连续扫描时为扫描的每个表分配的缓冲区的大小<span>(</span>字节<span>)</span>。如果进行多次连续扫描，可能需要增加该值，
			默认值为<span>131072</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			read_only</span></p>
			<p>当变量对复制从服务器设置为<span>ON</span>时，从服务器不允许更新，除非通过从服务器的线程或用户拥有<span>SUPER</span>权限。可以确保从服务器不接受客户端的更新命令。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			relay_log_purge</span></p>
			<p>当不再需要中继日志时禁用或启用自动清空中继日志。默认值是<span>1(</span>启用<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			read_rnd_buffer_size</span></p>
			<p>
			当排序后按排序后的顺序读取行时，则通过该缓冲区读取行，避免搜索硬盘。将该变量设置为较大的值可以大大改进<span>ORDER 
			BY</span>的性能。但是，这是为每个客户端分配的缓冲区，因此你不应将全局变量设置为较大的值。相反，只为需要运行大查询的客户端更改会话变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>secure_auth</span></p>
			<p>如果用<span>--secure-auth</span>选项启动了<span>MySQL</span>服务器，它将阻塞有旧格式<span>(4.1</span>之前<span>)</span>密码的所有账户所发起的连接。在这种情况下，该变量的值为<span>ON</span>，否则为<span>OFF</span>。</p>
			<p>如果你想要防止使用旧格式的密码<span>(</span>致使网络通信不安全<span>)</span>，你应启用该选项。</p>
			<p>如果启用该选项并且授权表为<span>pre-4.1</span>格式，服务器启动失败并且会出现错误。参见<a href="problems.html#old-client" title="A.2.3. Client does not support authentication protocol">A.2.3节，“客户端不支持鉴定协议”</a>。</p>
			<p>
			当用于客户端选项时，如果服务器需要该客户端账户的旧格式的密码，则客户端拒绝连接该服务器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			server_id</span></p>
			<p>
			<span>--server-id</span>选项的值。用于主复制服务器和从复制服务器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			shared_memory</span></p>
			<p><span>(</span>只用于<span>Windows)</span>服务器是否允许共享内存连接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			shared_memory_base_name</span></p>
			<p><span>(</span>只用于<span>Windows)</span>说明服务器是否允许共享内存连接，并为共享内存设置识别符。当在单台机器上运行多个<span>MySQL</span>实例时很有用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			skip_external_locking</span></p>
			<p>如果<strong><span>mysqld</span></strong>使用外部锁定，该值为<span>OFF</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>skip_networking</span></p>
			<p>如果服务器只允许本地<span>(</span>非<span>TCP/IP)</span>连接，该值为<span>ON</span>。在<span>Unix</span>中，本地连接使用<span>Unix</span>套接字文件。在<span>Windows</span>中，本地连接使用命名管道或共享内存。在<span>NetWare</span>中，只支持<span>TCP/IP</span>连接，因此不要将该变量设置为<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			skip_show_database</span></p>
			<p>防止不具有<span>SHOW 
			DATABASES</span>权限的人们使用<span>SHOW 
			DATABASES</span>语句。如果你担心用户能够看见属于其它用户的数据库，这样设置可以提高安全性。其效果取决于<span>SHOW 
			DATABASES</span>权限：如果变量值为<span>ON</span>，只允许具有<span>SHOW 
			DATABASES</span>权限的人们使用<span>SHOW 
			DATABASES</span><span> </span>
			语句，并且该语句将显示所有数据库名。如果值为<span>OFF</span>，允许所有用户执行<span>SHOW 
			DATABASES</span>，但只显示用户具有<span>SHOW 
			DATABASES</span>或其它权限的数据库的名称。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>slave_compressed_protocol</span></p>
			<p>如果主、从服务器均支持，确定是否使用从<span>/</span>主压缩协议。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>slave_load_tmpdir</span></p>
			<p>从服务器为复制<span>LOAD 
			DATA INFILE</span>语句创建临时文件的目录名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>slave_net_timeout</span></p>
			<p>放弃读操作前等待主<span>/</span>从连接的更多数据的等待秒数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			slave_skip_errors</span></p>
			<p>从服务器应跳过<span>(</span>忽视<span>)</span>的复制错误。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			slave_transaction_retries</span></p>
			<p>如果由于<span>of</span><span>InnoDB</span>死锁或超过<span>InnoDB</span>的<span>innodb_lock_wait_timeout</span>或<span>NDBCLUSTER</span>的<span>TransactionDeadlockDetectionTimeout</span>或<span><span>TransactionInactiveTimeout</span>，</span>复制从服务器<span>SQL</span>线程未能执行事务，在提示错误并停止前它自动重复<span>slave_transaction_retries</span>次。
			默认值是<span>10</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			slow_launch_time</span></p>
			<p>如果创建线程的时间超过该秒数，服务器增加<span>Slow_launch_threads</span>状态变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>socket</span></p>
			<p><em>
			<span>Unix</span><span>平台</span></em>：用于本地客户端连接的套接字文件。默认为<span>/var/lib/mysql/mysql.sock</span>。</p>
			<p><em>
			<span>Windows</span></em>：用于本地客户端连接的命名管道名。默认为<span>mysql</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			sort_buffer_size</span></p>
			<p>每个排序线程分配的缓冲区的大小。增加该值可以加快<span>ORDER 
			BY</span>或<span>GROUP 
			BY</span>操作。参见<a href="problems.html#temporary-files" title="A.4.4. Where MySQL Stores Temporary Files">A.4.4节，“MySQL将临时文件储存在哪里”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>sql_mode</span></p>
			<p>当前的服务器<span>SQL</span>模式，可以动态设置。参见<a href="database-administration.html#server-sql-mode" title="5.3.2. The Server SQL Mode">5.3.2节，“SQL服务器模式”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>sql_slave_skip_counter</span></p>
			<p>从服务器应跳过的来自主服务器的事件数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>storage_</span><span>engine</span></span></p>
			<p>该变量是<span>table_</span><span>typeis</span>的同义词。在<span>MySQL 
			5.1</span>中<span>,</span>首选<span>storage_engine</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			sync_binlog</span></p>
			<p>如果为正，当每个<span>sync_binlog</span><span>&#39;th</span>写入该二进制日志后，<span>MySQL</span>服务器将它的二进制日志同步到硬盘上<span>(</span><span>fdatasync()</span><span>)</span>。请注意如果在<span>autocommit</span>模式，每执行一个语句向二进制日志写入一次，否则每个事务写入一次。
			默认值是<span>0</span>，不与硬盘同步。值为<span>1</span>是最安全的选择，因为崩溃时，你最多丢掉二进制日志中的一个语句<span>/</span>事务；但是，这是最慢的选择<span>(</span>除非硬盘有电池备份缓存，从而使同步工作较快<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>sync_frm</span></p>
			<p>如果该变量设为<span>1,</span>当创建非临时表时它的<span>.frm</span>文件被同步到硬盘上<span>(</span><span>fdatasync()</span><span>)</span>；这样较慢但出现崩溃时较安全。
			默认值为<span>1</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			system_time_zone</span></p>
			<p>服务器系统时区。当 
			服务器开始执行时，它继承机器默认时区设置值，可以由运行服务器的账户或在启动脚本中进行修改。该值用来设置<span>system_time_zone</span>。典型情况用<span>TZ</span>环境变量来指定时区。还可以用<strong><span>mysqld_safe</span></strong>脚本的<span>--timez</span>选项来指定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			table_cache</span></p>
			<p>所有线程打开的表的数目。增大该值可以增加<strong><span>mysqld</span></strong>需要的文件描述符的数量。你可以检查<span>Opened_tables</span>状态变量来检查你是否需要增加表缓存。参见<a href="database-administration.html#server-status-variables" title="5.3.4. Server Status Variables">5.3.4节，“服务器状态变量”</a>。如果<span>Opened_tables</span>值较大，并且多次执行<span>FLUSH 
			TABLES</span><span>(</span>只是强制关闭所有表并重新<span>)</span>，则应增加<span>table_cache</span>变量的值。</p>
			<p>关于表缓存的详细信息，参见<a href="optimization.html#table-cache" title="7.4.9. How MySQL Opens and Closes Tables">7.4.9节，“MySQL如何打开和关闭表”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			table_type</span></p>
			<p>默认表类型<span>(</span>存储引擎<span>)</span>。要想在服务器启动时设置表类型，使用<span>--default-table-type</span>选项。参见<a href="database-administration.html#server-options" title="5.3.1. mysqld Command-Line Options">5.3.1节，“<span><strong class="command">mysqld</strong></span>命令行选项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			thread_cache_size</span></p>
			<p>服务器应缓存多少线程以便重新使用。当客户端断开连接时，如果线程少于<span>thread_cache_size</span>，则客户端的线程被放入缓存。当请求线程时如果允许可以从缓存中重新利用线程，并且只有当缓存空了时才会创建新线程。如果新连接很多，可以增加该变量以提高性能。<span>(</span>一般情况，如果线程执行得很好，性能提高不明显<span>)</span>。检查<span>Connections</span>和<span>Threads_created</span>状态变量的差<span>(</span>详见<a href="database-administration.html#server-status-variables" title="5.3.4. Server Status Variables">5.3.4节，“服务器状态变量”</a><span>)</span>，你可以看见线程缓存的效率。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			thread_concurrency</span></p>
			<p>在<span>Solaris</span>中，<strong><span>mysqld</span></strong>用该值调用<span>thr_setconcurrency()</span>。该函数使应用程序向线程系统提供需要同时运行的期望的线程数目的提示。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			thread_stack</span></p>
			<p>每个线程的堆栈大小。用<span>crash-me</span>测试检测出的许多限制取决于该值。
			默认值足够大，可以满足普通操作。参见<a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">7.1.4节，“MySQL基准套件”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>time_format</span></p>
			<p>该变量为使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			time_zone</span></p>
			<p>当前的时区。初使值是<span><span>&#39;</span><span>SYSTEM</span><span>&#39;</span></span><span>(</span>使用<span>system_time_zone</span>的值<span>)</span>，但可以用<span>--default-time-zone</span>选项在服务器启动时显式指定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			tmp_table_size</span></p>
			<p>如果内存内的临时表超过该值，<span>MySQL</span>自动将它转换为硬盘上的<span>MyISAM</span>表。如果你执行许多高级<span>GROUP 
			BY</span>查询并且有大量内存，则可以增加<span>tmp_table_size</span>的值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>tmpdir</span></p>
			<p>保存临时文件和临时表的目录。该变量可以设置为几个路径，按<span>round-robin</span>模式使用。在<span>Unix</span>中应该用冒号<span>(</span>‘<span>:</span>’<span>)</span>间隔开路径，在<span>Windows</span>、<span>NetWare</span>和<span>OS/2</span>中用分号<span>(</span>‘<span>；</span>’<span>)</span>。</p>
			<p>用来将负荷分散到几个物理硬盘上。如果<span>MySQL</span>服务器为复制从服务器，你不应将<span>tmpdir</span>设置为指向基于内存的文件系统上的目录或当服务器主机重启时声明的目录。复制从服务器需要部分临时文件来在机器重启后仍可用，以便它可以复制临时表或执行<span>LOAD 
			DATA INFILE</span>操作。如果服务器重启时临时文件夹中的文件丢失了，则复制失败。但是，如果你使用<span>MySQL 
			4.0.0</span>或更新版本，你可以使用 
			<span>slave_load_tmpdir</span>变量设置从服务器的临时目录。在这种情况下，从服务器不再使用常规<span>tmpdir</span>，说明你可以将<span>tmpdir</span>设置到一个非固定位置。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			transaction_alloc_block_size</span></p>
			<p>为保存将保存到二进制日志中的事务的查询而分配的内存块的大小<span>(</span>字节<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			transaction_prealloc_size</span></p>
			<p>为<span>transaction_alloc_blocks</span>分配的固定缓冲区的大小（字节），在两次查询之间不会释放。使该值足够大，将所有查询固定到一个事务中，可以避免多次<span>malloc()</span>调用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			tx_isolation</span></p>
			<p>默认事务隔离级别。默认值为<span>REPEATABLE-READ</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			updatable_views_with_limit</span></p>
			<p>该变量控制如果更新包含<span>LIMIT</span>子句，是否可以在当前表中使用不包含主关键字的视图进行更新。<span>(</span>通常用<span>GUI</span>工具生成这类更新<span>)</span>。更新指<span>UPDATE</span>或<span>DELETE</span>语句。这儿主关键字指<span>PRIMARY 
			KEY</span>，或一个<span>UNIQUE</span>索引，其中任何列不可以包含<span>NULL</span>。</p>
			<p>该变量有两个值：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>1</span>或<span>YES</span>：只发出警告<span>(</span>没有错误消息<span>)</span>。这是
			默认值。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>0</span>或<span>NO</span>：禁止更新。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>version</span></p>
			<p>服务器版本号。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			version_bdb</span></p>
			<p>
			<span>BDB</span>存储引擎版本。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			version_comment</span></p>
			<p><strong>
			<span>configure</span></strong>脚本有一个<span>--with-comment</span>选项，当构建<span>MySQL</span>时可以进行注释。该变量包含注释值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			version_compile_machine</span></p>
			<p><span>MySQL</span>构建的机器或架构的类型。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			version_compile_os</span></p>
			<p><span>MySQL</span>构建的操作系统的类型。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			wait_timeout</span></p>
			<p>服务器关闭非交互连接之前等待活动的秒数。</p>
			<p>在线程启动时，根据全局<span>wait_timeout</span>值或全局<span>interactive_timeout</span>值初始化会话<span>wait_timeout</span>值，取决于客户端类型<span>(</span>由<span>mysql_real_connect()</span>的连接选项<span>CLIENT_INTERACTIVE</span>定义<span>)</span>。又见<span>interactive_timeout</span>。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="dynamic-system-variables"></a>
				5.3.3.1.&nbsp;动态系统变量</h4></div></div></div>
				<p>许多服务器系统变量是动态的，可以使用<span>SET 
				GLOBAL</span>或<span>SET 
				SESSION</span>在运行时设置。你还可以使用<span>SELECT</span>获得它们的值。参见<a href="language-structure.html#system-variables" title="9.4. System Variables">9.4节，“系统变量”</a>。</p>
				<p>下面的表列出了所有动态系统变量。最后<span>1</span>列说明每个变量是否适用<span>GLOBAL</span>或<span>SESSION</span><span>(</span>或二者<span>)</span>。</p>
				<table border="1" cellpadding="0" id="table7">
					<tr>
						<td>
						<p><strong>
						<span>变量名</span></strong></td>
						<td>
						<p><strong>
						<span>值类型</span></strong></td>
						<td>
						<p><strong>
						<span>类型</span></strong></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>autocommit</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>big_tables</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>binlog_cache_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>bulk_insert_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>character_set_client</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>character_set_connection</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span><span>
						</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>character_set_results</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>character_set_server</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>collation_connection</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>collation_server</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>completion_type</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>concurrent_insert</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>connect_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>convert_character_set</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>default_week_format</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>delay_key_write</span></td>
						<td>
						<p>
						<span>OFF</span><span> 
						| </span>
						<span>ON</span><span> |
						</span><span>
						ALL</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>delayed_insert_limit</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>delayed_insert_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>delayed_queue_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>div_precision_increment</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>engine_condition_pushdown</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>error_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>expire_logs_days</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>flush</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>flush_time</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>foreign_key_checks</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>ft_boolean_syntax</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>group_concat_max_len</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>identity</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_autoextend_increment</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_concurrency_tickets</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_max_dirty_pages_pct</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_max_purge_lag</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_support_xa</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_sync_spin_loops</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_table_locks</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_thread_concurrency</span></td>
						<td>
						<p><span>numeric </span>
						<span>GLOBAL</span></td>
						<td>
						<p><span>&nbsp;</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_thread_sleep_delay</span></td>
						<td>
						<p><span>numeric </span>
						<span>GLOBAL</span></td>
						<td>
						<p><span>&nbsp;</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>insert_id</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>interactive_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>join_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>key_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>last_insert_id</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>local_infile</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>log_warnings</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>long_query_time</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>low_priority_updates</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_allowed_packet</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_binlog_cache_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_binlog_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_connect_errors</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_connections</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_delayed_threads</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_error_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_heap_table_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_insert_delayed_threads</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_join_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_relay_log_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_seeks_for_key</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_sort_length</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_tmp_tables</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_user_connections</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_write_lock_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_stats_method</span></td>
						<td>
						<p><span>enum</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>multi_read_range</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_data_pointer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>log_bin_trust_routine_creators</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_max_sort_file_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_repair_threads</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_sort_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>net_buffer_length</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>net_read_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>net_retry_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>net_write_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>old_passwords</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>optimizer_prune_level</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>optimizer_search_depth</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>preload_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_alloc_block_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_cache_limit</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_cache_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_cache_type</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_cache_wlock_invalidate</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_prealloc_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>range_alloc_block_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>read_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>read_only</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>read_rnd_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>rpl_recovery_rank</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>safe_show_database</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>secure_auth</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>server_id</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>slave_compressed_protocol</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>slave_net_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>slave_transaction_retries</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>slow_launch_time</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sort_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_auto_is_null</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_big_selects</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_big_tables</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_buffer_result</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_log_bin</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_log_off</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_log_update</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_low_priority_updates</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_max_join_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_mode</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_notes</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_quote_show_create</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_safe_updates</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_select_limit</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_slave_skip_counter</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>updatable_views_with_limit</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_warnings</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sync_binlog</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sync_frm</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>storage_engine</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>table_cache</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>table_type</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>thread_cache_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>time_zone</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>timestamp</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>tmp_table_size</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>transaction_alloc_block_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>transaction_prealloc_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>tx_isolation</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>unique_checks</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>wait_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>warning_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
				</table>
				<p>标记为<strong><span>string</span></strong>的变量采用字符串值。标记为<strong><span>numeric</span></strong>的变量采用数字值。标记为<strong><span>boolean</span></strong>的变量可以设置为<span>0</span>、<span>1</span>、<span>ON</span>或<span>OFF</span>。标记为<strong><span>enumeration</span></strong>的变量一般情况应设置为该变量的某个可用值，但还可以设置为对应期望的枚举值的数字。对于<span>枚举</span>系统变量，第<span>1</span>个枚举值应对应<span>0</span>。这不同于<span>ENUM</span>列，第<span>1</span>个枚举值对应<span>1</span>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="server-status-variables"></a>
			5.3.4.&nbsp;服务器状态变量</h3></div></div></div><a class="indexterm" name="id2760845"></a><a class="indexterm" name="id2760852"></a>
			<p>服务器维护许多提供操作相关信息的状态变量。你可以通过<span>SHOW 
			STATUS</span>语句查看这些变量和它们的值：</p>
			<pre><span>mysql&gt; </span><span><b><span>SHOW STATUS;</span></b></span></pre>
			<pre><span>+-----------------------------------+------------+</span></pre>
			<pre><span>| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------------------------------+------------+</span></pre>
			<pre><span>| Aborted_clients&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Aborted_connects&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Bytes_received&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 155372598&nbsp; |</span></pre>
			<pre><span>| Bytes_sent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1176560426 |</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>…</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>| Connections&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 30023&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Created_tmp_disk_tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Created_tmp_files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;|</span></pre>
			<pre><span>| Created_tmp_tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>…</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>| Threads_created&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 217&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Threads_running&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 88&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Uptime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1389872&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------------------------------+------------+</span></pre>
			<pre><span>&nbsp;</span></pre>
			<p>用<span>FLUSH STATUS</span>语句可以将许多状态变量重设为<span>0</span>。</p>
			<p>状态变量有以下含义。没有指示版本的变量在<span>MySQL 5.1</span>之前已经出现。关于它们的使用历史，参见<em><span>MySQL 
			5.0</span><span
>参考手册</span></em>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Aborted_clients</span></p>
			<p>由于客户端没有正确关闭连接导致客户端终止而中断的连接数。参见<a href="problems.html#communication-errors" title="A.2.10. Communication Errors and Aborted Connections">A.2.10节，“通信错误和失效连接”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Aborted_connects</span></p>
			<p>试图连接到<span>MySQL</span>服务器而失败的连接数。参见<a href="problems.html#communication-errors" title="A.2.10. Communication Errors and Aborted Connections">A.2.10节，“通信错误和失效连接”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Binlog_cache_disk_use</span></p>
			<p>使用临时二进制日志缓存但超过<span>binlog_cache_size</span>值并使用临时文件来保存事务中的语句的事务数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Binlog_cache_use</span></p>
			<p>使用临时二进制日志缓存的事务数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Bytes_received</span></p>
			<p>从所有客户端接收到的字节数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Bytes_sent</span></p>
			<p>发送给所有客户端的字节数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Com_<i>xxx</i></span></p>
			<p>
			<span>Com_<i>xxx</i></span><span>
			</span>语句计数变量表示每个<span><i><span>xxx</span></i></span><span>
			</span>语句执行的次数。每类语句有一个状态变量。例如，<span>Com_delete</span>和<span>Com_insert</span>分别统计<span>DELETE</span><span>
			</span>和<span>INSERT</span>语句执行的次数。</p>
			<p>
			<span>Com_stmt_<i>xxx</i></span>状态变量为：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			Com_stmt_prepare</span><span> </span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			Com_stmt_execute</span><span> </span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Com_stmt_fetch</span><span>
			</span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			Com_stmt_send_long_data</span><span> </span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Com_stmt_reset</span><span>
			</span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Com_stmt_close</span></p>
			<p>这些变量代表准备好的语句命令。它们的名字对应网络层使用的<span>COM_<i>xxx</i></span><span>
			</span>命令系列；换句话说：当准备好的语句<span>API</span>调用如<strong><span>mysql_stmt_prepare()</span></strong>、<strong><span>mysql_stmt_</span><span>执行<span>()</span></span></strong>并执行时，它们的值增加。但是，当执行下面的<span>SQL</span>语句时，<span>Com_stmt_prepare</span><span>,
			</span><span>
			Com_stmt_execute</span>和<span>Com_stmt_close</span>也增加：<span>PREPARE</span>、<span>EXECUTE</span>或<span>DEALLOCATE 
			PREPARE</span>。此外，旧<span>(</span>从<span>MySQL 
			4.1.3</span>起可用<span>)</span>语句计数变量<span>Com_prepare_sql</span>、<span>Com_execute_sql</span>和<span>Com_dealloc_sql</span>的值也随<span>PREPARE</span>、<span>EXECUTE</span>和<span>DEALLOCATE 
			PREPARE</span>语句增加。<span>Com_stmt_fetch</span>代表通过光标获取的网络<span>round-trips</span>的总数量。</p>
			<p>所有<span>Com_stmt_<i>xxx</i></span>变量将增加，即使语句参数未知或执行过程中出现错误。换句话说，它们的值对应发出的请求数，而不是成功完成的请求数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Connections</span></p>
			<p>试图连接到<span>(</span>不管是否成功<span>)MySQL</span>服务器的连接数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Created_tmp_disk_tables</span></p>
			<p>服务器执行语句时在硬盘上自动创建的临时表的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Created_tmp_files</span></p>
			<p><strong>
			<span>mysqld</span></strong>已经创建的临时文件的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Created_tmp_files</span></p>
			<p>服务器执行语句时自动创建的内存中的临时表的数量。如果<span>Created_tmp_disk_tables</span>较大，你可能要增加<span>tmp_table_size</span>值使临时 
			表基于内存而不基于硬盘。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Delayed_errors</span></p>
			<p>用<span>INSERT 
			DELAYED</span>写的出现错误的行数<span>(</span>可能为<span>duplicate 
			key</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Delayed_insert_threads</span></p>
			<p>使用的<span>INSERT 
			DELAYED</span>处理器线程数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Delayed_writes</span></p>
			<p>写入的<span>INSERT 
			DELAYED</span>行数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Flush_commands</span></p>
			<p>执行的<span>FLUSH</span>语句数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Handler_commit</span></p>
			<p>内部提交语句数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Handler_discover</span></p>
			<p><span>MySQL</span>服务器可以问<span>NDB 
			CLUSTER</span>存储引擎是否知道某一名字的表。这被称作发现。<span>Handler_discover</span>说明通过该方法发现的次数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_delete</span></p>
			<p>行从表中删除的次数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_first</span></p>
			<p>索引中第一条被读的次数。如果较高，它建议服务器正执行大量全索引扫描；例如，<span>SELECT 
			col1 FROM foo</span>，假定<span>col1</span>有索引。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_key</span></p>
			<p>根据键读一行的请求数。如果较高，说明查询和表的索引正确。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_next</span></p>
			<p>
			按照键顺序读下一行的请求数。如果你用范围约束或如果执行索引扫描来查询索引列，该值增加。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_prev</span></p>
			<p>按照键顺序读前一行的请求数。该读方法主要用于优化<span><span>ORDER 
			BY ... DESC</span>。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_rnd</span></p>
			<p>
			根据固定位置读一行的请求数。如果你正执行大量查询并需要对结果进行排序该值较高。你可能使用了大量需要<span>MySQL</span>扫描整个表的查询或你的连接没有正确使用键。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_rnd_next</span></p>
			<p>
			在数据文件中读下一行的请求数。如果你正进行大量的表扫描，该值较高。通常说明你的表索引不正确或写入的查询没有利用索引。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Handler_rollback</span></p>
			<p>内部<span>ROLLBACK</span>语句的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_update</span></p>
			<p>在表内更新一行的请求数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_write</span></p>
			<p>在表内插入一行的请求数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_data</span></p>
			<p>包含数据的页数<span>(</span>脏或干净<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_dirty</span></p>
			<p>当前的脏页数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_flushed</span></p>
			<p>要求清空的缓冲池页数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_free</span></p>
			<p>空页数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_latched</span></p>
			<p>在<span>InnoDB</span>缓冲池中锁定的页数。这是当前正读或写或由于其它原因不能清空或删除的页数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span><span>
			Innodb_buffer_pool_pages_misc</span></p>
			<p>
			忙的页数，因为它们已经被分配优先用作管理，例如行锁定或适用的哈希索引。该值还可以计算为<span>Innodb_buffer_pool_pages_total</span><span> 
			- </span><span>
			Innodb_buffer_pool_pages_free</span><span> - </span>
			<span><span>
			Innodb_buffer_pool_pages_data</span>。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_total</span></p>
			<p>缓冲池总大小（页数）。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			Innodb_buffer_pool_read_ahead_rnd</span></p>
			<p>
			<span>InnoDB</span>初始化的“<span class="quote">随机</span>”<span>read-ah</span><span>eads</span><span>数。当查询以随</span>机顺序扫描表的一大部分时发生。</p>
			<p>
			<span  >
			·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>
			Innodb_buffer_pool_read_ahead_s</span><span  >eq</span></span></p>
			<p>
			<span  >InnoDB</span><span>初始化的顺序<span>read-aheads</span>数。当</span><span>InnoDB</span>执行顺序全表扫描时发生。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			Innodb_buffer_pool_read_requests</span></p>
			<p>
			<span>InnoDB</span>已经完成的逻辑读请求数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_buffer_pool_</span><span>reads</span></span></p>
			<p>不能满足<span>InnoDB</span>必须单页读取的缓冲池中的逻辑读数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_buffer_pool_</span><span>wait</span><span>_free</span></span></p>
			<p>一般情况，通过后台向<span>InnoDB</span>缓冲池写。但是，如果需要读或创建页，并且没有干净的页可用，则它还需要先等待页面清空。该计数器对等待实例进行记数。如果已经适当设置缓冲池大小，该值应小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_buffer_pool_</span><span>write_requests</span></span></p>
			<p>向<span>InnoDB</span>缓冲池的写数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_data_fsyncs</span></p>
			<p>
			<span>fsync()</span>操作数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_data_</span><span>pending</span><span>_fsyncs</span></span></p>
			<p>当前挂起的<span>fsync()</span>操作数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_data_</span><span>pending_reads</span></span></p>
			<p>当前挂起的读数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_pending_writes</span></p>
			<p>当前挂起的写数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_read</span></p>
			<p>至此已经读取的数据数量（字节）。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_reads</span></p>
			<p>数据读总数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_writes</span></p>
			<p>数据写总数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_written</span></p>
			<p>至此已经写入的数据量（字节）。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_dblwr_writes</span><span>, </span>
			<span>
			Innodb_dblwr_pages_written</span></p>
			<p>已经执行的双写操作数量和为此目的已经写好的页数。参见<a href="storage-engines.html#innodb-disk-io" title="15.2.14.1. Disk I/O">15.2.14.1节，“磁盘I/O”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_log_waits</span></p>
			<p>我们必须等待的时间，因为日志缓冲区太小，我们在继续前必须先等待对它清空。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_log_write_requests</span></p>
			<p>日志写请求数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_log_writes</span></p>
			<p>向日志文件的物理写数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_os_log_fsyncs</span></p>
			<p>向日志文件完成的<span>fsync()</span>写数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_os_log_pending_fsyncs</span></p>
			<p>挂起的日志文件<span>fsync()</span>操作数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_os_log_pending_writes</span></p>
			<p>挂起的日志文件写操作。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_os_log_written</span></p>
			<p>写入日志文件的字节数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_page_size</span></p>
			<p>编译的<span>InnoDB</span>页大小<span>(</span>默认<span>16KB)</span>。许多值用页来记数；页的大小很容易转换为字节。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_pages_created</span></p>
			<p>创建的页数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_pages_read</span></p>
			<p>读取的页数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_pages_written</span></p>
			<p>写入的页数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_row_lock_current_waits</span></p>
			<p>当前等待的待锁定的行数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_row_lock_time</span></p>
			<p>行锁定花费的总时间，单位毫秒。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_row_lock_time_avg</span></p>
			<p>行锁定的平均时间，单位毫秒。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_row_lock_time_max</span></p>
			<p>行锁定的最长时间，单位毫秒。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_row_lock_waits</span></p>
			<p>一行锁定必须等待的时间数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_rows_deleted</span></p>
			<p>从<span>InnoDB</span>表删除的行数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_rows_inserted</span></p>
			<p>插入到<span>InnoDB</span>表的行数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_rows_read</span></p>
			<p>从<span>InnoDB</span>表读取的行数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_rows_updated</span></p>
			<p>
			<span>InnoDB</span>表内更新的行数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_blocks_not_flushed</span></p>
			<p>键缓存内已经更改但还没有清空到硬盘上的键的数据块数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_blocks_unused</span></p>
			<p>键缓存内未使用的块数量。你可以使用该值来确定使用了多少键缓存；参见<a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">5.3.3节，“服务器系统变量”</a>中<span>Key_buffer_size</span>的讨论。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_blocks_used</span></p>
			<p>键缓存内使用的块数量。该值为高水平线标记，说明已经同时最多使用了多少块。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_read_requests</span></p>
			<p>从缓存读键的数据块的请求数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_reads</span></p>
			<p>从硬盘读取键的数据块的次数。如果<span>Key_reads</span>较大，则<span>Key_buffer_size</span>值可能太小。可以用<span>Key_reads</span><span>/</span><span>Key_read_requests</span>计算缓存损失率。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_write_requests</span></p>
			<p>将键的数据块写入缓存的请求数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_writes</span></p>
			<p>向硬盘写入将键的数据块的物理写操作的次数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Last_</span><span>query</span><span>_cost</span></span></p>
			<p>
			用查询优化器计算的最后编译的查询的总成本。用于对比同一查询的不同查询方案的成本。默认值<span>0</span>表示还没有编译查询。
			默认值是<span>0</span>。<span>Last_query_cost</span>具有会话范围。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Max_used_connections</span></p>
			<p>服务器启动后已经同时使用的连接的最大数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Not_flushed_delayed_rows</span></p>
			<p>等待写入<span>INSERT 
			DELAY</span>队列的行数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Open_files</span></p>
			<p>打开的文件的数目。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Open_streams</span></p>
			<p>打开的流的数量<span>(</span>主要用于记录<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Open_tables</span></p>
			<p>当前打开的表的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Opened_tables</span></p>
			<p>已经打开的表的数量。如果<span>Opened_tables</span>较大，<span>table_cache
			</span>值可能太小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_free_blocks</span></p>
			<p>查询缓存内自由内存块的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_free_memory</span></p>
			<p>用于查询缓存的自由内存的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_hits</span></p>
			<p>查询缓存被访问的次数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_inserts</span></p>
			<p>加入到缓存的查询数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_lowmem_prunes</span></p>
			<p>由于内存较少从缓存删除的查询数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_not_cached</span></p>
			<p>非缓存查询数<span>(</span>不可缓存，或由于<span>query_cache_type</span>设定值未缓存<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Qcache_queries_in_cache</span></p>
			<p>登记到缓存内的查询的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Qcache_total_blocks</span></p>
			<p>查询缓存内的总块数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Questions</span></p>
			<p>已经发送给服务器的查询的个数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Rpl</span><span>_status</span></span></p>
			<p>失败安全复制状态<span>(</span>还未使用<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Select_full</span><span>_join</span></span></p>
			<p>没有使用索引的联接的数量。如果该值不为<span>0,</span>你应仔细检查表的索引。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Select_full_range_join</span></p>
			<p>在引用的表中使用范围搜索的联接的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Select_range</span></p>
			<p>在第一个表中使用范围的联接的数量。一般情况不是关键问题，即使该值相当大。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Select_range_check</span></p>
			<p>在每一行数据后对键值进行检查的不带键值的联接的数量。如果不为<span>0</span>，你应仔细检查表的索引。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Select_scan</span></p>
			<p>对第一个表进行完全扫描的联接的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Slave_open_temp_tables</span></p>
			<p>当前由从<span>SQL</span>线程打开的临时表的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Slave_running</span></p>
			<p>如果该服务器是连接到主服务器的从服务器，则该值为<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Slave_retried_transactions</span></p>
			<p>启动后复制从服务器<span>SQL</span>线程尝试事务的总次数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Slow_launch_threads</span></p>
			<p>创建时间超过<span>slow_launch_time</span>秒的线程数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Slow_queries</span></p>
			<p>查询时间超过<span>long_query_time</span>秒的查询的个数。参见<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4节，“慢速查询日志”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Sort_merge_passes</span></p>
			<p>排序算法已经执行的合并的数量。如果这个变量值较大，应考虑增加<span>sort_buffer_size</span>系统变量的值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Sort_range</span></p>
			<p>在范围内执行的排序的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Sort_rows</span></p>
			<p>已经排序的行数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Sort_scan</span></p>
			<p>通过扫描表完成的排序的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Ssl_<i>xxx</i></span></p>
			<p>用于<span>SSL</span>连接的变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Table_locks_immediate</span></p>
			<p>立即获得的表的锁的次数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Table_locks_waited</span></p>
			<p>
			不能立即获得的表的锁的次数。如果该值较高，并且有性能问题，你应首先优化查询，然后拆分表或使用复制。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Threads_cached</span></p>
			<p>线程缓存内的线程的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Threads_connected</span></p>
			<p>当前打开的连接的数量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Threads_created</span></p>
			<p>创建用来处理连接的线程数。如果<span>Threads_created</span>较大，你可能要增加<span>thread_cache_size</span>值。缓存访问率的计算方法<span>Threads_created</span><span>/</span><span>Connections</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span><span>
			Threads_running</span></p>
			<p>激活的（非睡眠状态）线程数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Uptime</span></p>
			<p>服务器已经运行的时间（以秒为单位）。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="mysql-fix-privilege-tables"></a>
		5.4.&nbsp;mysql_fix_privilege_tables：升级MySQL系统表</h2></div></div></div></div><div class="section"><div class="titlepage"><div><div>
		一些<span>MySQL</span>发布对<span>mysql</span>数据库中的系统表的结构进行了更改，添加了新权限或特性。当你更新到新版本<span>MySQL</span>，你应同时更新系统表，以确保它们的结构最新。首先备份<span>mysql</span>数据库，然后按照下面的程序操作。<p>
		在<span>Unix</span>或<span>Unix</span>类系统中，运行<strong><span>mysql_fix_privilege_tables</span></strong>脚本来更新系统表：</p>
		<pre><span>shell&gt; </span><span><b><span>mysql_fix_privilege_tables</span></b></span></pre>
		<p>你必须在服务器运行时执行该脚本。它试图连接本机上用<span>root</span>运行的服务器。如果<span>root</span>账户需要密码，在命令行中按下述方法给出密码：</p>
		<pre><span>shell&gt; </span><span><b><span>mysql_fix_privilege_tables--password=<i>root_password</i></span></b></span></pre>
		<p><strong><span>
		mysql_fix_privilege_tables</span></strong>脚本可以执行将系统表转换为当前格式的任何动作。运行时你可能会看见一些<span>Duplicate 
		column name</span>警告；你可以忽略它们。</p>
		<p>运行完脚本后，停止服务器并重启。</p>
		<p>在<span>Windows</span>系统中，<span>MySQL</span>分发包括<span>mysql_fix_privilege_tables.sql
		</span><span>SQL</span>脚本，你可以用<strong><span 
>mysql</span></strong>客户端来运行。例如，如果<span>MySQL</span>安装到<span>C:\Program 
		Files\MySQL\MySQL Server 5.1</span>，命令应为：</p>
		<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql -u root -p mysql</span></b></span></pre>
		<pre><span>mysql&gt; </span><span><b><span>SOURCE C:/Program Files/MySQL/MySQL Server 5.1/scripts/mysql_fix_privilege_tables.sql</span></b></span></pre>
		<p>如果安装到其它目录，相应地更改路径名。</p>
		<p><strong><span>mysql</span></strong>命令将提示输入<span>root</span>密码；按照提示输入密码。</p>
		<p>在<span>Unix</span>中，当<strong><span>mysql</span></strong>处理<span>mysql_fix_privilege_tables.sql</span><span> 
		script</span>脚本中的语句时，你可能会看见一些<span>Duplicate 
		column name</span>警告；你可以忽略它们。</p>
		<p>运行完脚本后，停止服务器并重启。</p>
		<h2 class="title"><a name="server-shutdown"></a>
		5.5.&nbsp;MySQL服务器关机进程</h2></div></div></div>
		<div class="orderedlist">
			<ol type="1">
				<li>&nbsp;服务器关闭进程可以概括为：<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>启动关闭进程</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>服务器根据需要创建关闭线程</p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>服务器停止接收新连接</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>服务器终止当前的活动</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>存储引擎被停掉或关闭</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>服务器退出</p>
				<p>下面是更详细的描述：</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>启动关闭进程。</p>
				<p>可以用多种方法启动服务器的关闭。例如，拥有<span>SHUTDOWN</span>权限的用户可以执行<strong><span>mysqladmin 
				shutdown</span></strong>命令。<strong><span>mysqladmin</span></strong>可以用于所有支持<span>MySQL</span>的平台上。其它操作系统相关的关闭开始方法还可能有：在<span>Unix</span>中，当接收到<span>SIGTERM</span>信号后，服务器关闭。对于在<span>Windows</span>中作为服务运行的服务器，当服务管理器让它关闭时，则关闭。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>服务器根据需要创建关闭线程。</p>
				<p>
				根据开始关闭的方式，服务器可以创建线程来处理关闭进程。如果客户端需要关闭，则创建关闭线程。如果收到<span>SIGTERM</span>信号后关闭，信号线程可以自己关闭，或者创建单独的线程来完成。如果服务器尝试创建关闭线程而不能创建<span>(</span>例如，如果内存被耗尽<span>)</span>，它在错误日志中给出诊断消息：</p>
				<pre ><span>Error: Can&#39;t create thread to kill server</span></pre>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>服务器停止接收新连接。</p>
				<p>
				在关闭过程中要想防止启动新活动，服务器停止接收新的客户端连接。它将关闭它帧听的网络连接：<span>TCP/IP</span>端口、<span>Unix</span>套接字文件、<span>Windows</span>命名管道和在<span>Windows</span>中的共享内存。</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>服务器终止当前的活动。</p>
				<p>
				对于每个与客户端连接相关的线程，与客户端的连接被中断，线程被标记为“杀掉的”。当线程注意到此类标记后则线程终止。空闲连接的线程很快终止。当前正处理查询的线程定期检查它们的状态，终止的时间较长。关于线程终止的详细信息，参见<a href="sql-syntax.html#kill" title="13.5.5.3. KILL Syntax">13.5.5.3节，“KILL语法”</a>，特别是关于对<span>MyISAM</span>表的杀掉的<span>REPAIR 
				TABLE</span>或<span>OPTIMIZE 
				TABLE</span>操作。</p>
				<p>
				对于有打开事务的线程，事务被回滚。请注意如果某个线程正在更新非事务表，多行<span>UPDATE</span>或<span>INSERT</span>等操作会使表部分更新，因为操作在完成前会终止。</p>
				<p>
				如果服务器是主复制服务器，与当前连接的从服务器相关的线程的处理方式同其它客户端线程。即每个线程被标记为杀掉的，在下次检查他的状态后会退出。</p>
				<p>如果服务器是从复制服务器，在客户端线程标记为杀掉的之前，激活的<span>I/O</span>和<span>SQL</span>线程被停止。<span>SQL</span>线程允许先结束它当前的语句<span>(</span>以避免造成复制问题<span>)</span>然后停止。如果此时<span>SQL</span>线程正位于事务中部，事务则
				回滚。</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>存储引擎被停掉或关闭。</p>
				<p>在该阶段，表缓存被清空，所有打开的表被关闭。</p>
				<p>每个存储引擎执行它管理的表需要的任何动作。例如，<span>MyISAM</span>清空任何挂起的表索引写操作。<span>InnoDB</span>将它的缓冲池清空到硬盘上（除非<span>innodb_fast_shutdown</span>为<span>2</span>），将当前的<span>LSN</span>写入表内，并终止自己的内部线程。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>服务器退出。</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="security"></a>
		5.6.&nbsp;一般安全问题</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#security-guidelines">
			5.6.1. 通用安全指南</a></span></dt><dt><span class="section"><a href="database-administration.html#security-against-attack">
			5.6.2. 使MySQL在攻击者面前保持安全</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges-options">
			5.6.3. Mysqld安全相关启动选项<span><strong class="command"></strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#load-data-local">
			5.6.4. LOAD DATA LOCAL安全问题<code class="literal"></code></a></span></dt></dl></div><a class="indexterm" name="id2763615"></a>
		<p>本节描述一些常见的需要注意的安全问题，以及一些可以使你的<span>MySQL</span>安装更加安全以防止黑客和误用的措施。关于<span>MySQL</span>用于设置用户账户并检查数据库访问的访问控制系统的具体信息，参见<a href="database-administration.html#privilege-system" title="5.7. The MySQL Access Privilege System">5.7节，“MySQL访问权限系统”</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="security-guidelines"></a>
			5.6.1.&nbsp;通用安全指南</h3></div></div></div>
			<p>任何在与<span>Internet</span>联网的计算机上使用<span>MySQL</span>的用户都应仔细阅读本节，以避免最常见的安全问题。</p>
			<p>讨论安全时，我们强调必须完全保护整个服务器主机的安全<span>(</span>而不只是<span>MySQL</span>服务器<span>)</span>防范各种类型的可能的攻击：偷听、修改、重放和拒绝服务。我们在这里不能覆盖各方面的内容和措施。</p>
			<p><span>MySQL</span>根据访问控制列表<span>(ACL)</span>对所有连接、查询和其它用户尝试执行的操作进行安全管理。<span>MySQL</span>客户端和服务器之间还支持<span>SSL-</span>加密连接。这儿讨论的许多概念并不是<span>MySQL</span>专有的；该思想几乎同样适合所有应用程序。</p>
			<p>运行<span>MySQL</span>时，应尽量遵从下面的指导：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>不要让任何人<span>(</span>除了<span>MySQL
			</span></span></strong><span><b>
			<span>root</span></b></span><strong><span>账户<span>)</span>访问</span></strong><span><b><span>mysql</span></b></span><strong><span>数据库中的</span></strong><span><b><span>user</span></b></span><strong><span>表！</span></strong>这很关键。<strong><span>加密的密码才是<span>MySQL</span>中的真正的密码。</span></strong>知道<span>user</span>表中所列的密码并且能访问该账户客访问的主机的人<strong><span>可以很容易地用该用户登录</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>学习<span>MySQL</span>访问权限系统。用<span>GRANT</span>和<span>REVOKE</span>语句来控制对<span>MySQL</span>的访问。不要授予超过需求的权限。决不能为所有主机授权。</p>
			<p>检查清单：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>试试<span>mysql 
			-u root</span>。如果你能够成功连接服务器而没有要任何密码，则说明有问题。任何人可以作为<span>MySQL</span><span>root</span>用户用它的全部权限来连接<span>MySQL</span>服务器！查阅<span>MySQL</span>安装说明，应特别注意关于设置<span>root</span>密码的信息。参见<a href="installing.html#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3节，“使初始MySQL账户安全”</a>。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>通过<span>SHOW 
			GRANTS</span>语句检查查看谁已经访问了什么。然后使用<span>REVOKE</span>语句删除不再需要的权限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要将纯文本密码保存到数据库中。如果你的计算机有安全危险，入侵者可以获得所有的密码并使用它们。相反，应使用<span><span>MD5()</span><span>、<span>SHA1()</span></span></span>或单向哈希函数。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要从词典中选择密码。有专门的程序可以破解它们。即使象“<span class="quote"><span>xfish98</span></span>”这样的密码也很差。而“<span class="quote"><span>duag98</span></span>”要好得多，虽然包含了相同的字“<span class="quote"><span>fish</span></span>”，但从标准<span>QWERTY</span>键盘向左输入。另一种方法是使用“<span class="quote"><span>Mhall</span></span>”，来自句子“<span class="quote"><span>Mary 
			had a little lamb.</span></span>”中每个字的第一个字符。这样很容易记住并输入，但是不知道的人很难猜出来。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>购买防火墙。这样可以保护你防范各种软件中至少<span>50%</span>的各种类型的攻击。把<span>MySQL</span>放到防火墙后或隔离区<span>(DMZ)</span>。</p>
			<p>检查清单：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>试试从<span>Internet</span>使用<span>nmap</span>工具扫描端口。<span>MySQL</span>默认使用端口<span>3306</span>。不应从不可信任主机访问该端口。另一种检查是否<span>MySQL</span>端口打开的简单方式是从远程机器试试下面的命令，其中<span>server_host</span>是<span>MySQL</span>服务器运行的主机：</p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>telnet server_host 3306</span></b></span></pre>
			<p>
			如果得到连接并得到一些垃圾字符，则端口打开着，则应从防火墙或路由器上关闭，除非你有合理的理由让它开着。如果<span>telnet</span>挂起或连接被拒绝，则端口被阻塞，这是你所希望的。</p>
			<p>不要信任应用程序的用户输入的任何数据。它们可以用<span>Web</span>形式、<span>URL</span>或构建的应用程序输入特殊或逃溢字符序列来尝试欺骗你的代码。如果某个用户输入“<span>; 
			DROP DATABASE mysql;</span>”等内容，应确保你的应用程序保持安全。这是特例，但当黑客使用类似技术时，如果你没有做好准备，结果可能会出现大的安全漏洞和数据丢失。</p>
			<p>
			一个常见的错误是只保护字符串数据值。一定要记住还应检查数字数据。如果当用户输入值<span>234</span>时，应用程序生成查询<span><span>SELECT 
			* FROM table WHERE ID=234</span>，</span>用户可以输入值<span>234 
			OR 1=1</span>使应用程序生成查询<span>SELECT 
			* FROM table WHERE ID=234 OR 1=1</span>。结果是服务器查找表内的每个记录。这样会暴露每个记录并造成过多的服务器负载。保护防范这类攻击的最简单的方法是使用单引号将数字常量引起来：<span>SELECT 
			* FROM table WHERE ID=&#39;234&#39;</span>。如果用户输入其它信息，均变为字符串的一部分。在数字部分，<span>MySQL</span>自动将字符串转换为数字并剥离字符串包含的附加的非数字字符。</p>
			<p>
			有时候人们会认为如果数据库只包含供公共使用的数据，则不需要保护。这是不正确的。即使允许显示数据库中的任何记录，你仍然应保护防范拒绝服务攻击<span>(</span>例如，基于前面段落中所述的技术的攻击，会使服务器浪费资源<span>)</span>。否则，你的服务器不再响应合法用户。</p>
			<p>检查清单：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>试试用<span>Web</span>形式输入单引号和双引号<span>(</span>‘<span>&#39;</span>’和‘<span>&quot;</span>’<span>)</span>。如果得到任何形式的<span>MySQL</span>错误，立即分析原因。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>试试修改动态<span>URL</span>，可以在其中添加<span>%22</span><span>(</span>‘<span>&quot;</span>’<span>)</span>、<span>%23</span><span>(</span>‘<span>#</span>’<span>)</span>和<span>%27</span><span>(</span>‘<span>&#39;</span>’<span>)</span>。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>试试在动态<span>URL</span>中修改数据类型，使用前面示例中的字符，包括数字和字符类型。你的应用程序应足够安全，可以防范此类修改和类似攻击。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>试试输入字符、空格和特殊符号，不要输入数值字段的数字。你的应用程序应在将它们传递到<span>MySQL</span>之前将它们删除或生成错误。将未经过检查的值传递给<span>MySQL</span>是很危险的！</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>将数据传给<span>MySQL</span>之前先检查其大小。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>用管理账户之外的用户名将应用程序连接到数据库。不要给应用程序任何不需要的访问权限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			许多应用程序编程接口提供了措施逃逸数据值中的特殊字符。如果使用正确，可以防止应用程序用户输入使应用程序生成不期望的效果的语句的数值：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>MySQL C API</span>：使用<span>mysql_real_escape_string()</span><span> 
			API</span>调用。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>MySQL++</span>：查询流使用<span>escape</span>和<span>quote</span>修订符。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>PHP</span>：使用<span>mysql_escape_string()</span>函数基于<span>MySQL 
			C API</span>中的同名函数。<span>(</span>在<span>PHP 
			4.0.3</span>之前<span>,</span>使用<span>addslashes()</span>）<span>。</span>在<span>PHP 
			5</span>中<span>,</span>可以使用<span>mysqli</span>扩展名，它支持改进的<span>MySQL</span>鉴定协议和密码，以及用占位符编写的语句。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Perl DBI</span>：使用<span>quote()</span>方法或使用占位符。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Java JDBC</span>：使用一个<span>PreparedStatement</span>对象和占位符。</p>
			<p>其它编程接口有类似的功能。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要通过<span>Internet</span>传送明文<span>(</span>未加密的<span>)</span>数据。该信息可以被有足够时间和能力来截取它并用于个人目的的任何人访问。相反，应使用加密协议，例如<span>SSL</span>或<span>SSH</span>。<span>MySQL</span>支持内部<span>SSL</span>连接，例如版本<span> 
			4.0.0</span>。可以使用<span>SSH</span><span>端口映射</span>为通信创建加密<span>(</span>并压缩<span>)</span>的隧道。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>学会使用<span>tcpdump</span>和<span>strings</span>工具。在大多数情况下，你可以使用下面的命令检查是否<span>MySQL</span>数据流未加密：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>tcpdump -l -i eth0 -w - src or dst port 3306 | strings</span></b></span></pre>
			<p><span>(</span>该命令在<span>Linux</span>中可以工作，在其它系统中经过小小的修改后应可以工作）<span>。
			</span>警告：如果你没有看见明文数据，并不一定说明信息实际上被加密了。如果你需要较高级别的安全，你应咨询安全专家。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="security-against-attack"></a>
			5.6.2.&nbsp;使MySQL在攻击者面前保持安全</h3></div></div></div><a class="indexterm" name="id2764240"></a><a class="indexterm" name="id2764250"></a>
			<p>当你连接到<span>MySQL</span>服务器时，你应使用一个密码。密码不以明文在上传输。客户端连接序列中的密码处理在<span>MySQL 
			4.1.1</span>中已经升级，很安全。如果你仍然使用<span>pre-4.1.1-</span>风格的密码，加密算法不如新算法强；通过一些工作，可以窃取客户端和服务器之间的通信的聪明的攻击者可以破解密码。<span>(</span>关于不同的密码处理方法的讨论参见<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9节，“MySQL 4.1中的密码哈希处理”</a>）<span>。 </span>
			如果客户端和服务器之间的连接通过不可信任网络，你应使用<span>SSH</span>隧道来加密通信。</p>
			<p>
			所有其它信息以文本传送，可以被可以看到连接的任何人读取。如果你担心这个，你可以使用压缩协议来使通信更难以解密。要想使连接更加安全，你应使用<span>SSH</span>来获得加密的<span>MySQL</span>服务器和<span>MySQL</span>客户端之间的<span>TCP/IP</span>连接。你可以从<span><a target="_top"  href="http://www.openssh.org/">http://www.openssh.org/</a></span>找到开放源码<span>SSH
			</span>客户端，并可以从<span><a target="_top"  href="http://www.ssh.com/">http://www.ssh.com/</a></span>获得商业<span>SSH</span>客户端。</p>
			<p>你还可以使用<span>MySQL</span>内部<span>OpenSSL</span>支持。参见<a href="database-administration.html#secure-connections" title="5.8.7. Using Secure Connections">5.8.7节，“使用安全连接”</a>。</p>
			<p>为了使<span>MySQL</span>系统安全，强烈要求你考虑下列建议：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对所有<span>MySQL</span>用户使用密码。客户端程序不需要知道运行它的人员的身份。对于客户端<span>/</span>服务器应用程序，用户可以指定客户端程序的用户名。例如，如果<span><i><span>other_user</span></i></span>没有密码，任何人可以简单地用<span>mysql 
			-u <i>other_user</i> <i>db_name</i></span>冒充他人调用<strong><span 
>mysql</span></strong>程序进行连接。如果所有用户有密码，使用其它用户的账户进行连接要困难得多。</p>
			<p>要想更改用户的密码，应使用<span>SET 
			PASSWORD</span>语句。还可以直接更新<span>mysql</span>数据库中的<span>user</span>表。例如，要更改所有<span>root</span>用户的<span>MySQL</span>账户的密码，应：</p>
			<pre ><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>UPDATE mysql.user SET Password=PASSWORD(&#39;<i>newpwd</i>&#39;)</span></b></span></pre>
			<pre ><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>WHERE User=&#39;root&#39;;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>绝对不要作为<span>Unix</span>的<span>root</span>用户运行<span>MySQL</span>服务器。这样做非常危险，因为任何具有<span>FILE</span>权限的用户能够用<span>root</span>创建文件<span>(</span>例如，<span>~root/.bashrc</span><span>)</span>。为了防止，<strong><span>mysqld</span></strong>拒绝用<span>root</span>运行，除非使用<span>--user=root</span>选项明显指定。</p>
			<p>应可以<span>(</span>并且应该<span>)</span>用普通非特权用户运行<strong><span>mysqld</span></strong>。你可以创建独立的<span>Unix</span>中的<span>mysql</span>账户来以便使所有内容更加安全。该账户只用于管理<span>MySQL</span>。要想用其它<span>Unix</span>用户启动<strong><span>mysqld</span></strong>，增加<span>user</span>选项指定<span>/etc/my.cnf</span>选项文件或服务器数据目录的<span>my.cnf</span>选项文件中的<span>[mysqld]</span>组的用户名。例如：</p>
			<pre ><span>[mysqld]</span></pre>
			<pre ><span>user=mysql</span></pre>
			<p>该命令使服务器用指定的用户来启动，无论你手动启动或通过<strong><span>mysqld_safe</span></strong>或<strong><span>mysql.server</span></strong>启动。详细信息参见<a href="problems.html#changing-mysql-user" title="A.3.2. How to Run MySQL as a Normal User">A.3.2节，“如何以普通用户身份运行MySQL”</a>。</p>
			<p>作为其它<span>Unix</span>用户而不用<span>root</span>运行<span>mysqld</span>，你不需要更改<span>user</span>表中的<span>root</span>用户名，因为<span>MySQL</span>账户的用户名与<span>Unix</span>账户的用户名无关。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要允许使用表的符号链接。<span>(</span>可以用<span>--skip-symbolic-links</span>选项禁用）<span>。</span>如果你用<span>root</span>运行<strong><span>mysqld</span></strong>则特别重要，因为任何对服务器的数据目录有写访问权限的人则能够删除系统中的任何文件！参见<a href="optimization.html#symbolic-links-to-tables" title="7.6.1.2. Using Symbolic Links for Tables on Unix">7.6.1.2节，“在Unix平台上使用表的符号链接</a>”。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>确保<strong><span>mysqld</span></strong>运行时，只使用对数据库目录具有读或写权限的<span>Unix</span>用户来运行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要将<span>PROCESS</span>或<span>SUPER</span>权限授给非管理用户。<strong><span>mysqladmin 
			processlist</span></strong>的输出显示出当前执行的查询正文，如果另外的用户发出一个<span>UPDATE 
			user SET password=PASSWORD(&#39;not_secure&#39;)</span>查询，被允许执行那个命令的任何用户可能看得到。</p>
			<p><strong>
			<span>mysqld</span></strong>为有<span>SUPER</span>权限的用户专门保留一个额外的连接，因此即使所有普通连接被占用，<span>MySQL
			</span>
			<span>root</span>用户仍可以登录并检查服务器的活动。</p>
			<p>可以使用<span>SUPER</span>权限来终止客户端连接，通过更改系统变量的值更改服务的器操作，并控制复制服务器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要向非管理用户授予<span>FILE</span>权限。有这权限的任何用户能在拥有<span><b><span>mysqld</span></b></span>守护进程权限的文件系统那里写一个文件！为了更加安全，由<span>SELECT 
			... INTO OUTFILE</span>生成的所有文件对每个人是可写的，并且你不能覆盖已经存在的文件。</p>
			<p><strong>
			<span>file</span></strong>权限也可以被用来读取任何作为运行服务器的<span>Unix</span>用户可读取或访问的文件。使用该权限，你可以将任何文件读入数据库表。这可能被滥用，例如，通过使用<span>LOAD 
			DATA</span>装载<tt >“<span>/etc/passwd</span>”</tt>进一个数据库表，然后能用<span>SELECT</span>显示它<span>。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你不信任你的<span>DNS</span>，你应该在授权表中使用<span>IP</span>数字而不是主机名。在任何情况下，你应该非常小心地使用包含通配符的主机名来创建
			授权表条目！</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你想要限制单个账户允许的连接数量，你可以设置<strong><span>mysqld</span></strong>中的<span>max_user_connections</span>变量来完成。<span>GRANT</span>语句也可以支持 
			资源控制选项来限制服务器对一个账户允许的使用范围。参见<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3节，“GRANT和REVOKE语法”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="privileges-options"></a>
			5.6.3.&nbsp;Mysqld安全相关启动选项<span><strong class="command"></strong></span></h3></div></div></div>
			<p>下列<span><b><span>mysqld</span></b></span>选项影响安全：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--allow-suspicious-udfs</span></p>
			<p>该选项控制是否可以载入主函数只有<span>xxx</span>符的用户定义函数。默认情况下，该选项被关闭，并且只能载入至少有辅助符的<span>UDF</span>。这样可以防止从未包含合法<span>UDF</span>的共享对象文件载入函数。参见<a href="extending-mysql.html#udf-security" title="27.2.3.6. User-Defined Function Security Precautions">27.2.3.6节，“用户定义函数安全注意事项”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>--local-infile[={0|1}]</span></p>
			<p>如果用<span>--local-infile=0</span>启动服务器<span>，</span>则客户端不能使用<span>LOCAL</span><span> 
			in </span><span>LOAD DATA</span>语句。参见<a href="database-administration.html#load-data-local" title="5.6.4. Security Issues with LOAD DATA LOCAL">5.6.4节，“LOAD DATA LOCAL安全问题<code class="literal"></code>”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--old-passwords</span></p>
			<p>强制服务器为新密码生成短<span>(pre-4.1)</span>密码哈希。当服务器必须支持旧版本客户端程序时，为了保证兼容性这很有用。参见<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9节，“MySQL 4.1中的密码哈希处理”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>OBSOLETE</span></em>)
			</span><span>
			--safe-show-database</span></p>
			<p>在以前版本的<span>MySQL</span>中，该选项使<span>SHOW 
			DATABASES</span>语句只显示用户具有部分权限的数据库名。在<span>MySQL 5.1</span>中，该选项不再作为现在的
			默认行为使用，有一个<span>SHOW 
			DATABASES</span>权限可以用来控制每个账户对数据库名的访问。参见<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3节，“GRANT和REVOKE语法”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--safe-user-create</span></p>
			<p>如果启用，用户不能用<span>GRANT</span>语句创建新用户，除非用户有<span>mysql.user</span>表的<span>INSERT</span>权限。如果你想让用户具有授权权限来创建新用户，你应给用户授予下面的权限：</p>
			<pre ><span>mysql&gt; </span><span><b><span>GRANT INSERT(user) ON mysql.user TO &#39;<i>user_name</i>&#39;@&#39;<i>host_name</i>&#39;;</span></b></span></pre>
			<p>这样确保用户不能直接更改权限列，必须使用<span>GRANT</span>语句给其它用户授予该权限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--secure-auth</span></p>
			<p>不允许鉴定有旧<span>(pre-4.1)</span>密码的账户。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>--skip-grant-</span><span>tables</span></span></p>
			<p>这个选项导致服务器根本不使用权限系统。这给每个人以<em><span>完全访问</span></em>所有的数据库的权力！（通过执行<strong><span>mysqladmin 
			flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span><span>命令</span></strong>，或执行<span>FLUSH 
			PRIVILEGES</span>语句，你能告诉一个正在运行的服务器再次开始使用授权表。） &nbsp;</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-name-resolve</span></p>
			<p>主机名不被解析。所有在授权表的<span>Host</span>的列值必须是<span>IP</span>号或<span>localhost</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--skip-networking</span></p>
			<p>在网络上不允许<span>TCP/IP</span>连接。所有到<span>mysqld</span>的连接必须经由<span>Unix</span>套接字进行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--skip-show-database</span></p>
			<p>使用该选项，只允许有<span>SHOW 
			DATABASES</span>权限的用户执行<span>SHOW 
			DATABASES</span>语句，该语句显示所有数据库名。不使用该选项，允许所有用户执行<span>SHOW 
			DATABASES</span>，但只显示用户有<span>SHOW 
			DATABASES</span>权限或部分数据库权限的数据库名。请注意全局权限指数据库的权限。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="load-data-local"></a>
			5.6.4.&nbsp;LOAD DATA LOCAL安全问题<code class="literal"></code></h3></div></div></div>
			<p><span>LOAD DATA</span>语句可以装载服务器主机上的文件，若指定<span>LOCAL</span>关键字，可以装载客户端文件。</p>
			<p>支持<span>LOCAL</span>版本的<span>LOAD 
			DATA</span>语句有两个可能的安全问题：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>由<span>MySQL</span>服务器启动文件从客户端向服务器主机的传输。理论上，打过补丁的服务器可以告诉客户端程序传输服务器选择的文件，而不是客户用<span>LOAD 
			DATA</span>语句指定的文件。这样服务器可以访问客户端上客户有读访问权限的任何文件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Web</span>环境中，客户从<span>Web</span>服务器连接，用户可以使用<span>LOAD 
			DATA LOCAL</span>来读取<span>Web</span>服务器进程有读访问权限的任何文件<span>(</span>假定用户可以运行<span>SQL</span>服务器的任何命令<span>)</span>。在这种环境中，<span>MySQL</span>服务器的客户实际上是<span>Web</span>服务器，而不是连接<span>Web</span>服务器的用户运行的程序。</p>
			<p>要处理这些问题，我们更改了<span>MySQL 3.23.49</span>和<span>MySQL 
			4.0.2(Windows</span>中的<span>4.0.13)</span>中的<span>LOAD 
			DATA LOCAL</span>的处理方法：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>默认情况下，现在所有二进制分中的发<span>MySQL</span>客户端和库是用<span>--enable-local-infile</span>选项编译，以便与<span>MySQL 
			3.23.48</span>和以前的版本兼容。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你从源码构建<span>MySQL</span>但没有使用<span>--enable-local-infile</span>选项来进行<strong><span 
>configure</span></strong>，则客户不能使用<span>LOAD 
			DATA LOCAL</span>，除非显式调用<span><span>mysql_options</span><span> 
			(...MYSQL_OPT_</span><span>本地<span>_INFILE</span>，<span>0)</span></span></span>。参见<a href="apis.html#mysql-options" title="25.2.3.48. mysql_options()">25.2.3.48节，“mysql_options()”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>你可以用<span>--local-infile=0</span>选项启动<strong><span>mysqld</span></strong>从服务器端禁用所有<span>LOAD 
			DATA LOCAL</span>命令。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对于<strong><span>mysql</span></strong>命令行客户端，可以通过指定<span>--local-infile[=1]</span>选项启用<span>LOAD 
			DATA LOCAL</span>，或通过<span>--local-infile=0</span>选项禁用。类似地，对于<strong><span>mysqlimport</span></strong>，<span>--local</span><span> 
			or </span><span>-L</span>选项启用本地数据文件装载。在任何情况下，成功进行本地装载需要服务器启用相关选项。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你使用<span>LOAD 
			DATA LOCAL</span><span> Perl</span>脚本或其它读选项文件中的<span><span>[</span><span>client</span><span>]</span></span>组的程序，你可以在组内添加<span>local-infile=1</span>选项。但是，为了便面不理解<span>local-infile</span>的程序产生问题，则规定使用<span>loose-</span><span> 
			prefix</span>：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[client]</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>loose-local-infile=1</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果<span>LOAD 
			DATA LOCAL INFILE</span>在服务器或客户端被禁用，试图执行该语句的客户端将收到下面的错误消息：</p>
			<pre ><span>ERROR 1148: The used command is not allowed with this MySQL version</span></pre>
		</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="privilege-system"></a>
		5.7.&nbsp;MySQL访问权限系统</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#what-privileges">
			5.7.1. 权限系统的作用</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges">
			5.7.2. 权限系统工作原理</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges-provided">
			5.7.3. MySQL提供的权限</a></span></dt><dt><span class="section"><a href="database-administration.html#connecting">
			5.7.4. 与MySQL服务器连接</a></span></dt><dt><span class="section"><a href="database-administration.html#connection-access">
			5.7.5. 访问控制, 阶段1：连接核实</a></span></dt><dt><span class="section"><a href="database-administration.html#request-access">
			5.7.6. 访问控制, 阶段2：请求核实</a></span></dt><dt><span class="section"><a href="database-administration.html#privilege-changes">
			5.7.7. 权限更改何时生效</a></span></dt><dt><span class="section"><a href="database-administration.html#access-denied">
			5.7.8. 拒绝访问错误的原因<code class="literal"></code></a></span></dt><dt><span class="section"><a href="database-administration.html#password-hashing">
			5.7.9. MySQL 4.1中的密码哈希处理</a></span></dt></dl></div><a class="indexterm" name="id2765314"></a><a class="indexterm" name="id2765321"></a><a class="indexterm" name="id2765331"></a><a class="indexterm" name="id2765338"></a><div class="section"><div class="titlepage"><div><div>
			<b><span>MySQL</span></b>有先进但非标准的安全<span>/</span>权限系统。本节描述它的工作原理。<h3 class="title"><a name="what-privileges"></a>
			5.7.1.&nbsp;权限系统的作用</h3></div></div></div><a class="indexterm" name="id2765361"></a><a class="indexterm" name="id2765371"></a><a class="indexterm" name="id2765378"></a></div><div class="section"><div class="titlepage"><div><div>
			<strong><span>MySQL</span></strong>权限系统的主要功能是证实连接到一台给定主机的用户，并且赋予该用户在数据库上的<span>SELECT</span>、<span>INSERT</span>、<span>UPDATE</span>和<span>DELETE</span>权限。<p>
			附加的功能包括有匿名的用户并对于<strong><span>MySQL</span></strong>特定的功能例如<span>LOAD 
			DATA INFILE</span>进行授权及管理操作的能力。</p>
			<h3 class="title"><a name="privileges"></a>
			5.7.2.&nbsp;权限系统工作原理</h3></div></div></div><a class="indexterm" name="id2765432"></a>
			<p><strong>
			<span>
			MySQL</span></strong>权限系统保证所有的用户只执行允许做的事情。当你连接<strong><span>MySQL</span></strong>服务器时，你的身份由<strong><i><span>你从那儿连接的主机</span></i></strong>和<strong><i><span>你指定的用户名</span></i></strong>来决定。连接后发出请求后，系统根据你的身份和<strong><span>你想做什么</span></strong>来授予权限。</p>
			<p><strong><span>MySQL</span></strong>在认定身份中考虑你的主机名和用户名字，是因为几乎没有原因假定一个给定的用户在因特网上属于同一个人。例如，从<span>office.com</span>连接的用户<span>joe</span>不一定和从<span>elsewhere.com</span>连接的<span>joe</span>是同一个人。<strong><span>MySQL</span></strong>通过允许你区分在不同的主机上碰巧有同样名字的用户来处理它：你可以对<span>joe</span>从<span>office.com</span>进行的连接授与一个权限集，而为<span>joe</span>从<span>elsewhere.com</span>的连接授予一个不同的权限集。</p>
			<p><strong>
			<span>
			MySQL</span></strong>存取控制包含<span>2</span>个阶段：</p>
			<ul type="disc">
				<li>阶段<span>1</span>：服务器检查是否允许你连接。</li>
				<li>阶段<span>2</span>：假定你能连接，服务器检查你发出的每个请求。看你是否有足够的权限实施它。例如，如果你从数据库表中选择<span>(select)</span>行或从数据库删除表，服务器确定你对表有<span>SELECT</span>权限或对数据库有<span>DROP</span>权限。</li>
			</ul>
			<p>如果连接时你的权限被更改了<span>(</span>通过你和其它人<span>)</span>，这些更改不一定立即对你发出的下一个语句生效。详情参见<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7节，“权限更改何时生效”</a>。</p>
			<p>服务器在<span>mysql</span>数据库的
			授权表中保存权限信息<span>(</span>即在<span>mysql</span>数据库中<span>)</span>。当<span>MySQL</span>服务器启动时将这些表的内容读入内存，在<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7节，“权限更改何时生效”</a>的环境下重新读取它们。访问控制决策取决于内存中的
			授权表的份数。</p>
			<p>一般情况，你通过<span>GRANT</span>和<span>REVOKE</span>语句间接来操作
			授权表的内容，设置账户并控制个人的权限。参见<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3节，“GRANT和REVOKE语法”</a>。下面讨论了
			授权表的结构以及服务器与客户端交互操作时如何使用其内容。</p>
			<p>服务器在存取控制的两个阶段使用<span>mysql</span>数据库中的<span>user</span>、<span>db</span>和<span>host</span>表，这些授权表中的列如下：</p>
			<table border="1" cellpadding="0" style="margin-left: -.4pt" id="table8">
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>表名</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong>
					<span>user</span></strong></td>
					<td>
					<p><strong>
					<span>db</span></strong></td>
					<td>
					<p><strong>
					<span>host</span></strong></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					列范围</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Host</span></td>
					<td>
					<p>
					<span>Host</span></td>
					<td>
					<p>
					<span>Host</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>User</span></td>
					<td>
					<p>
					<span>Db</span></td>
					<td>
					<p>
					<span>Db</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Password</span></td>
					<td>
					<p>
					<span>User</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					权限列</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Select_priv</span></td>
					<td>
					<p>
					<span>Select_priv</span></td>
					<td>
					<p>
					<span>Select_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Insert_priv</span></td>
					<td>
					<p>
					<span>Insert_priv</span></td>
					<td>
					<p>
					<span>Insert_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Update_priv</span></td>
					<td>
					<p>
					<span>Update_priv</span></td>
					<td>
					<p>
					<span>Update_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Delete_priv</span></td>
					<td>
					<p>
					<span>Delete_priv</span></td>
					<td>
					<p>
					<span>Delete_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Index_priv</span></td>
					<td>
					<p>
					<span>Index_priv</span></td>
					<td>
					<p>
					<span>Index_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Alter_priv</span></td>
					<td>
					<p>
					<span>Alter_priv</span></td>
					<td>
					<p>
					<span>Alter_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Create_priv</span></td>
					<td>
					<p>
					<span>Create_priv</span></td>
					<td>
					<p>
					<span>Create_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Drop_priv</span></td>
					<td>
					<p>
					<span>Drop_priv</span></td>
					<td>
					<p>
					<span>Drop_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Grant_priv</span></td>
					<td>
					<p>
					<span>Grant_priv</span></td>
					<td>
					<p>
					<span>Grant_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Create_view_priv</span></td>
					<td>
					<p>
					<span>Create_view_priv</span></td>
					<td>
					<p>
					<span>Create_view_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Show_view_priv</span></td>
					<td>
					<p>
					<span>Show_view_priv</span></td>
					<td>
					<p>
					<span>Show_view_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Create_routine_priv</span></td>
					<td>
					<p>
					<span>Create_routine_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Alter_routine_priv</span></td>
					<td>
					<p>
					<span>Alter_routine_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>References_priv</span></td>
					<td>
					<p>
					<span>References_priv</span></td>
					<td>
					<p>
					<span>References_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span style="font-family: &quot;Arial Unicode MS&quot;;
  color:windowtext">&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Reload_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Shutdown_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Process_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>File_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Show_db_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Super_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Create_tmp_table_priv</span></td>
					<td>
					<p>
					<span>Create_tmp_table_priv</span></td>
					<td>
					<p>
					<span>Create_tmp_table_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Lock_tables_priv</span></td>
					<td>
					<p>
					<span>Lock_tables_priv</span></td>
					<td>
					<p>
					<span>Lock_tables_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Execute_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Repl_slave_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Repl_client_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					安全列</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>ssl_type</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>ssl_cipher</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>x509_issuer</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>x509_subject</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					资源控制列</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>max_questions</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>max_updates</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>max_connections</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>max_user_connections</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
			</table>
			<p>对存取控制的第二阶段<span>(</span>请求证实<span>)</span>，服务器执行请求验证以确保每个客户端有充分的权限满足各需求。除了<span>user</span>、<span>db</span>和<span>host</span>授权表，如果请求涉及表，服务器可以另外参考<span>tables_priv</span>和<span>columns_priv</span>表。<span>tables_priv</span>和<span>columns_priv</span>表可以对表和列提供更精确的权限控制。这些表的列如下：</p>
			<table border="1" cellpadding="0" style="margin-left: -.4pt" id="table9">
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>表名</span></strong></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong>
					<span>tables_priv</span></strong></td>
					<td>
					<p><strong>
					<span>columns_priv</span></strong></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					范围列</span></strong></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Host</span></td>
					<td>
					<p>
					<span>Host</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Db</span></td>
					<td>
					<p>
					<span>Db</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>User</span></td>
					<td>
					<p>
					<span>User</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Table_name</span></td>
					<td>
					<p>
					<span>Table_name</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Column_name</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					权限列</span></strong></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Table_priv</span></td>
					<td>
					<p>
					<span>Column_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Column_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					其它列</span></strong></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Timestamp</span></td>
					<td>
					<p>
					<span>Timestamp</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Grantor</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
			</table>
			<p><span>Timestamp</span>和<span>Grantor</span>列当前还未使用，这儿不再进一步讨论。</p>
			<p>为了对涉及保存程序的请求进行验证，服务器将查阅<span>procs_priv</span>表。该表具有以下列：</p>
			<table border="1" cellpadding="0" id="table10">
				<tr>
					<td>
					<p><strong><span>表名</span></strong></td>
					<td>
					<p><strong>
					<span>procs_priv</span></strong></td>
				</tr>
				<tr>
					<td>
					<p><strong><span>
					范围列</span></strong></td>
					<td>
					<p>
					<span>Host</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Db</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>User</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Routine_name</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Routine_type</span></td>
				</tr>
				<tr>
					<td>
					<p><strong><span>
					权限列</span></strong></td>
					<td>
					<p>
					<span>Proc_priv</span></td>
				</tr>
				<tr>
					<td>
					<p><strong><span>
					其它列</span></strong></td>
					<td>
					<p>
					<span>Timestamp</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Grantor</span></td>
				</tr>
			</table>
			<p><span>Routine_type</span>列为<span>ENUM</span>列，值为<span>&#39;FUNCTION&#39;</span>或<span>&#39;PROCEDURE&#39;</span>，表示行所指的程序类型。该列允许为同名函数和程序单独授权。</p>
			<p><span>Timestamp</span>和<span>Grantor</span>列当前还未使用，这儿不再进一步讨论。</p>
			<p>每个授权表包含范围列和权限列：</p>
			<p style="text-indent: -21.0pt; margin-left: 21.0pt;   ">
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>范围列决定表中每个条目（行）的范围，即，行适用的上下文。例如<span>,
			</span>一个<span>user</span>表行的<span>Host</span>和<span>User</span>值为<span>&#39;thomas.loc.gov&#39;</span>和<span><span>&#39;bob&#39;</span>，</span>将被用于证实来自主机<span>thomas.loc.gov</span>的<span>bob</span>对服务器的连接。同样，一个<span>db</span>表行的<span>Host</span>、<span>User</span>和<span>Db</span>列的值是<span>&#39;thomas.loc.gov&#39;</span>、<span>&#39;bob&#39;</span>和<span>&#39;reports&#39;</span>将用在<span>bob</span>从主机<span>thomas.loc.gov</span>联接访问<span>reports</span>数据库的时候。<span>tables_priv</span>和<span>columns_priv</span>表包含范围列，指出每个行适用的表或表<span>/</span>列的组合。<span>procs_priv</span>范围列指出每个行适用的保存程序。</p>
			<p style="margin-left: 27.0pt;   ">
			对于检查存取的用途，比较<span>Host</span>值是忽略大小写的。<span>User</span>、<span>Passwor</span><span>d</span>、<span>Db</span>和<span>Table_name</span>值是区分大小写的。<span>Column_name</span>值在<strong><span
宋体;">MySQL</span></strong><span>3.22.12</span>或以后版本是忽略大小写的。</p>
			<p style="text-indent: -21.0pt; margin-left: 21.0pt;   ">
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			权限列指出由一个表行授予的权限，即，可实施什么操作。服务器组合各种的授权表的信息形成一个用户权限的完整描述。为此使用的规则在<a href="database-administration.html#request-access" title="5.7.6. Access Control, Stage 2: Request Verification">5.7.6节，“访问控制, 阶段2：请求核实”</a>描述。</p>
			<p>范围列包含字符串，如下所述；每个列的默认值是空字符串：</p>
			<table border="1" cellpadding="0" id="table11">
				<tr>
					<td width="116">
					<p><strong><span>列名</span></strong></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>类型</span></strong></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Host</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(60)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>User</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(16)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Password</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(16)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Db</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(64)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Table_name</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(64)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Column_name</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(64)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Routine_name</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(64)</span></td>
				</tr>
			</table>
			<p>为了访问检查目的，<span>Host</span>值的比较对大小写不敏感。<span>User</span>、<span>Password</span>、<span>Db</span>和<span>Table_name</span>值对大小写敏感。<span>Column_name</span>值对大小写不敏感。</p>
			<p>
			在<span>user</span>、<span>db</span>和<span>host</span>表中，所有权限列于单独的列内，被声明为<span><span>ENUM(&#39;N&#39;,&#39;Y&#39;) 
			DEFAULT &#39;N&#39;</span>。</span>换句话说<span>，</span>每一个权限都可以被禁用和启用，并且
			默认是禁用<span>。</span></p>
			<p>在<span>tables_priv</span>、<span>columns_priv</span>和<span>procs_priv</span>表中，权限列被声明为<span>SET</span>列。这些列的值可以包含该表控制的权限的组合：</p>
			<table border="1" cellpadding="0" id="table12">
				<tr>
					<td>
					<p><strong><span>表名</span></strong></td>
					<td>
					<p><strong><span>列名</span></strong></td>
					<td>
					<p><strong><span>
					可能的设置元素</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>tables_priv</span></td>
					<td>
					<p>
					<span>Table_priv</span></td>
					<td>
					<p>
					<span>&#39;Select&#39;, &#39;Insert&#39;, &#39;Update&#39;, &#39;Delete&#39;, 
					&#39;Create&#39;, &#39;Drop&#39;, &#39;Grant&#39;, &#39;References&#39;, &#39;Index&#39;, &#39;Alter&#39;</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>tables_priv</span></td>
					<td>
					<p>
					<span>Column_priv</span></td>
					<td>
					<p>
					<span>&#39;Select&#39;, &#39;Insert&#39;, &#39;Update&#39;, 
					&#39;References&#39;</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>columns_priv</span></td>
					<td>
					<p>
					<span>Column_priv</span></td>
					<td>
					<p>
					<span>&#39;Select&#39;, &#39;Insert&#39;, &#39;Update&#39;, 
					&#39;References&#39;</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>procs_priv</span></td>
					<td>
					<p>
					<span>Proc_priv</span></td>
					<td>
					<p>
					<span>&#39;Execute&#39;, &#39;Alter Routine&#39;, &#39;Grant&#39;</span></td>
				</tr>
			</table>
			<p>简单地说，服务器使用这样的授权表：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>user</span>表范围列决定是否允许或拒绝到来的连接。对于允许的连接，<span>user</span>表授予的权限指出用户的全局<span>(</span>超级用户<span>)</span>权限。这些权限适用于服务器上的<em><span 
>all</span></em>数据库。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>db</span>表范围列决定用户能从哪个主机存取哪个数据库。权限列决定允许哪个操作。授予的数据库级别的权限适用于数据库和它的表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>当你想要一个给定的<span>db</span>表行应用于若干主机时，<span>db</span>和<span>host</span>表一起使用。例如，如果你想要一个用户能在你的网络从若干主机使用一个数据库，在用户的<span>db</span>表行的<span>Host</span>值设为空值，然后将那些主机的每一个移入<span>host</span>表。这个机制详细描述在<a href="database-administration.html#request-access" title="5.7.6. Access Control, Stage 2: Request Verification">5.7.6节，“访问控制, 阶段2：请求核实”</a>。</p>
			<p><strong>
			<span>注</span></strong>释：<span>host</span>表不受<span>GRANT</span>和<span>REVOKE</span>语句的影响。大多数<span>MySQL</span>安装根本不需要使用该表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			tables_priv</span>和<span>columns_priv</span>表类似于<span>db</span>表，但是更精致：它们在表和列级应用而非在数据库级。授予表级别的权限适用于表和所有它的列。授予列级别的权限只适用于专用列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>procs_priv</span>表适用于保存的程序。授予程序级别的权限只适用于单个程序。</p>
			<p>
			管理权限<span>(</span>例如<span>RELOAD</span>或<span>SHUTDOWN</span>等等<span>)</span>仅在<span>user</span>表中被指定。这是因为管理性操作是服务器本身的操作并且不是特定数据库，因此没有理由在其他授权表中列出这样的权限。事实上，只需要查询<span>user</span>表来决定你是否执行一个管理操作。 
			</p>
			<p>
			<span>FILE</span>权限也仅在<span>user</span>表中指定。它不是管理性权限，但你在服务器主机上读或写文件的能力与你正在存取的数据库无关。</p>
			<p>
			当<span><b><span>mysqld</span></b></span>服务器启动时，将授权表的内容读入到内存中。你可以通过<span>FLUSH 
			PRIVILEGES</span>语句或执行<strong><span 
>mysqladmin flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span></strong>命令让它重新读取表。对授权表的更改生效在<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7节，“权限更改何时生效”</a>描述。 </p>
			<p>
			当你修改授权表的内容时，确保你按你想要的方式更改权限设置是一个好主意。要检查给定账户的权限，使用<span>SHOW 
			GRANTS</span>语句。例如，要检查<span>Host</span>和<span>User</span>值分别为<span>pc84.example.com</span>和<span>bob</span>的账户所授予的权限，应通过语句：</p>
			<p>
			<span>&nbsp;</span></p>
			<p>
			<span>mysql&gt; </span><span><b>
			<span>SHOW GRANTS FOR &#39;bob&#39;@&#39;pc84.example.com&#39;;</span></b></span></p>
			<p>一个有用的诊断工具是<span><b><span>mysqlaccess</span></b></span>脚本，由<span>Carlier 
			Yves </span>提供给<strong><span>MySQL</span></strong>分发。使用<span>--help</span>选项调用<span><b><span>mysqlaccess</span></b></span>查明它怎样工作。注意：<span><b><span>mysqlaccess</span></b></span>仅用<span>user</span>、<span>db</span>和<span>host</span>表检查存取。它不检查<span>tables_priv</span>、<span>columns_priv</span>或<span>procs_priv</span>表中指定的表、列和程序级权限。</p>
			<p>对于诊断权限相关的问题的其它帮助，参见<a href="database-administration.html#access-denied" title="5.7.8. Causes of Access denied Errors">5.7.8节，“拒绝访问错误的原因<code class="literal"></code>”</a>。对于安全问题常规建议，参见<a href="database-administration.html#security" title="5.6. General Security Issues">5.6节，“一般安全问题”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="privileges-provided"></a>
			5.7.3.&nbsp;MySQL提供的权限</h3></div></div></div><a class="indexterm" name="id2767488"></a>
			<p>账户权限信息被存储在<span>mysql</span>数据库的<span>user</span>、<span>db</span>、<span>host</span>、<span><span>tables_priv</span>、<span>columns_priv</span></span>和<span>procs_priv</span>表中。在<strong><span>MySQL</span></strong>启动时并在<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7节，“权限更改何时生效”</a>所说的情况时，服务器将这些数据库表内容读入内存。</p>
			<p><span>GRANT</span>和<span>REVOKE</span>语句所用的涉及权限的名称显示在下表，还有在授权表中每个权限的表列名称和每个权限有关的上下文。关于每个权限的含义相关的详细信息参见<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3节，“GRANT和REVOKE语法”</a>。</p>
			<table border="1" cellpadding="0" style="margin-left: -.4pt" id="table13">
				<tr>
					<td>
					<p><strong><span>权限</span></strong></td>
					<td>
					<p><strong><span>列</span></strong></td>
					<td>
					<p><strong><span>
					上下文</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE</span></td>
					<td>
					<p>
					<span>Create_priv</span></td>
					<td>
					<p>数据库、表或索引</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>DROP</span></td>
					<td>
					<p>
					<span>Drop_priv</span></td>
					<td>
					<p>数据库或表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>GRANT OPTION</span></td>
					<td>
					<p>
					<span>Grant_priv</span></td>
					<td>
					<p>数据库、表或保存的程序</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>REFERENCES</span></td>
					<td>
					<p>
					<span>References_priv</span></td>
					<td>
					<p>数据库或表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>ALTER</span></td>
					<td>
					<p>
					<span>Alter_priv</span></td>
					<td>
					<p>表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>DELETE</span></td>
					<td>
					<p>
					<span>Delete_priv</span></td>
					<td>
					<p>表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>INDEX</span></td>
					<td>
					<p>
					<span>Index_priv</span></td>
					<td valign="top">
					<p>表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>INSERT</span></td>
					<td>
					<p>
					<span>Insert_priv</span></td>
					<td valign="top">
					<p>表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SELECT</span></td>
					<td>
					<p>
					<span>Select_priv</span></td>
					<td valign="top">
					<p>表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>UPDATE</span></td>
					<td>
					<p>
					<span>Update_priv</span></td>
					<td valign="top">
					<p>表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE VIEW</span></td>
					<td>
					<p>
					<span>Create_view_priv</span></td>
					<td>
					<p>视图</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SHOW VIEW</span></td>
					<td>
					<p>
					<span>Show_view_priv</span></td>
					<td>
					<p>视图</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>ALTER ROUTINE</span></td>
					<td>
					<p>
					<span>Alter_routine_priv</span></td>
					<td valign="top">
					<p>保存的程序</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE ROUTINE</span></td>
					<td>
					<p>
					<span>Create_routine_priv</span></td>
					<td valign="top">
					<p>保存的程序</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>EXECUTE</span></td>
					<td>
					<p>
					<span>Execute_priv</span></td>
					<td valign="top">
					<p>保存的程序</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>FILE</span></td>
					<td>
					<p>
					<span>File_priv</span></td>
					<td>
					<p>服务器主机上的文件访问</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE TEMPORARY TABLES</span></td>
					<td>
					<p>
					<span>Create_tmp_table_priv</span></td>
					<td>
					<p>服务器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>LOCK TABLES</span></td>
					<td>
					<p>
					<span>Lock_tables_priv</span></td>
					<td valign="top">
					<p>服务器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE USER</span></td>
					<td>
					<p>
					<span>Create_user_priv</span></td>
					<td valign="top">
					<p>服务器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>PROCESS</span></td>
					<td>
					<p>
					<span>Process_priv</span></td>
					<td valign="top">
					<p>服务器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>RELOAD</span></td>
					<td>
					<p>
					<span>Reload_priv</span></td>
					<td valign="top">
					<p>服务器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>REPLICATION CLIENT</span></td>
					<td>
					<p>
					<span>Repl_client_priv</span></td>
					<td valign="top">
					<p>服务器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>REPLICATION SLAVE</span></td>
					<td>
					<p>
					<span>Repl_slave_priv</span></td>
					<td valign="top">
					<p>服务器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SHOW DATABASES</span></td>
					<td>
					<p>
					<span>Show_db_priv</span></td>
					<td valign="top">
					<p>服务器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SHUTDOWN</span></td>
					<td>
					<p>
					<span>Shutdown_priv</span></td>
					<td valign="top">
					<p>服务器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SUPER</span></td>
					<td>
					<p>
					<span>Super_priv</span></td>
					<td valign="top">
					<p>服务器管理</td>
				</tr>
			</table>
			<p>当从早期的没有<span>CREATE VIEW</span>、<span>SHOW 
			VIEW</span>、<span>CREATE 
			ROUTINE</span>、<span>ALTER 
			ROUTINE</span>和<span>EXECUTE</span>权限的版本的<span>MySQL</span>中升级时，要想使用这些权限，你必须使用<span>MySQL</span>分发提供的<strong><span>mysql_fix_privilege_tables</span></strong>脚本升级
			授权表。参见<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2节，“升级授权表”</a>。</p>
			<p>如果启用了二进制记录，要想创建或修改保存的程序，你还需要<span>SUPER</span>权限，详细描述见<a href="stored-procedures.html#stored-procedure-logging" title="20.4. Binary Logging of Stored Routines and Triggers">20.4节，“存储子程序和触发程序的二进制日志功能”</a>。</p>
			<p>通过<span>CREATE</span>和<span>DROP</span>权限，你可以创建新数据库和表，或删除<span>(</span>移掉<span>)</span>已有数据库和表。<em><span>如果你将</span></em><span><i><span>mysql</span></i></span><em><span>数据库中的</span></em><span><i><span>DROP</span></i></span><em><span>权限授予某用户，用户可以删掉<span>MySQL</span>访问权限保存的数据库。</span></em></p>
			<p>
			<span>SELECT</span>、<span>INSERT</span>、<span>UPDATE</span>和<span>DELETE</span>权限允许你在一个数据库现有的表上实施操作。 
			</p>
			<p><span>SELECT</span>语句只有在他们真正从一个表中检索行时才需要<span>SELECT</span>权限。一些<span>SELECT</span>语句不访问表，甚至没有任何到服务器上的数据库里的存取任何东西的许可。例如，你可使用<span><b><span>mysql</span></b></span>客户端作为一个简单的计算器来评估未引用表的表达式：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT 1+1;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SELECT PI()*2;</span></b></span></pre>
			<p><span>INDEX</span>权限允许你创建或删除索引。<span>INDEX</span>适用已有表<span>。</span>如果你具有某个表的<span>CREATE</span>权限，你可以在<span>CREATE 
			TABLE</span>语句中包括索引定义。</p>
			<p>通过<span>ALTER</span>权限，你可以使用<span>ALTER 
			TABLE</span>来更改表的结构和重新命名表<span>。</span></p>
			<p>需要<span>CREATE ROUTINE</span>权限来创建保存的程序（函数和程序），<span>ALTER 
			ROUTINE</span>权限来更改和删除保存的程序，<span>EXECUTE</span>来执行保存的程序。</p>
			<p><span>GRANT</span>权限允许你把你自己拥有的那些权限授给其他的用户。可以用于数据库、表和保存的程序。</p>
			<p><span>FILE</span>权限给予你用<span>LOAD 
			DATA INFILE</span>和<span>SELECT 
			... INTO OUTFILE</span>语句读和写服务器上的文件，任何被授予<span>FILE</span>权限的用户都能读或写<strong><span style="font-weight:
normal">MySQL</span></strong>服务器能读或写的任何文件。<span>(</span>说明用户可以读任何数据库目录下的文件，因为服务器可以访问这些文件）<span>。
			</span><span>FILE</span>权限允许用户在<span>MySQL</span>服务器具有写权限的目录下创建新文件。不能覆盖已有文件。</p>
			<p>其余的权限用于管理性操作，它使用<span><b><span>mysqladmin</span></b></span>程序或<span>SQL</span>语句实施。下表显示每个管理性权限允许你执行的<span><b><span>mysqladmin</span></b></span>命令：</p>
			<table border="1" cellpadding="0" style="margin-left: -.4pt" id="table14">
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>权限</span></strong></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					权限拥有者允许执行的命令</span></strong></td>
				</tr>
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>RELOAD</span></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>flush-hosts</span><span>,
					</span><span>
					flush-logs</span><span>, </span>
					<span>
					flush-privileges</span><span>, </span>
					<span>
					flush-status</span><span>, </span>
					<span>
					flush-tables</span><span>, </span>
					<span>
					flush-threads</span><span>, </span>
					<span>refresh</span><span>,
					</span><span>
					reload</span></td>
				</tr>
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>SHUTDOWN</span></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>shutdown</span></td>
				</tr>
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>PROCESS</span></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>processlist</span></td>
				</tr>
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>SUPER</span></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>kill</span></td>
				</tr>
			</table>
			<p><span>reload</span>命令告诉服务器将授权表重新读入内存。<span>flush-privileges</span>是<span>reload</span>的同义词，<span>refresh</span>命令清空所有表并打开并关闭记录文件，其它<span>flush-<i>xxx</i></span>命令执行类似<span>refresh</span>的功能，但是范围更有限，并且在某些情况下可能更好用。例如，如果你只是想清空记录文件，<span>flush-logs</span>比<span>refresh</span>是更好的选择。</p>
			<p><span>shutdown</span>命令关掉服务器。只能从<strong><span>mysqladmin</span></strong>发出命令。没有相应的<span>SQL</span>语句。</p>
			<p>
			<span  >processlist</span><span>命令显示在服务器内执行的线程的信息（即其它账户相关的客户端执行的语句）。</span><span>kill</span><span>命令杀死服务器线程。你总是能显示或杀死你自己的线程，但是你需要</span><span>PROCESS</span><span>权限来显示或杀死其他用户和</span><span>SUPER</span><span>权限启动的线程。</span>参见<a href="sql-syntax.html#kill" title="13.5.5.3. KILL Syntax">13.5.5.3节，“KILL语法”</a>。</div><div class="section"><div class="titlepage"><div><div>
			拥有<span>CREATE TEMPORARY 
			TABLES</span><span>权限</span>便可以使用<span>CREATE 
			TABLE</span>语句中的关键字<span>TEMPORARY</span>。<p>
			拥有<span>LOCK TABLES</span><span>权限</span>便可以直接使用<span>LOCK 
			TABLES</span>语句来锁定你拥有<span>SELECT</span>权限的表。包括使用写锁定，可以防止他人读锁定的表。</p>
			<p>拥有<span>REPLICATION 
			CLIENT</span><span>权限</span>便可以使用<span>SHOW 
			MASTER STATUS</span>和<span>SHOW 
			SLAVE STATUS</span>。</p>
			<p><span>REPLICATION SLAVE</span><span>权限应授予从服务器所使用的将当前服务器连接为主服务器的账户</span>。没有这个权限，<span>从服务器不能发出对主服务器上的数据库所发出的更新请求。</span></p>
			<p>拥有<span>SHOW DATABASES</span><span>权限</span>便允许账户使用<span>SHOW 
			DATABASE</span>语句来查看数据库名。没有该权限的账户只能看到他们具有部分权限的数据库， 如果数据库用<span>--skip-show-database</span>选项启动，则根本不能使用这些语句。请注意全局权限指数据库的权限。</p>
			<p>总的说来，只授予权限给需要他们的那些用户是好主意，但是你应该在授予<span>FILE</span>和管理权限时试验特定的警告：</p>
			<ul type="disc">
				<li>
				<span>FILE</span>权限可以被滥用于将服务器主机上<span>MySQL</span>能读取的任何文件读入到数据库表中。包括任何人可读的文件和服务器数据目录中的文件。可以使用<span>SELECT</span>访问数据库表，然后将其内容传输到客户端上。</li>
				<li>
				<span>GRANT</span>权限允许用户将他们的权限给其他用户。有不同的权限并有<span>GRANT</span>权限的<span>2</span>个用户可以合并权限。</li>
				<li>
				<span>ALTER</span>权限可以用于通过重新命名表来推翻权限系统。</li>
				<li>
				<span>SHUTDOWN</span>权限通过终止服务器可以被滥用完全拒绝为其他用户服务。</li>
				<li>
				<span>PROCESS</span>权限能被用来察看当前执行的查询的明文文本，包括设定或改变密码的查询。</li>
				<li>
				<span>SUPER</span>权限能用来终止其它用户或更改服务器的操作方式。</li>
				<li>授给<span>mysql</span>数据库本身的权限能用来改变密码和其他访问权限信息。密码被加密存储，所以恶意的用户不能简单地读取他们以知道明文密码。然而，具有<span>user</span>表<span>Password</span>列写访问权限的用户可以更改账户的密码，并可以用该账户连接<span>MySQL</span>服务器。</li>
			</ul>
			<p>有一些事情你不能用<strong><span>MySQL</span></strong>权限系统做到：</p>
			<ul type="disc">
				<li>你不能明显地指定某个给定的用户应该被拒绝访问。即，你不能明显地匹配用户然后拒绝连接。</li>
				<li>你不能指定用户有权创建立或删除数据库中的表，但不能创建或删除数据库本身。</li>
			</ul>
			<h3 class="title"><a name="connecting"></a>
			5.7.4.&nbsp;与MySQL服务器连接</h3></div></div></div><a class="indexterm" name="id2768716"></a><a class="indexterm" name="id2768727"></a><a class="indexterm" name="id2768733"></a><a class="indexterm" name="id2768744"></a>
			<p>当你想要访问<span>MySQL</span>服务器时，<span>MySQL</span>客户端程序一般要求你指定参数：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>服务器运行的主机名</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>姓名</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>密码</p>
			<p>例如，可以从命令行按照下述提示启动<strong><span>MySQL</span></strong>客户端<span>(</span>用<span>shell&gt;</span>表示<span>)</span>：</p>
			<pre><span>shell&gt; </span><span  >MySQL<b> -h <i>host_name</i> -u <i>user_name</i> -p<i>your_pass</i></b></span></pre>
			<p><span>-h</span><span>,
			</span><span>-u</span>和<span>-p</span>选项还可以采用形式<span>--host=<i>host_name</i></span>、<span>--user=<i>user_name</i></span>和<span>--password=<i>your_pass</i></span>。请注意在<span>-p</span>或<span>--password=</span>和后面的密码之间<i>没有<em><span>空格</span></em></i>。</p>
			<p>如果你使用<span>-p</span>或<span>--password</span>选项但没有指定密码值，客户端程序提示你输入密码。当你输入密码时并不显示密码。这比在在命令行输入密码要安全得多。系统上的任何用户可以通过命令<strong><span>ps 
			auxww</span></strong>在命令行中指定密码。参见<a href="database-administration.html#password-security" title="5.8.6. Keeping Your Password Secure">5.8.6节，“使你的密码安全”</a>。</p>
			<p>如果没有指定连接参数，<span>MySQL</span>客户端程序使用默认值：</p>
			<ul type="disc">
				<li>默认主机名是<span>localhost</span>。</li>
				<li>默认用户名在<span>Windows</span>中是<span>ODBC</span>，在<span>Unix</span>中是你的<span>Unix</span>登录名。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果没有<span>-p</span>，则不提供密码。</p>
			<p>这样<span>, </span>对<span>Unix</span>用户<span>joe</span>，下列命令是等价的： 
			</p>
			<pre><span>shell&gt; </span><span  >MySQL<b> -h localhost -u joe</b></span></pre>
			<pre><span>shell&gt; </span><span  >MySQL<b> -h localhost</b></span></pre>
			<pre><span>shell&gt; </span><span  >MySQL<b> -u joe</b></span></pre>
			<pre><span>shell&gt; </span><span  >MySQL</span></pre>
			<p>其它<strong><span
宋体;">MySQL</span></strong>客户端程序类似。</p>
			<p>当进行连接时，你可以指定要使用的不同的默认值，这样不必每次在你调用客户端程序是在命令行上输入它们。这可以有很多方法做到：</p>
			<ul type="disc">
				<li>你可以在选项文件的<span>[client]</span>小节里指定连接参数。文件的相关小节看上去可能像这样：</li>
			</ul>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[client]</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>host=</span><span><i><span>host_name</span></i></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>user=</span><span><i><span>user_name</span></i></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>password=</span><span><i><span>your_pass</span></i></span></pre>
			<p>在<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>中详细讨论了选项文件。</p>
			<ul type="disc">
				<li>你可以用环境变量指定连接参数。主机可用<span>MYSQL_HOST</span>指定，<strong><span>MySQL</span></strong>用户名可用<span>USER</span>指定<span>(</span>仅对<span>Windows</span>和<span>NetWare</span><span>)</span>，密码可用<span>MYSQL_PWD</span>指定，尽管这不安全；参见<a href="database-administration.html#password-security" title="5.8.6. Keeping Your Password Secure">5.8.6节，“使你的密码安全”</a>。变量参见<a href="environment-variables.html">附录F：</a><a href="environment-variables.html" title="Appendix F. Environment Variables"><i>环境变量</i></a>。</li>
			</ul>
		</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="connection-access"></a>
			5.7.5.&nbsp;访问控制, 阶段1：连接核实</h3></div></div></div><a class="indexterm" name="id2769142"></a><a class="indexterm" name="id2769149"></a><a class="indexterm" name="id2769156"></a><a class="indexterm" name="id2769166"></a>
			<p>当你试图连接<strong><span>MySQL</span></strong>服务器时，服务器基于你的身份以及你是否能通过供应正确的密码验证身份来接受或拒绝连接。如果不是，服务器完全拒绝你的访问，否则，服务器接受连接，然后进入阶段<span>2</span>并且等待请求。</p>
			<p>你的身份基于<span>2</span>个信息：</p>
			<ul type="disc">
				<li>你从那个主机连接</li>
				<li>你的<strong><span>MySQL</span></strong>用户名</li>
			</ul>
			<p>身份检查使用<span>3</span>个<span>user</span>表<span>(</span><span>Host</span><span>,
			</span><span>User</span>和<span>Password</span><span>)</span>范围列执行。服务器只有在<span>user</span>表记录的<span>Host</span>和<span>User</span>列匹配客户端主机名和用户名并且提供了正确的密码时才接受连接。</p>
			<p>在<span>user</span>表<span>Host</span>值的指定方法：</p>
			<ul type="disc">
				<li>
				<span>Host</span>值可以是主机名或<span>IP</span>号，或<span>&#39;localhost&#39;</span>指出本地主机。</li>
				<li>你可以在<span>Host</span>列值使用通配符字符<samp >“<span>%</span>”</samp>和<samp >“<span>_</span>”</samp>。</li>
				<li>
				<span>Host</span>值<span>&#39;%&#39;</span>匹配任何主机名，空<span>Host</span>值等价于<span>&#39;%&#39;</span>。它们的含义与<span>LIKE</span>操作符的模式匹配操作相同。例如，<span>&#39;%&#39;</span>的<span>Host</span>值与所有主机名匹配，而<span>&#39;%.mysql.com&#39;</span>匹配<span>mysql.com</span>域的所有主机。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对于指定为<span>IP</span>号的<span>Host</span>值，你可以指定一个网络掩码，说明使用多少位地址位来评比网络号。例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON db.*</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span>-&gt; </span><span><b><span>TO david@&#39;192.58.197.0/255.255.255.0&#39;;</span></b></span></pre>
			<p>允许<span>david</span>从任何客户端用<span>IP</span>号<span>client_ip</span>来连接，下面的条件为真：</p>
			<pre ><span>client_ip &amp; netmask = host_ip</span></pre>
			<p><span>That is, for the
			</span><span>GRANT</span><span> 
			statement just shown: </span></p>
			<pre ><span>client_ip &amp; 255.255.255.0 = 192.58.197.0</span></pre>
			<p>满足该条件并可以连接<span>MySQL</span>服务器的<span>IP</span>号的范围为<span>192.58.197.0</span>到<span><span>192.58.197.255</span>。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>注释：网络掩码只用来告诉服务器使用<span>8</span>、<span>16</span>、<span>24</span>或<span>32</span>位地址，例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>192.0.0.0/255.0.0.0(192 A</span><span>类网络的任何地址</span><span>)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>192.168.0.0/255.255.0.0(192.168 A</span><span>类网络的任何地址</span><span>)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>192.168.1.0/255.255.255.0(192.168.1 C</span><span>类网络的任何地址</span><span>)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>192.168.1.1(</span><span>只有该</span><span>IP)</span></pre>
			<p>下面的网络掩码<span>(28 </span>位<span>)</span>无效：</p>
			<pre ><span>192.168.0.1/255.255.255.240</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>db</span>表记录中的空<span>Host</span>值表示它的权限应结合匹配客户端名的<span>host</span>表中的行使用。通过<span>AND(</span>相与<span>)</span>而不是或<span>(</span>联合<span>)</span>操作将权限组合到一起。你可以从<a href="database-administration.html#request-access" title="5.7.6. Access Control, Stage 2: Request Verification">5.7.6节，“访问控制, 阶段2：请求核实”</a>找到关于<span>host</span>表的详细信息。</p>
			<p>其它<span>grant</span>表的空<span>Host</span>值与<span>&#39;%&#39;</span>相同。</p>
			<p>既然你能在<span>Host</span>字段使用<span>IP</span>通配符值<span>(</span>例如，<span>&#39;144.155.166.%&#39;</span>匹配在一个子网上的每台主机<span>)</span>，有可能某人可能企图探究这种能力，通过命名一台主机为<span>144.155.166.somewhere.com</span>。为了阻止这样的企图，<strong><span style="font-weight:
normal">MySQL</span></strong>不允许匹配以数字和一个点起始的主机名，这样，如果你用一个命名为类似<span>1.2.foo.com</span>的主机，它的名字决不会匹配授权表中的<span>Host</span>列。只有一个<span>IP</span>数字能匹配<span>IP</span>通配符值。</p>
			<p>通配符字符在<span>User</span>列中不允许，但是你能指定空的值，它匹配任何名字。如果<span>user</span>表匹配的连接有一个空用户名，用户被认为是匿名用户<span>(</span>没有名字的用户<span>)</span>，而非客户端实际指定的名字。这意味着一个空的用户名被用于在连接期间的进一步的访问检查<span>(</span>即，在阶段<span>2</span>期间<span>)</span>。</p>
			<p><span>Password</span>列可以是空的。这不是通配符，也不意味着匹配任何密码，它意味着用户必须不指定一个密码进行连接。</p>
			<p><span>user</span>表中的<span>非空</span><span>Password</span><span>值代表加密的密码。<strong><span>MySQL</span></strong>不以任何人可以看的明文文本格式存储密码，相反，正在试图联接的用户提供的密码被加密<span>(</span>使用</span><span>PASSWORD( 
			)</span><span>函数<span>)</span>，在连接过程中使用加密的密码检查密码是否正确。</span><span>(</span><span>加密后的密码未通过连接即可实现）<span>。</span>从<span>MySQL</span>角度，加密的密码是实际密码，因此你不应让其它人访问它！特别是，绝对不要让非管理用户读</span><span  >mysql</span><span>数据库中的表！</span></p>
			<p><span>MySQL 5.1</span>使用强鉴定方法<span>(</span>最先在<span>MySQL 
			4.1</span>中适用<span>)</span>在前面的版本中在连接进程中的密码保护较好。即使<span>TCP/IP</span>包被截取或<span>mysql</span>数据库 
			被捕获也很安全。<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9节，“MySQL 4.1中的密码哈希处理”</a>中详细讨论了密码加密。</p>
			<p>下面的例子显示出各种<span>user</span>表中<span>Host</span>和<span>User</span>值的组合如何应用于到来的连接：</p>
			<table border="0" cellpadding="0" width="100%" style="width: 100.0%" id="table15">
				<tr>
					<td>
					<p>
					<span>Host</span><strong><span>值</span></strong></td>
					<td>
					<p>
					<span>User</span><strong><span>值</span></strong></td>
					<td>
					<p><strong><span>
					被条目匹配的连接</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;thomas.loc.gov&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>从<span>thomas.loc.gov</span><span>
					</span>连接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;thomas.loc.gov&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;&#39;</span><span>
					</span></td>
					<td>
					<p>任何用户<span>, </span>从<span>thomas.loc.gov</span>连接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;%&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>从任何主机连接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;%&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;&#39;</span><span>
					</span></td>
					<td>
					<p>任何用户<span>, </span>从任何主机连接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;%.loc.gov&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>从在<span>loc.gov</span>域的任何主机连接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;x.y.%&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>从<span>x.y.net</span>、<span>x.y.com</span><span>,</span><span>x.y.edu</span>等联接。（这或许无用）</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;144.155.166.177&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>从有<span>144.155.166.177</span><span> 
					IP</span>地址的主机连接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;144.155.166.%&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>从<span>144.155.166 
					C</span>类子网的任何主机连接</td>
				</tr>
			</table>
			<p>到来的连接中的客户端名和用户名可能与<span>user</span>表中的多行匹配。例如，由<span>fred</span>从<span>thomas.loc.gov</span>的连接匹配多个条目如上所述。</p>
			<p>如果有多个匹配，服务器必须选择使用哪个条目。按照下述方法解决问题：</p>
			<p>
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>服务器在启动时读入<span>user</span>表后进行排序。</p>
			<p>
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>然后当用户试图连接时，以排序的顺序浏览条目</p>
			<p>
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>服务器使用与客户端和用户名匹配的第一行。</p>
			<p><span>user</span>表排序工作如下，假定<span>user</span>表看起来像这样：</p>
			<pre><span>+-----------+----------+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | User&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+-----------+----------+-</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | root&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | jeffrey&nbsp; | </span><span>…</span></pre>
			<pre><span>| localhost | root&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>| localhost |&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| </span><span>…</span></pre>
			<pre><span>+-----------+----------+-</span></pre>
			<p>当服务器读取表时，它首先以最具体的<span>Host</span>值排序。主机名和<span>IP</span>号是最具体的。<span>&#39;%&#39;</span>意味着“任何主机”并且是最不特定的。有相同<span>Host</span>值的条目首先以最具体的<span>User</span>值排序<span>(</span>空<span>User</span>值意味着“任何用户”并且是最不特定的<span>)</span>。最终排序的<span>user</span>表看起来像这样：</p>
			<pre><span>+-----------+----------+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | User&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+-----------+----------+-</span></pre>
			<pre><span>| localhost | root&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span><span> ...</span></pre>
			<pre><span>| localhost |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span><span> ...</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | jeffrey&nbsp; | </span><span>…</span><span> ...</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | root&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span><span> ...</span></pre>
			<pre><span>+-----------+----------+-</span></pre>
			<p>当客户端试图连接时，服务器浏览排序的条目并使用找到的第一匹配。对于由<span>jeffrey</span>从<span>localhost</span>的连接，表内有两个条目匹配：<span>Host</span>和<span>User</span>值为<span>&#39;localhost&#39;</span>和<span>&#39;&#39;</span>的条目，和值为<span>&#39;%&#39;</span>和<span>&#39;jeffrey&#39;</span>的条目。<span>&#39;localhost&#39;</span>条目首先匹配，服务器可以使用。</p>
			<p>还有一个例子。假定<span>user</span>表看起来像这样：</p>
			<pre><span>+----------------+----------+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | User&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+----------------+----------+-</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | jeffrey&nbsp; | </span><span>…</span></pre>
			<pre><span>| thomas.loc.gov |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+----------------+----------+-</span></pre>
			<p>排序后的表看起来像这样：</p>
			<pre><span>+----------------+----------+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | User&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+----------------+----------+-</span></pre>
			<pre><span>| thomas.loc.gov |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | jeffrey&nbsp; | </span><span>…</span></pre>
			<pre><span>+----------------+----------+-</span></pre>
			<p>由<span>jeffrey</span>从<span>thomas.loc.gov</span>的连接与第一行匹配，而由<span>jeffrey</span>从<span>whitehouse.gov</span>的连接被第二个匹配。</p>
			<p>
			普遍的误解是认为，对给定的用户名，当服务器试图对连接寻找匹配时，明确命名那个用户的所有条目将首先被使用。这明显不符合事实。先前的例子说明了这点，在那里由<span>jeffrey</span>从<span>thomas.loc.gov</span>的连接没被包含<span>&#39;jeffrey&#39;</span>作为<span>User</span>列值的行匹配，但是由没有用户名的题目匹配！结果是，<span>jeffrey</span>被鉴定为匿名用户，即使他连接时指定了用户名。</p>
			<p>如果你能够连接服务器，但你的权限不是你期望的，你可能被鉴定为其它账户。要想找出服务器用来鉴定你的账户，使用<span>CURRENT_USER()</span>函数。它返回<span><i><span>user_name</span></i><span>@<i>host_name</i></span></span>格式的值，说明<span>User</span>和<span>Host</span><span>
			</span>值匹配<span>user</span>表记录。假定<span>jeffrey</span>连接并发出下面的查询：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT CURRENT_USER();</span></b></span></pre>
			<pre><span>+----------------+</span></pre>
			<pre><span>| CURRENT_USER() |</span></pre>
			<pre><span>+----------------+</span></pre>
			<pre><span>| @localhost&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+----------------+</span></pre>
			<p>这儿显示的结果说明<span>user</span>表行有空的<span>User</span>列值。换句话说，服务器将<span>jeffrey</span>视为匿名用户。</p>
			<p>诊断鉴定问题的另一个方法是打印出<span>user</span>表并且手动排序它看看第一个匹配在哪儿进行。又见<a href="functions.html#information-functions" title="12.9.3. Information Functions">12.9.3节，“信息函数”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="request-access"></a>
			5.7.6.&nbsp;访问控制, 阶段2：请求核实</h3></div></div></div>
			<p>一旦你建立了连接，服务器进入访问控制的阶段<span>2</span>。对在此连接上进来的每个请求，服务器检查你想执行什么操作，然后检查是否有足够的权限来执行它。这正是在授权表中的权限列发挥作用的地方。这些权限可以来自<span>user</span>、<span>db</span>、<span>host</span>、<span>tables_priv</span>或<span>columns_priv</span>表。（你会发现参考<a href="database-administration.html#privileges" title="5.7.2. How the Privilege System Works">5.7.2节，“权限系统工作原理”</a>很有帮助，它列出了每个
			授权表中呈现的列。）</p>
			<p><span>user</span>表在全局基础上授予赋予你的权限，该权限不管当前的数据库是什么均适用。例如，如果<span>user</span>表授予你<span>DELETE</span>权限， 
			你可以删除在服务器主机上从任何数据库删除行！换句话说，<span>user</span>表权限是超级用户权限。只把<span>user</span>表的权限授予超级用户如服务器或数据库主管是明智的。对其他用户，你应该把在<span>user</span>表中的权限设成<span>&#39;N&#39;</span>并且仅在特定数据库的基础上授权。你可以为特定的数据库、表或列授权。</p>
			<p><span>db</span>和<span>host</span>表授予数据库特定的权限。在这些表中的范围列的值可以采用以下方式：</p>
			<ul type="disc">
				<li>通配符字符<samp >“<span>%</span>”</samp>并<samp >“<span>_</span>”</samp>可用于两个表的<span>Host</span>和<span>Db</span>列。它们与用<span  >LIKE</span>操作符执行的模式匹配操作具有相同的含义。如果授权时你想使用某个字符，必须使用反斜现引用。例如，要想在数据库名中包括下划线<span>(</span><span>‘</span><span  >_</span><span>’<span>)</span></span>，在<span  >GRANT</span>语句中用<span>‘</span><span  >\_</span><span>’</span>来指定<span>。</span></li>
				<li>在<span>db</span>表的<span>&#39;%&#39;Host</span>值意味着“任何主机”，在<span>db</span>表中空<span>Host</span>值意味着“对进一步的信息咨询<span>host</span>表”（本节后面将描述的一个过程）。</li>
				<li>在<span>host</span>表的<span>&#39;%&#39;</span>或空<span>Host</span>值意味着“任何主机”。</li>
				<li>在两个表中的<span>&#39;%&#39;</span>或空<span>Db</span>值意味着“任何数据库”。</li>
				<li><span>在两个表中的空</span><span>User</span><span>值匹配匿名用户。</span></li>
			</ul>
			<p><span>db</span>和<span>host</span>表在服务器启动时被读取并排序<span>(</span>同时它读<span>user</span>表<span>)</span>。<span>db</span>表在<span>Host</span>、<span>Db</span>和<span>User</span>范围列上排序，并且<span>host</span>表在<span>Host</span>和<span>Db</span>范围列上排序。对于<span>user</span>表，首先根据最具体的值最后根据最不具体的值排序，并且当服务器寻找匹配条目时，它使用它找到的第一匹配。</p>
			<p><span>tables_priv</span>和<span>columns_priv</span>表授予表和列特定的权限。这些表的范围列的值可以如下被指定：</p>
			<ul type="disc">
				<li>通配符<samp >“<span>%</span>”</samp>并<samp >“<span>_</span>”</samp>可用在使用在两个表的<span>Host</span>列。</li>
				<li>在两个表中的<span>&#39;%&#39;</span>或空<span>Host</span>意味着“任何主机”。</li>
				<li>在两个表中的<span>Db</span>、<span><span>Table_</span><span>name</span></span>和<span><span>Column_</span><span>name</span></span>列不能包含通配符或空。</li>
			</ul>
			<p><span>tables_priv</span>和<span>columns_priv</span>表根据<span>Host</span>、<span>Db</span>和<span>User</span>列被排序。这类似于<span>db</span>表的排序，因为只有<span>Host</span>列可以包含通配符，排序更简单。</p>
			<p>
			请求证实进程在下面描述。（如果你熟悉访问检查的源码，你会注意到这里的描述与在代码使用的算法略有不同。描述等价于代码实际做的东西；不同处只是使解释更简单。）</p>
			<p>对需要管理权限的请求<span>(</span><span>SHUTDOWN</span>、<span>RELOAD</span>等等<span>)</span>，服务器仅检查<span>user</span>表条目，因为那是唯一指定管理权限的表。如果行许可请求的操作，访问被授权，否则拒绝。例如，如果你想要执行<strong><span>mysqladmin 
			shutdown</span></strong>，但是由于<span>user</span>表行没有为你授予<span>HUTDOWN</span>权限，甚至不用检查<span>db</span>或<span>host</span>表就拒绝你的访问。（因为它们不包含<span>hutdown_priv</span>行列，没有这样做的必要。）</p>
			<p>对数据库有关的请求<span>(</span><span>INSERT</span>、<span>UPDATE</span>等等<span>)</span>，服务器首先通过查找<span>user</span>表行来检查用户的全局<span>(</span>超级用户<span>)</span>权限。如果行允许请求的操作，访问被授权。如果在<span>user</span>表中全局权限不够，服务器通过检查<span>db</span>和<span>host</span>表确定特定的用户数据库权限：</p>
			<ol start="1" type="1">
				<li>服务器在<span>db</span>表的<span>Host</span>、<span>Db</span>和<span>User</span>列上查找匹配。<span>Host</span>和<span>User</span>对应连接用户的主机名和<strong><span>MySQL</span></strong>用户名。<span>Db</span>列对应用户想要访问的数据库。如果没有<span>Host</span>和<span>User</span>的行，访问被拒绝。</li>
				<li>如果<span>db</span>表中有匹配的行而且它的<span>Host</span>列不是空的，该行定义用户的数据库特定的权限。</li>
				<li>如果匹配的<span>db</span>表的行的<span>Host</span>列是空的，它表示<span>host</span>表列举被允许访问数据库的主机。在这种情况下，在<span>host</span>表中作进一步查找以发现<span>Host</span>和<span>Db</span>列上的匹配。如果没有<span>host</span>表行匹配，访问被拒绝。如果有匹配，用户数据库特定的权限以在<span>db</span>和<span>host</span>表的行的权限，即在两个行都是<span>&#39;Y&#39;</span>的权限的交集<span>(</span><em><span>而不是</span></em>并集！<span>)</span>计算。（这样你可以授予在<span>db</span>表行中的一般权限，然后用<span>host</span>表行按主机主机为基础有选择地限制它们。） 
				</li>
			</ol>
			<p>在确定了由<span>db</span>和<span>host</span>表行授予的数据库特定的权限后，服务器把他们加到由<span>user</span>表授予的全局权限中。如果结果允许请求的操作，访问被授权。否则，服务器检查在<span>tables_priv</span>和<span>columns_priv</span>表中的用户的表和列权限并把它们加到用户权限中。基于此结果允许或拒绝访问。</p>
			<p>用布尔术语表示，前面关于用户权限如何计算的描述可以这样总结：</p>
			<pre><span>global privileges</span></pre>
			<pre><span>OR (database privileges AND host privileges)</span></pre>
			<pre><span>OR table privileges</span></pre>
			<pre><span>OR column privileges</span></pre>
			<p>它可能不明显，为什么呢，如果全局<span>user</span>行的权限最初发现对请求的操作不够，服务器以后把这些权限加到数据库、表并列的特定权限。原因是请求可能要求超过一种类型的权限。例如，如果你执行<span>INSERT 
			INTO ... SELECT</span>语句，你就需要<span>INSERT</span>和<span>SELECT</span>权限。你的权限必须是<span>user</span>表行授予一个权限而<span>db</span>表行授予另一个权限。在这种情况下，你有必要的权限执行请求，但是服务器不能自己把两个表区别开来；两个行授予的权限必须组合起来。</p>
			<p><span>host</span>表不受<span>GRANT</span>或<span>REVOKE</span>语句的影响，因此在大多数<span>MySQL</span>安装中没有使用。如果你直接修改它，你可以用于某种专门目的，例如用来维护安全服务器列表。例如，在<span>TcX</span>，<span>host</span>表包含在本地网络上所有的机器的表。这些表被授予所有的权限。</p>
			<p>你也可以使用<span>host</span>表指定<em><span>不</span></em>安全的主机。假定你有一台机器<span>public.your.domain</span>，它位于你认为不安全的公共区域，你可以用下列的<span>host</span>表条目允许除了那台机器外的网络上所有主机的访问：</p>
			<pre><span>+--------------------+----+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Db | ...</span></pre>
			<pre><span>+--------------------+----+-</span></pre>
			<pre><span>| public.your.domain | %&nbsp; | ... (all privileges set to &#39;N&#39;)</span></pre>
			<pre><span>| %.your.domain&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | %&nbsp; | ... (all privileges set to &#39;Y&#39;)</span></pre>
			<pre><span>+--------------------+----+-</span></pre>
			<p>当然，一定要测试授权表中的行<span>(</span>例如，使用<span>SHOW 
			GRANTS</span>或<strong><span>mysqlaccess</span></strong><span>)</span>，确保你的访问权限实际按你期望的方式被设置。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="privilege-changes"></a>
			5.7.7.&nbsp;权限更改何时生效</h3></div></div></div>
			<p>当<span>mysqld</span>启动时，所有授权表的内容被读进内存并且从此时生效。</p>
			<p>当服务器注意到授权表被改变了时，现存的客户端连接有如下影响： </p>
			<ul type="disc">
				<li>表和列权限在客户端的下一次请求时生效。</li>
				<li>数据库权限改变在下一个<span>USE
				<i>db_name</i></span>命令生效。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>全局权限的改变和密码改变在下一次客户端连接时生效。</p>
			<p>如果用<span>GRANT</span>、<span>REVOKE</span>或<span>SET 
			PASSWORD</span>对授权表进行修改，服务器会注意到并立即重新将授权表载入内存。</p>
			<p>如果你手动地修改授权表<span>(</span>使用<span>INSERT</span>、<span>UPDATE</span>或<span>DELETE</span>等等<span>)</span>，你应该执行<strong><span>mysqladmin 
			flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span></strong>告诉服务器再装载授权表，否则你的更改将<em><span>不会生效</span></em>，除非你重启服务器。</p>
			<p>如果你直接更改了授权表但忘记重载，重启服务器后你的更改方生效。这样可能让你迷惑为什么你的更改没有什么变化！</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="access-denied"></a>
			5.7.8.&nbsp;拒绝访问错误的原因<code class="literal"></code></h3></div></div></div>
			<p>当你试着联接<strong><span>MySQL</span></strong>服务器时，如果碰到问题，下面各项可以帮助你纠正问题：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			确保服务器在运行。如果服务器没有运行，则你不能连接服务器。如果你视图连接服务器并看到下述消息，可能是服务器没有运行：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ERROR 2003: Can&#39;t connect to MySQL server on &#39;</span><span><i><span>host_name</span></i></span><span>&#39; (111)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ERROR 2002: Can&#39;t connect to local MySQL server through socket</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&#39;/tmp/mysql.sock&#39; (111)</span></pre>
			<p>也可能服务器正在运行，但你可能使用与服务器上侦听的不一样的<span>TCP/IP</span>端口、命名管道或<span>Unix</span>套接字文件。你可以调用客户端程序，指定端口选项来指示正确的端口或套接字选项来指示正确的命名管道或<span>Unix</span>套接字文件。要找出套接字文件的地点，应：</p>
			<pre><span>shell&gt; </span><span><b><span>netstat -ln | grep mysql</span></b></span></pre>
			<ul type="disc">
				<li>必须正确设置授权表，以便服务器可以使用它们进行访问控制。对于某些分发版类型<span>(</span>例如<span>Windows</span>中的二进制分发版或<span>Linux</span>中的<span>RPM</span>分发版<span>),</span>安装过程初始化包含
				授权表的<span>mysql</span>数据库。如果分发版没有这样做，你必须运行<strong><span>mysql_install_db</span></strong>脚本来手动初始化授权表。详细内容参见<a href="installing.html#unix-post-installation" title="2.9.2. Unix Post-Installation Procedures">2.9.2节，“Unix下安装后的过程”</a>。</li>
			</ul>
			<p style="margin-left: 45.0pt">
			确定是否要初始化授权表的一个方法是寻找数据目录下的<span>mysql</span>目录<span>（</span>数据目录名通常为<span>data</span>或<span>var</span>，位于<span>MySQL</span>安装目录下<span>）</span>。应保证<strong><span
宋体;">MySQL</span></strong>数据库目录有文件<tt >“</tt><span>user.MYD</span><tt >”</tt>。否则，执行<strong><span>mysql_install_db</span></strong>脚本。运行并重启服务器后，执行该命令来测试初始权限：</p>
			<p style="margin-left: 45.0pt"><span>
			shell&gt; </span><span><b><span>mysql 
			-u root test</span></b></span></p>
			<p style="margin-left: 45.0pt">服务器应该让你无误地连接。</p>
			<ul type="disc">
				<li>在新的安装以后，你应该连接服务器并且设置你的用户及其访问许可：</li>
			</ul>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u root mysql</span></b></span></pre>
			<p>服务器应该让你连接，因为<strong><span>MySQL</span></strong><span>
			</span><span>root</span>用户初始时没有密码。那也是安全风险，当你正在设置其他<strong><span>MySQL</span></strong>用户时，也应设定<span>root</span>密码是一件重要的事请。关于设置初始密码的说明，参见<a href="installing.html#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3节，“使初始MySQL账户安全”</a>。</p>
			<ul type="disc">
				<li>如果你将一个现存的<strong><span style="font-weight:
     normal">MySQL</span></strong>安装升级到较新的版本，运行了<strong><span>mysql_fix_privilege_tables</span></strong>脚本吗？如果没有，运行它。增加新功能后，授权表的结构可能会改变，因此更新后应确保表的结构随之更新。相关说明参见<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2节，“升级授权表”</a>。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果客户端程序试图连接时收到以下错误信息，说明服务器需要新格式的密码，而客户端不能生成：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Client does not support authentication protocol requested</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>by server; consider upgrading MySQL client</span></pre>
			<p>关于如何处理的详细信息，参见<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9节，“MySQL 4.1中的密码哈希处理”</a>和<a href="problems.html#old-client" title="A.2.3. Client does not support authentication protocol">A.2.3节，“客户端不支持鉴定协议”</a>。</p>
			<ul type="disc">
				<li>如果你作为<span>root</span>试试连接并且得到这个错误，这意味着，你没有行在<span>user</span>表中的<span>User</span>列值为<span>&#39;root&#39;</span>并且<span>mysqld</span>不能为你的客户端解析主机名：</li>
				<li><span>Access denied for user 
				&#39;&#39;@&#39;unknown&#39; to database mysql</span></li>
			</ul>
			<p>在这种情况下，你必须用<span>--skip-grant-tables</span>选项重启服务器并且编辑<tt >“</tt><span>/etc/hosts</span><tt >”</tt>或<tt >“</tt><span>\windows\hosts</span><tt >”</tt>文件为你的主机增加行。</p>
			<ul type="disc">
				<li>如果你从<span>3.22.11</span>以前的版本更新现存的<strong><span>MySQL</span></strong>安装到<span>3.22.11</span>版或以后版本，你运行了<span>mysql_fix_privilege_tables</span>脚本吗？如果没有，运行它。在<span>GRANT</span>语句变得能工作时，授权表的结构用<strong><span>MySQL</span></strong><span> 
				3.22.11</span>修改 。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			记住客户端程序使用选项文件或环境变量中指定的连接参数。如果客户端程序发送不正确的默认连接参数，而你没有在命令行中指定，检查环境变量和适用的选项文件。例如，当你不用任何选项运行客户端程序，得到<span>Access 
			denied</span>错误，确保你没有在选项文件中指定旧密码！</p>
			<p>你可以通过使用<span>--no-defaults</span>选项调用客户端程序来禁用选项文件。例如：</p>
			<pre ><span>shell&gt; </span><span><b><span>mysqladmin --no-defaults -u root version</span></b></span></pre>
			<p>客户端使用的选项文件见<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>。环境变量列于<a href="environment-variables.html" title="Appendix F. Environment Variables">附录F：<i>环境变量</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果遇到下述错误，说明<span>root</span>密码错误：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysqladmin -u root -p<i>xxxx</i> ver</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES)</span></pre>
			<p>
			如果你未指定密码时出现前面的错误，说明某个选项文件中的密码不正确。试试前面所说的<span>--no-defaults</span>选项。</p>
			<p>关于密码更改的信息参见<a href="database-administration.html#passwords" title="5.8.5. Assigning Account Passwords">5.8.5节，“设置账户密码”</a>。</p>
			<p>如果你丢失或忘记<span>root</span>密码，你可以用<span>--skip-grant-tables</span>重启 
			<strong><span>mysqld</span></strong>来更改密码。参见<a href="problems.html#resetting-permissions" title="A.4.1. How to Reset the Root Password">A.4.1节，“如何复位根用户密码”</a><span>. </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你使用<span>SET 
			PASSWORD</span>、<span>INSERT</span>或<span>UPDATE</span>更改密码，你必须使用<span>&nbsp;
			</span><span>PASSWORD()</span>函数加密密码。如果你不使用<span>PASSWORD()</span>函数，密码不工作。例如，下面的语句设置密码，但没能加密，因此用户后面不能连接：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;abe&#39;@&#39;<i>host_name</i>&#39; = &#39;eagle&#39;;</span></b></span></pre>
			<p>相反，应这样设置密码：</p>
			<pre ><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;abe&#39;@&#39;<i>host_name</i>&#39; = PASSWORD(&#39;eagle&#39;);</span></b></span></pre>
			<p>当你使用<span>GRANT</span>或<span>CREATE 
			USER</span>语句或<strong><span>mysqladmin 
			password</span></strong>命令指定密码时，不需要<span>PASSWORD()</span>函数，它们会自动使用<span>PASSWORD()</span>来加密密码。参见<a href="database-administration.html#passwords" title="5.8.5. Assigning Account Passwords">5.8.5节，“设置账户密码”</a>和<a href="sql-syntax.html#create-user" title="13.5.1.1. CREATE USER Syntax">13.5.1.1节，“CREATE 
			USER语法”</a>。</p>
			<div class="Section1">
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				localhost</span>是你本地主机名的一个同义词，并且也是如果你不明确地指定主机而客户端尝试连接的默认主机。</p>
				<p>要想在这种系统上避免该问题，你可以使用<span>--host=127.0.0.1</span>选项来明确命名服务器主机。这样将通过<span>TCP/IP</span>协议来连接本地<strong><span>mysqld</span><span>服务器</span></strong>。你还可以指定<span>--host</span>选项使用<span>TCP/IP</span>，使用实际的本机主机名。在这种情况下，主机名必须指定为服务器主机上的<span>user</span>表行，即使你在服务器上运行客户端程序。</p>
				<p>
				<span  >
				·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>当尝试用</span><span>mysql 
				-u user_name</span><span>与数据库连接时，如果你得到一个</span><span>Access 
				denied</span><span>错误，可能会遇到与</span><span>user</span><span>表有关的问题，通过执行</span><span>mysql 
				-u root mysql</span><span>并且执行下面的<span>SQL</span>语句进行检查：</span></p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>SELECT * FROM user;</span></b></span></pre>
				<p>结果应该包含一个有<span>Host</span>和<span>User</span>列的行匹配你的计算机主机名和你的<strong><span>MySQL</span></strong>用户名。</p>
				<ul type="disc">
					<li>
					<span>Access denied</span>错误消息将告诉你，你正在用哪个用户尝试登录，你正在试图连接哪个主机，是否使用了密码。通常，你应该在<span>user</span>表中有一行，正确地匹配在错误消息给出的主机名和用户名。例如，如果遇到包含<span>using 
					password: NO</span>的错误信息，说明你登录时没有密码。</li>
				</ul>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果当你试着从一个不是<strong><span>MySQL</span></strong>服务器正在运行的主机上连接时，遇到下列错误，那么在<span>user</span>表中没有匹配那台主机的行：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Host ... is not allowed to connect to this MySQL server</span></pre>
				<p>可以通过组合你正在试图连接的用户<span>/</span>主机名设置一个账户来修正它。如果你不知道正连接的机器的<span>IP</span>号或主机名，应该把一个<span>&#39;%&#39;</span>行作为<span>Host</span>列值放在<span>user</span>表中。在试图从客户端器连接以后，通过<span>SELECT 
				USER()</span>查询显示你如何真正进行连接。（然后用在日志文件上面显示出的实际的主机名代替<span>user</span>表中的<span>&#39;%&#39;</span>行。否则，你将得到一个不安全的系统，因为它允许从任何主机上以任何用户名连接。）</p>
				<p>在<span>Linux</span>中，发生该错误的另一个原因可能是你正使用于你所使用版本的<span>glibc</span>库不同版本的库编译的二进制<span>MySQL</span>版本。在这种情况下，你应升级操作系统或<span>glibc</span>，或下载<span>MySQL</span>版本的源码分发版并自己编译。源码<span>RPM</span>一般很容易编译并安装，因此不是大问题。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你连接时指定主机名，但得到错误消息主机名未显示或为<span>IP</span>号，表示当<span>MySQL</span>服务器将<span>IP</span>号解析为客户端来名时遇到错误：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysqladmin -u root -p<i>xxxx</i> -h <i>some-hostname</i> ver</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Access denied for user &#39;root&#39;@&#39;&#39; (using password: YES)</span></pre>
				<p>这表示<span>DNS</span>问题。要想修复，执行<strong><span>mysqladmin 
				flush-hosts</span></strong>来重设内部<span> DNS</span>主机名缓存。参见<a href="optimization.html#dns" title="7.5.6. How MySQL Uses DNS">7.5.6节，“MySQL如何使用DNS”</a>。</p>
				<p>一些常用的解决方案包括：</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>试试找出<span>DNS</span>服务器的错误并修复。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>MySQL</span>授权表中指定<span>IP</span>号而不是主机名。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>/etc/hosts</span>中放入客户端名。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>--skip-name-resolve</span>选项启动<strong><span>mysqld</span></strong>。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>--skip-host-cache</span>选项启动<strong><span>mysqld</span></strong>。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>Unix</span>中，如果你在同一台机器上运行服务器和客户端，连接到<span>localhost</span>。连接到的<span>localhost</span>的<span>Unix</span>连接使用<span>Unix</span>套接字文件而不是<span>TCP/IP</span>。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>Windows</span>中，你在同一台机器上运行服务器和客户端并且服务器支持命名管道连接，连接主机名<span>(</span>周期<span>)</span>。连接使用命名管道而不是<span>TCP/IP</span>。</p>
				<ul type="disc">
					<li>如果<span>mysql 
					-u root test</span>工作但是<span>mysql 
					-h your_hostname -u root test</span>导致<span><span>Access 
					denied</span>（<i><span>your_hostname</span></i></span>是本地机的实际主机名<span>）</span>，那么在<span>user</span>表中可能没有你的主机的正确名字。这里的一个普遍的问题是在<span>user</span>表行中的<span>Host</span>值指定一个唯一的主机名，但是你系统的名字解析例程返回一个完全正规的域名<span>(</span>或相反<span>)</span>。例如，如果你在<span>user</span>表中有一个主机是<span>&#39;tcx&#39;</span>的行，但是你的<span>DNS</span>告诉<strong><span style="
     ">MySQL</span></strong>你的主机名是<span>&#39;tcx.subnet.se&#39;</span>，行将不工作。尝试把一个行加到<span>user</span>表中，它包含你主机的<span>IP</span>号作为<span>Host</span>列的值。（另外，你可以把一个行加到<span>user</span>表中，它有包含一个通配符如<span>&#39;tcx.%&#39;</span>的<span>Host</span>值。然而，使用以<samp >“<span>%</span>”</samp>结尾的主机名是<em><span>不安全的</span></em>并且<em><span>不</span></em>推荐！） 
					</li>
					<li>如果<span>mysql 
					-u <i>user_name</i> test</span>工作但是<span>mysql 
					-u <i>user_name</i> <i>other_db_name</i></span>不工作，你没有为给定的用户授予<span><i><span>other_db_name</span></i></span>数据库的访问权限。</li>
					<li>当在服务器上执行<span>mysql 
					-u <i>user_name</i></span>时，它工作，但是在其它远程客户端上执<span>mysql 
					-h <i>host_name</i> -u <i>user_name</i></span>时，它却不工作，你没有为给定的用户授予从远程主机访问服务器的权限。</li>
					<li>如果你不能弄明白你为什么得到<span>Access 
					denied</span>，从<span>user</span>表中删除所有<span>Host</span>包含通配符值的行<span>(</span>包含<samp >“<span>%</span>”</samp>或<samp >“<span>_</span>”<span>的条目</span></samp><span>)</span>。一个很普遍的错误是用<span>Host</span><span>=</span><span>&#39;%&#39;</span>和<span>User</span><span>=</span><span>&#39;<i>some_user</i>&#39;</span>插入一个新行，认为这将允许你指定<span>localhost</span>从同一台机器进行连接。它不工作的原因是
					默认权限包括一个有<span>Host</span><span>=</span><span>&#39;localhost&#39;</span>和<span>User</span><span>=</span><span>&#39;&#39;</span>的行，因为那个行的<span>Host</span>值<span>&#39;localhost&#39;</span>比<span>&#39;%&#39;</span>更具体，当从<span>localhost</span>连接时，它用于指向新行！正确的步骤是插入<span>Host</span><span>=</span><span>&#39;localhost&#39;</span>和<span>User</span><span>=</span><span>&#39;<i>some_user</i>&#39;</span>的第<span>2</span>个行，或删除<span>Host</span><span>=</span><span>&#39;localhost&#39;</span>和<span>User</span><span>=</span><span>&#39;&#39;</span>行。删除条目后，记住用<span>FLUSH 
					PRIVILEGES</span>语句重载授权表。</li>
				</ul>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你得到下列错误，可以与<span>db</span>或<span>host</span>表有关：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Access to database denied</span></pre>
				<p>如果从<span>db</span>表中选择了在<span>Host</span>列有空值的条目，保证在<span>host</span>表中有一个或多个相应的条目，指定<span>db</span>表中的条目适用哪些主机。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你能够连接<span>MySQL</span>服务器，但如果在使用命令<span>SELECT 
				... INTO OUTFILE</span>或<span>LOAD 
				DATA INFILE</span>语句时，你得到<span>Access 
				denied</span>错误，在<span>user</span>表中的条目可能没有启用<span>FILE</span>权限。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你直接更改授权表<span>(</span>例如，使用<span>INSERT</span>、<span>UPDATE</span>或<span>DELETE</span>语句<span>)</span>并且你的更改好像被忽略了，记住你必须执行<span>FLUSH 
				PRIVILEGES</span>语句或<strong><span>mysqladmin 
				flush-privileges</span></strong>命令让服务器来重读授权表。否则，直到服务器下次重启，你的更改方有效。记住用<span>UPDATE</span>命令更改<span>root</span>密码后，在清空权限前，你不需要指定新密码，因为服务器还不知道你已经更改了密码！</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				如果你的权限似乎在一个会话过程中改变了，可能是一个超级用户改变了他们。再次装入授权表会影响新客户端连接，但是它也影响现存的连接，如<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7节，“权限更改何时生效”</a>小节所述。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你有<span>Perl</span>、<span>Python</span>或<span>ODBC</span>程序的存取问题，试着用<span>mysql 
				-u <i>user_name</i> <i>db_name</i></span>或<span>mysql 
				-u <i>user_name</i> -p<i>your_pass</i> <i>db_name</i></span>与服务器连接。如果你能用<span><b><span>mysql</span></b></span>客户端进行连接，这是程序的一个问题而不是访问权限的问题。（注意在<span>-p</span>和密码之间没有空格；也可以使用<span>--password=<i>your_pass</i></span>语法指定密码。如果使用<span>-p</span>选项<span>，</span><span>MySQL</span>提示你输入密码。）</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>为了测试，用<span>--skip-grant-tables</span>选项启动<span><b><span>mysqld</span></b></span>守护进程，然后你可以改变<strong><span>MySQL</span></strong>授权表并且使用<span><b><span>mysqlaccess</span></b></span>脚本检查你的修改是否有如期的效果。当你对你的改变满意时，执行<span><b><span>mysqladmin 
				flush-privileges</span></b></span>告诉<span><b><span>mysqld</span></b></span>服务器开始使用新的
				授权表。（再次装入授权表覆盖了<span>--skip-grant-tables</span>选项。这允许你告诉服务器开始使用授权表，而不用停掉并重启它）。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果任何其它事情失败，用调试选项<span>(</span>例如，<span>--debug=d,general,query</span><span>)</span>启动<span><b><span>mysqld</span></b></span>服务器。这将打印有关尝试连接的主机和用户信息，和发出的每个命令的信息。请参见<a href="porting.html#making-trace-files" title="E.1.2. Creating Trace Files">E.1.2节，“创建跟踪文件”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你有任何与<strong><span>MySQL</span></strong>授权表的其它问题，而且觉得你必须将这个问题发送到邮件表，一定要提供一个<strong><span>MySQL</span></strong>授权表的倾倒副本<span>(dump)</span>。你可用<span><b><span>mysqldump 
				mysql</span></b></span>命令复制数据库表。象平时一样，用<span><b><span>mysqlbug</span></b></span>脚本邮寄你的问题。参见<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3节，“如何通报缺陷和问题”</a>。在一些情况下可以用<span>--skip-grant-tables</span>重启<span><b><span>mysqld</span></b></span>以便能运行<span><b><span>mysqldump</span></b></span>。</div>
			<span>
			<br clear="all" style="page-break-before: always">
&nbsp;</span><div class="titlepage">
				<div>
					<div>
						<h3 class="title"><a name="password-hashing"></a>5.7.9.&nbsp;MySQL 4.1中的密码哈希处理</h3>
					</div></div></div>
			<div class="toc">
				<dl>
					<dt><span class="section">
					<a href="database-administration.html#application-password-use">
					5.7.9.1. 更改应用程序密码哈希值的含义</a></span></dt>
				</dl></div>
			<p><span>MySQL</span>用户账户列于<span>mysql</span>数据库中的<span>user</span>表内。每个<span>MySQL</span>账户指定一个密码，尽管保存在<span>user</span>表<span>Password</span>列的密码不是明文，但哈希值是从表中的记录计算的。用<span>PASSWORD()</span>函数来计算密码的哈希值。</p>
			<p><span>MySQL</span>在客户端<span>/</span>服务器通信的两个阶段使用密码：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果客户端试图连接服务器，有一个初始鉴定步骤，客户必须提供一个密码，并且必须与客户想要使用的账户在<span>user</span>表保存的哈希值匹配。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>客户端连接后，它可以<span>(</span>如果有充分的权限<span>)
			</span>设置或更改<span>user</span>表内所列的账户的密码哈希值值。客户端可以通过<span>PASSWORD()</span>函数来生成密码哈希值，或使用<span>GRANT</span>或<span>SET 
			PASSWORD</span>语句。</p>
			<p>换句话说，当客户端首次试图连接时，服务器使用哈希值进行鉴定。如果连接的客户端调用<span>PASSWORD()</span>函数或使用<span>GRANT</span>或<span>SET</span>语句来设置或更改密码，则服务器<i>产生</i>哈希值。</p>
			<p>在<span>MySQL 4.1</span>中密码哈希算法已经更新，提供了更好的安全性并降低了密码被截取的风险。但是，该新机制只能在<span>MySQL 
			4.1(</span>和更新版本的<span>)</span>服务器和客户端中使用，会产生一些兼容性问题。<span>4.1</span>或新客户端可以连接<span>4.1</span>之前的服务器，因为客户端可以同时理解旧的和新的密码哈希机制。但是，<span>4.1</span>之前的客户端试图连接<span>4.1</span>版或更新版的服务器时会遇到困难。例如，<span>3.23</span>版<strong><span>mysql</span></strong>客户端试图连接<span>5.1</span>服务器时会失败并出现下面的错误消息：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -h localhost -u root</span></b></span></pre>
			<pre><span>Client does not support authentication protocol requested</span></pre>
			<pre><span>by server; consider upgrading MySQL client</span></pre>
			<p>出现该问题的另一个普通例子是在升级到<span>MySQL 4.1</span>或更新版后，试图使用旧版本的<span>PHP<strong><span> 
			mysql</span></strong></span>扩展名。<span>(</span>参见<a href="apis.html#php-problems" title="25.3.1. Common Problems with MySQL and PHP">25.3.1节，“使用MySQL和PHP的常见问题”</a>）<span>。 </span></p>
			<p>下面讨论了新、旧密码机制之间的差别，以及如果你升级了服务器但需要为<span>4.1</span>版以前的客户端保持向后兼容性该怎样做。<a href="problems.html#old-client" title="A.2.3. Client does not support authentication protocol">A.2.3节，“客户端不支持鉴定协议”</a>中有更详细的信息。该信息将<span>MySQL</span>数据库从<span>4.0</span>版本或更低版升级到<span>4.1</span>版或更高版的<span>PHP</span>编程人员特别重要。</p>
			<p><strong><span>注</span></strong>释：该讨论对比了<span>4.1</span>版的行为和<span>4.1</span>前的行为，这儿描述的<span>4.1</span>中的行为实际上从<span>4.1.1</span>开始。<span>MySQL 
			4.1.0</span>是一个“旧”的发布，因为它的实施机制与<span>4.1.1</span>版和更新版中的稍有不同。在<span>MySQL 
			5.0 </span>参考手册中详细描述了<span>4.1.0</span>和最新版之间的差别。</p>
			<p>在<span>MySQL 4.1</span>之前<span>,</span>用<span>PASSWORD()</span>函数计算的密码哈希值有<span>16</span>个字节长。应为：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT PASSWORD(&#39;mypass&#39;);</span></b></span></pre>
			<pre><span>+--------------------+</span></pre>
			<pre><span>| PASSWORD(&#39;mypass&#39;) |</span></pre>
			<pre><span>+--------------------+</span></pre>
			<pre><span>| 6f8c114b58f2ce9e&nbsp;&nbsp; |</span></pre>
			<pre><span>+--------------------+</span></pre>
			<p>在<span>MySQL 4.1</span>之前，<span>user</span>表的<span>Password</span>列<span>(</span>保存了哈希值<span>)</span>也是<span>16</span>字节长。</p>
			<p>在<span>MySQL 4.1</span>中<span>,</span>已经对<span>PASSWORD()</span>函数进行了修改，可以生成<span>41</span>字节的哈希值：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT PASSWORD(&#39;mypass&#39;);</span></b></span></pre>
			<pre><span>+-------------------------------------------+</span></pre>
			<pre><span>| PASSWORD(&#39;mypass&#39;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-------------------------------------------+</span></pre>
			<pre><span>| *6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4 |</span></pre>
			<pre><span>+-------------------------------------------+</span></pre>
			<p>同样，<span>user</span>表的<span>Password</span>列必须有<span>41</span>字节长来保存这些值：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你新安装<span>MySQL 5.1,</span><span> 
			Password</span>列自动为<span>41</span>字节长。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>从<span>MySQL 4.1(4.1.1</span>或<span>4.1</span>系列的更新版<span>)</span>升级到<span>MySQL 
			5.1</span>，应不会出现相关问题，因为两个版本使用相同的密码哈希机制。如果你想要将更早版本的<span>MySQL</span>升级到<span>MySQL5.1,</span>你应先升级到<span>4.1</span>，然后将<span>4.1</span>升级到<span>5.1</span>。</p>
			<p>加宽的<span>Password</span>列可以同时保存新、旧格式的密码哈希值。可以有两种方式确定任何给定格式的密码哈希值：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>明显的不同之处是长度<span>(16</span>字节和<span>41</span>字节<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>第<span>2</span>个不同之处是新格式的密码哈希值都以‘<span>*</span>’字符开头，而旧格式的密码绝对不是。</p>
			<p><span>&nbsp;</span>长密码哈希值具有更好的加密属性，并且客户端根据长哈希值进行鉴定比旧的短哈希值更加安全。</p>
			<p>短密码哈希值和长密码哈希值之间的不同之处与服务器如何使用密码进行鉴定以及如何为执行密码更改操作的连接的客户端生成密码哈希值都有关。</p>
			<p>服务器使用密码哈希值进行鉴定的方式受<span>Password</span>列的宽度影响：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果列较短，只用短哈希鉴定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果列较长，可以有短或长哈希值，并且服务器可以使用任何一种格式：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>4.1</span>之前的客户端可以连接，它们只可以使用旧的哈希机制，它们可以只鉴定有短哈希的账户。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>4.1</span>及以后版本的客户端可以鉴定有短哈希或长哈希的账户。</p>
			<p>对于短哈希账户的鉴定过程，<span>4.1</span>和以后版本的客户端比为旧版本的客户端实际要安全得多。从安全性角度，从最低安全到最安全的梯度为：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>之前的客户端用短密码哈希值进行鉴定</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>或以后版本的客户端用短密码哈希值进行鉴定</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>或以后版本的客户端用长密码哈希值进行鉴定</p>
			<p>服务器为连接的客户端生成密码哈希值的方式受<span>Password</span>列宽度和<span>--old-passwords</span>选项的影响。<span>4.1</span>或更新版本的服务器只有满足某个条件才生成长哈希：<span>Password</span>列必须足够宽以容纳长哈希值并且未给定<span>--old-passwords</span>选项。这些条件适合：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Password</span>列必须足够宽以容纳长哈希<span>(41</span>字节<span>)</span>值。如果列没有更新，仍然为<span>4.1</span>之前的<span>16</span>字节宽，当客户端使用<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>执行密码更改操作时，服务器注意到长哈希不适合，只生成短哈希。如果你已经升级到<span>4.1</span>但还没有运行 
			<strong><span>
			mysql_fix_privilege_tables</span></strong>脚本来扩宽<span>Password</span>列时会出现这种行为。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果<span>Password</span>列足够宽，则可以保存短或长密码哈希值。在这种情况下，<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>生成长哈希，除非 用<span>--old-passwords</span>选项启动服务器。该选项强制服务器生成短密码哈希值。</p>
			<p>
			<span>--old-passwords</span>选项的目的是当服务器生成长密码哈希值时，允许你维持同<span>4.1</span>之前的客户端的向后兼容性。该选项不影响鉴定<span>(4.1</span>和以后版本的客户端仍然可以使用有长密码哈希值的账户<span>)</span>，但它防止在密码更改操作中在<span>user</span>表中创建长密码哈希值。在这种情况下，该账户不能再用于<span>4.1</span>之前的客户端。没有<span>--old-passwords</span>选项，可能会出现下面的不期望的情况：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>旧客户端连接有短密码哈希值的账户。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>客户更改自己的密码。没有<span>--old-passwords</span>，可以为该账户生成长密码哈希值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>下次旧客户试图连接账户时不能连接上，因为账户有长密码哈希值，需要新的哈希机制进行鉴定。<span>(</span>一旦账户<span>user</span>表中为长密码哈希值，只有<span>4.1</span>和以后版本的客户端可以鉴定它，因为<span>4.1</span>之前的客户端不理解长哈希）<span>。
			</span></p>
			<p>该场景说明，如果你必须支持旧的<span>4.1</span>之前的客户端，不使用<span>--old-passwords</span>选项运行<span>4.1</span>或更新版本的服务器很危险。用<span>--old-passwords</span>运行服务器，密码更改操作不会生成长密码哈希值，这样旧客户端也可以访问账户。<span>(</span>这些客户端不能意外地因更改了密码将自己锁出去，并留下长密码哈希值）<span>。
			</span></p>
			<p>
			<span>--old-passwords</span>选项的不利之处是你创建或更改的密码使用短哈希，甚至对于<span>4.1</span>客户端也如此。这样，你丢失了长密码哈希值提供的安全性。如果你想要创建有长哈希的账户<span>(</span>例如，为<span>4.1</span>客户端<span>)</span>，你必须不使用<span>--old-passwords</span>来运行服务器。</p>
			<p>下面的场景可用于运行<span>4.1</span>或以后的服务器，包括<span>MySQL 
			5.1</span>：</p>
			<p><strong><span>场景<span>1</span>：</span></strong><span>user</span>表中的短<span>Password</span>列：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>只有短哈希可以保存到<span>Password</span>列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>服务器只使用短哈希进行客户端鉴定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对于连接的客户端，调用<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>的密码哈希生成操作专使用短哈希。对账户的任何更改均会生成短密码哈希值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>&nbsp;</span><span>--old-passwords</span>选项可以使用但是多余，因为<span>Password</span>列较短，服务器只生成短密码哈希值。</p>
			<p><strong><span>场景<span>2</span>：</span></strong>长<span>Password</span>列；没有用<span>--old-passwords</span>选项启动服务器：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>短或长哈希可以保存到<span>Password</span>列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>和以后版本的客户端<span>(</span>包括<span>5.1</span>客户端<span>)</span>可以鉴定有短或长哈希的账户。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>之前的客户端只能鉴定有短哈希的账户。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对于连接的客户端，调用<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>的密码哈希生成操作专使用短哈希。对账户的任何更改均会生成短密码哈希值。</p>
			<p>如前面所示，该场景的危险性在于<span>4.1</span>之前的客户端可能不能访问有短密码哈希值的账户。通过<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span><span>A</span>对这些账户密码的更改会产生长的密码哈希值。从该点看，<span>4.1</span>之前的客户端升级到<span>4.1</span>之前不能鉴定该账户。</p>
			<p>要处理该问题，可以用特殊方法更改密码。例如，一般情况你可以使用<span>SET 
			PASSWORD</span>按照下面的方法更改账户密码：</p>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;<i>some_user</i>&#39;@&#39;<i>some_host</i>&#39; = PASSWORD(&#39;mypass&#39;);</span></b></span></pre>
			<p>要想更改密码但创建短哈希，使用<span>OLD_PASSWORD()</span>函数：</p>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;<i>some_user</i>&#39;@&#39;<i>some_host</i>&#39; = OLD_PASSWORD(&#39;mypass&#39;);</span></b></span></pre>
			<p>当你想明显生成短哈希时<span>，<span>OLD_PASSWORD()</span></span>很有用。</p>
			<p><strong><span>场景<span>3</span>：</span></strong>长<span>Password</span>列；用<span>--old-passwords</span>选项启动<span>4.1</span>或新版本的服务器：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>短或长哈希可以保存到<span>Password</span>列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>和以后版本的客户端可以鉴定有短或长哈希的账户<span>(</span>请注意只有不使用<span>--old-passwords</span>选项启动服务器，方可以创建长哈希<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>之前的客户端只可以鉴定短哈希账户。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>对于连接的客户端，调用<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>的密码哈希生成操作专使用短哈希。对账户的任何更改均会生成短密码哈希值。</p>
			<p>在该场景中，你不能创建长密码哈希值的账户，因为<span>--old-passwords</span>选项防止生成长哈希。并且，如果你在使用<span>--old-passwords</span>选项前创建长哈希账户，当<span>--old-passwords</span>有时更改账户密码，结果会使账户的密码为短密码，安全性较长哈希要降低。</p>
			<p>这些场景的不利之处可以概括为：</p>
			<p>在场景<span>1</span>中<span>,</span>你不能利用长哈希提供更安全的鉴定。</p>
			<p>在场景<span>2</span>中<span>, </span>如果你没有显式使用<span>OLD_PASSWORD()</span>来更改密码，则<span>4.1</span>之前的客户端不能再访问短哈希账户。</p>
			<p>在场景<span>3</span>中<span>,</span><span>--old-passwords</span>防止短哈希账户不可访问，但密码更改操作使账户的长哈希转换为短哈希，当<span>--old-passwords</span>有效时不能将它改回长哈希。</p>
			<div class="section">
				<div class="titlepage">
					<div>
						<div>
							<h4 class="title">
							<a name="application-password-use"></a>
							5.7.9.1.&nbsp;更改应用程序密码哈希值的含义</h4></div></div></div>
				<p>升级到<span>MySQL4.1</span>或更新版本后，使用<span>PASSWORD()</span>为自己的目的生成密码的应用程序会出现兼容性问题。应用程序实际不应这样做，因为<span>PASSWORD()</span>只应用来管理<span>MySQL</span>账户的密码。但一些应用程序使用<span>PASSWORD()</span>用于自己的目的。</p>
				<p>如果你从<span>MySQL 4.1</span>之前的版本升级到<span>4.1</span>或以后版本，并在生成长密码哈希值的条件下运行服务器，应用程序使用<span>PASSWORD()</span>破解自己的密码。这种情况下推荐的方法是修改应用程序，使用其它函数，例如<span>SHA1()</span>或<span>MD5()</span>，来产生哈希值。如果不行，你可以使用<span>OLD_PASSWORD()</span>函数，该函数用来提供旧格式的短哈希。但是，请注意<span>OLD_PASSWORD()</span>可能有一天不再被支持。</p>
				<p>如果服务器运行在生成短哈希的条件下，可以使用 
				<span>OLD_PASSWORD()</span>但与<span>PASSWORD()</span>等同。</p>
				<p>将<span>MySQL</span>数据库从<span>4.0</span>或更低版本移植到<span>4.1</span>或更高版本的<span>PHP</span>编程人员应参阅<a href="Old%20Client">旧客户端</a>。</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="user-account-management"></a>
		5.8.&nbsp;MySQL用户账户管理</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#user-names">
			5.8.1. MySQL用户名和密码</a></span></dt><dt><span class="section"><a href="database-administration.html#adding-users">
			5.8.2. 向MySQL增加新用户账户</a></span></dt><dt><span class="section"><a href="database-administration.html#removing-users">
			5.8.3. 从MySQL删除用户账户</a></span></dt><dt><span class="section"><a href="database-administration.html#user-resources">
			5.8.4. 限制账户资源</a></span></dt><dt><span class="section"><a href="database-administration.html#passwords">
			5.8.5. 设置账户密码</a></span></dt><dt><span class="section"><a href="database-administration.html#password-security">
			5.8.6. 使你的密码安全</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-connections">
			5.8.7. 使用安全连接</a></span></dt></dl></div>
		<p>本节描述如何为<span>MySQL</span>服务器的客户端设置账户。讨论了下面的主题：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>MySQL</span>使用的账户名和密码的含义，以及如何比较你的操作系统所使用的账户名和密码</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如何设置新账户并移除已有账户</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如何更改密码</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>安全使用密码指导</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如何使用安全<span>SSL</span>连接 </p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="user-names"></a>
			5.8.1.&nbsp;MySQL用户名和密码</h3></div></div></div><a class="indexterm" name="id2773917"></a><a class="indexterm" name="id2773927"></a>
			<p>用用户名和客户端或主机定义<span>MySQL</span>账户，用户可以根据这些名称来连接服务器。账户也有密码。<span>MySQL</span>和操作系统使用用户名和密码的方式有几处区别：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>用于鉴定目的用户名与<span>Windows</span>或<span>Unix</span>使用的用户名<span>(</span>登录名<span>)</span>没有关系。在<span>Unix</span>中，大多数<span>MySQL</span>客户端默认试图使用当前<span>Unix</span>的用户名作为<span>MySQL</span>用户名来登录，但这样只是为了方便。
			默认值可以很容易被覆盖，因为客户端程序允许用<span>-u</span>或<span>--user</span>选项来指定用户名。因为这表示任何人可以试图使用任何用户名来连接服务器，除非所有<span>MySQL</span>账户有密码，否则你不能使数据库保持安全。通过为没有密码的账户指定用户名，任何人能够成功连接服务器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>用户名最大客达<span>16</span>字符长。这样可以限制<span>MySQL</span>服务器和客户端之间的硬编码，并且防止通过修改<span>mysql</span>数据库中表的定义来偷窃密码。</p>
			<p><strong>
			<span>注</span></strong><span>:</span>你<em><span>应绝对不要以任何方式修改</span></em><span><i><span>mysql</span></i></span><em><span>数据库中的任何表，只能运行<span>MySQL</span>分发中专为此目的提供的脚本。将<span>MySQL</span>系统表重新定义为其它方式会导致未定义的<span>(</span>和不支持的<span>!)</span>行为</span></em>。</p>
			<p>操作系统用户名与<span>MySQL</span>用户名完全不相关，甚至最大长度可能不同。例如，<span> 
			Unix</span>用户名限制为<span>8</span>个字符。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>密码与登录到你的操作系统的密码没有关系。不需要将你用来登录<span>Windows</span>或<span>Unix</span>机器的密码和你用来访问该机器上的<span>MySQL</span>服务器的密码关联起来。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>的加密密码使用自己的算法。该加密算法不同于<span>Unix</span>登录过程使用的算法。<span>MySQL</span>密码加密与<span>PASSWORD()</span><span>SQL</span>函数的方法相同。<span>Unix</span>密码加密与<span>ENCRYPT()</span><span>SQL</span>函数的方法相同。<span>PASSWORD()</span>和<span>ENCRYPT()</span>函数的描述参见<a href="functions.html#encryption-functions" title="12.9.2. Encryption Functions">12.9.2节，“加密函数”</a>。从版本<span>4.1 </span>起，<span>MySQL</span>使用更强的鉴定方法，同以前的版本相比可以在连接过程中提供更好的密码保护。即使<span>TCP/IP</span>包被截取或<span>mysql</span>数据库被捕获也很安全。<span>(</span>在前面的版本中，即使密码以加密形式保存到<span>user</span>表中，仍可以通过加密密码值来连接<span>MySQL</span>服务器）<span>。</span></p>
			<p>当安装<span>MySQL</span>时，授权表装载时有一系列初使账户。这些账户的名称和访问权限见<a href="installing.html#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3节，“使初始MySQL账户安全”</a>，其中还讨论了如何未这些账户赋予密码。因此，你一般应使用<span>GRANT</span>和<span>REVOKE</span>语句来设置、修改和移除<span>MySQL</span>账户。参见<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3节，“GRANT和REVOKE语法”</a>。</p>
			<p>当用命令行客户端连接<span>MySQL</span>服务器时，你应为想要使用的账户指定用户名和密码：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=monty --password=<i>guess</i> <i>db_name</i></span></b></span></pre>
			<p>如果你想用较短的选项，命令应为：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u monty -p<i>guess</i> <i>db_name</i></span></b></span></pre>
			<p>
			<span>-p</span>选项和后面的密码值之间绝对不能有<i>空格</i>。参见<a href="database-administration.html#connecting" title="5.7.4. Connecting to the MySQL Server">5.7.4节，“与MySQL服务器连接”</a>。</p>
			<p>前面的命令包括命令行中的密码值，会很危险。参见<a href="database-administration.html#password-security" title="5.8.6. Keeping Your Password Secure">5.8.6节，“使你的密码安全”</a>。要想避免，指定<span>--password</span>或<span>-p</span>选项后面不跟任何密码值：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=monty --password <i>db_name</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysql -u monty -p <i>db_name</i></span></b></span></pre>
			<p>然后客户端程序输出提示符并等待你输入密码。<span>(</span>在这些示例中，<span><i><span>db_name</span></i></span>并不为密码，因为用空格将它同前面的密码项隔离开了）<span>。</span></p>
			<p>在一些系统中，<span>MySQL</span>用来提示输入密码的库调用自动将密码限制到<span>8</span>个字符。这是系统库的问题，而不是<span>MySQL</span>的问题。<span>MySQL</span>本身并不限制密码的长度。要解决该问题，将<span>MySQL</span>密码改为<span>8</span>个字符和更少字符的值，或将密码放入选项文件中。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adding-users"></a>
			5.8.2.&nbsp;向MySQL增加新用户账户</h3></div></div></div><a class="indexterm" name="id2774260"></a><a class="indexterm" name="id2774269"></a><a class="indexterm" name="id2774281"></a><a class="indexterm" name="id2774291"></a><a class="indexterm" name="id2774302"></a><a class="indexterm" name="id2774312"></a><a class="indexterm" name="id2774322"></a>
			<p>可以用两种方式创建<span>MySQL</span>账户：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>GRANT</span>语句</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>直接操作<span>MySQL</span>授权表</p>
			<p>最好的方法是使用<span>GRANT</span>语句，因为这样更精确，错误少。从<span>MySQL 
			3.22.11</span>起提供了<span>GRANT</span>；其语法见<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3节，“GRANT和REVOKE语法”</a>。</p>
			<p>创建账户的其它方法是使用<span>MySQL</span>账户管理功能的第三方程序。<span>phpMyAdmin</span>即是一个程序。</p>
			<p>下面的示例说明如何使用<strong><span 
宋体;">MySQL</span></strong>客户端程序来设置新用户。假定按照<a href="installing.html#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3节，“使初始MySQL账户安全”</a>描述的
			默认值来设置权限。这说明为了更改，你必须以<span>MySQL
			</span>
			<span>root</span>用户连接<span>MySQL</span>服务器，并且<span>root</span>账户必须有<span>mysql</span>数据库的<span>INSERT</span>权限和<span>RELOAD</span>管理权限。</p>
			<p>首先，使用<strong><span 
宋体;">MySQL</span></strong>程序以<span>MySQL </span>
			<span>root</span>用户来连接服务器：</p>
			<pre><span>shell&gt; </span><span  >MySQL<b> --user=root </b>MySQL</span></pre>
			<p>如果你为<span>root</span>账户指定了密码，还需要为该<strong><span>MySQL</span></strong>命令和本节中的其它命令提供<span>--password</span>或<span>-p</span>选项。</p>
			<p><span>以<span>root</span></span>连接到服务器上后，可以添加新账户。下面的语句使用<span>GRANT</span>来设置四个新账户：</p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON *.* TO &#39;monty&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;some_pass&#39; WITH GRANT OPTION;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON *.* TO &#39;monty&#39;@&#39;%&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;some_pass&#39; WITH GRANT OPTION;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT RELOAD,PROCESS ON *.* TO &#39;admin&#39;@&#39;localhost&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT USAGE ON *.* TO &#39;dummy&#39;@&#39;localhost&#39;;</span></b></span></pre>
			<p>用<span>GRANT</span>语句创建的账户有下面的属性：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>其中两个账户有相同的用户名<span>monty</span>和密码<span>some_pass</span>。两个账户均为超级用户账户，具有完全的权限可以做任何事情。一个账户<span> 
			(</span><span>&#39;monty&#39;@&#39;localhost&#39;</span><span>)</span>只用于从本机连接时。另一个账户<span>(</span><span>&#39;monty&#39;@&#39;%&#39;</span><span>)</span>可用于从其它主机连接。请注意<span>monty</span>的两个账户必须能从任何主机以<span>monty</span>连接。没有<span>localhost</span>账户，当<span>monty</span>从本机连接时，<strong><span>mysql_install_db</span></strong>创建的<span>localhost</span>的匿名用户账户将占先。结果是，<span>monty</span>将被视为匿名用户。原因是匿名用户账户的<span>Host</span>列值比<span>&#39;monty&#39;@&#39;%&#39;</span>账户更具体，这样在<span>user</span>表排序顺序中排在前面。<span>(</span><span>user</span>表排序的讨论参见<a href="database-administration.html#connection-access" title="5.7.5. Access Control, Stage 1: Connection Verification">5.7.5节，“访问控制, 阶段1：连接核实”</a>）<span>。 </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>一个账户有用户名<span>admin</span>，没有密码。该账户只用于从本机连接。授予了<span>RELOAD</span>和<span>PROCESS</span>管理权限。这些权限允许<span>admin</span>用户执行<strong><span>mysqladmin 
			reload</span></strong>、<strong><span>mysqladmin 
			refresh</span></strong>和<strong><span>mysqladmin 
			flush-</span></strong><span><b><i><span>xxx</span></i></b></span>命令，以及<strong><span>mysqladmin 
			processlist</span></strong>。未授予访问数据库的权限。你可以通过<span>GRANT</span>语句添加此类权限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>一个账户有用户名<span>dummy</span>，没有密码。该账户只用于从本机连接。未授予权限。通过<span>GRANT</span>语句中的<span>USAGE</span>权限，你可以创建账户而不授予任何权限。它可以将所有全局权限设为<span>&#39;N&#39;</span>。假定你将在以后将具体权限授予该账户。</p>
			<p>除了<span>GRANT</span>，你可以直接用<span>INSERT</span>语句创建相同的账户，然后使用<span>FLUSH 
			PRIVILEGES</span>告诉服务器重载授权表：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=root mysql</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;localhost&#39;,&#39;monty&#39;,PASSWORD(&#39;some_pass&#39;),</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;%&#39;,&#39;monty&#39;,PASSWORD(&#39;some_pass&#39;),</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user SET Host=&#39;localhost&#39;,User=&#39;admin&#39;,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>Reload_priv=&#39;Y&#39;, Process_priv=&#39;Y&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;localhost&#39;,&#39;dummy&#39;,&#39;&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>当你用<span>INSERT</span>创建账户时使用<span>FLUSH 
			PRIVILEGES</span>的原因是告诉服务器重读授权表。否则，只有重启服务器后更改方会被注意到。使用 
			<span>GRANT</span>，则不需要使用<span>FLUSH 
			PRIVILEGES</span>。</p>
			<p>用<span>INSERT</span>使用<span>PASSWORD()</span>函数是为了加密密码。<span>GRANT</span>语句为你加密密码，因此不需要<span>PASSWORD()</span>。</p>
			<p>
			<span>&#39;Y&#39;</span>值启用账户权限。对于<span>admin</span>账户，还可以使用更加可读的<span>INSERT</span>扩充的语法（使用<span>SET</span>）。</p>
			<p>在为<span>dummy</span>账户的<span>INSERT</span>语句中，只有<span>user</span>表中的<span>Host</span>、<span>User</span>和<span>Password</span>列记录为指定的值。没有一个权限列为显式设置，因此<span>MySQL</span>将它们均指定为
			默认值<span>&#39;N&#39;</span>。这样等同于<span>GRANT 
			USAGE</span>的操作。</p>
			<p>请注意要设置超级用户账户，只需要创建一个权限列设置为<span>&#39;Y&#39;</span>的<span>user</span>表条目。<span>user</span>表权限为全局权限，因此其它
			授权表不再需要条目。</p>
			<p>下面的例子创建<span>3</span>个账户，允许它们访问专用数据库。每个账户的用户名为<span>custom</span>，密码为<span><span>obscure</span>。</span></p>
			<p>要想用<span>GRANT</span>创建账户，使用下面的语句：</p>
			<pre><span>shell&gt; </span><span  >MySQL<b> --user=root </b>MySQL</span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=root mysql</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>ON bankaccount.*</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>TO &#39;custom&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;obscure&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>ON expenses.*</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>TO &#39;custom&#39;@&#39;whitehouse.gov&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;obscure&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>ON customer.*</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>TO &#39;custom&#39;@&#39;server.domain&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;obscure&#39;;</span></b></span></pre>
			<p>这<span>3</span>个账户可以用于：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>第<span>1</span>个账户可以访问<span>bankaccount</span>数据库，但只能从本机访问。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>第<span>2</span>个账户可以访问<span>expenses</span>数据库，但只能从主机<span>whitehouse.gov</span>访问。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>第<span>3</span>个账户可以访问<span>customer</span>数据库，但只能从主机<span>server.domain</span>访问。</p>
			<p>要想不用<span>GRANT</span>设置<span>custom</span>账户，使用<span>INSERT</span>语句直接修改
			授权表：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=root mysql</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;localhost&#39;,&#39;custom&#39;,PASSWORD(&#39;obscure&#39;));</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;whitehouse.gov&#39;,&#39;custom&#39;,PASSWORD(&#39;obscure&#39;));</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;server.domain&#39;,&#39;custom&#39;,PASSWORD(&#39;obscure&#39;));</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO db</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>(Host,Db,User,Select_priv,Insert_priv,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>Update_priv,Delete_priv,Create_priv,Drop_priv)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;localhost&#39;,&#39;bankaccount&#39;,&#39;custom&#39;,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO db</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>(Host,Db,User,Select_priv,Insert_priv,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>Update_priv,Delete_priv,Create_priv,Drop_priv)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;whitehouse.gov&#39;,&#39;expenses&#39;,&#39;custom&#39;,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO db</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>(Host,Db,User,Select_priv,Insert_priv,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>Update_priv,Delete_priv,Create_priv,Drop_priv)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;server.domain&#39;,&#39;customer&#39;,&#39;custom&#39;,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<pre><span>&nbsp;</span></pre>
			<p>前<span>3</span>个<span>INSERT</span>语句在<span>user</span>表中加入条目，允许用户<span>custom</span>从各种主机用给定的密码进行连接，但不授予全局权限<span>(</span>所有权限设置为
			默认值<span>&#39;N&#39;</span><span>)</span>。后面<span>3</span>个<span>INSERT</span>语句在<span>user</span>表中加入条目，为<span>custom</span>授予<span>bankaccount</span>、<span>expenses</span>和<span>customer</span>数据库权限，但只能从合适的主机访问。<span>通常若直接修改
			授权表，则应告诉服务器用</span><span  >FLUSH 
			PRIVILEGES</span><span>重载授权表，使权限更改生效。</span></p>
			<p><span>如果你想要让某个用户从给定域的所有机器访问<span>(</span>例如，</span><span  >mydomain.com</span><span>)</span><span>，你可以在账户名的主机部分使用含‘</span><span  >%</span><span>’通配符的</span><span>GRANT</span><span>语句：</span></p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT ...</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>ON *.*</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>TO &#39;myname&#39;@&#39;%.mydomain.com&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;mypass&#39;;</span></b></span></pre>
			<p>要想通过直接修改授权表来实现：</p>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password,...)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;%.mydomain.com&#39;,&#39;myname&#39;,PASSWORD(&#39;mypass&#39;),...);</span></b></span></pre>
			<p><span>mysql&gt; </span>
			<span><b><span>FLUSH PRIVILEGES;</span></b></span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="removing-users"></a>
			5.8.3.&nbsp;从MySQL删除用户账户</h3></div></div></div><a class="indexterm" name="id2775271"></a><a class="indexterm" name="id2775281"></a><a class="indexterm" name="id2775291"></a><a class="indexterm" name="id2775301"></a><a class="indexterm" name="id2775312"></a><a class="indexterm" name="id2775322"></a><a class="indexterm" name="id2775332"></a><a class="indexterm" name="id2775342"></a>
			<p>要想移除账户，应使用<span>DROP USER</span>语句，请参见<a href="sql-syntax.html#drop-user" title="13.5.1.2. DROP USER Syntax">13.5.1.2节，“DROP 
		USER语法”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="user-resources"></a>
			5.8.4.&nbsp;限制账户资源</h3></div></div></div><a class="indexterm" name="id2775377"></a><a class="indexterm" name="id2775386"></a><a class="indexterm" name="id2775395"></a><a class="indexterm" name="id2775405"></a>
			<p>限制<span>MySQL</span>服务器资源使用的一个方法是将<span>max_user_connections</span>系统变量设置为非零值。但是，该方法严格限于全局，不允许管理具体账户。并且，它只限制使用单一账户同时连接的数量，而不是客户端连接后的操作。许多<span>MySQL</span>管理员对两种类型的控制均感兴趣，特别是<span>Internet</span>服务提供者。</p>
			<p>在<span>MySQL 5.1</span>中<span>,</span>你可以为具体账户限制下面的服务器资源：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>账户每小时可以发出的查询数</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>账户每小时可以发出的更新数</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>账户每小时可以连接服务器的次数</p>
			<p>客户端可以执行的语句根据查询限制来记数。只有修改数据库或表的语句根据更新限制来记数。</p>
			<p>还可以限制每个账户的同时连接服务器的连接数。</p>
			<p>本文中的账户为<span>user</span>表中的单个记录。根据<span>User</span>和<span>Host</span>列值唯一识别每个账户。</p>
			<p>做为使用该特性的先决条件，<span>mysql</span>数据库的<span>user</span>表必须包含资源相关的列。资源限制保存在<span>max_questions</span>、<span>max_updates</span>、<span>max_connections</span>和<span>max_user_connections</span>列内。如果<span>user</span>表没有这些列，必须对它进行升级；参见<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2节，“升级授权表”</a>。</p>
			<p>要想用<span>GRANT</span>语句设置资源限制，使<span>WITH</span>子句来命名每个要限制的资源和根据每小时记数的限制值。例如，要想只以限制方式创建可以访问<span>customer</span>数据库的新账户，执行该语句：</p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT ALL ON customer.* TO &#39;francis&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;frank&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WITH MAX_QUERIES_PER_HOUR 20</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span><b><span>MAX_UPDATES_PER_HOUR 10</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>MAX_CONNECTIONS_PER_HOUR 5</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>MAX_USER_CONNECTIONS 2;</span></b></span></pre>
			<p>限制类型不需要全部在<span>WITH</span>子句中命名，但已经命名的可以按任何顺序。每个每小时限制值均应为整数，代表每小时的记数。如果<span>GRANT</span>语句没有<span>WITH</span>子句，则每个限制值设置为
			默认值零<span>(</span>即没有限制<span>)</span>。对于<span>MAX_USER_CONNECTIONS</span>，限制为整数，表示账户一次可以同时连接的最大连接数。如果限制设置为
			默认值零，则根据<span>MAX_USER_CONNECTIONS</span>系统变量确定该账户可以同时连接的数量。</p>
			<p>要想设置或更改已有账户的限制，在全局级别使用<span>GRANT 
			USAGE</span>语句<span>(</span>在<span>*.*</span><span>)</span>。下面的语句可以将<span>francis</span>的查询限制更改为<span>100</span>：</p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT USAGE ON *.* TO &#39;francis&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WITH MAX_QUERIES_PER_HOUR 100;</span></b></span></pre>
			<p>该语句没有改变账户的已有权限，只修改了指定的限制值。</p>
			<p>要想取消已有限制，将该值设置为零。例如，要想取消<span>francis</span>每小时可以连接的次数的限制，使用该语句：</p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT USAGE ON *.* TO &#39;francis&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WITH MAX_CONNECTIONS_PER_HOUR 0;</span></b></span></pre>
			<p>当账户使用资源时如果有非零限制，则对资源使用进行记数。</p>
			<p>
			服务器运行时，它统计每个账户使用资源的次数。如果账户在最后一个小时的连接次数达到限制，该账户的进一步的连接被拒绝。类似地，如果账户达到查询或更新次数的限制，进一步的查询或更新被拒绝。在这种情况下，会给出相关错误消息。</p>
			<p>根据每个账户进行资源计算，而不是根据每个客户端。例如，如果你的账户的查询限制为<span>50,</span>你不能通过两个客户端同时连接服务器将限制增加到<span>100</span>。两个连接的查询被计算到一起。</p>
			<p>可以为所有账户从全局重设当前的每小时资源使用记数，或单独重设给定的账户：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想将所有账户当前的记数重设为零，可以执行<span>FLUSH 
			USER_RESOURCES</span>语句。还可以通过重载授权表来重设记数<span>(</span>例如，使用<span>FLUSH 
			PRIVILEGES</span>语句或<strong><span>mysqladmin 
			reload</span></strong>命令<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>将具体账户的限制重新授予任何值，可以将它设置为零。要想实现，按照前面所述使用<span>GRANT 
			USAGE</span>，并将限制值指定为该账户当前的限制值。</p>
			<p>计数器重设不影响<span>MAX_USER_CONNECTIONS</span>限制。</p>
			<p>当服务器启动时所有记数从零开始。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="passwords"></a>
			5.8.5.&nbsp;设置账户密码</h3></div></div></div><a class="indexterm" name="id2775767"></a><a class="indexterm" name="id2775776"></a><a class="indexterm" name="id2775785"></a><a class="indexterm" name="id2775795"></a>
			<div class="itemizedlist">
				<ul type="disc">
					<li>可以用<strong><span>mysqladmin</span></strong>命令在命令行指定密码：<pre><span>shell&gt; </span><span><b><span>mysqladmin -u <i>user_name</i> -h <i>host_name</i> password &quot;<i>newpwd</i>&quot;</span></b></span></pre>
					<p>该命令重设密码的账户为<span>user</span>表内匹配<span>User</span>列的<span><i><span>user_name</span></i></span>和<span>Host</span>列<em><span>你发起连接的</span></em>客户端的记录。</p>
					<p>为账户赋予密码的另一种方法是执行<span>SET 
					PASSWORD</span>语句：</p>
					<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;jeffrey&#39;@&#39;%&#39; = PASSWORD(&#39;biscuit&#39;);</span></b></span></pre>
					<p>只有<span>root</span>等可以更新<span>mysql</span>数据库的用户可以更改其它用户的密码。如果你没有以匿名用户连接，省略<span>FOR</span>子句便可以更改自己的密码：</p>
					<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD = PASSWORD(&#39;biscuit&#39;);</span></b></span></pre>
					<p>你还可以在全局级别使用<span>GRANT 
					USAGE</span>语句<span>(</span>在<span>*.*</span><span>)</span>来指定某个账户的密码而不影响账户当前的权限：</p>
					<pre><span>mysql&gt; </span><span><b><span>GRANT USAGE ON *.* TO &#39;jeffrey&#39;@&#39;%&#39; IDENTIFIED BY &#39;biscuit&#39;;</span></b></span></pre>
					<p>一般情况下最好使用上述方法来指定密码，你还可以直接修改<span>user</span>表：</p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>要想在创建新账户时建立密码，在<span>Password</span>列提供一个值：</p>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u root mysql</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>VALUES(&#39;%&#39;,&#39;jeffrey&#39;,PASSWORD(&#39;biscuit&#39;));</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>要想更改已有账户的密码，使用<span>UPDATE</span>来设置<span>Password</span>列值：</p>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u root mysql</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span><span>mysql&gt; </span><span><b><span>UPDATE user SET Password = PASSWORD(&#39;bagel&#39;)</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp; </span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>WHERE Host = &#39;%&#39; AND User = &#39;francis&#39;;</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
					<p>当你使用<span>SET 
					PASSWORD</span>、<span>INSERT</span>或<span>UPDATE</span>指定账户的密码时，必须用<span>PASSWORD()</span>函数对它进行加密。<span>(</span>唯一的特例是如果密码为空，你不需要使用<span>PASSWORD()</span><span>)</span>。需要使用<span>PASSWORD()</span>是因为<span>user</span>表以加密方式保存密码，而不是明文。如果你忘记了，你可能会象这样设置密码：</p>
					<pre><span>shell&gt; </span><span><b><span>mysql -u root mysql</span></b></span></pre>
					<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
					<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>VALUES(&#39;%&#39;,&#39;jeffrey&#39;,&#39;biscuit&#39;);</span></b></span></pre>
					<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
					<pre><span>&nbsp;</span></pre>
					<p>结果是密码<span>&#39;biscuit&#39;</span>保存到<span>user</span>表后没有加密。当<span>jeffrey</span>使用该密码连接服务器时，值被加密并同保存在<span>user</span>表中的进行比较。但是，保存的值为字符串<span>&#39;biscuit&#39;</span>，因此比较将失败，服务器拒绝连接：</p>
					<pre><span>shell&gt; </span><span><b><span>mysql -u jeffrey -pbiscuit test</span></b></span></pre>
					<pre><span>Access denied</span></pre>
					<p>如果你使用<span>GRANT 
					... IDENTIFIED BY</span>语句或<strong><span>mysqladmin 
					password</span></strong>命令设置密码，它们均会加密密码。在这种情况下，不需要使用 
					<span>PASSWORD()</span>函数。</p>
					<p><strong><span>注</span></strong>释：<span>PASSWORD()</span>加密不同于<span>Unix</span>密码加密。参见<a href="database-administration.html#user-names" title="5.8.1. MySQL Usernames and Passwords">5.8.1节，“MySQL用户名和密码”</a>。</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="password-security"></a>
			5.8.6.&nbsp;使你的密码安全</h3></div></div></div>
			<p>在管理级别，你决不能将<span>mysql.user</span>表的访问权限授予任何非管理账户。</p>
			<p>当你运行客户端程序连接<span>MySQL</span>服务器时，以一种暴露的可被其他用户发现的方式指定你的密码是不妥当的。当你运行客户端程序时，你可以使用下列方法指定你的密码，还有每个方法的风险评估：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用一个在命令行上<span>-p<i>your_pass</i></span>或<span>--password=<i>your_pass</i></span>的选项。例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u francis -pfrank <i>db_name</i></span></b></span></pre>
			<p>这很方便但是不安全，因为你的密码对系统状态程序<span>(</span>例如<span>ps</span><span>)</span>变得可见，它可以被其他的用户调用来显示命令行。一般<strong><span>MySQL</span></strong>客户在他们的初始化顺序期间用零覆盖命令行参数，但是仍然有一个短暂间隔时间内参数值可见的。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用一个<span>-p</span>或<span>--password</span>选项<span>(</span>没有指定密码<span>)</span>。在这种情况下，客户端程序请求来自终端的密码：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u francis -p <i>db_name</i></span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Enter password: ********</span></pre>
			<p><span>&nbsp;</span><samp >“<span>*</span>”</samp>字符指示输入密码的地方。输入密码时密码看不见。</p>
			<p>
			因为它对其他用户不可见，与在命令行上指定它相比，这样进入你的密码更安全。然而，这个输入一个密码的方法仅仅为你交互式运行程序是合适的。如果你想要从非交互式运行的一个脚本调用一个客户端，就没有从终端输入入密码的机会。在某些系统中，你甚至会发现脚本的第一行被（错误地）读并解释为你的密码！</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在一个配置文件中存储你的密码。例如，在<span>Unix</span>中，你可在主目录的<tt >“<span>.my.cnf</span>”</tt>文件中的<span>[client]</span>节列出你的密码：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[client]</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>password=your_pass</span></pre>
			<p>如果你在<tt >“<span>.my.cnf</span>”</tt>里面存储密码，除了你本人其它人不能访问该文件。保证文件的访问模式是<span>400</span>或<span><span>600</span>。</span>例如：</p>
			<pre ><span>shell&gt; </span><span><b><span>chmod 600 .my.cnf</span></b></span></pre>
			<p>关于选项文件的详细讨论参见<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>你可在<span>MYSQL_PWD</span>环境变量中存储密码。但是这种指定<span>MySQL</span>密码的方法是极不安全的，不应该使用。<span>ps</span>的某些版本包括显示运行进程的环境的选项；如果你设定<span>MYSQL_PWD</span>，你的密码将被运行<strong><span>ps</span></strong>的所有人看见，甚至在没有这样一个版本的<span>ps</span>的系统上，没有其它方法观察到进程环境的假设是不明智的。参见<a href="environment-variables.html" title="Appendix F. Environment Variables">附录F：<i>环境变量</i></a>。</p>
			<p>总之，最安全的方法是让客户端程序提示输入密码或在适当保护的选项文件中指定密码。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="secure-connections"></a>
			5.8.7.&nbsp;使用安全连接</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#secure-basics">
				5.8.7.1. SSL基本概念</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-requirements">
				5.8.7.2. 需求(OpenSSL)</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-using-yassl">
				5.8.7.3. 使用yaSSL</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-create-certs">
				5.8.7.4. 为MySQL设置SSL证书</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-grant">5.8.7.5. SSL GRANT 
				选项</a></span></dt><dt><span class="section"><a href="database-administration.html#ssl-options">
				5.8.7.6. SSL命令行选项</a></span></dt><dt><span class="section"><a href="database-administration.html#windows-and-ssh">
				5.8.7.7. 用SSH以远程方式从Windows连接到MySQL</a></span></dt></dl></div><a class="indexterm" name="id2776412"></a><a class="indexterm" name="id2776419"></a><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>支持<span>MySQL</span>客户端和服务器之间的安全<span>(</span>加密的<span>)</span>连接所使用的安全套接字层<span>(SSL)</span>协议。本节讨论如何使用<span>SSL</span>连接。还描述了在<span>Windows</span>中设置<span>SSH</span>的方法。<p>
				<span>MySQL</span>的标准配置倾向于尽可能快，因此默认情况不使用加密连接。使用该协议会使客户端<span>/</span>服务器协议慢得多。对数据进行加密非常耗<span>CPU</span>，需要计算机多做许多工作，会延迟<span>MySQL</span>的其它任务。对于需要通过加密连接提供安全的应用程序，可以保证额外的计算。</p>
				<p><span>MySQL</span>允许在连接前启用加密。你可以根据具体应用程序的需求选择普通未加密连接或安全加密<span>SSL</span>连接。</p>
				<h4 class="title"><a name="secure-basics"></a>5.8.7.1.&nbsp;SSL基本概念</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				要想理解<span>MySQL</span>如何使用<span>SSL</span>，需要解释一些基本<span>SSL</span>和<span>X509</span>概念。熟悉的人们可以跳过该部分。<p>
				默认情况下，<span>MySQL</span>在客户端和服务器之间使用未加密的连接。这说明可以访问网络的部分人可以看到你的通信，并看到发送和接收的数据。他们甚至可以更改在客户端和服务器之间传递的数据。要想提高安全性，当调用客户端程序时，你可以通过<span>--compress</span>选项压缩客户端<span>/</span>服务器之间的通信。但是，这样并不能阻挡住顽固的攻击者。</p>
				<p>
				当你需要以安全方式在网络中传递信息时，未加密的连接是不可接受的。加密是使任何数据不可读的方法。事实上，今天的许多惯例需要加密算法提供更加安全的要素。它们应能抵抗各种已知的攻击，例如更改加密消息的顺序或两次重放数据。</p>
				<p><span>SSL</span>是一种使用不同的加密算法确保从公用网接收到的数据是可信的协议。它具有检测数据更改、丢失或重放的机制。<span>SSL</span>还包括使用<span> 
				X509</span>标准提供身份认证的算法。</p>
				<p>使用<span>X509</span>，可以识别<span>Internet</span>上的某些人。通常用于电子商务应用程序中。按照基本概念，应有某种称之为“<span class="quote">认证机构</span>”<span>(</span>或<span>CA)</span>的机构，可以向请求者分发电子证书。证书依赖非对称加密算法，有两个加密密钥<span>(</span>公共密钥和私人密钥<span>)</span>。认证持有者可以向其它方出示证书来证明身份。证书包括持有者的公共密钥。只能使用对应的私人密钥对含该公共密钥的加密数据进行解密，私人密钥由证书持有者拥有。</p>
				<p>如果你需要关于<span>SSL</span>、<span>X509</span>、或加密的详细信息，使用<span>Internet</span>搜索引擎来搜索你感兴趣的关键字。</p>
				<h4 class="title"><a name="secure-requirements"></a>5.8.7.2.&nbsp;需求(OpenSSL)</h4></div></div></div>
				<p>要想在<span>MySQL</span>服务器和客户端程序之间使用<span>SSL</span>连接，系统必须能够支持<span>OpenSSL</span>。如果用支持内嵌式<span>yaSSL</span>的<span>MySQL</span>版本，不要读该节，但应阅读<a href="database-administration.html#secure-using-yassl" title="5.8.7.3. Using yaSSL">5.8.7.3节，“使用yaSSL”</a>。</p>
				<p>要想获得安全的<span>MySQL</span>连接，必须：</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>安装<span>OpenSSL</span>库。我们已经测试了带<span>OpenSSL 
				0.9.6</span>的<span>MySQL</span>。如果你需要<span>OpenSSL</span>，请访问<span><a target="_top"  href="http://www.openssl.org"><span><u><span style="color:blue">http://www.openssl.org</span></u></span></a></span>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>配置<span>MySQL</span>，用<span>--with-vio</span>和<span>--with-openssl</span>选项运行<strong><span>configure</span></strong>脚本。</p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>确保升级了授权表，使<span>mysql.user</span>表内包含<span>SSL</span>相关列。如果
				授权表是从<span>MySQL 
				4.0.0</span>之前的版本升级，这很重要。升级过程见<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2节，“升级授权表”</a>。</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>要想检查是否运行的<b><span>mysqld</span></b><strong><span>服务器</span></strong>支持<span>OpenSSL</span>，应检查<span>have_openssl</span>系统变量的值：</p>
				<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mysql&gt; </span><span><b><span>SHOW VARIABLES LIKE &#39;have_openssl&#39;;</span></b></span></pre>
				<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------+-------+</span></pre>
				<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| Variable_name | Value |</span></pre>
				<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------+-------+</span></pre>
				<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| have_openssl&nbsp; | YES&nbsp;&nbsp; |</span></pre>
				<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------+-------+</span></pre>
				<p>如果值为<span>YES</span>，服务器支持<span>OpenSSL</span>连接。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="secure-using-yassl"></a>
				5.8.7.3.&nbsp;使用yaSSL</h4></div></div></div><a class="indexterm" name="id2776679"></a>
				<p>使用<span>MySQL</span>的内嵌式<span>yaSSL</span>支持，可以很容易地使用安全连接。不需要安装<span>OpenSSL</span>和执行<a href="database-administration.html#secure-requirements" title="5.8.7.2. Requirements (OpenSSL)">5.8.7.2节，“需求(OpenSSL)”</a>中的步骤。并且，<span>MySQL</span>和<span>yaSSL</span>使用相同的许可模型。</p>
				<p>当前，在以下平台上支持<span>yaSSL</span>：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Linux/x86-64 Red Hat Enterprise 
				3.0 </span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Linux RHAS21 Itanium-2</span>，带<span>gcc</span>，静态链接</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Linux Itanium-2</span>，带<span>gcc</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Windows</span></p>
				<p>当从源码构建<span>MySQL</span>时如果你想要启用<span>yaSSL</span>，应这样配置<span>MySQL</span>：</p>
				<pre><span>./configure --with-yassl=yes</span></pre>
				<p>要想启动<span>MySQL</span>服务器支持<span>yaSSL</span>，使用支持<span>OpenSSL</span>的相同的选项，并识别建立安全连接需要的证书：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqld --ssl-ca=<i>cacert.pem</i> \</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--ssl-cert=<i>server-cert.pem</i> \</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--ssl-key=<i>server-key.pem</i></span></b></span></pre>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-ca</span>识别认证机构证书。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-cert</span>识别服务器证书。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>--ssl-key</span>识别客户证书。</p>
				<p>要想用<span>yaSSL</span>支持建立与<span>MySQL</span>服务器的安全连接，应这样启动客户端：</p>
				<pre><span>shell&gt; </span><span><b><span>mysql --ssl-ca=<i>cacert.pem</i> \</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--ssl-cert=<i>server-cert.pem</i> \</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--ssl-key=<i>server-key.pem</i></span></b></span></pre>
				<p>换句话说，选项与服务器的相同，并且认证机构证书必须相同。</p>
				<p>要想从应用程序建立安全连接，调用<span>mysql_real_connect()</span>之前，应使用<span>mysql_ssl_set()</span><span>API</span>函数来设置相应认证选项。参见<a href="apis.html#mysql-ssl-set" title="25.2.3.64. mysql_ssl_set()">25.2.3.64节，“mysql_ssl_set()”</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="secure-create-certs"></a>
				5.8.7.4.&nbsp;为MySQL设置SSL证书</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				下面是一个为<span>MySQ</span>设置<span>SSL</span>证书的例子：<pre><span>DIR=`pwd`/openssl</span></pre>
				<pre><span>PRIV=$DIR/private</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>mkdir $DIR $PRIV $DIR/newcerts</span></pre>
				<pre><span>cp /usr/share/ssl/openssl.cnf $DIR</span></pre>
				<pre><span>replace ./demoCA $DIR -- $DIR/openssl.cnf</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Create necessary files: $database, $serial and $new_certs_dir</span></pre>
				<pre><span># directory (optional)</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>touch $DIR/index.txt</span></pre>
				<pre><span>echo &quot;01&quot; &gt; $DIR/serial</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Generation of Certificate Authority(CA)</span></pre>
				<pre><span>#</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>openssl req -new -x509 -keyout $PRIV/cakey.pem -out $DIR/cacert.pem \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -config $DIR/openssl.cnf</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Generating a 1024 bit RSA private key</span></pre>
				<pre><span># ................++++++</span></pre>
				<pre><span># .........++++++</span></pre>
				<pre><span># writing new private key to &#39;/home/monty/openssl/private/cakey.pem&#39;</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Verifying password - Enter PEM pass phrase:</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># You are about to be asked to enter information that will be</span></pre>
				<pre><span># incorporated into your certificate request.</span></pre>
				<pre><span># What you are about to enter is what is called a Distinguished Name</span></pre>
				<pre><span># or a DN.</span></pre>
				<pre><span># There are quite a few fields but you can leave some blank</span></pre>
				<pre><span># For some fields there will be a default value,</span></pre>
				<pre><span># If you enter &#39;.&#39;, the field will be left blank.</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># Country Name (2 letter code) [AU]:FI</span></pre>
				<pre><span># State or Province Name (full name) [Some-State]:.</span></pre>
				<pre><span># Locality Name (eg, city) []:</span></pre>
				<pre><span># Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB</span></pre>
				<pre><span># Organizational Unit Name (eg, section) []:</span></pre>
				<pre><span># Common Name (eg, YOUR name) []:MySQL admin</span></pre>
				<pre><span># Email Address []:</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Create server request and key</span></pre>
				<pre><span>#</span></pre>
				<pre><span>openssl req -new -keyout $DIR/server-key.pem -out \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; $DIR/server-req.pem -days 3600 -config $DIR/openssl.cnf</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Generating a 1024 bit RSA private key</span></pre>
				<pre><span># ..++++++</span></pre>
				<pre><span># ..........++++++</span></pre>
				<pre><span># writing new private key to &#39;/home/monty/openssl/server-key.pem&#39;</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Verifying password - Enter PEM pass phrase:</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># You are about to be asked to enter information that will be</span></pre>
				<pre><span># incorporated into your certificate request.</span></pre>
				<pre><span># What you are about to enter is what is called a Distinguished Name</span></pre>
				<pre><span># or a DN.</span></pre>
				<pre><span># There are quite a few fields but you can leave some blank</span></pre>
				<pre><span># For some fields there will be a default value,</span></pre>
				<pre><span># If you enter &#39;.&#39;, the field will be left blank.</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># Country Name (2 letter code) [AU]:FI</span></pre>
				<pre><span># State or Province Name (full name) [Some-State]:.</span></pre>
				<pre><span># Locality Name (eg, city) []:</span></pre>
				<pre><span># Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB</span></pre>
				<pre><span># Organizational Unit Name (eg, section) []:</span></pre>
				<pre><span># Common Name (eg, YOUR name) []:MySQL server</span></pre>
				<pre><span># Email Address []:</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Please enter the following &#39;extra&#39; attributes</span></pre>
				<pre><span># to be sent with your certificate request</span></pre>
				<pre><span># A challenge password []:</span></pre>
				<pre><span># An optional company name []:</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Remove the passphrase from the key (optional)</span></pre>
				<pre><span>#</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>openssl rsa -in $DIR/server-key.pem -out $DIR/server-key.pem</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Sign server cert</span></pre>
				<pre><span>#</span></pre>
				<pre><span>openssl ca&nbsp; -policy policy_anything -out $DIR/server-cert.pem \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -config $DIR/openssl.cnf -infiles $DIR/server-req.pem</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Check that the request matches the signature</span></pre>
				<pre><span># Signature ok</span></pre>
				<pre><span># The Subjects Distinguished Name is as follows</span></pre>
				<pre><span># countryName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;FI&#39;</span></pre>
				<pre><span># organizationName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;MySQL AB&#39;</span></pre>
				<pre><span># commonName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;MySQL admin&#39;</span></pre>
				<pre><span># Certificate is to be certified until Sep 13 14:22:46 2003 GMT</span></pre>
				<pre><span># (365 days)</span></pre>
				<pre><span># Sign the certificate? [y/n]:y</span></pre>
				<pre><span>#</span></pre>
				<pre><span>#</span></pre>
				<pre><span># 1 out of 1 certificate requests certified, commit? [y/n]y</span></pre>
				<pre><span># Write out database with 1 new entries</span></pre>
				<pre><span># Data Base Updated</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Create client request and key</span></pre>
				<pre><span>#</span></pre>
				<pre><span>openssl req -new -keyout $DIR/client-key.pem -out \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; $DIR/client-req.pem -days 3600 -config $DIR/openssl.cnf</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Generating a 1024 bit RSA private key</span></pre>
				<pre><span># .....................................++++++</span></pre>
				<pre><span># .............................................++++++</span></pre>
				<pre><span># writing new private key to &#39;/home/monty/openssl/client-key.pem&#39;</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Verifying password - Enter PEM pass phrase:</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># You are about to be asked to enter information that will be</span></pre>
				<pre><span># incorporated into your certificate request.</span></pre>
				<pre><span># What you are about to enter is what is called a Distinguished Name</span></pre>
				<pre><span># or a DN.</span></pre>
				<pre><span># There are quite a few fields but you can leave some blank</span></pre>
				<pre><span># For some fields there will be a default value,</span></pre>
				<pre><span># If you enter &#39;.&#39;, the field will be left blank.</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># Country Name (2 letter code) [AU]:FI</span></pre>
				<pre><span># State or Province Name (full name) [Some-State]:.</span></pre>
				<pre><span># Locality Name (eg, city) []:</span></pre>
				<pre><span># Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB</span></pre>
				<pre><span># Organizational Unit Name (eg, section) []:</span></pre>
				<pre><span># Common Name (eg, YOUR name) []:MySQL user</span></pre>
				<pre><span># Email Address []:</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Please enter the following &#39;extra&#39; attributes</span></pre>
				<pre><span># to be sent with your certificate request</span></pre>
				<pre><span># A challenge password []:</span></pre>
				<pre><span># An optional company name []:</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Remove a passphrase from the key (optional)</span></pre>
				<pre><span>#</span></pre>
				<pre><span>openssl rsa -in $DIR/client-key.pem -out $DIR/client-key.pem</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Sign client cert</span></pre>
				<pre><span>#</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>openssl ca&nbsp; -policy policy_anything -out $DIR/client-cert.pem \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -config $DIR/openssl.cnf -infiles $DIR/client-req.pem</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Check that the request matches the signature</span></pre>
				<pre><span># Signature ok</span></pre>
				<pre><span># The Subjects Distinguished Name is as follows</span></pre>
				<pre><span># countryName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;FI&#39;</span></pre>
				<pre><span># organizationName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;MySQL AB&#39;</span></pre>
				<pre><span># commonName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;MySQL user&#39;</span></pre>
				<pre><span># Certificate is to be certified until Sep 13 16:45:17 2003 GMT</span></pre>
				<pre><span># (365 days)</span></pre>
				<pre><span># Sign the certificate? [y/n]:y</span></pre>
				<pre><span>#</span></pre>
				<pre><span>#</span></pre>
				<pre><span># 1 out of 1 certificate requests certified, commit? [y/n]y</span></pre>
				<pre><span># Write out database with 1 new entries</span></pre>
				<pre><span># Data Base Updated</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Create a my.cnf file that you can use to test the certificates</span></pre>
				<pre><span>#</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>cnf=&quot;&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf [client]&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-ca=$DIR/cacert.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-cert=$DIR/client-cert.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-key=$DIR/client-key.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf [mysqld]&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-ca=$DIR/cacert.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-cert=$DIR/server-cert.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-key=$DIR/server-key.pem&quot;</span></pre>
				<pre><span>echo $cnf | replace &quot; &quot; &#39;</span></pre>
				<pre><span>&#39; &gt; $DIR/my.cnf</span></pre>
				<p>
				<span>
				&nbsp;</span></p>
				<p>要想测试<span>SSL</span>连接，按下面方法启动服务器，其中<span>$DIR</span>是示例<span>my.cnf</span>选项文件安装的路径名：</p>
				<pre><span>shell&gt; </span><span  >MySQL<b>d --defaults-file=$DIR/my.cnf &amp;</b></span></pre>
				<p>然后使用相同的选项文件调用客户端程序：</p>
				<pre><span>shell&gt; </span><span  >MySQL<b> --defaults-file=$DIR/my.cnf</b></span></pre>
				<p>如果你有<span>MySQL</span>源码分发版，还可以修改前面的<span>my.cnf</span>文件来指向<span>SSL</span>目录中的示范证书和密钥文件来测试你的设置。</p>
				<h4 class="title"><a name="secure-grant"></a>5.8.7.5. SSL GRANT 
				选项</h4></div></div></div><a class="indexterm" name="id2777138"></a><a class="indexterm" name="id2777145"></a><a class="indexterm" name="id2777154"></a>
				<p><span>MySQL</span>可以检查<span>X509</span>证书的属性和基于用户名和密码的通用鉴定方法。要想为<span>MySQL</span>账户指定<span>SSL</span>相关选项，使用<span>GRANT</span>语句的<span>REQUIRE</span>子句。参见<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3节，“GRANT和REVOKE语法”</a>。</p>
				<p>有多种可能来限制一个账户的连接类型：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果账户没有<span>SSL</span>或<span>X509</span>需求，如果用户名和密码合法，允许未加密的连接。但是，如果客户有正确的证书和密钥文件，在客户选项中可以使用加密连接。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE SSL</span>选项限制服务器只允许该账户的<span>SSL</span>加密连接。请注意如果有<span>ACL</span>记录允许非<span>SSL</span>连接，该选项会被忽略。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp; </span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39; REQUIRE SSL;</span></b></span></pre>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE X509</span>表示客户必须有合法证书但确切的证书、分发者和主体不重要。唯一的需求是应可以被某个<span>CA</span>认证机构验证它的签名。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39; REQUIRE X509;</span></b></span></pre>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE ISSUER &#39;issuer&#39;</span>限制连接企图，即客户必须出示<span>CA
				</span>
				<span>&#39;issuer&#39;</span>签发的合法<span>X509</span>证书。如果客户出示了一个合法证书，但是是由不同的分发者签发，服务器拒绝连接。使用<span>X509</span>证书表示要加密，因此不需要<span>SSL</span>选项。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>REQUIRE ISSUER &#39;/C=FI/ST=Some-State/L=Helsinki/</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O=MySQL Finland AB/CN=Tonu Samuel/Email=tonu@example.com&#39;;</span></pre>
				<p>请注意<span>ISSUER</span>值应做为单一字符串输入。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE SUBJECT &#39;subject&#39;</span><span> </span>
				限制连接企图，即客户必须出示主题为<span>&#39;subject&#39;</span>的合法<span>X509</span>证书。如果客户出示了一个合法证书，但是有不同的主题，服务器拒绝连接。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>REQUIRE SUBJECT &#39;/C=EE/ST=Some-State/L=Tallinn/</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O=MySQL demo client certificate/</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CN=Tonu Samuel/Email=tonu@example.com&#39;;</span></pre>
				<p>请注意<span>SUBJECT</span>值应做为单一字符串输入。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE CIPHER &#39;cipher&#39;</span>用来确保使用足够强的密码和密钥长度。如果使用旧的短加密密钥算法，<span>SSL</span>本身可能很弱。使用该选项，我们可以索取确切的加密方法来连接。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39;</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>REQUIRE CIPHER &#39;EDH-RSA-DES-CBC3-SHA&#39;;</span></b></span></pre>
				<p>在<span>REQUIRE</span>子句中，可以结合使用<span><span>SUBJECT</span><span>、<span>ISSUER</span></span></span>和<span>CIPHER</span>选项：</p>
				<pre><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39;</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>REQUIRE SUBJECT &#39;/C=EE/ST=Some-State/L=Tallinn/</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; O=MySQL demo client certificate/</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CN=Tonu Samuel/Email=tonu@example.com&#39;</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>AND ISSUER &#39;/C=FI/ST=Some-State/L=Helsinki/</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; O=MySQL Finland AB/CN=Tonu Samuel/Email=tonu@example.com&#39;</span></pre>
				<pre><span>&nbsp;&nbsp; &nbsp;-&gt; </span><span><b><span>AND CIPHER &#39;EDH-RSA-DES-CBC3-SHA&#39;;</span></b></span></pre>
				<p>请注意<span>SUBJECT</span>和<span>ISSUER</span>值应做为单一字符串输入。</p>
				<p>在<span>MySQL 5.1</span>中<span>,</span>在<span>REQUIRE</span>选项之间可以选用<span>AND</span>关键字。</p>
				<p>选项的顺序不重要，但任何选项不能用两次。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ssl-options"></a>
				5.8.7.6.&nbsp;SSL命令行选项</h4></div></div></div><a class="indexterm" name="id2777483"></a></div><div class="section"><div class="titlepage"><div><div>
				下面列出了规定<span>SSL</span>、证书文件和密钥文件使用的选项。它们可以位于命令行中或选项文件中。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl</span></p>
				<p>对于服务器，该选项规定该服务器允许<span>SSL</span>连接。对于客户端程序，它允许客户使用<span>SSL</span>连接服务器。单单该选项不足以使用<span>SSL</span>连接。还必须指定<span>--ssl-ca</span>、<span>--ssl-cert</span>和<span>--ssl-key</span>选项。</p>
				<p>通常从反向使用该选项表示不应使用<span>SSL</span>。要想实现，将选项指定为<span>--skip-ssl</span>或<span>--ssl=0</span>。</p>
				<p>请注意使用<span>--ssl</span>不<em><span>需要</span></em><span>SSL</span>连接。例如，如果编译的服务器或客户不支持<span>SSL</span>，则使用普通的未加密的连接。</p>
				<p>确保使用<span>SSL</span>连接的安全方式是使用含<span>REQUIRE 
				SSL</span>子句的<span>GRANT</span>语句在服务器上创建一个账户。然后使用该账户来连接服务器，服务器和客户端均应启用<span>SSL</span>支持。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-ca=<i>file_name</i></span></p>
				<p>含可信<span>SSL CA</span>的清单的文件的路径。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-capath=<i>directory_name</i></span></p>
				<p>包含<span>pem</span>格式的可信<span>SSL 
				CA</span>证书的目录的路径。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-cert=<i>file_name</i></span></p>
				<p><span>SSL</span>证书文件名，用于建立安全连接。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-cipher=<i>cipher_list</i></span></p>
				<p>允许的用于<span>SSL</span>加密的密码的清单。<span><i><span>cipher_list</span></i></span>的格式与<span>OpenSSL</span><span> 
				ciphers</span>命令相同。</p>
				<p>示例：<span>--ssl-cipher=ALL:-AES:-EXP</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-key=<i>file_name</i></span></p>
				<p><span>SSL</span>密钥文件名，用于建立安全连接。</p>
				<h4 class="title"><a name="windows-and-ssh"></a>
				5.8.7.7.&nbsp;用SSH以远程方式从Windows连接到MySQL</h4></div></div></div><a class="indexterm" name="id2777700"></a><a class="indexterm" name="id2777706"></a></div></div></div><div class="section"><div class="titlepage"><div><div>
		本节说明如何用<span>SSH</span>安全连接到远程<span>MySQL</span>服务器<span>(David 
		Carlson </span>
		<span>&lt;<a  href="mailto:dcarlson@mplcomm.com">dcarlson@mplcomm<span>。</span>com</a>&gt;</span><span>)</span>：<p>
		<span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在<span>Windows</span>主机上安装<span>SSH</span>客户端。作为用户，我所发现的最好的非免费客户端来自<span><a target="_top"  href="http://www.vandyke.com/">http://www.vandyke.com/</a></span>的<span>SecureCRT</span>。另一个选则是<span><a target="_top"  href="http://www.f-secure.com/">http://www.f-secure.com/</a></span>的<span>f-secure</span>。你还可以从<span><a target="_top"  href="http://directory.google.com/Top/Computers/Security/Products_and_Tools/Cryptography/SSH/Clients/Windows/">http://directory.google.com/Top/Computers/Security/Products_and_Tools/Cryptography/SSH/Clients/Windows/</a></span><span>
		</span>的<span>Google</span>找到一些免费客户端。</p>
		<p><span>2.<span>&nbsp;&nbsp;&nbsp;
		</span></span>启动<span>Windows SSH</span>客户端。设置<span>Host_Name 
		= yourmysqlserver_URL_or_IP</span>。设置<span>userid=your_userid</span>以便登录服务器。此<span>userid</span>值可以与你的<span>MySQL</span>账户的用户名不相同。</p>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>设置端口映射。可以进行远程映射<span>(</span>设置<span>local_port: 
		3306</span><span>, </span>
		<span>remote_host: 
		yourmysqlservername_or_ip</span><span>, </span>
		<span>remote_port: 3306</span><span>)</span>或本地映射<span>(</span>设置<span>port: 
		3306</span><span>, </span>
		<span>host: localhost</span><span>,
		</span><span>remote port: 3306</span><span>)</span>。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>进行保存，否则下次需要重设。</p>
		<p><span>5.<span>&nbsp;&nbsp;&nbsp;
		</span></span>刚创建的<span>SSH</span>会话登录服务器。</p>
		<p><span>6.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在<span>Windows</span>机器上启动相应<span>ODBC</span>应用程序<span>(</span>例如<span>Access)</span>。</p>
		<p><span>7.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在<span>Windows</span>中创建一个新的文件按照常用方法通过<span>ODBC</span>驱动程序链接<span>MySQL</span>，不同的是要为<span>MySQL</span>服务器输入<span>localhost</span>，而不是<span>yourmysqlservername</span>。</p>
		<p>你应有使用<span>SSH</span>加密的<span>ODBC</span>连接到<span>MySQL</span>。</p>
		<h2 class="title"><a name="disaster-prevention"></a>
		5.9.&nbsp;备份与恢复</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#backup">
			5.9.1. 数据库备份</a></span></dt><dt><span class="section"><a href="database-administration.html#backup-strategy-example">
			5.9.2. 示例用备份与恢复策略</a></span></dt><dt><span class="section"><a href="database-administration.html#point-in-time-recovery">
			5.9.3. 自动恢复</a></span></dt><dt><span class="section"><a href="database-administration.html#table-maintenance">
			5.9.4. 表维护和崩溃恢复</a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk">
			5.9.5. myisamchk：MyISAM表维护实用工具</a></span></dt><dt><span class="section"><a href="database-administration.html#maintenance-schedule">
			5.9.6. 建立表维护计划</a></span></dt><dt><span class="section"><a href="database-administration.html#table-info">
			5.9.7. 获取关于表的信息</a></span></dt></dl></div>
		<p>本节讨论如何进行数据库备份<span>(</span>完全备份和增量备份<span>)</span>，以及如何执行表的维护。本节描述的<span>SQL</span>语句语法参见<a href="database-administration.html">第5章：</a><a href="database-administration.html" title="Chapter 5. Database Administration"><i>数据库管理</i></a>。此处提供的大多数信息主要适合<span>MyISAM</span>表。<span>InnoDB</span>备份程序参见<a href="storage-engines.html#backing-up" title="15.2.8. Backing Up and Recovering an InnoDB Database">15.2.8节，“InnoDB数据库的备份和恢复<code class="literal"></code>”</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="backup"></a>
			5.9.1.&nbsp;数据库备份</h3></div></div></div><a class="indexterm" name="id2777931"></a><a class="indexterm" name="id2777941"></a>
			<p>因为<span>MySQL</span>表保存为文件方式，很容易备份。要想保持备份的一致性，对相关表执行<span>LOCK 
			TABLES</span>操作，然后对表执行<span>FLUSH 
			TABLES</span>。参见<a href="sql-syntax.html#lock-tables" title="13.4.5. LOCK TABLES and UNLOCK TABLES Syntax">13.4.5节，“LOCK 
		TABLES和UNLOCK TABLES语法”</a>和<a href="sql-syntax.html#flush" title="13.5.5.2. FLUSH Syntax">13.5.5.2节，“FLUSH语法”</a>。你只需要读锁定；这样当你复制数据库目录中的文件时，允许其它客户继续查询表。需要<span>FLUSH 
			TABLES</span>语句来确保开始备份前将所有激活的索引页写入硬盘。</p>
			<p>如果你想要进行<span>SQL</span>级别的表备份，你可以使用<span>SELECT 
			INTO ...OUTFILE</span>或<span>BACKUP 
			TABLE</span>。对于<span>SELECT 
			INTO ...OUTFILE</span>， 输出的文件不能先存在。对于<span>BACKUP 
			TABLE</span>也如此，因为覆盖完整的文件会有安全风险。参见<a href="sql-syntax.html#select" title="13.2.7. SELECT Syntax">13.2.7节，“SELECT语法”</a>和<a href="sql-syntax.html#backup-table" title="13.5.2.2. BACKUP TABLE Syntax">13.5.2.2节，“BACKUP 
		TABLE语法”</a>。</p>
			<p>备份数据库的另一个技术是使用<strong><span>mysqldump</span></strong>程序或<strong><span>mysqlhotcopy</span></strong><b>脚本</b>。参见<a href="client-side-scripts.html#mysqldump" title="8.8. mysqldump — A Database Backup Program">8.8节，“mysqldump：数据库备份程序”</a>和<a href="client-side-scripts.html#mysqlhotcopy" title="8.9. mysqlhotcopy — A Database Backup Program">8.9节，“mysqlhotcopy：数据库备份程序”</a>。</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>完全备份数据库：</p>
			<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>mysqldump --tab=<i>/path/to/some/dir</i> --opt <i>db_name</i></span></b></span></pre>
			<p>或：</p>
			<pre ><span>shell&gt; </span><span><b><span>mysqlhotcopy <i>db_name</i> <i>/path/to/some/dir</i></span></b></span></pre>
			<p>只要服务器不再进行更新，还可以只复制所有表文件<span>(</span><span><span>*.frm</span><span>、<span>*.MYD</span></span></span>和<span>*.MYI</span>文件<span>)</span>。<strong><span>mysqlhotcopy</span></strong>脚本使用该方法。<span>(</span>但请注意如果数据库包含<span>InnoDB</span>表，这些方法不工作。<span>InnoDB</span>不将表的内容保存到数据库目录中，<strong><span>mysqlhotcopy</span></strong>只适合<span>MyISAM</span>表）<span>。
			</span></p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果<strong><span>mysqld</span></strong>在运行则停止，然后用<span>--log-bin[=file_name]</span>选项来启动。参见<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3节，“二进制日志”</a>。二进制日志文件中提供了<span>&nbsp; </span>执行<strong><span>mysqldump</span></strong>之后对数据库的更改进行复制所需要的信息。</p>
			<p>对于<span>InnoDB</span>表，可以进行在线备份，不需要对表进行锁定；参见<a href="client-side-scripts.html#mysqldump" title="8.8. mysqldump — A Database Backup Program">8.8节，“mysqldump：数据库备份程序”</a>。</p>
			<p><span>MySQL</span>支持增量备份<span>:</span>需要用<span>--log-bin</span>选项来启动服务器以便启用二进制日志；参见<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3节，“二进制日志”</a>。当想要进行增量备份时<span>(</span>包含上一次完全备份或增量备份之后的所有更改<span>)</span>，应使用<span>FLUSH 
			LOGS</span>回滚二进制日志。然后，你需要将从最后的完全或增量备份的某个时刻到最后某个点的所有二进制日志复制到备份位置。这些二进制日志为增量备份；<span>恢复时，按照下面的解释应用。下次进行完全备份时，还应使用</span><span  >FLUSH 
			LOGS</span>或<span  >mysqlhotcopy 
			--flushlogs</span><span>回滚二进制日志。参见</span><a href="client-side-scripts.html#mysqldump" title="8.8. mysqldump — A Database Backup Program">8.8节，“mysqldump：数据库备份程序”</a><span>和</span><a href="client-side-scripts.html#mysqlhotcopy" title="8.9. mysqlhotcopy — A Database Backup Program">8.9节，“mysqlhotcopy：数据库备份程序”</a><span>。</span></p>
			<p>如果<span>MySQL</span>服务器为从复制服务器，则无论选择什么备份方法，当备份从机数据时，还应备份<span>master.info</span>和<span>relay-log.info</span>文件。恢复了从机数据后，需要这些文件来继续复制。如果从机执行复制<span>LOAD 
			DATA INFILE</span>命令，你应还备份用<span>--slave-load-tmpdir</span>选项指定的目录中的<span>SQL_LOAD-*</span>文件。<span>(</span>如果未指定，该位置默认为<span>tmpdir</span>变量值）<span>。</span>从机需要这些文件来继续复制中断的<span>LOAD 
			DATA INFILE</span>操作。</p>
			<p>如果必须恢复<span>MyISAM</span>表，先使用<span>REPAIR 
			TABLE</span>或<strong><span>myisamchk 
			-r</span></strong>来恢复。<span>99.9%</span>的情况下该方法可以工作。如果<strong><span>myisamchk</span></strong>失败，试试下面的方法。请注意只有用<span>--log-bin</span>选项启动了<span>MySQL</span>从而启用二进制日志它才工作；参见<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3节，“二进制日志”</a>。</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>恢复原<strong><span>mysqldump</span></strong>备份，或二进制备份。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>执行下面的命令重新更新二进制日志：</p>
			<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>mysqlbinlog hostname-bin.[0-9]* | mysql</span></b></span></pre>
			<p>在某些情况下，你可能只想要从某个位置重新运行某些二进制日志。<span>(</span>通常你想要从恢复备份的日期重新运行所有二进制日志，查询不正确时例外<span>)</span>。关于<strong><span>mysqlbinlog</span></strong>工具和如何使用它的详细信息参见<a href="client-side-scripts.html#mysqlbinlog" title="8.6. mysqlbinlog — Utility for Processing Binary Log Files">8.6节，“mysqlbinlog：用于处理二进制日志文件的实用工具”</a>。</p>
			<p>还可以对具体文件进行选择备份：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想复制表，使用<span>SELECT 
			* INTO OUTFILE &#39;<i>file_name</i>&#39; FROM <i>tbl_name</i></span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想重载表，使用<span>LOAD 
			DATA INFILE &#39;file_name&#39; REPLACE ...</span>并恢复。要避免复制记录，表必须有<span>PRIMARY 
			KEY</span>或一个<span>UNIQUE</span>索引。当新记录复制唯一键值的旧记录时，<span>REPLACE</span>关键字可以将旧记录替换为新记录。</p>
			<p>如果备份时遇到服务器性能问题，可以有帮助的一个策略是在从服务器而不是主服务器上建立复制并执行备份。参见<a href="replication.html#replication-intro" title="6.1. Introduction to Replication">6.1节，“复制介绍”</a>。</p>
			<p>如果使用<span>Veritas</span>文件系统，可以这样备份：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>从客户端程序执行<span>FLUSH 
			TABLES WITH READ LOCK</span>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>从另一个<span>shell</span>执行<span>mount 
			vxfs snapshot</span>。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>从第一个客户端执行<span>UNLOCK 
			TABLES</span>。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>从快照复制文件。</p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>卸载快照。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="backup-strategy-example"></a>
			5.9.2.&nbsp;示例用备份与恢复策略</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#backup-policy">
				5.9.2.1. 备份策略</a></span></dt><dt><span class="section"><a href="database-administration.html#backup-recovery">
				5.9.2.2. 为恢复进行备份</a></span></dt><dt><span class="section"><a href="database-administration.html#backup-strategy-summary">
				5.9.2.3. 备份策略摘要</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
				本节讨论进行备份的程序，在出现崩溃后，可以恢复数据：<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>操作系统崩溃 </p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>电源故障 </p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>文件系统崩溃 </p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>硬件问题<span>(</span>硬盘、母板等等<span>)
				</span></p>
				<p>该命令不包括<strong><span>mysqldump</span></strong>和<strong><span>mysql</span></strong>程序的<span>--user</span>和<span><span>—</span><span>password</span></span>等选项。应包括必要的选项让<span>MySQL</span>服务器允许你连接它。</p>
				<p>我们假定数据保存在<span>MySQL</span>的<span>InnoDB</span>存储引擎中，支持事务和自动崩溃恢复。我们假定崩溃时<span>MySQL</span>服务器带负载。如果不带负载，则不需要恢复。</p>
				<p>出现操作系统崩溃或电源故障时，我们可以假定重启后硬盘上的<span>MySQL</span><span style="font-family:  MS Mincho">ś</span>数据仍可用。由于崩溃，<span>InnoDB</span>数据文件中的数据可能不再保持一致性，但<span>InnoDB</span>读取它的日志并会查到挂起的提交的和未提交的事务清单，它们没有清空到数据文件中。<span>InnoDB</span>自动卷回未提交的事务，并清空到它的数据文件中。通过<span>MySQL</span>错误日志将该恢复过程相关信息传达给用户。下面的例子为日志摘录：</p>
				<pre><span>InnoDB: Database was not shut down normally.</span></pre>
				<pre><span>InnoDB: Starting recovery from log files...</span></pre>
				<pre><span>InnoDB: Starting log scan based on checkpoint at</span></pre>
				<pre><span>InnoDB: log sequence number 0 13674004</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 13739520</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 13805056</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 13870592</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 13936128</span></pre>
				<pre><span>...</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 20555264</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 20620800</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 20664692</span></pre>
				<pre><span>InnoDB: 1 uncommitted transaction(s) which must be rolled back</span></pre>
				<pre><span>InnoDB: Starting rollback of uncommitted transactions</span></pre>
				<pre><span>InnoDB: Rolling back trx no 16745</span></pre>
				<pre><span>InnoDB: Rolling back of trx no 16745 completed</span></pre>
				<pre><span>InnoDB: Rollback of uncommitted transactions completed</span></pre>
				<pre><span>InnoDB: Starting an apply batch of log records to the database...</span></pre>
				<pre><span>InnoDB: Apply batch completed</span></pre>
				<pre><span>InnoDB: Started</span></pre>
				<pre><span>mysqld: ready for connections</span></pre>
				<p>如果文件系统崩溃或出现硬件问题，我们可以假定重启后硬盘上的<span>MySQL</span><span style="font-family:  MS Mincho">ś</span>数据不可用。这说明<span>MySQL</span>未能成功启动，因为一些硬盘数据块不再可读。在这种情况下，需要重新格式化硬盘，安装一个新的，或纠正问题。然后需要从备份中恢复<span>MySQL</span>数据，这说明我们必须先做好备份。要想确保，应及时返回并设计备份策略。</p>
				<h4 class="title"><a name="backup-policy"></a>5.9.2.1.&nbsp;备份策略</h4></div></div></div>
				<p>我们都知道必须按计划定期进行备份。可以用几个工具完全备份<span>(</span>在某个时间点的数据快照<span>)MySQL</span>。例如，<span>InnoDB 
				Hot Backup</span>为<span>InnoDB</span>数据文件提供在线非数据块物理备份，<strong><span>mysqldump</span></strong>提供在线逻辑备份。这里使用<strong><span>mysqldump</span></strong>。</p>
				<p>假定我们在星期日下午<span>1</span>点进行了备份，此时负荷较低。下面的命令可以完全备份所有数据库中的所有<span>InnoDB</span>表：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqldump --single-transaction --all-databases &gt; backup_sunday_1_PM.sql</span></b></span></pre>
				<p>这是在线非块备份，不会干扰对表的读写。<span>我们以前假定我们的表为</span><span  >InnoDB</span><span>表，因此</span><span  >--single-transaction</span><span>使用一致性地读，并且保证</span><strong><span>mysqldump</span></strong>所看见的<span>数据不会更改。<span>(</span>其它客户端对</span><span  >InnoDB</span><span>表进行的更改不会被</span><strong><span>mysqldump</span></strong><span>进程看见）<span>。</span>如果我们还有其它类型的表，我们必须假定在备份过程中它们不会更改。例如，对于</span><span  >mysql</span><span>数据库中的</span><span  >MyISAM</span>表<span>，我们必须假定在备份过程中没有对<span>MySQL</span>账户进行管理更改。</span></p>
				<p><strong><span>mysqldump</span></strong>命令产生的<span>.sql</span>文件包含一系列<span>SQL
				</span><span>INSERT</span>语句，可以用来重载转储的表。</p>
				<p>
				需要进行完全备份，但有时不方便。会产生大的备份文件并需要花时间来生成。从某个角度，完全备份并不理想，因为每个成功的完全备份包括所有数据，甚至自从上一次完全备份以来没有更改的部分。完成了初使完全备份后，进行增量备份会更有效。这样备份文件要小得多，备份时间也较短。不利之处是，恢复时不能只重载完全备份来恢复数据。还必须要用增量备份来恢复增量更改。</p>
				<p>要想进行增量备份，我们需要保存增量更改。应使用<span>--log-bin</span>选项启动<span>MySQL</span>服务器，以便更新数据时将这些更改保存到文件中。该选项启用二进制日志，因此服务器写将每个更新数据的<span>SQL</span>语句写入<span>MySQL</span>二进制日志。让我们看看用<span>--log-bin</span>选项启动的已经运行多日的<span>MySQL</span>服务器的数据目录。我们找到以下<span>MySQL</span>二进制日志文件：</p>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp; 1277324 Nov 10 23:59 gbichot2-bin.000001</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 Nov 10 23:59 gbichot2-bin.000002</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 79 Nov 11 11:06 gbichot2-bin.000003</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 508 Nov 11 11:08 gbichot2-bin.000004</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem 220047446 Nov 12 16:47 gbichot2-bin.000005</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp; 998412 Nov 14 10:08 gbichot2-bin.000006</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 361 Nov 14 10:07 gbichot2-bin.index</span></pre>
				<p>每次重启，<span>MySQL</span>服务器用序列中的下一个编号创建一个新的二进制日志文件。当服务器运行时，你还可以通过执行<span>FLUSH 
				LOGS</span><span> SQL</span>语句或<strong><span>mysqladmin 
				flush-logs</span></strong>命令，告诉服务器关闭当前的二进制日志文件并创建一个新文件。<strong><span>mysqldump</span></strong>也有一个选项来清空日志。数据目录中的<span>.index</span>文件包含该目录下所有<span>MySQL</span>二进制日志的清单。该文件用于复制。</p>
				<p>恢复时<span>MySQL</span>二进制日志很重要，因为它们是增量备份。如果进行完全备份时确保清空了日志，则后面创建的二进制日志文件包含了备份后的所有数据更改。让我们稍稍修改前面的<strong><span>mysqldump</span></strong>命令，让它在完全备份时能够清空<span> 
				MySQL</span>二进制日志，以便转储文件包含包含新的当前的二进制日志：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqldump --single-transaction --flush-logs --master-data=2</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --all-databases &gt; backup_sunday_1_PM.sql</span></pre>
				<p>执行该命令后，数据目录则包含新的二进制日志文件，<span>gbichot2-bin.000007</span>。结果<span>.sql</span>文件包含下列行：</p>
				<pre><span>-- Position to start replication or point-in-time </span>恢复时<span>y from</span></pre>
				<pre><span>-- CHANGE MASTER TO MASTER_LOG_FILE=&#39;gbichot2-bin.000007&#39;,MASTER_LOG_POS=4;</span></pre>
				<p>因为<strong><span>mysqldump</span></strong>命令可以执行完全备份，这些行表示两件事情：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>.sql</span>文件包含所有写入<span>gbichot2-bin.000007</span>二进制日志文件或最新的文件之前的更改。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>备份后所记录的所有数据更改不出现在<span>.sql</span>中，但出现在<span>gbichot2-bin.000007</span>二进制日志文件或最新的文件中。</p>
				<p>在星期一下午<span>1</span>点，我们可以清空日志开始新的二进制日志文件来创建增量备份。例如，执行<strong><span>mysqladmin 
				flush-logs</span></strong>命令创建<span>gbichot2-bin.000008</span>。星期日下午<span>1</span>点的完全备份和星期一下午<span>1</span>点之间的所有更改为文件<span>gbichot2-bin.000007</span>。该增量备份很重要，因此最好将它复制到安全的地方。<span>(</span>例如，备份到磁带或<span>DVD</span>上，或复制到另一台机器上）<span>。</span>在星期二下午<span>1</span>点，执行另一个<strong><span>mysqladmin 
				flush-logs</span></strong>命令。星期一下午<span>1</span>点和星期二下午<span>1</span>点之间的所有所有更改为文件<span>gbichot2-bin.000008</span><span>(</span>也应复制到某个安全的地方<span>)</span>。</p>
				<p><span>MySQL</span>二进制日志占据硬盘空间。要想释放空间，应随时清空。操作方法是删掉不再使用的二进制日志，例如进行完全备份时：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqldump --single-transaction --flush-logs --master-data=2</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --all-databases --delete-master-logs &gt; backup_sunday_1_PM.sql</span></pre>
				<p><strong><span>注</span></strong>释：如果你的服务器为复制主服务器，用<strong><span>mysqldump 
				--delete-master-logs</span></strong>删掉<span>MySQL</span>二进制日志很危险，因为从服务器可能还没有完全处理该二进制日志的内容。</p>
				<p><span>PURGE MASTER 
				LOGS</span>语句的描述中解释了为什么在删掉<span>MySQL</span>二进制日志之前应进行确认。参见<a href="sql-syntax.html#purge-master-logs" title="13.6.1.1. PURGE MASTER LOGS Syntax">13.6.1.1节，“PURGE 
			MASTER LOGS语法”</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="backup-recovery"></a>
				5.9.2.2.&nbsp;为恢复进行备份</h4></div></div></div>
				<p>现在假设在星期三上午<span>8</span>点出现了灾难性崩溃，需要使用备份文件进行恢复。恢复时，我们首先恢复最后的完全备份<span>(</span>从星期日下午<span>1</span>点开始<span>)</span>。完全备份文件是一系列<span>SQL</span>语句，因此恢复它很容易：</p>
				<pre><span>shell&gt; </span><span><b><span>mysql &lt; backup_sunday_1_PM.sql</span></b></span></pre>
				<p>在该点，数据恢复到星期日下午<span>1</span>点的状态。要想恢复从那时起的更改，我们必须使用增量备份，也就是，<span>gbichot2-bin.000007</span>和<span>gbichot2-bin.000008</span>二进制日志文件。根据需要从备份处取过这些文件，然后按下述方式处理：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqlbinlog gbichot2-bin.000007 gbichot2-bin.000008 | mysql</span></b></span></pre>
				<p>我们现在将数据恢复到星期二下午<span>1</span>点的状态，但是从该时刻到崩溃之间的数据仍然有丢失。要想恢复，我们需要<span>MySQL</span>服务器将<span>MySQL</span>二进制日志保存到安全的位置<span>(RAID 
				disks, SAN, ...)</span>，应为与数据文件的保存位置不同的地方，保证这些日志不在毁坏的硬盘上。<span>(</span>也就是，我们可以用<span>--log-bin</span>选项启动服务器，指定一个其它物理设备上的与数据目录不同的位置。这样，即使包含该目录的设备丢失，日志也不会丢失）<span>。</span>如果我们执行了这些操作，我们手头上会有<span>gbichot2-bin.000009</span>文件，我们可以用它来恢复大部分最新的数据更改，而不会丢失到崩溃时的数据。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="backup-strategy-summary"></a>
				5.9.2.3.&nbsp;备份策略摘要</h4></div></div></div>
				<p>出现操作系统崩溃或电源故障时，<span>InnoDB</span>自己可以完成所有数据恢复工作。但为了确保你可以睡好觉，应遵从下面的指导：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>一定用<span>--log-bin</span>或甚至<span>--log-bin=<i>log_name</i></span>选项运行<span>MySQL</span>服务器，其中日志文件名位于某个安全媒介上，不同于数据目录所在驱动器。如果你有这样的安全媒介，最好进行硬盘负载均衡<span>(</span>这样能够提高性能<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>定期进行完全备份，使用<strong><span>mysqldump</span></strong>命令进行在线非块备份。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>FLUSH</span><span> 
				LOGS</span>或<strong><span>mysqladmin 
				flush-logs</span></strong>清空日志进行定期增量备份。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="point-in-time-recovery"></a>
			5.9.3.&nbsp;自动恢复</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#point-in-time-recovery-times">
				5.9.3.1. 指定恢复时间</a></span></dt><dt><span class="section"><a href="database-administration.html#point-in-time-recovery-positions">
				5.9.3.2. 指定恢复位置</a></span></dt></dl></div><a class="indexterm" name="id2779136"></a><a class="indexterm" name="id2779143"></a>
			<p>如果<span>MySQL</span>服务器启用了二进制日志，你可以使用<strong><span>mysqlbinlog</span></strong>工具来恢复从指定的时间点开始<span> 
			(</span>例如，从你最后一次备份<span>)</span>直到现在或另一个指定的时间点的数据。关于启用二进制日志的信息，参见<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3节，“二进制日志”</a>。对于<strong><span>mysqlbinlog</span></strong>的详细信息，参见<a href="client-side-scripts.html#mysqlbinlog" title="8.6. mysqlbinlog — Utility for Processing Binary Log Files">8.6节，“mysqlbinlog：用于处理二进制日志文件的实用工具”</a>。</p>
			<p>要想从二进制日志恢复数据，你需要知道当前二进制日志文件的路径和文件名。一般可以从选项文件<span>(</span>即<span>my.cnf</span><span> 
			or </span><span>my.ini</span>，取决于你的系统<span>)</span>中找到路径。如果未包含在选项文件中，当服务器启动时，可以在命令行中以选项的形式给出。启用二进制日志的选项为<span>--log-bin</span>。要想确定当前的二进制日志文件的文件名，输入下面的<span>MySQL</span>语句：</p>
			<pre><span>SHOW BINLOG EVENTS \G</span></pre>
			<p>你还可以从命令行输入下面的内容：</p>
			<pre><span>mysql --user=</span><span><i><span>root</span></i></span><span> -p</span><span><i><span>my_pwd</span></i></span><span> -e &#39;SHOW BINLOG EVENTS \G&#39;</span></pre>
			<p>将密码<span><i><span>my_pwd</span></i></span>替换为服务器的<span><i><span>root</span></i></span>密码。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="point-in-time-recovery-times"></a>
				5.9.3.1.&nbsp;指定恢复时间</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				对于<span>MySQL 4.1.4</span>，可以在<strong><span>mysqlbinlog</span></strong>语句中通过<span>--start-date</span>和<span>--stop-date</span>选项指定<span>DATETIME</span>格式的起止时间。举例说明，假设在今天上午<span>10:00(</span>今天是<span>2005</span>年<span>4</span>月<span>20</span>日<span>)</span>，执行<span>SQL</span>语句来删除一个大表。要想恢复表和数据，你可以恢复前晚上的备份，并输入：<pre><span>mysqlbinlog --stop-date=&quot;2005-04-20 9:59:59&quot; /var/log/mysql/bin.123456 \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp; | mysql -u </span><span><i><span>root</span></i></span><span> -p</span><span><i><span>mypwd</span></i></span></pre>
				<p>该命令将恢复截止到在<span>--stop-date</span>选项中以<span>DATETIME</span>格式给出的日期和时间的所有数据。如果你没有检测到几个小时后输入的错误的<span>SQL</span>语句，可能你想要恢复后面发生的活动。根据这些，你可以用起使日期和时间再次运行<strong><span>mysqlbinlog</span></strong>：</p>
				<pre><span>mysqlbinlog --start-date=&quot;2005-04-20 10:01:00&quot; /var/log/mysql/bin.123456 \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp; | mysql -u </span><span><i><span>root</span></i></span><span> -p</span><span><i><span>mypwd</span></i></span><span> \</span></pre>
				<p>在该行中，从上午<span>10:01</span>登录的<span>SQL</span>语句将运行。组合执行前夜的转储文件和<strong><span 
>mysqlbinlog</span></strong>的两行可以将所有数据恢复到上午<span>10:00</span>前一秒钟。你应检查日志以确保时间确切。下一节介绍如何实现。</p>
				<h4 class="title"><a name="point-in-time-recovery-positions"></a>
				5.9.3.2.&nbsp;指定恢复位置</h4></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			也可以不指定日期和时间，而使用<strong><span>mysqlbinlog</span></strong>的选项<span>--start-position</span>和<span>--stop-position</span>来指定日志位置。它们的作用与起止日选项相同，不同的是给出了从日志起的位置号。使用日志位置是更准确的恢复方法，特别是当由于破坏性<span>SQL</span>语句同时发生许多事务的时候。要想确定位置号，可以运行<strong><span>mysqlbinlog</span></strong>寻找执行了不期望的事务的时间范围，但应将结果重新指向文本文件以便进行检查。操作方法为：<pre><span>mysqlbinlog --start-date=&quot;2005-04-20 9:55:00&quot; --stop-date=&quot;2005-04-20 10:05:00&quot; \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/log/mysql/bin.123456 &gt; /tmp/mysql_restore.sql</span></pre>
			<p>该命令将在<span>/tmp</span>目录创建小的文本文件，将显示执行了错误的<span>SQL</span>语句时的<span>SQL</span>语句。你可以用文本编辑器打开该文件，寻找你不要想重复的语句。如果二进制日志中的位置号用于停止和继续恢复操作，应进行注释。用<span>log_pos</span>加一个数字来标记位置。使用位置号恢复了以前的备份文件后，你应从命令行输入下面内容：</p>
			<pre><span>mysqlbinlog --stop-position=&quot;368312&quot; /var/log/mysql/bin.123456 \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; | mysql -u </span><span><i><span>root</span></i></span><span> -p</span><span><i><span>mypwd</span></i></span><span> </span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>mysqlbinlog --start-position=&quot;368315&quot; /var/log/mysql/bin.123456 \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; | mysql -u </span><span><i><span>root</span></i></span><span> -p</span><span><i><span>mypwd</span></i></span><span> \ </span></pre>
			<p>上面的第<span>1</span>行将恢复到停止位置为止的所有事务。下一行将恢复从给定的起始位置直到二进制日志结束的所有事务。因为<strong><span>mysqlbinlog</span></strong>的输出包括每个<span>SQL</span>语句记录之前的<span>SET 
			TIMESTAMP</span>语句，恢复的数据和相关<span>MySQL</span>日志将反应事务执行的原时间。</p>
			<h3 class="title"><a name="table-maintenance"></a>
			5.9.4.&nbsp;表维护和崩溃恢复</h3></div></div></div>
			<p>后面几节讨论如何使用<strong><span 
>myisamchk</span></strong>来检查或维护<span>MyISAM</span>表<span>(</span>对应<span>.MYI</span>和<span>.MYD</span>文件的表<span>)</span>。</p>
			<p>你可以使用<span><b><span>myisamchk</span></b></span>实用程序来获得有关你的数据库表的信息或检查、修复、优化他们。下列小节描述如何调用<span><b><span>myisamchk</span></b></span>（包括它的选项的描述），如何建立表的维护计划，以及如何使用<span><b><span>myisamchk</span></b></span>执行各种功能。</p>
			<p>尽管用<strong><span>myisamchk</span></strong>修复表很安全，在修复<span>(</span>或任何可以大量更改表的维护操作<span>)</span>之前先进行备份<em><span>也是很好的习惯</span></em>
			</p>
			<p>影响索引的<strong><span 
>myisamchk</span></strong>操作会使<span>ULLTEXT</span>索引用<span>full-text</span>参数重建，不再与<span>MySQL</span>服务器使用的值兼容。要想避免，请阅读<a href="database-administration.html#myisamchk-general-options" title="5.9.5.1. General Options for myisamchk">5.9.5.1节，“用于myisamchk的一般选<span><strong class="command">项</strong></span>”</a>的说明。</p>
			<p>在许多情况下，你会发现使用<span>SQL</span>语句实现<span>MyISAM</span>表的维护比执行<strong><span 
>myisamchk</span></strong>操作要容易地多：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想检查或维护<span>MyISAM</span>表，使用<span>CHECK 
			TABLE</span>或<span>REPAIR 
			TABLE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想优化<span>MyISAM</span>表，使用<span>OPTIMIZE 
			TABLE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想分析<span>MyISAM</span>表，使用<span>ANALYZE 
			TABLE</span>。</p>
			<p>可以直接这些语句，或使用<strong><span>mysqlcheck</span></strong>客户端程序，可以提供命令行接口。</p>
			<p>这些语句比<strong><span 
>myisamchk</span></strong>有利的地方是服务器可以做任何工作。使用<strong><span>myisamchk</span></strong>，你必须确保服务器在同一时间不使用表。否则，<strong><span>myisamchk</span></strong>和服务器之间会出现不期望的相互干涉。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="myisamchk"></a>
			5.9.5.&nbsp;myisamchk：MyISAM表维护实用工具</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#myisamchk-general-options">
				5.9.5.1. 用于myisamchk的一般选<span><strong class="command">项</strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk-check-options">
				5.9.5.2. 用于myisamchk的检<span><strong class="command">查选项</strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk-repair-options">
				5.9.5.3. myisamchk的修复选项<span><strong class="command"></strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk-other-options">
				5.9.5.4. 用于myisamchk的其<span><strong class="command">它选项</strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk-memory">5.9.5.5. <span><strong class="command">
				myisamchk</strong></span>内存使用</a></span></dt><dt><span class="section"><a href="database-administration.html#crash-recovery">
				5.9.5.6. 将myisa<span><strong class="command">mchk用于崩溃恢</strong></span>复</a></span></dt><dt><span class="section"><a href="database-administration.html#check">
				5.9.5.7. 如何检查MyISAM表的错误</a></span></dt><dt><span class="section"><a href="database-administration.html#repair">
				5.9.5.8. 如何修复表</a></span></dt><dt><span class="section"><a href="database-administration.html#table-optimization">
				5.9.5.9. 表优化</a></span></dt></dl></div>
			<p>可以使用<span><b><span>myisamchk</span></b></span>实用程序来获得有关数据库表的信息或检查、修复、优化他们。<strong><span>myisamchk</span></strong>适用<span>MyISAM</span>表<span>(</span>对应<span>.MYI</span>和<span>.MYD</span>文件的表<span>)</span>。</p>
			<p>调用<strong><span>myisamchk</span></strong>的方法：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk [<i>options</i>] <i>tbl_name</i> ...</span></b></span></pre>
			<p><span><i><span>options</span></i></span>指定你想让<strong><span 
>myisamchk</span></strong>做什么。在后面描述它们。还可以通过调用<span><b><span>myisamchk 
			--help</span></b></span>得到选项列表。</p>
			<p>
			<span><i><span>tbl_name</span></i></span>是你想要检查或修复的数据库表。如果你不在数据库目录的某处运行<span><b><span>myisamchk</span></b></span>，你必须指定数据库目录的路径，因为<span><b><span>myisamchk</span></b></span>不知道你的数据库位于哪儿。实际上，<span><b><span>myisamchk</span></b></span>不在乎你正在操作的文件是否位于一个数据库目录；你可以将对应于数据库表的文件拷贝到别处并且在那里执行恢复操作。</p>
			<p>如果你愿意，可以用<span><b><span>myisamchk</span></b></span>命令行命名几个表。还可以通过命名索引文件<span>(</span>用<tt>“<span> 
			.MYI</span>”</tt>后缀<span>)</span>来指定一个表。它允许你通过使用模式<tt >“<span>*.MYI</span>”<span>指定</span></tt>在一个目录所有的表。例如，如果你在数据库目录，可以这样在目录下检查所有的<span>MyISAM</span>表：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk *.MYI</span></b></span></pre>
			<p>如果你不在数据库目录下，可通过指定到目录的路径检查所有在那里的表：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk /path/to/database_dir/*.MYI</span></b></span></pre>
			<p>你甚至可以通过为<strong><span>MySQL</span></strong>数据目录的路径指定一个通配符来检查所有的数据库中的所有表：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk /path/to/datadir/*/*.MYI</span></b></span></pre>
			<p>推荐的快速检查所有<span>MyISAM</span>表的方式是：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk --silent --fast /path/to/datadir/*/*.MYI</span></b></span></pre>
			<p>如果你想要检查所有<span>MyISAM</span>表并修复任何破坏的表，可以使用下面的命令：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk --silent --force --fast --update-state \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>-O key_buffer=64M -O sort_buffer=64M \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>-O read_buffer=1M -O write_buffer=1M \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>/path/to/datadir/*/*.MYI</span></b></span></pre>
			<p>该命令假定你有大于<span>64MB</span>的自由内存。关于用<strong><span>myisamchk</span></strong>分配内存的详细信息，参见<a href="database-administration.html#myisamchk-memory" title="5.9.5.5. myisamchk Memory Usage">5.9.5.5节，“<span><strong class="command">myisamchk</strong></span>内存使用”</a>。</p>
			<p>当你运行<strong><span>myisamchk</span></strong>时，必须确保其它程序不使用表。否则，当你运行<strong><span>myisamchk</span></strong>时，会显示下面的错误消息：</p>
			<pre><span>warning: clients are using or haven&#39;t closed the table properly</span></pre>
			<p>这说明你正尝试检查正被另一个还没有关闭文件或已经终止而没有正确地关闭文件的程序<span>(</span>例如<strong><span>mysqld</span><span>服务器</span></strong><span>)</span>更新的表。</p>
			<p>如果<strong><span>mysqld</span></strong>正在运行，你必须通过<span>FLUSH 
			TABLES</span>强制清空仍然在内存中的任何表修改。当你运行<strong><span>myisamchk</span></strong>时，必须确保其它程序不使用表。避免该问题的最容易的方法是使用<span>CHECK 
			TABLE</span>而不用<strong><span>myisamchk</span></strong>来检查表。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="myisamchk-general-options"></a>
				5.9.5.1.&nbsp;用于myisamchk的一般选<span><strong class="command">项</strong></span></h4></div></div></div><a class="indexterm" name="id2779929"></a><a class="indexterm" name="id2779940"></a>
				<p>本节描述的选项可以用于用<strong><span>myisamchk</span></strong>执行的任何类型的表维护操作。本节后面的章节中描述的选项只适合具体操作，例如检查或修复表。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--help</span>，<span>-?</span><span>
				</span></p>
				<p>显示帮助消息并退出。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--debug=<i>debug_options</i>, -# <i>debug_options</i></span></p>
				<p>输出调试记录文件。<span><i><span>debug_options</span></i></span>字符串经常是<span>&#39;d:t:o,<i>filename</i>&#39;</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--silent</span>，<span>-s</span></p>
				<p>沉默模式。仅当发生错误时写输出。你能使用<span>-s</span>两次<span>(</span><span>-ss</span><span>)</span>使<span><b><span>myisamchk</span></b></span>沉默。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--verbose</span>，<span>-v</span></p>
				<p>冗长模式。打印更多的信息。这能与<span>-d</span>和<span>-e</span>一起使用。为了更冗长，使用<span>-v</span>多次<span>(</span><span>-vv</span><span>,
				</span><span>-vvv</span><span>)</span>！</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--version</span><span>, </span>
				<span>-V</span></p>
				<p>显示版本信息并退出。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--wait</span><span>, </span>
				<span>-w</span></p>
				<p>
				如果表被锁定，不是提示错误终止，而是在继续前等待到表被解锁。请注意如果用<span>--skip-external-locking</span>选项运行<b><span>mysqld</span></b>，只能用另一个<strong><span>myisamchk</span></strong>命令锁定表。</p>
				<p>还可以通过<span>--<i>var_name</i>=<i>value</i></span>选项设置下面的变量：</p>
				<table border="1" cellpadding="0" id="table16">
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p><strong>
						<span>变量</span></strong></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><strong>
						<span>默认值</span></strong></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>decode_bits</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>9</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>ft_max_word_len</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p>取决于版本</td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>ft_min_word_len</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>4</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>ft_stopword_file</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p>内建列表</td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>key_buffer_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>523264</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>myisam_block_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>1024</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>read_buffer_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>262136</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>sort_buffer_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>2097144</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>sort_key_blocks</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>16</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>stats_method</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>nulls_unequal</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>write_buffer_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>262136</span></td>
					</tr>
				</table>
				<p>可以用<strong><span>myisamchk 
				--help</span></strong>检查<strong><span>myisamchk</span></strong>变量及其
				默认值：</p>
				<p>当用排序键值修复键值时使用<span>sort_buffer_size</span>，使用<span>--recover</span>时这是很普通的情况。</p>
				<p>当用<span>--extend-check</span>检查表或通过一行一行地将键值插入表中<span>(</span>如同普通插入<span>)</span>来修改键值时使用<span>Key_buffer_size</span>。在以下情况通过键值缓冲区进行修复：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>使用<span>--safe-recover</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>当直接创建键值文件时，需要对键值排序的临时文件有两倍大。通常是当<span>CHAR</span>、<span>VARCHAR</span>、或<span>TEXT</span>列的键值较大的情况，因为排序操作在处理过程中需要保存全部键值。如果你有大量临时空间，可以通过排序强制使用<strong><span>myisamchk</span></strong>来修复，可以使用<span>--sort-recover</span>选项。</p>
				<p>通过键值缓冲区的修复占用的硬盘空间比使用排序么少，但是要慢。</p>
				<p>如果想要快速修复，将<span>key_buffer_size</span>和<span>sort_buffer_size</span>变量设置到大约可用内存的<span>25%</span>。可以将两个变量设置为较大的值，因为一个时间只使用一个变量。</p>
				<p>
				<span>myisam_block_size</span>是用于索引块的内存大小。</p>
				<p>
				<span>stats_method</span>影响当给定<span>--analyze</span>选项时，如何为索引统计搜集处理<span>NULL</span>值。它如同<span>myisam_stats_method</span>系统变量。详细信息参见<a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">5.3.3节，“服务器系统变量”</a>和<a href="optimization.html#myisam-index-statistics" title="7.4.7. MyISAM Index Statistics Collection">7.4.7节，“MyISAM索引统计集合”</a>的<span>myisam_stats_method</span>的描述。</p>
				<p>
				<span>ft_min_word_len</span>和<span>ft_max_word_len</span>表示<span>FULLTEXT</span>索引的最小和最大字长。<span>ft_stopword_file</span>为停止字文件的文件名。需要在以下环境中对其进行设置。</p>
				<p>如果你使用<strong><span 
>myisamchk</span></strong>来修改表索引<span>(</span>例如修复或分析<span>)</span>，使用最小和最大字长和停止字文件的
				默认全文参数值（除非你另外指定）重建<span>FULLTEXT</span>索引。这样会导致查询失败。</p>
				<p>出现这些问题是因为只有服务器知道这些参数。它们没有保存在<span>MyISAM</span>索引文件中。如果你修改了服务器中的最小或最大字长或停止字文件，要避免该问题，为用于<strong><span>mysqld</span></strong>的<strong><span>myisamchk</span></strong>指定相同的<span>ft_min_word_len</span>，<span>ft_max_word_len</span>和<span>ft_stopword_file</span>值。例如，如果你将最小字长设置为<span>3,</span>可以这样使用<strong><span>myisamchk</span></strong>来修复表：</p>
				<pre><span>shell&gt; </span><span><b><span>myisamchk --recover --ft_min_word_len=3 <i>tbl_name</i>.MYI</span></b></span></pre>
				<p>要想确保<strong><span>myisamchk</span></strong>和服务器使用相同的全文参数值，可以将它们放入选项文件的<span>[mysqld]</span>和<span>[myisamchk]</span>小节：</p>
				<pre><span>[mysqld]</span></pre>
				<pre><span>ft_min_word_len=3</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>[myisamchk]</span></pre>
				<pre><span>ft_min_word_len=3</span></pre>
				<p>除了<strong><span>myisamchk</span></strong>，还可以使用<span>REPAIR 
				TABLE</span>、<span>ANALYZE 
				TABLE</span>、<span>OPTIMIZE 
				TABLE</span>或<span>ALTER 
				TABLE</span>。这些语句由服务器执行，知道要使用的正确的全文参数值。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="myisamchk-check-options"></a>
				5.9.5.2.&nbsp;用于myisamchk的检<span><strong class="command">查选项</strong></span></h4></div></div></div><a class="indexterm" name="id2780751"></a><a class="indexterm" name="id2780761"></a>
				<p><strong><span>myisamchk</span></strong>支持下面的表检查操作选项：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--check</span><span>, </span>
				<span>-c</span></p>
				<p>检查表的错误。如果你不明确指定操作类型选项，这就是默认操作。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--check-only-changed</span><span>, </span>
				<span>-C</span></p>
				<p>只检查上次检查后有变更的表。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--extend-check</span><span>, </span>
				<span>-e</span></p>
				<p>
				非常仔细地检查表。如果表有许多索引将会相当慢。该选项只能用于极端情况。一般情况下，可以使用<strong><span>myisamchk</span></strong>或<strong><span>myisamchk 
				--medium-check</span></strong>来确定表内是否有错误。</p>
				<p>如果你使用了<span>--extend-check</span>并且有充分的内存，将<span>key_buffer_size</span>变量设置为较大的值可以使修复操作运行得更快。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--fast</span>，<span>-F</span></p>
				<p>只检查没有正确关闭的表。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--force</span><span>, </span>
				<span>-f</span></p>
				<p>如果<strong><span>myisamchk</span></strong>发现表内有任何错误，则自动进行修复。维护类型与<span>--repair</span>或<span>-r</span>选项指定的相同。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--information</span><span>, </span>
				<span>-i</span></p>
				<p>打印所检查表的统计信息。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--medium-check</span><span>, </span>
				<span>-m</span></p>
				<p>比<span>--extend-check</span>更快速地进行检查。只能发现<span>99.99%</span>的错误，在大多数情况下就足够了。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--read-only</span><span>, </span>
				<span>-T</span></p>
				<p>不要将表标记为已经检查。如果你使用<strong><span>myisamchk</span></strong>来检查正被其它应用程序使用而没有锁定的表很有用，例如当用<span>--skip-external-locking</span>选项运行时运行<strong><span 
>mysqld</span></strong>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--update-state</span><span>, </span>
				<span>-U</span></p>
				<p>将信息保存在<span>.MYI</span>文件中，来表示表检查的时间以及是否表崩溃了。该选项用来充分利用<span>--check-only-changed</span>选项，但如果<strong><span 
>mysqld</span><span>服务器</span></strong>正使用表并且正用<span>--skip-external-locking</span>选项运行时不应使用该选项。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="myisamchk-repair-options"></a>
				5.9.5.3.&nbsp;myisamchk的修复选项<span><strong class="command"></strong></span></h4></div></div></div><a class="indexterm" name="id2781039"></a><a class="indexterm" name="id2781050"></a>
				<p><strong><span>myisamchk</span></strong>支持下面的表修复操作的选项：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--backup</span><span>,
				</span>
				<span>-B</span></p>
				<p>将<span>.MYD</span>文件备份为<span>file_name-time.BAK</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--character-sets-dir=<i>path</i></span></p>
				<p>字符集安装目录。参见<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1节，“数据和排序用字符集”</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--correct-checksum</span></p>
				<p>纠正表的校验和信息。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--data-file-length=<i>len</i>, 
				-D <i>len</i></span></p>
				<p>数据文件的最大长度<span>(</span>当重建数据文件且为“满”时<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--extend-check</span>，<span>-e</span></p>
				<p>
				进行修复，试图从数据文件恢复每一行。一般情况会发现大量的垃圾行。不要使用该选项<span>,</span>除非你不顾后果。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--force</span><span>,
				</span>
				<span>-f</span></p>
				<p>覆盖旧的中间文件<span>(</span>文件名类似<span><i><span>tbl_name</span></i><span>.TMD</span></span><span>)</span>，而不是中断。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--keys-used=<i>val</i></span><span>,
				</span>
				<span>-k <i>val</i></span></p>
				<p>对于<strong><span>myisamchk</span></strong>，该选项值为位值，说明要更新的索引。选项值的每一个二进制位对应表的一个索引，其中第一个索引对应位<span>0</span>。选项值<span>0</span>禁用对所有索引的更新，可以保证快速插入。通过<strong><span>myisamchk 
				-r</span></strong>可以重新激活被禁用的索引。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--no-symlinks</span><span>,
				</span>
				<span>-l</span></p>
				<p>不跟随符号连接。通常<span><b><span>myisamchk</span></b></span>修复一个符号连接所指的表。在<span>MySQL 
				4.0</span>中该选项不存在，因为从<span>4.0</span>开始的版本在修复过程中不移除符号链接。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--parallel-recover</span><span>,
				</span>
				<span>-p</span></p>
				<p>与<span>-r</span>和<span>-n</span>的用法相同，但使用不同的线程并行创建所有键。<em><span
>这是<span>alpha</span>代码。自己承担风险！</span></em></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--quick</span>，<span>-q</span></p>
				<p>
				不修改数据文件，快速进行修复。出现复制键时，你可以两次指定该项以强制<strong><span>myisamchk</span></strong>修改原数据文件。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--recover</span><span>,
				</span>
				<span>-r</span></p>
				<p>可以修复几乎所有一切问题，除非唯一的键不唯一时<span>(</span>对于<span>MyISAM</span>表，这是非常不可能的情况<span>)</span>。如果你想要恢复表，这是首先要尝试的选项。如果<strong><span>myisamchk</span></strong>报告表不能用<span>-r</span>恢复，则只能尝试<span>-o</span>。在不太可能的情况下<span>-r</span>失败，数据文件保持完好）<span>。
				</span></p>
				<p>如果你有大量内存，你应增加<span>sort_buffer_size</span>的值<span>。</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--safe-recover</span><span>,
				</span>
				<span>-o</span></p>
				<p>
				使用一个老的恢复方法读取，按顺序读取所有行，并根据找到的行更新所有索引树。这比<span>-r</span>慢些，但是能处理<span>-r</span>不能处理的情况。该恢复方法使用的硬盘空间比<span>-r</span>少。一般情况，你应首先用<span>-r</span>维修，如果<span>-r</span>失败则用<span>-o</span>。</p>
				<p>如果你有大量内存，你应增加<span>sort_buffer_size</span>的值<span>。</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>(<em><span>OBSOLETE</span></em>)
				</span><span>
				--set-character-set=<i>name</i></span></p>
				<p>在<span>MySQL 5.1</span>中不使用。参见<span>--set-collation</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--set-collation=<i>name</i></span></p>
				<p>更改用来排序表索引的校对规则。校对规则名的第一部分包含字符集名。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--sort-recover</span><span>, </span>
				<span>-n</span></p>
				<p>强制<strong><span>myisamchk</span></strong>通过排序来解析键值，即使临时文件将可能很大。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>--tmpdir=<i>path</i>, 
				-t <i>path</i></span></p>
				<p>用于保存临时文件的目录的路径。如果未设置，<strong><span>myisamchk</span></strong>使用<span>TMPDIR</span>环境变量的值。<span>tmpdir</span>可以设置为一系列目录路径，用于成功地以<span>round-robin</span>模式创建临时文件。在<span>Unix</span>中，目录名之间的间隔字符为冒号<span>(</span>‘<span>:</span>’<span>)</span>，在<span>Windows</span>、<span>NetWare</span>和<span>OS/2</span>中为分号<span> 
				(</span>‘<span>；</span>’<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--unpack</span>，<span>-u</span></p>
				<p>将用<strong><span>myisampack</span></strong>打包的表解包。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="myisamchk-other-options"></a>
				5.9.5.4.&nbsp;用于myisamchk的其<span><strong class="command">它选项</strong></span></h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<strong><span>myisamchk</span></strong>支持以下表检查和修复之外的其它操作的选项：<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--analyze</span>，<span>-a</span></p>
				<p>
				分析键值的分布。这通过让联结优化器更好地选择表应该以什么次序联结和应该使用哪个键来改进联结性能。要想获取分布相关信息，使用<strong><span>myisamchk 
				--description --verbose </span></strong>
				<span><b><i><span>tbl_name</span></i></b></span>命令或<span>SHOW 
				KEYS FROM <i>tbl_name</i></span>语句。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--description</span><span>, </span>
				<span>-d</span></p>
				<p>打印出关于表的描述性信息。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--set-auto-increment[=<i>value</i>]</span><span>,
				</span><span>-A[<i>value</i>]</span></p>
				<p>强制从给定值开始的新记录使用<span>AUTO_INCREMENT</span>编号<span>(</span>或如果已经有<span>AUTO_INCREMENT</span>值大小的记录，应使用更高值<span>)</span>。如果未指定<span><i><span>value</span></i></span>，新记录的<span>AUTO_INCREMENT</span>编号应使用当前表的最大值加上<span>1</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--sort-index</span><span>, </span>
				<span>-S</span></p>
				<p>
				以从高到低的顺序排序索引树块。这将优化搜寻并且将使按键值的表扫描更快。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--sort-records=<i>N</i>, -R <i>N</i></span></p>
				<p>
				根据一个具体索引排序记录。这使你的数据更局部化并且可以加快在该键上的<span>SELECT</span>和<span>ORDER 
				BY</span>的范围搜索。（第一次做排序可能很慢！）为了找出一张表的索引编号，使用<span>SHOW 
				INDEX</span>，它以<span><b><span>myisamchk</span></b></span>看见他们的相同顺序显示一张表的索引。索引从<span>1</span>开始编号。</p>
				<p>如果键没有打包<span>(</span><span>PACK_KEYS=0</span><span>)</span>，它们的长度相同，因此当<strong><span>myisamchk</span></strong><span>
				</span>排序并移动记录时，只覆盖索引中的记录偏移量。如果键已经打包<span>(</span><span>PACK_KEYS=1</span><span>)</span>，<strong><span>myisamchk</span></strong>必须先解开打包的键块，然后重新创建索引并再次将键块打包。<span>(</span>在这种情况下，重新创建索引比更新每个索引的偏移量要快）<span>。
				</span></p>
				<h4 class="title"><a name="myisamchk-memory"></a>5.9.5.5. <span><strong class="command">myisamchk</strong></span>内存使用</h4></div></div></div><a class="indexterm" name="id2781795"></a>
				<p>当你运行<strong><span>myisamchk</span></strong>时内存分配重要<span>.MYI<strong><span>samchk</span></strong></span>使用的内存大小不能超过用<span>-O</span>选项指定的。如果你想对每一个大表使用<strong><span>myisamchk</span></strong>，你必须首先确定你想使用多少内存。修复时可以使用的
				默认值只有<span>3MB</span>。使用更大的内存，可以让<strong><span>myisamchk</span></strong>工作得更快一些。例如，如果有大于<span>32MB</span>的<span>RAM</span>，可以使用如下所示选项<span>(</span>除了你可以指定的其它选项<span>)</span>：</p>
				<pre><span>shell&gt; </span><span><b><span>myisamchk -O sort=16M -O key=16M -O read=1M -O write=1M ...</span></b></span></pre>
				<p>对于大多数情况，使用<span>-O 
				sort=16M</span>应该足够了。</p>
				<p>应记住<strong><span>myisamchk</span></strong>使用<span>TMPDIR</span>中的临时文件。如果<span>TMPDIR</span>指向内存文件系统，你可能很容易得到内存溢出的错误。如果发生，设定<span>TMPDIR</span>指向有更多空间的文件系统目录并且重启<span><b><span>myisamchk</span></b></span>。</p>
				<p>修复时<strong><span>myisamchk</span></strong>也需要大量硬盘空间：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>将数据文件大小扩大一倍<span>(</span>原文件和复制文件<span>)</span>。如果你用<span>--quick</span>修复则不需要该空间；在这种情况下，只重新创建了索引文件。在文件系统上需要的空间与原数据文件相同！<span>(</span>创建的复制文件位于原文件所在目录）<span>。</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				代替旧索引文件的新索引文件所占空间。修复工作一开始，就对旧索引文件进行了删减，因此你通常会忽略该空间。在文件系统上需要的该空间与原数据文件相同！</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>当使用<span>--recover</span>或<span>---sort-recover</span><span>(</span>但不使用<span>--safe-recover</span><span>)</span>时，需要排序缓冲区空间。需要的空间为：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>(</span><span><i><span>largest_key</span></i></span><span> + </span><span><i><span>row_pointer_length</span></i></span><span>) * </span><span><i><span>number_of_rows</span></i></span><span> * 2</span></pre>
				<p>可以用<strong><span>myisamchk 
				-dv </span></strong><span><b><i>
				<span>tbl_name</span></i></b></span>检查键值和<span>row_pointer_length</span>的长度。在临时目录分配该空间<span>(</span>用<span>TMPDIR</span>或<span>--tmpdir=<i>path</i></span>指定<span>)</span>。</p>
				<p>如果在修复过程中出现硬盘空间问题，可以试试用<span>--safe-recover</span>代替<span>--recover</span>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="crash-recovery"></a>
				5.9.5.6.&nbsp;将myisa<span><strong class="command">mchk用于崩溃恢</strong></span>复</h4></div></div></div><a class="indexterm" name="id2782009"></a><a class="indexterm" name="id2782019"></a>
				<p>如果用<span>--skip-external-locking</span>运行<strong><span>mysqld</span></strong><span>(</span>在某些系统上为
				默认设置，例如<span>Linux)</span>，当<strong><span>mysqld</span></strong>使用某个表时，你不能可靠地使用<strong><span>myisamchk</span></strong>来检查相同的表。当你运行<strong><span>myisamchk</span></strong>时如果可以确保没有人在通过<strong><span>mysqld</span></strong>访问表，在开始检查表前，你只需要运行<strong><span>mysqladmin 
				flush-tables</span></strong>。如果你不能保证，则你检查表时你必须停止<strong><span>mysqld</span></strong>。如果<strong><span>mysqld</span></strong>更新表时运行<strong><span>myisamchk</span></strong>，你可能会获得表被破坏的警告，即使事实并非如此。</p>
				<p>如果不使用<span>--skip-external-locking</span>，可以随时使用<strong><span 
>myisamchk</span></strong>来检查表。当检查表时，所有尝试更新表的客户端将等待，直到<strong><span>myisamchk</span></strong>准备好可以继续。</p>
				<p>如果使用<strong><span>myisamchk</span></strong>来修复或优化表，<em><span>必须</span></em>确保<strong><span 
>mysqld</span><span>服务器</span></strong>没有在使用该表<span>(</span>如果你正使用<span>--skip-external-locking</span>选项也适用<span>)</span>。如果不关闭<strong><span>mysqld</span></strong>，在运行<strong><span>myisamchk</span></strong>之前至少应执行<strong><span>mysqladmin 
				flush-tables</span></strong>。如果服务器和<strong><span>myisamchk</span></strong>同时访问表，表<em><span>可能会被破坏</span></em>。</p>
				<p>本节描述如何检查和处理<span>MySQL</span>数据库中的数据破坏。如果表经常被破坏，你应尽力找到原因。参见<a href="problems.html#crashing" title="A.4.2. What to Do If MySQL Keeps Crashing">A.4.2节，“如果MySQL依然崩溃，应作些什么”</a>。</p>
				<p>关于<span>MyISAM</span>表怎样会被破坏的解释，参见<a href="storage-engines.html#myisam-table-problems" title="15.1.4. MyISAM Table Problems">15.1.4节，“MyISAM表方面的问题”</a>。</p>
				<p>在执行崩溃恢复时，理解在一个数据库中的每一个<span><i><span>MyISAM</span></i></span>表<span>tbl_name</span>对应的在数据库目录中的<span>3</span>个文件是很重要的：</p>
				<table border="1" cellpadding="0" id="table17">
					<tr>
						<td>
						<p><strong>
						<span>文件</span></strong></td>
						<td>
						<p><strong>
						<span>目的</span></strong></td>
					</tr>
					<tr>
						<td>
						<p><span><i>
						<span>tbl_name</span></i><span>.frm</span></span></td>
						<td>
						<p>定义<span>(</span>格式<span>)</span>文件</td>
					</tr>
					<tr>
						<td>
						<p><span><i>
						<span>tbl_name</span></i><span>.MYD</span></span></td>
						<td>
						<p>数据文件</td>
					</tr>
					<tr>
						<td>
						<p><span><i>
						<span>tbl_name</span></i><span>.MYI</span></span></td>
						<td>
						<p>索引文件</td>
					</tr>
				</table>
				<p>
				这<span>3</span>类文件的每一类都可能遭受不同形式的损坏，但是问题最常发生在数据文件和索引文件。 
				</p>
				<p><span><b><span>myisamchk</span></b></span>通过一行一行地创建一个<tt >“<span>.MYD</span>”</tt>数据文件的副本来工作，它通过删除旧的<tt >“<span>.MYD
				</span></tt>文件并且重命名新文件到原来的文件名结束修复阶段。如果你使用<span>--quick</span>，<span><b><span>myisamchk</span></b></span>不创建一个临时<tt >“<span>.MYD</span>”</tt>文件，只是假定<tt >“<span>.MYD</span>”</tt>文件是正确的并且仅创建一个新的索引文件，不接触<tt >“<span>.MYD</span>”</tt>文件，这是安全的，因为<span><b><span>myisamchk</span></b></span>自动检测<tt >“<span>.MYD</span>”</tt>文件是否损坏并且在这种情况下，放弃修复。你也可以给<span><b><span>myisamchk</span></b></span>两个<span>--quick</span>选项。在这种情况下，<span><b><span>myisamchk</span></b></span>不会在一些错误上<span>(</span>象重复键<span>)</span>放弃，相反试图通过修改<tt >“<span>.MYD</span>”</tt>文件解决它们。通常，只有在太少的空闲磁盘空间上实施正常修复，使用两个<span>--quick</span>选项时才有用。在这种情况下，你至少应该在运行<span><b><span>myisamchk</span></b></span>前做进行备份。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="check"></a>
				5.9.5.7.&nbsp;如何检查MyISAM表的错误</h4></div></div></div><a class="indexterm" name="id2782358"></a><a class="indexterm" name="id2782368"></a><a class="indexterm" name="id2782379"></a></div><div class="section"><div class="titlepage"><div><div>
				要想检查<span>MyISAM</span>表，应使用下面的命令：<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>myisamchk <i>tbl_name</i></span></p>
				<p>这样能找出<span>99.99%</span>的错误。它不能找出的是<strong><span>仅仅</span></strong>涉及数据文件的损坏<span>(</span>这很不常见<span>)</span>。如果想要检查一张表，通常应该没有选项地运行<span>myisamchk</span>或用<span>-s</span>或<span>--silent</span>选项的任何一个。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>myisamchk -m <i>
				tbl_name</i></span></p>
				<p>这样能找出<span>99.99%</span>的错误。它首先检查所有索引条目的错误并通读所有行。它还计算行内所有键值的校验和，并确认校验和与索引树内键的校验和相匹配。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>myisamchk -e <i>
				tbl_name</i></span></p>
				<p>可以完全彻底地检查数据<span>(</span><span>-e</span>意思是“扩展检查”<span>)</span>。它对每一行做每个键的读检查以证实它们确实指向正确的行。这在一个有很多键的大表上可能花很长时间。<span><b><span>myisamchk</span></b></span>通常将在它发现第一个错误以后停止。如果你想要获得更多的信息，可以增加<span>--verbose</span><span>(</span><span>-v</span><span>)</span>选项。这使得<span><b><span>myisamchk</span></b></span>继续一直到最多<span>20</span>个错误。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>myisamchk -e -i <i>
				tbl_name</i></span></p>
				<p>象前面的命令一样，但是<span>-i</span>选项告诉<span><b><span>myisamchk</span></b></span>还打印出一些统计信息。</p>
				<p>在一般使用中，一个简单的<span><b><span>myisamchk</span></b></span>（没有除表名以外的参数）就足够检查表了。</p>
				<h4 class="title"><a name="repair"></a>
				5.9.5.8.&nbsp;如何修复表</h4></div></div></div><a class="indexterm" name="id2782551"></a><a class="indexterm" name="id2782561"></a>
				<p>本节描述如何对<span>MyISAM</span>表使用<strong><span>myisamchk</span></strong><span>(</span>扩展名<span>.MYI</span>和<span>.MYD</span><span>)</span>。</p>
				<p>你还可以<span>(</span>并且应该，如果可能<span>)</span>使用<span>CHECK 
				TABLE</span>和<span>REPAIR 
				TABLE</span>语句来检查和修复<span>MyISAM</span>表。参见<a href="sql-syntax.html#check-table" title="13.5.2.3. CHECK TABLE Syntax">13.5.2.3节，“CHECK 
			TABLE语法”</a>和<a href="sql-syntax.html#repair-table" title="13.5.2.6. REPAIR TABLE Syntax">13.5.2.6节，“REPAIR 
			TABLE语法”</a>。</p>
				<p>一张损坏的表的症状通常是查询意外中断并且能看到下述错误：</p>
				<ul type="disc">
					<li>
					<tt >“<i><span>tbl_name</span></i><span>.frm</span>”</tt>被锁定不能更改。</li>
					<li>不能找到文件<tt >“<i><span>tbl_name</span></i><span>.MYI</span>”</tt>（<span>Errcode</span>：<span><i><span>nnn</span></i></span>）。</li>
					<li>文件意外结束。</li>
					<li>记录文件被毁坏。</li>
					<li>从表处理器得到错误<span><i><span>nnn</span></i></span>。</li>
				</ul>
				<p>要想得到错误相关的详细信息，你可以运行<strong><span>perror</span></strong><span>
				</span><span><i>
				<span>nnn</span></i></span>，其中<span><i><span>nnn</span></i></span>为错误编号。下面的示例显示了如何使用<strong><span>perror</span></strong>来找到最常用错误编号（用表的方式指出问题）的含义：</p>
				<pre><span>shell&gt; </span><span><b><span>perror 126 127 132 134 135 136 141 144 145</span></b></span></pre>
				<pre><span>126 = Index file is crashed / Wrong file format</span></pre>
				<pre><span>127 = Record-file is crashed</span></pre>
				<pre><span>132 = Old database file</span></pre>
				<pre><span>134 = Record was already deleted (or record file crashed)</span></pre>
				<pre><span>135 = No more room in record file</span></pre>
				<pre><span>136 = No more room in index file</span></pre>
				<pre><span>141 = Duplicate unique key or constraint on write or update</span></pre>
				<pre><span>144 = Table is crashed and last repair failed</span></pre>
				<p><span>145 = Table was marked as 
				crashed and should be repaired</span></p>
				<p>请注意错误<span>135(</span>记录文件中没有更多的空间<span>)</span>和错误<span>136(</span>索引文件中没有更多的空间<span>)</span>不是可以通过简单修复可以修复的错误。在这种情况下，必须使用<span>ALTER 
				TABLE</span>来增加<span>MAX_ROWS</span>和<span>AVG_ROW_LENGTH</span>表选项值：</p>
				<pre><span>ALTER TABLE </span><span><i><span>tbl_name</span></i></span><span> MAX_ROWS=</span><span><i><span>xxx</span></i></span><span> AVG_ROW_LENGTH=</span><span><i><span>yyy</span></i></span><span>;</span></pre>
				<p>如果你不知道当前的表的选项值，使用<span>SHOW 
				CREATE TABLE</span>或<span>DESCRIBE</span>来查询<span>。</span></p>
				<p>对于其它的错误，你必须修复表。<strong><span>myisamchk</span></strong>通常可以检测和修复大多数问题。</p>
				<p>修复过程包括四个阶段，此处将进行描述。开始修复前，应进入数据库目录并检查表文件的许可。在<span>Unix</span>中，确保它们对于运行<strong><span>mysqld</span><span>的</span></strong>用户可读<span>(</span>你也应可读，因为你需要访问检查的文件<span>)</span>。如果你需要修改文件，你还必须拥有写访问权限。</p>
				<p>用<strong><span>myisamchk</span></strong>修复表的选项的描述参见<a href="database-administration.html#myisamchk" title="5.9.5. myisamchk — MyISAM Table-Maintenance Utility">5.9.5节，“myisamchk：MyISAM表维护实用工具”</a>的前几节。</p>
				<p>下面几节列出了上述命令失败或你想要使用<strong><span>myisamchk</span></strong>提供的扩展特性等情况的例子。</p>
				<p>如果你要通过命令行来修复表，必须首先停止<strong><span>mysqld</span><span
宋体;">服务器</span></strong>。请注意当你在远程服务器上运行<strong><span>mysqladmin 
				shutdown</span></strong>时，<strong><span>mysqladmin</span></strong>返回后，<strong><span>mysqld</span><span>服务器将</span></strong>仍然运行一会儿，直到停止所有查询并将所有键清空到硬盘上。</p>
				<p>
				<strong><span>阶段<span>1</span>：检查你的表</span></strong></p>
				<p>如果你有很多时间，运行<strong><span>myisamchk 
				*.MYI</span></strong>或<strong><span>myisamchk 
				-e *.MYI</span></strong>。使用<span>-s</span>（沉默）选项禁止不必要的信息。</p>
				<p>如果<strong><span>mysqld</span><span>服务器处于宕机状态</span></strong>，应使用<span>--update-state</span>选项来告诉<strong><span 
>myisamchk</span></strong>将表标记为<span>&#39;</span>检查过的<span>&#39;</span>。</p>
				<p>
				你必须只修复那些<span><b><span>myisamchk</span></b></span>报告有错误的表。对这样的表，继续到阶段<span>2</span>。</p>
				<p>如果在检查时，你得到奇怪的错误<span>(</span>例如<span>out 
				of memory</span>错误<span>)</span>，或如果<span><b><span>myisamchk</span></b></span>崩溃，到阶段<span>3</span>。</p>
				<p>
				<strong><span>阶段<span>2</span>：简单安全的修复</span></strong></p>
				<p>注释：如果想更快地进行修复，当运行<strong><span>myisamchk</span></strong>时，你应将<span>sort_buffer_size</span>和<span>Key_buffer_size</span>变量的值设置为可用内存的大约<span>25%</span>。</p>
				<p>首先，试试<span><b><span>myisamchk 
				-r -q <i>tbl_name</i></span></b></span><span>(</span><span>-r 
				-q</span>意味着“快速恢复模式”<span>)</span>。这将试图不接触数据文件来修复索引文件。如果数据文件包含它应有的一切内容和指向数据文件内正确地点的删除连接，这应该管用并且表可被修复。开始修复下一张表。否则，执行下列过程：</p>
				<ol start="1" type="1">
					<li>在继续前对数据文件进行备份。 </li>
					<li>使用<span><b><span>myisamchk 
					-r <i>tbl_name</i></span></b></span><span>(</span><span>-r</span>意味着“恢复模式”<span>)</span>。这将从数据文件中删除不正确的记录和已被删除的记录并重建索引文件。 
					</li>
					<li>如果前面的步骤失败，使用<span><b><span>myisamchk 
					--safe-recover <i>tbl_name</i></span></b></span>。安全恢复模式使用一个老的恢复方法，处理常规恢复模式不行的少数情况<span>(</span>但是更慢<span>)</span>。 
					</li>
				</ol>
				<p>如果在修复时，你得到奇怪的错误<span>(</span>例如<span>out 
				of memory</span>错误<span>)</span>，或如果<span><b><span>myisamchk</span></b></span>崩溃，到阶段<span>3</span>。</p>
				<p>
				<strong><span>阶段<span>3</span>：困难的修复</span></strong></p>
				<p>
				只有在索引文件的第一个<span>16K</span>块被破坏，或包含不正确的信息，或如果索引文件丢失，你才应该到这个阶段。在这种情况下，需要创建一个新的索引文件。按如下步骤操做：</p>
				<ol start="1" type="1">
					<li>把数据文件移到安全的地方。</li>
					<li>使用表描述文件创建新的<span>(</span>空<span>)</span>数据文件和索引文件：</li>
					<li><span>shell&gt; </span>
					<span><b><span>mysql <i>
					db_name</i></span></b></span></li>
					<li><span>mysql&gt; </span>
					<span><b><span>SET 
					AUTOCOMMIT=1;</span></b></span></li>
					<li><span>mysql&gt; </span>
					<span><b><span>TRUNCATE 
					TABLE <i>tbl_name</i>;</span></b></span></li>
					<li><span>mysql&gt; </span>
					<span><b><span>quit</span></b></span></li>
				</ol>
				<p>如果你的<span>MySQL</span>版本没有<span>TRUNCATE 
				TABLE</span>，则使用<span>DELETE 
				FROM <i>tbl_name</i></span>。</p>
				<ol start="7" type="1">
					<li>
					将老的数据文件拷贝到新创建的数据文件之中。（不要只是将老文件移回新文件之中；你要保留一个副本以防某些东西出错。） 
					</li>
				</ol>
				<p>回到阶段<span>2</span>。现在<span><b><span>myisamchk 
				-r -q</span></b></span>应该工作了。（这不应该是一个无限循环）。</p>
				<p>你还可以使用<span>REPAIR 
				TABLE <i>tbl_name</i> USE_FRM</span>，将自动执行整个程序。</p>
				<p>
				<strong><span>阶段<span>4</span>：非常困难的修复</span></strong>
				</p>
				<p>
				只有<span>.frm</span>描述文件也破坏了，你才应该到达这个阶段。这应该从未发生过，因为在表被创建以后，描述文件就不再改变了。</p>
				<ol start="1" type="1">
					<li>从一个备份恢复描述文件然后回到阶段<span>3</span>。你也可以恢复索引文件然后回到阶段<span>2</span>。对后者，你应该用<span><b><span>myisamchk 
					-r</span></b></span>启动。</li>
					<li>
					如果你没有进行备份但是确切地知道表是怎样创建的，在另一个数据库中创建表的一个拷贝。删除新的数据文件，然后从其他数据库将描述文件和索引文件移到破坏的数据库中。这样提供了新的描述和索引文件，但是让<span>.MYD</span>数据文件独自留下来了。回到阶段<span>2</span>并且尝试重建索引文件。</li>
				</ol>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="table-optimization"></a>
				5.9.5.9.&nbsp;表优化</h4></div></div></div><a class="indexterm" name="id2783206"></a><a class="indexterm" name="id2783216"></a>
				<p>为了组合碎片记录并且消除由于删除或更新记录而浪费的空间，以恢复模式运行<span><b><span>myisamchk</span></b></span>：</p>
				<pre><span>shell&gt; </span><span><b><span>myisamchk -r <i>tbl_name</i></span></b></span></pre>
				<p>
				你可以用<span>SQL</span>的<span>OPTIMIZE 
				TABLE</span>语句使用的相同方式来优化表，<span>OPTIMIZE 
				TABLE</span>可以修复表并对键值进行分析，并且可以对索引树进行排序以便更快地查找键值。实用程序和服务器之间不可能交互操作，因为当你使用<span>OPTIMIZE 
				TABLE</span>时，服务器做所有的工作。参见<a href="sql-syntax.html#optimize-table" title="13.5.2.5. OPTIMIZE TABLE Syntax">13.5.2.5节，“OPTIMIZE 
			TABLE语法”</a>。</p>
				<p><span><b><span>myisamchk</span></b></span>还有很多其它可用来提高表的性能的选项：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>-S</span><span>,
				</span><span>
				--sort-index</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>-R
				<i>index_num</i></span><span>, </span>
				<span>--sort-records=<i>index_num</i></span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>-a</span><span>,
				</span><span>--analyze</span></p>
				<p>关于这些选项的完整的描述，参见<a href="database-administration.html#myisamchk" title="5.9.5. myisamchk — MyISAM Table-Maintenance Utility">5.9.5节，“myisamchk：MyISAM表维护实用工具”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="maintenance-schedule"></a>
			5.9.6.&nbsp;建立表维护计划</h3></div></div></div><a class="indexterm" name="id2783350"></a><a class="indexterm" name="id2783361"></a>
			<p>定期对表进行检查而非等到问题出现后再检查数据库表是一个好主意。检查和修复<span>MyISAM</span>表的一个方式是使用<span>CHECK 
			TABLE</span>和<span>REPAIR 
			TABLE</span>语句。参见<a href="sql-syntax.html#check-table" title="13.5.2.3. CHECK TABLE Syntax">13.5.2.3节，“CHECK 
		TABLE语法”</a>和<a href="sql-syntax.html#repair-table" title="13.5.2.6. REPAIR TABLE Syntax">13.5.2.6节，“REPAIR 
		TABLE语法”</a>。</p>
			<p>检查表的另一个方法是使用<strong><span>myisamchk</span></strong>。为维护目的，可以使用<span><b><span>myisamchk 
			-s</span></b></span>检查表。<span>-s</span>选项（简称<span>--silent</span>）使<span><b><span>myisamchk</span></b></span>以沉默模式运行，只有当错误出现时才打印消息。</p>
			<p>
			在服务器启动时检查表是一个好主意。例如，无论何时机器在更新当中重新启动了，你通常需要检查所有可能受影响的表。（即“预期的破坏了的表”）。要想自动检查<span>MyISAM</span>表，用<span>--myisam-recover</span>选项启动服务器。</p>
			<p>一个更好的测试将是检查最后修改时间比<tt >“<span>.pid</span>”</tt>文件新的表。</p>
			<p>你还应该在正常系统操作期间定期检查表。在<span>MySQL AB</span>，我们运行一个<span><b><span>cron</span></b></span>任务，每周一次检查所有重要的表，使用<tt >“</tt><span>crontab</span><tt >”</tt>文件中这样的行：</p>
			<pre><span>35 0 * * 0 /path/to/myisamchk --fast --silent /path/to/datadir/*/*.MYI</span></pre>
			<p>
			可以打印损坏的表的信息，以便我们在需要时能够检验并且修复它们。</p>
			<p>
			多年了我们还没有发现<span>(</span>的确是真的<span>)</span>都没有任何意外损坏的表时<span>(</span>由于除硬件故障外的其它原因造成损坏的表<span>)</span>，每周一次对我们是足够了。</p>
			<p>我们建议现在开始，你对所有最后<span>24</span>小时内被更新了的表每晚都执行<span><b><span>myisamchk 
			-s</span></b></span>，直到你变得象我们那样信任<strong><span>MySQL</span></strong>。</p>
			<p>一般情况，<span>MySQL</span>表很少需要维护。如果你用动态大小的行更改<span>MyISAM</span>表<span>(</span>含<span>VARCHAR</span>、<span>BLOB</span>或<span>TEXT</span>列的表<span>)</span>或有删除了许多行的表，你可能想要不时地（每月一次）整理<span>/</span>组合表的空间。</p>
			<p>可以对有问题的表执行<span>OPTIMIZE 
			TABLE</span>来优化。或者是，如果可以停一会<strong><span>mysqld</span><span
宋体;">服务器</span></strong>，进入数据目录，当服务器停止时使用该命令：</p>
			<p><span>shell&gt; </span>
			<span><b><span>myisamchk -r -s 
			--sort-index -O sort_buffer_size=16M */*.MYI</span></b></span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="table-info"></a>
			5.9.7.&nbsp;获取关于表的信息</h3></div></div></div><a class="indexterm" name="id2783572"></a>
			<p>为了获得关于一个表的描述或统计，使用下面的命令：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			myisamchk -d </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span></p>
			<p>以“描述模式”运行<span><b><span>myisamchk</span></b></span>，生成表的描述。如果用<span>--skip-external-locking</span>选项启动<strong><span
宋体;">MySQL</span></strong>服务器，<span><b><span>myisamchk</span></b></span>可以报告运行的表被更新的错误。然而，既然在描述模式中<span><b><span>myisamchk</span></b></span>不更改表，没有任何破坏数据的风险。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			myisamchk -d -v </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span></p>
			<p>为了生成更多关于<span><b><span>myisamchk</span></b></span>正在做什么的信息，加上<span>-v</span>告诉它以冗长模式运行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			myisamchk -eis </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span></p>
			<p>仅显示表的最重要的信息。因为必须读取整个表，该操作很慢。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			myisamchk -eiv </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span></p>
			<p>这类似 
			<span>-eis</span>，只是告诉你正在做什么。</p>
			<p>下面为这些命令的输出示例。它们基于含这些数据和索引文件大小的表：</p>
			<pre><span>-rw-rw-r--&nbsp;&nbsp; 1 monty&nbsp;&nbsp;&nbsp; tcx&nbsp;&nbsp;&nbsp;&nbsp; 317235748 Jan 12 17:30 company.MYD</span></pre>
			<pre><span>-rw-rw-r--&nbsp;&nbsp; 1 davida&nbsp;&nbsp; tcx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 96482304 Jan 12 18:35 company.MYM</span></pre>
			<p><strong><span>myisamchk -d</span></strong>输出示例：</p>
			<pre><span>MyISAM file:&nbsp;&nbsp;&nbsp;&nbsp; company.MYI</span></pre>
			<pre><span>Record format:&nbsp;&nbsp; Fixed length</span></pre>
			<pre><span>Data records:&nbsp;&nbsp;&nbsp; 1403698&nbsp; Deleted blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Recordlength:&nbsp;&nbsp;&nbsp; 226</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>table description:</span></pre>
			<pre><span>Key Start Len Index&nbsp;&nbsp; Type</span></pre>
			<pre><span>1&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp; unique&nbsp; double</span></pre>
			<pre><span>2&nbsp;&nbsp; 15&nbsp;&nbsp;&nbsp; 10&nbsp; multip. text packed stripped</span></pre>
			<pre><span>3&nbsp;&nbsp; 219&nbsp;&nbsp; 8&nbsp;&nbsp; multip. double</span></pre>
			<pre><span>4&nbsp;&nbsp; 63&nbsp;&nbsp;&nbsp; 10&nbsp; multip. text packed stripped</span></pre>
			<pre><span>5&nbsp;&nbsp; 167&nbsp;&nbsp; 2&nbsp;&nbsp; multip. unsigned short</span></pre>
			<pre><span>6&nbsp;&nbsp; 177&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long</span></pre>
			<pre><span>7&nbsp;&nbsp; 155&nbsp;&nbsp; 4&nbsp;&nbsp; multip. text</span></pre>
			<pre><span>8&nbsp;&nbsp; 138&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long</span></pre>
			<pre><span>9&nbsp;&nbsp; 177&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; 193&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; text</span></pre>
			<p><strong><span>myisamchk -d -v</span></strong><span>
			</span>输出示例：</p>
			<pre><span>MyISAM file:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; company</span></pre>
			<pre><span>Record format:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fixed length</span></pre>
			<pre><span>File-version:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span></pre>
			<pre><span>Creation time:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1999-10-30 12:12:51</span></pre>
			<pre><span>Recover time:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1999-10-31 19:13:01</span></pre>
			<pre><span>Status:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checked</span></pre>
			<pre><span>Data records:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1403698&nbsp; Deleted blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Datafile parts:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1403698&nbsp; Deleted data:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Datafile pointer (bytes):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp; Keyfile pointer (bytes):&nbsp;&nbsp;&nbsp;&nbsp; 3</span></pre>
			<pre><span>Max datafile length:&nbsp; 3791650815&nbsp; Max keyfile length: 4294967294</span></pre>
			<pre><span>Recordlength:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 226</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>table description:</span></pre>
			<pre><span>Key Start Len Index&nbsp;&nbsp; Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rec/key&nbsp;&nbsp;&nbsp;&nbsp; Root Blocksize</span></pre>
			<pre><span>1&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp; unique&nbsp; double&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 15845376&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>2&nbsp;&nbsp; 15&nbsp;&nbsp;&nbsp; 10&nbsp; multip. text packed stripped&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 25062400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>3&nbsp;&nbsp; 219&nbsp;&nbsp; 8&nbsp;&nbsp; multip. double&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 73 40907776&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>4&nbsp;&nbsp; 63&nbsp;&nbsp;&nbsp; 10&nbsp; multip. text packed stripped&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5 48097280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>5&nbsp;&nbsp; 167&nbsp;&nbsp; 2&nbsp;&nbsp; multip. unsigned short&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4840 55200768&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>6&nbsp;&nbsp; 177&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1346 65145856&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>7&nbsp;&nbsp; 155&nbsp;&nbsp; 4&nbsp;&nbsp; multip. text&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4995 75090944&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>8&nbsp;&nbsp; 138&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 87 85036032&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>9&nbsp;&nbsp; 177&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 178 96481280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; 193&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; text</span></pre>
			<p><strong><span>myisamchk -eis</span></strong><span>
			</span>输出示例：</p>
			<pre><span>Checking MyISAM file: company</span></pre>
			<pre><span>Key:&nbsp; 1:&nbsp; Keyblocks used:&nbsp; 97%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Key:&nbsp; 2:&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp; 50%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Key:&nbsp; 3:&nbsp; Keyblocks used:&nbsp; 97%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Key:&nbsp; 4:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp; 60%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 5:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 6:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 7:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 8:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 9:&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Total:&nbsp;&nbsp;&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp; 17%</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>Records:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1403698&nbsp;&nbsp;&nbsp; M.recordlength:&nbsp;&nbsp;&nbsp;&nbsp; 226</span></pre>
			<pre><span>Packed:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0%</span></pre>
			<pre><span>Recordspace used:&nbsp;&nbsp;&nbsp;&nbsp; 100%&nbsp;&nbsp; Empty space:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0%</span></pre>
			<pre><span>Blocks/Record:&nbsp;&nbsp; 1.00</span></pre>
			<pre><span>Record blocks:&nbsp;&nbsp;&nbsp; 1403698&nbsp;&nbsp;&nbsp; Delete blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Recorddata:&nbsp;&nbsp;&nbsp;&nbsp; 317235748&nbsp;&nbsp;&nbsp; Deleted data:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Lost space:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; Linkdata:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>User time 1626.51, System time 232.36</span></pre>
			<pre><span>Maximum resident set size 0, Integral resident set size 0</span></pre>
			<pre><span>Non physical pagefaults 0, Physical pagefaults 627, Swaps 0</span></pre>
			<pre><span>Blocks in 0 out 0, Messages in 0 out 0, Signals 0</span></pre>
			<pre><span>Voluntary context switches 639, Involuntary context switches 28966</span></pre>
			<p><strong><span>myisamchk -eiv</span></strong><span>
			</span>输出示例：</p>
			<pre><span>Checking MyISAM file: company</span></pre>
			<pre><span>Data records: 1403698&nbsp;&nbsp; Deleted blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>- check file-size</span></pre>
			<pre><span>- check delete-chain</span></pre>
			<pre><span>block_size 1024:</span></pre>
			<pre><span>index&nbsp; 1:</span></pre>
			<pre><span>index&nbsp; 2:</span></pre>
			<pre><span>index&nbsp; 3:</span></pre>
			<pre><span>index&nbsp; 4:</span></pre>
			<pre><span>index&nbsp; 5:</span></pre>
			<pre><span>index&nbsp; 6:</span></pre>
			<pre><span>index&nbsp; 7:</span></pre>
			<pre><span>index&nbsp; 8:</span></pre>
			<pre><span>index&nbsp; 9:</span></pre>
			<pre><span>No recordlinks</span></pre>
			<pre><span>- check index reference</span></pre>
			<pre><span>- check data record references index: 1</span></pre>
			<pre><span>Key:&nbsp; 1:&nbsp; Keyblocks used:&nbsp; 97%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>- check data record references index: 2</span></pre>
			<pre><span>Key:&nbsp; 2:&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp; 50%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>- check data record references index: 3</span></pre>
			<pre><span>Key:&nbsp; 3:&nbsp; Keyblocks used:&nbsp; 97%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>- check data record references index: 4</span></pre>
			<pre><span>Key:&nbsp; 4:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp; 60%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 5</span></pre>
			<pre><span>Key:&nbsp; 5:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed: &nbsp;&nbsp;&nbsp;0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 6</span></pre>
			<pre><span>Key:&nbsp; 6:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 7</span></pre>
			<pre><span>Key:&nbsp; 7:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 8</span></pre>
			<pre><span>Key:&nbsp; 8:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 9</span></pre>
			<pre><span>Key:&nbsp; 9:&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Total:&nbsp;&nbsp;&nbsp; Keyblocks used:&nbsp;&nbsp; 9%&nbsp; Packed:&nbsp;&nbsp; 17%</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>- check records and index references</span></pre>
			<pre><span>[LOTS OF ROW NUMBERS DELETED]</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>Records:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1403698&nbsp;&nbsp; M.recordlength:&nbsp;&nbsp; 226&nbsp;&nbsp; Packed:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0%</span></pre>
			<pre><span>Recordspace used:&nbsp;&nbsp;&nbsp; 100%&nbsp; Empty space:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0%&nbsp; Blocks/Record: 1.00</span></pre>
			<pre><span>Record blocks:&nbsp;&nbsp; 1403698&nbsp;&nbsp; Delete blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Recorddata:&nbsp;&nbsp;&nbsp; 317235748&nbsp;&nbsp; Deleted data:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Lost space:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; Linkdata:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>User time 1639.63, System time 251.61</span></pre>
			<pre><span>Maximum resident set size 0, Integral resident set size 0</span></pre>
			<pre><span>Non physical pagefaults 0, Physical pagefaults 10580, Swaps 0</span></pre>
			<pre><span>Blocks in 4 out 0, Messages in 0 out 0, Signals 0</span></pre>
			<pre><span>Voluntary context switches 10604, Involuntary context switches 122798</span></pre>
			<p>下面解释<span><b><span>myisamchk</span></b></span>产生的信息的类型。“<span>keyfile</span>”是索引文件。“记录”和“行”是同义词。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MyISAM 
			file</span></p>
			<p><span>ISAM(</span>索引<span>)</span>文件名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			File-version</span></p>
			<p><span>ISAM</span>格式的版本。当前总是<span>2</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Creation 
			time</span></p>
			<p>数据文件创建的时间。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Recover 
			time</span></p>
			<p>索引<span>/</span>数据文件上次被重建的时间。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Data 
			records</span></p>
			<p>在表中有多少记录。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Deleted 
			blocks</span></p>
			<p>有多少删除的块仍然保留着空间。你可以优化表以使这个空间减到最小。参见<a href="optimization.html">第7章：</a><a href="optimization.html" title="Chapter 7. Optimization"><i>优化</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Datafile 
			parts</span></p>
			<p>对动态记录格式，这指出有多少数据块。对于一个没有碎片的优化过的表，这与<span>Data 
			records</span>相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Deleted 
			data</span></p>
			<p>不能回收的删除数据有多少字节。你可以优化表以使这个空间减到最小。参见<a href="optimization.html">第7章：</a><a href="optimization.html" title="Chapter 7. Optimization"><i>优化</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Datafile 
			pointer</span></p>
			<p>数据文件指针的大小，以字节计。它通常是<span>2</span>、<span>3</span>、<span>4</span>或<span>5</span>个字节。大多数表用<span>2</span>个字节管理，但是目前这还不能从<strong><span
宋体;">MySQL</span></strong>控制。对固定表，这是一个记录地址。对动态表，这是一个字节地址。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Keyfile 
			pointer</span></p>
			<p>索引文件指针的大小，以字节计。它通常是<span>1</span>、<span>2</span>或<span>3</span>个字节。大多数表用<span> 
			2 </span>个字节管理，但是它自动由<strong><span>MySQL</span></strong>计算。它总是一个块地址。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Max 
			datafile length</span></p>
			<p>表的数据文件<span>(</span><span>.MYD</span>文件<span>)</span>能够有多长，以字节计。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Max 
			keyfile length</span></p>
			<p>表的键值文件<span>(</span><span>.MYI</span>文件<span>)</span>能够有多长，以字节计。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span><span>Recordlength</span></p>
			<p>每个记录占多少空间，以字节计。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Record 
			format</span></p>
			<p>用于存储表行的格式。上面的例子使用<span><span>Fixed 
			length</span>。</span>其他可能的值是<span>Compressed</span>和<span>Packed</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>table 
			description</span></p>
			<p>在表中所有键值的列表。对每个键，给出一些底层的信息：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Key</span></p>
			<p>该键的编号。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Start</span></p>
			<p>该索引部分从记录的哪里开始。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>Len</span></p>
			<p>
			该索引部分是多长。对于紧凑的数字，这应该总是列的全长。对字符串，它可以比索引的列的全长短些，因为你可能会索引到字符串列的前缀。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>Index</span></p>
			<p>
			<span>unique</span>或<span>multip</span>（<span>multiple)</span>。表明一个值是否能在该索引中存在多次。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Type</span></p>
			<p>该索引部分有什么数据类型。这是一个<span>packed</span>、<span>stripped</span>或<span>empty</span>选项的<span>ISAM</span>数据类型。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>Root</span></p>
			<p>根索引块的地址。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Blocksize</span></p>
			<p>每个索引块的大小。默认是<span>1024</span>，但是从源码构建<span>MySQL</span>时，该值可以在编译时改变。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Rec/key</span></p>
			<p>
			这是由优化器使用的统计值。它告诉对该键的每个值有多少条记录。唯一键总是有一个<span>1</span>值。在一个表被装载后<span>(</span>或变更很大<span>)</span>，可以用<span><b><span>myisamchk 
			-a</span></b></span>更新。如果根本没被更新，给定一个<span>30</span>的默认值。</p>
			<p>在上面例子的表中，第<span>9</span>个键有两个<span>table 
			description</span>行。者说明它是有<span>2</span>个部分的多部键。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Keyblocks used</span></p>
			<p>键块使用的百分比是什么。当在例子中使用的表刚刚用<span><b><span>myisamchk</span></b></span>重新组织时，该值非常高<span>(</span>很接近理论上的最大值<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Packed</span></p>
			<p><strong>
			<span>
			MySQL</span></strong>试图用一个通用后缀压缩键。这只能被用于<span>CHAR</span><span>/</span><span>VARCHAR</span><span>/</span><span>DECIMAL</span>列的键。对于左部分类似的长字符串，能显著地减少使用空间。在上面的第<span>3</span>个例子中，第<span>4</span>个键是<span>10</span>个字符长，可以减少<span>60%</span>的空间。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Max 
			levels</span></p>
			<p>对于该键的<span>B</span>树有多深。有长键的大表有较高的值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Records</span></p>
			<p>表中有多少行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			M.recordlength</span></p>
			<p>
			平均记录长度。对于有定长记录的表，这是准确的记录长度，因为所有记录的长度相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Packed</span></p>
			<p><strong>
			<span>
			MySQL</span></strong>从字符串的结尾去掉空格。<span>Packed</span>值表明这样做达到的节约的百分比。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Recordspace used</span></p>
			<p>数据文件被使用的百分比。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Empty 
			space</span></p>
			<p>数据文件未被使用的百分比。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Blocks/Record</span></p>
			<p>每个记录的平均块数<span>(</span>即，一个碎片记录由多少个连接组成<span>)</span>。对固定格式表，这总是<span>1</span>。该值应该尽可能保持接近<span>1.0</span>。如果它变得太大，你可以重新组织表。参见<a href="optimization.html">第7章：</a><a href="optimization.html" title="Chapter 7. Optimization"><i>优化</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Recordblocks</span></p>
			<p>多少块<span>(</span>链接<span>)</span>被使用。对固定格式，它与记录的个数相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Deleteblocks</span></p>
			<p>多少块<span>(</span>链接<span>)</span>被删除。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Recorddata</span></p>
			<p>在数据文件中使用了多少字节。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Deleted 
			data</span></p>
			<p>在数据文件中多少字节被删除<span>(</span>未使用<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Lost 
			space</span></p>
			<p>
			如果一个记录被更新为更短的长度，就损失了一些空间。这是所有这样的损失之和，以字节计。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Linkdata</span></p>
			<p>当使用动态表格式，记录碎片用指针连接<span>(</span>每个<span>4
			</span>～<span> 7</span>字节<span>)</span>。 
			 
			<span>Linkdata</span>指这样的指针使用的内存量之和。</p>
			<p>如果一张表已经用<span><b><span>myisampack</span></b></span>压缩了，<span><b><span>myisamchk 
			-d</span></b></span>打印每个表列的附加信息。对于它的一个例子及其含义的描述，参见<a href="client-side-scripts.html#myisampack" title="8.2. myisampack — Generate Compressed, Read-Only MyISAM Tables">8.2节，“myisampack：生成压缩、只读MyISAM表”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="localisation"></a>
		5.10.&nbsp;MySQL本地化和国际应用</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#character-sets">
			5.10.1. 数据和排序用字符集</a></span></dt><dt><span class="section"><a href="database-administration.html#languages">
			5.10.2. 设置错误消息语言</a></span></dt><dt><span class="section"><a href="database-administration.html#adding-character-set">
			5.10.3. 添加新的字符集</a></span></dt><dt><span class="section"><a href="database-administration.html#character-arrays">
			5.10.4. 字符定义数组</a></span></dt><dt><span class="section"><a href="database-administration.html#string-collating">
			5.10.5. 字符串比较支持</a></span></dt><dt><span class="section"><a href="database-administration.html#multi-byte-characters">
			5.10.6. 多字节字符支持</a></span></dt><dt><span class="section"><a href="database-administration.html#problems-with-character-sets">
			5.10.7. 字符集问题</a></span></dt><dt><span class="section"><a href="database-administration.html#time-zone-support">
			5.10.8. MySQL服务器时区支持</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
			本节描述如何配置服务器来使用不同的字符集。还讨论如何设置服务器的时区并启用各个连接的时区支持。<h3 class="title"><a name="character-sets"></a>
			5.10.1.&nbsp;数据和排序用字符集</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#german-character-set">
				5.10.1.1. 使用德国字符集</a></span></dt></dl></div><a class="indexterm" name="id2784650"></a><a class="indexterm" name="id2784657"></a><a class="indexterm" name="id2784667"></a>
			<p>默认情况下，<span>MySQL</span>使用<span>cp1252(Latin1)</span>字符集根据<span>Swedish/Finnish</span>规则进行排序。这些
			默认值适合美国和西欧大部分国家。</p>
			<p>所有<span>MySQL</span>二进制分发版用<span>--with-extra-charsets=complex</span>编译而成。可以在所有标准程序中添加代码，使它们可以处理<span>latin1</span>和所有多字节二进制字符集。其它字符集根据需要从字符集定义文件载入。</p>
			<p>字符集确定在名称中使用什么字符。它还确定如何用<span>SELECT</span>语句的<span>ORDER 
			BY</span>和<span>GROUP 
			BY</span>子句对字符串进行排序。</p>
			<p>还可以在启动服务器时用<span>--default-character-set</span>选项更改字符集。字符集可以用<span>--with-charset=<i>charset</i></span>和<span>--with-extra-charsets=<i>list-of-charsets</i> 
			| complex | all | none</span>选项来<strong><span>configure</span></strong>，字符集配置文件列于<span>SHAREDIR/charsets/Index</span>。参见<a href="installing.html#configure-options" title="2.8.2. Typical configure Options">2.8.2节，“典型配置选项<span><strong class="command"></strong></span>”</a>。</p>
			<p>还可以在你启动服务器时用<span>--default-collation</span>选项更改字符集
			校对规则。校对规则必须是默认字符集的合法校对规则。<span>(</span>使用<span>SHOW 
			COLLATION</span>语句来确定每个字符集使用哪个校对规则）<span>。 </span>
			参见<a href="installing.html#configure-options" title="2.8.2. Typical configure Options">2.8.2节，“典型配置选项<span><strong class="command"></strong></span>”</a>。</p>
			<p>如果在运行<span>MySQL</span>时更改字符集，还会更改排序顺序。结果是你必须对所有表运行<strong><span>myisamchk 
			-r -q --set-character-set=</span></strong><span><b><i><span>charset</span></i></b></span><span>
			</span>，或正确地对索引进行排序。</p>
			<p>当客户端连接<span>MySQL</span>服务器时，服务器告诉客户端服务器的默认字符集是什么。客户端切换到该字符集进行连接。</p>
			<p>当转义<span>SQL</span>查询的字符串时，你应使用<span>mysql_real_escape_string()</span>。<span>mysql_real_escape_string()</span>等价于旧的<span>mysql_escape_string()</span>函数，不同的是它使用<span>MYSQL</span>连接句柄作为第一个参数，以便转义字符时可以使用相应的字符集。</p>
			<p>如果客户端的编译路径不是服务器的安装目录，并且配置<span>MySQL</span>时没有包括<span>MySQL</span>二进制中的所有字符集，如果服务器运行时需要使用客户端设置的字符集之外的其它字符集，你必须告诉客户端从哪里找到更多的字符集。</p>
			<p>可以指定<span>--character-sets-dir</span>选项来表示动态<span>MySQL</span>字符集所保存目录的路径。例如，可以将下面的行放入选项文件中：</p>
			<pre><span>[client]</span></pre>
			<pre><span>character-sets-dir=/usr/local/mysql/share/mysql/charsets</span></pre>
			<p>你可以强制客户端使用专用字符集：</p>
			<pre><span>[client]</span></pre>
			<pre><span>default-character-set=</span><span><i><span>charset</span></i></span></pre>
			<p>但是一般情况不需要。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="german-character-set"></a>
				5.10.1.1.&nbsp;使用德国字符集</h4></div></div></div>
				<p>在<span>MySQL 5.1</span>中<span>,</span>分别指定字符集和
				校对规则。这说明如果你想使用<span>German</span>排序顺序，你应选择<span>latin1</span><span>
				</span>字符集和<span>latin1_german1_ci</span>或<span>latin1_german2_ci</span>校对规则。例如，要用<span>latin1_german1_ci</span>校对规则启动服务器，应使用<span>--character-set-server=latin1</span>和<span>--collation-server=latin1_german1_ci</span>选项。</p>
				<p>关于这两种校对规则的不同之处，参见<a href="charset.html#charset-we-sets" title="10.10.2. West European Character Sets">10.10.2节，“西欧字符集”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="languages"></a>
			5.10.2.&nbsp;设置错误消息语言</h3></div></div></div><a class="indexterm" name="id2784935"></a><a class="indexterm" name="id2784946"></a><a class="indexterm" name="id2784956"></a><a class="indexterm" name="id2784966"></a></div><div class="section"><div class="titlepage"><div><div>
			默认情况下，<strong><span 
>mysqld</span></strong>用英语给出错误消息，但也可以用以下语言显示：<span>Czech</span>、<span>Danish</span>、<span>Dutch</span>、<span>Estonian</span>、<span>French</span>、<span>German</span>、<span>Greek</span>、<span>Hungarian</span>、<span>Italian</span>、<span>Japanese</span>、<span>Korean</span>、<span>Norwegian</span>、<span>Norwegian-ny</span>、<span>Polish</span>、<span>Portuguese</span>、<span>Romanian</span>、<span>Russian</span>、<span>Slovak</span>、<span>Spanish</span>或<span> 
			Swedish</span>。<p>要想在启动<strong><span 
>mysqld</span></strong>后用具体语言显示错误消息，使用<span>--language</span>或<span>-L</span>选项。选项值可以为语言名称或错误消息文件的全路径。例如：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld --language=swedish</span></b></span></pre>
			<p>或：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld --language=/usr/local/share/swedish</span></b></span></pre>
			<p>语言名应为小写。</p>
			<p>语言文件位于<span>(</span>默认情况下<span>)MySQL</span>基本目录的<span>share/<i>LANGUAGE</i></span>目录下。</p>
			<p>要想更改错误消息文件，应编辑<span>errmsg.txt</span>文件，然后执行下面的命令以生成<span>errmsg.sys</span>文件：</p>
			<pre><span>shell&gt; </span><span><b><span>comp_err errmsg.txt errmsg.sys</span></b></span></pre>
			<p>如果你升级到新版本的<span>MySQL</span>，记住使用新的<span>errmsg.txt</span>文件来重新更改。</p>
			<h3 class="title"><a name="adding-character-set"></a>
			5.10.3.&nbsp;添加新的字符集</h3></div></div></div><a class="indexterm" name="id2785079"></a><a class="indexterm" name="id2785090"></a>
			<p>本节讨论在<span>MySQL</span>中添加新字符集的程序。你必须有一个<span>MySQL</span>源码分发版。</p>
			<p>要选择正确的程序，先确定字符集是简单字符集还是复杂字符集：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果字符集不需要使用特殊字符串校对规则程序进行排序，并且不需要多字节字符支持，则为简单字符集。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果需要上述某个特性，则为复杂字符集。</p>
			<p>例如，<span>latin1</span>和<span>danish</span>为简单字符集，而<span>big5</span>和<span>czech</span>为复杂字符集。</p>
			<p>在下面的程序中，字符集名用<i><span  >MYSET</span></i>表示。</p>
			<p>对于简单字符集，应：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在<span  >sql/share/charsets/Index</span>文件最后添加<i><span  >MYSET</span></i>。并指定唯一的编号。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>创建文件<span  >sql/share/charsets/<i>MYSET</i>.conf</span>。<span>(</span>你可以使用<span  >sql/share/charsets/latin1.conf</span>的备份文件作为该文件的基础）<span>。
			</span></p>
			<p><b>该</b>文件的语法很简单：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>注释从‘<span>#</span>’字符开始，一直到该行末尾。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>各字之间用任意数量的空格间隔开。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>定义字符集时，每个字必须为十六进制格式的数字。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span  >ctype</span>数组占据前<span>257</span>个字。<span  >to_lower[]</span>、<span  >to_upper[]</span>和<span  >sort_order[]</span>数组依次占据<span>256</span>个字。</p>
			<p>参见<a href="database-administration.html#character-arrays" title="5.10.4. The Character Definition Arrays">5.10.4节，“字符定义数组”</a>。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>将字符集名添加到<span>configurE.in</span>的<span  >CHARSETS_AVAILABLE</span>和<span  >COMPILED_CHARSETS</span>列。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>重新配置、编译并测试。</p>
			<p>对于复杂字符集，应：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在<span>MySQL</span>源码分发版中创建文件<span  >strings/ctype-<i>MYSET</i>.c</span>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在<span  >sql/share/charsets/Index</span>文件最后添加<i><span  >MYSET</span></i>。并指定唯一的编号。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>看看已有的<span  >ctype-*.c</span>文件<span>(</span>例如<span  >strings/ctype-big5.c</span><span>)</span>，看看需要定义什么。请注意文件中的数组名必须为<span  >ctype_<i>MYSET</i></span>、<span  >to_lower_<i>MYSET</i></span>等等。对应简单字符集的数组。参见<a href="database-administration.html#character-arrays" title="5.10.4. The Character Definition Arrays">5.10.4节，“字符定义数组”</a>。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在文件顶部，添加注释：</p>
			<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</span></pre>
			<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* This comment is parsed by configure to create ctype.c,</span></pre>
			<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* so don&#39;t change it unless you know what you are doing.</span></pre>
			<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>*</span></pre>
			<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* .configure. number_</span><span><i><span>MYSET</span></i></span><span>=</span><span><i><span>MYNUMBER</span></i></span></pre>
			<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* .configure. strxfrm_multiply_</span><span><i><span>MYSET</span></i></span><span>=</span><span><i><span>N</span></i></span></pre>
			<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* .configure. mbmaxlen_</span><span><i><span>MYSET</span></i></span><span>=</span><span><i><span>N</span></i></span></pre>
			<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>*/</span></pre>
			<p><strong>
			<span>configure</span></strong>程序使用该注释自动将字符集包括进<span>MySQL</span>库中。</p>
			<p>在下面章节中解释<span>strxfrm_multiply</span>和<span>mbmaxlen</span><span>
			</span>行。只有需要字符串比较函数或多字节字符集函数时，才需要单独将它们包括进来。</p>
			<p>
			<span>13.</span>然后你应创建下面的函数：</p>
			<ol start="13" type="1">
				<ul type="disc">
					<li>
					<span  >
					my_strncoll_<i>MYSET</i>()</span><span> </span>
					</li>
					<li>
					<span  >
					my_strcoll_<i>MYSET</i>()</span><span> </span>
					</li>
					<li>
					<span  >
					my_strxfrm_<i>MYSET</i>()</span><span> </span>
					</li>
					<li>
					<span  >
					my_like_range_<i>MYSET</i>()</span><span> </span>
					</li>
				</ul>
			</ol>
			<p>参见<a href="database-administration.html#string-collating" title="5.10.5. String Collating Support">5.10.5节，“字符串比较支持”</a></p>
			<p>
			<span>14.</span>将字符集名添加到<span>configurE.in</span>的<span  >CHARSETS_AVAILABLE</span>和<span  >COMPILED_CHARSETS</span>列。</p>
			<p>
			<span>15.</span>重新配置、编译并测试。</p>
			<p><span  >sql/share/charsets/README</span>文件中包括详细的说明。</p>
			<p>如果你想要<span>MySQL</span>分发中的字符集，请向<span>MySQL</span>内部邮件系统发邮件。参见<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1节，“The MySQL邮件列表”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="character-arrays"></a>
			5.10.4.&nbsp;字符定义数组</h3></div></div></div>
			<p>
			<span>to_lower[]</span>和<span>to_upper[]</span>是简单数组，含有小写和大写字符，对应字符集的每个成员。例如：</p>
			<pre><span>to_lower[&#39;A&#39;] should contain &#39;a&#39;</span></pre>
			<pre><span>to_upper[&#39;a&#39;] should contain &#39;A&#39;</span></pre>
			<p>
			<span>sort_order[]</span>是一个映射，表示如何排列字符的顺序，以便进行比较和排序。通常<span>(</span>但非对于所有字符集<span>)</span>与<span>to_upper[]</span>相同，说明排序对大小写敏感。<span>MySQL</span>排序字符基于<span>sort_order[]</span>元素的值。对于更加复杂的排序规则，参见<a href="database-administration.html#string-collating" title="5.10.5. String Collating Support">5.10.5节，“字符串比较支持”</a>的字符串
			校对规则讨论。</p>
			<p>
			<span>ctype[]</span>是一个位数组，每个字符为一个元素。<span>(</span>请注意字符值索引<span>to_lower[]</span>、<span>to_upper[]</span>和<span>sort_order[]</span>，但用字符值<span>+ 
			1</span>索引<span>ctype[]</span>。这是传统的转换方法，能够处理<span>EOF</span>）<span>。</span></p>
			<p>
			<span>m_ctype.h</span>中有下面的位掩码定义：</p>
			<pre><span>#define _U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* Uppercase */</span></pre>
			<pre><span>#define _L&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 02&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* Lowercase */</span></pre>
			<pre><span>#define _N&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 04&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* Numeral (digit) */</span></pre>
			<pre><span>#define _S&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;010&nbsp;&nbsp;&nbsp;&nbsp; /* Spacing character */</span></pre>
			<pre><span>#define _P&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 020&nbsp;&nbsp;&nbsp;&nbsp; /* Punctuation */</span></pre>
			<pre><span>#define _C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 040&nbsp;&nbsp;&nbsp;&nbsp; /* Control character */</span></pre>
			<pre><span>#define _B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0100&nbsp;&nbsp;&nbsp; /* Blank */</span></pre>
			<pre><span>#define _X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0200&nbsp;&nbsp;&nbsp; /* heXadecimal digit */</span></pre>
			<p>每个字符的<span>ctype[]</span>条目应为相应的描述字符的位掩码值的联合。例如，<span>&#39;A&#39;</span>是大写字符<span>(</span><span>_U</span><span>)</span>以及十六进制整数<span>(</span><span>_X</span><span>)</span>，因此<span>ctype[&#39;A&#39;+1]</span>应包含 
			值：</p>
			<p><span>_U + _X = 01 + 0200 = 0201</span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="string-collating"></a>
			5.10.5.&nbsp;字符串比较支持</h3></div></div></div><a class="indexterm" name="id2785702"></a><a class="indexterm" name="id2785712"></a></div><div class="section"><div class="titlepage"><div><div>
			如果语言的排序规则比较复杂，不能用简单<span>sort_order[]</span>表来处理，需要使用字符串比较函数。<p>
			最好的文档是已有字符集。以<span>big5</span>、<span>czech</span>、<span>gbk</span>、<span>sjis</span>和<span>tis160</span>字符集作为例子。</p>
			<p>你必须在文件顶部的特殊注释处指定<span>strxfrm_multiply_<i>MYSET</i>=<i>N</i></span>值。<span><i><span>N</span></i></span>应设置为字符串在<span>my_strxfrm_<i>MYSET</i></span>过程中可能增长的最大比例<span>(</span>必须为正整数<span>)</span>。</p>
			<h3 class="title"><a name="multi-byte-characters"></a>
			5.10.6.&nbsp;多字节字符支持</h3></div></div></div><a class="indexterm" name="id2785790"></a><a class="indexterm" name="id2785800"></a></div><div class="section"><div class="titlepage"><div><div>
			如果你想要添加包括多字节字符的新字符集支持，需要使用多字节字符函数。<p>最好的文档是已有字符集。以<span>euc_kr</span>、<span>gb2312,gbk</span>、<span>sjis</span>和<span>ujis</span>字符集作为例子。这些字符集位于<span>strings</span>目录的<span>ctype-<i>charset</i>.c</span>文件中。</p>
			<p>必须在文件顶部的特殊注释处指定<span>mbmaxlen_<i>MYSET</i>=<i>N</i></span>值。<span><i><span>N</span></i></span>应设置为字符集内最长字符的字节数。</p>
			<h3 class="title"><a name="problems-with-character-sets"></a>
			5.10.7.&nbsp;字符集问题</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			如果你想要使用没有编译为二进制的字符集，可能会遇到下面的问题：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>你的程序的字符集保存路径不正确。<span>(</span>默认为<span>/usr/local/mysql/share/mysql/charsets</span><span>)</span>。可以在运行有问题的程序时通过<span>--character-sets-dir</span>选项来修复。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>字符集为多字节字符集，不能动态载入。在这种情况下，你必须重新编译程序，以支持字符集。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>字符集为动态字符集，但你没有对应的配置文件。在这种情况下，你应从新<span>MySQL</span>分发安装该字符集的配置文件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果<span>Index</span>文件没有包含字符集名，程序将显示下面的错误消息：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ERROR 1105: File &#39;/usr/local/share/mysql/charsets/?.conf&#39;</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>not found (Errcode</span>：<span>2)</span></pre>
			<p>在这种情况下，你应获得新<span>Index</span>文件或在当前文件中手动添加字符集。</p>
			<p>对于<span>MyISAM</span>表，可以用<strong><span>myisamchk 
			-dvv </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span>检查表的字符集名和编号。</p>
			<h3 class="title"><a name="time-zone-support"></a>
			5.10.8.&nbsp;MySQL服务器时区支持</h3></div></div></div>
			<p><span>&nbsp;MySQL</span>服务器有几个时区设置：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>系统时区。服务器启动时便试图确定主机的时区，用它来设置<span>system_time_zone</span>系统变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>服务器当前的时区。全局系统变量<span>time_zone</span>表示服务器当前使用的时区。初使值为<span>&#39;SYSTEM&#39;</span>，说明服务器时区与系统时区相同。可以用<span>--default-time-zone=<i>timez</i></span>选项显式指定初使值。如果你有<span>SUPER</span><span>
			</span>权限，可以用下面的语句在运行时设置全局变量值：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>SET GLOBAL time_zone = <i>timezone</i>;</span></b></span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>每个连接的时区。每个客户端连接有自己的时区设置，用会话<span>time_zone</span>变量给出。其初使值与全局变量<span>time_zone</span>相同，但可以用下面的语句重设：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>SET time_zone = <i>timezone</i>;</span></b></span></pre>
			<p>可以用下面的方法查询当前的全局变量值和每个连接的时区：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT @@global.time_zone, @@session.time_zone;</span></b></span></pre>
			<p><span><i>
			<span>timezone</span></i></span>值为字符串，表示<span>UTC</span>的偏移量，例如<span>&#39;+10:00&#39;</span>或<span>&#39;-6:00&#39;</span>。如果已经创建并装入<span>mysql</span>数据库中的时区相关表，你还可以使用命名的时区，例如<span>&#39;Europe/Helsinki&#39;</span>、<span>&#39;US/Eastern&#39;</span>或<span>&#39;MET&#39;</span>。值<span>&#39;SYSTEM&#39;</span>说明该时区应与系统时区相同。时区名对大小写不敏感。</p>
			<p><span>MySQL</span>安装程序在<span>mysql</span>数据库中创建时区表，但不装载。你必须手动装载。<span>(</span>如果你正从以前的版本升级到<span>MySQL 
			4.1.3</span>或更新版本，你应通过升级<span>mysql</span>数据库来创建表。参见<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2节，“升级授权表”</a>中的说明）<span>。</span></p>
			<p>如果你的系统有自己的时区信息数据库<span>(</span>描述时区的一系列文件<span>)</span>，应使用<strong><span>mysql_tzinfo_to_sql</span></strong>程序来填充时区表。示例系统如<span>Linux</span>、<span>FreeBSD</span>、<span>Sun 
			Solaris</span>和<span>Mac OS X</span>。这些文件的可能位置为<span>/usr/share/zoneinfo</span>目录。如果你的系统没有时区信息数据库，可以使用本节后面描述的下载的软件包。</p>
			<p><strong><span>
			mysql_tzinfo_to_sql</span></strong>程序用来装载时区表。在命令行中，将时区信息目录路径名传递到<strong><span>mysql_tzinfo_to_sql</span></strong>并输出发送到<strong><span>mysql</span></strong>程序。例如：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root mysql</span></b></span></pre>
			<p><strong><span>
			mysql_tzinfo_to_sql</span></strong>读取系统时区文件并生成<span>SQL</span>语句。<strong><span>mysql</span></strong>处理这些语句并装载时区表。</p>
			<p><strong><span>
			mysql_tzinfo_to_sql</span></strong>还可以用来装载单个时区文件，并生成闰秒信息。</p>
			<p>要想装载对应时区<span><i><span>tz_name</span></i></span>的单个时区文件<span><i><span>tz_file</span></i></span>，应这样调用<strong><span 
>mysql_tzinfo_to_sql</span></strong>：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql_tzinfo_to_sql <i>tz_file</i> <i>tz_name</i> | mysql -u root mysql</span></b></span></pre>
			<p>如果你的时区需要计算闰秒，按下面方法初使化闰秒信息，其中<span><i><span>tz_file</span></i></span>是时区文件名：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql_tzinfo_to_sql --leap <i>tz_file</i> | mysql -u root mysql</span></b></span></pre>
			<p>如果你的系统没有时区信息数据库<span> (</span>例如，<span>Windows</span>或<span>HP-UX)</span>，你可以从<span><a target="_top"  href="http://dev.mysql.com/downloads/timezones.html">http://dev.mysql.com/downloads/timezones.html</a></span>下载预构建时区表软件包。该软件包包含<span>MyISAM</span>时区表所用的<span>.frm</span>、<span>.MYD</span>和<span>.MYI</span>文件。这些表应属于<span>mysql</span>数据库，因此应将这些文件放到<span>MySQL</span>服务器数据目录的<span>mysql</span>子目录。操作时应关闭服务器。</p>
			<p><strong><span>警告！</span></strong>如果你的系统有时区信息数据库，请不要使用下载的软件包。而应使用<strong><span>mysql_tzinfo_to_sql</span></strong>实用工具！否则，<span>MySQL</span>和系统上其它应用程序处理日期时间的方法会有所不同。</p>
			<p>关于在复制时时区设置相关请查阅<a href="replication.html#replication-features" title="6.7. Replication Features and Known Problems">6.7节，“复制特性和已知问题”</a>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="log-files"></a>
		5.11.&nbsp;MySQL日志文件</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#error-log">
			5.11.1. 错误日志</a></span></dt><dt><span class="section"><a href="database-administration.html#query-log">
			5.11.2. 通用查询日志</a></span></dt><dt><span class="section"><a href="database-administration.html#binary-log">
			5.11.3. 二进制日志</a></span></dt><dt><span class="section"><a href="database-administration.html#slow-query-log">
			5.11.4. 慢速查询日志</a></span></dt><dt><span class="section"><a href="database-administration.html#log-file-maintenance">
			5.11.5. 日志文件维护</a></span></dt></dl></div><a class="indexterm" name="id2786354"></a>
		<p><span>MySQL</span>有几个不同的日志文件，可以帮助你找出<strong><span>mysqld</span></strong>内部发生的事情：</p>
		<table border="1" cellpadding="0" id="table18">
			<tr>
				<td>
				<p><strong><span>日志文件</span></strong></td>
				<td>
				<p><strong><span>
				记入文件中的信息类型</span></strong></td>
			</tr>
			<tr>
				<td>
				<p>错误日志</td>
				<td>
				<p>记录启动、运行或停止<strong><span
  >mysqld</span></strong><b>时出</b>现的问题。</td>
			</tr>
			<tr>
				<td>
				<p>查询日志</td>
				<td>
				<p>记录建立的客户端连接和执行的语句。</td>
			</tr>
			<tr>
				<td>
				<p>更新日志</td>
				<td>
				<p>记录更改数据的语句。不<span>赞成使用该日志。</span></td>
			</tr>
			<tr>
				<td>
				<p>二进制日志</td>
				<td>
				<p>记录所有更改数据的语句。还用于复制。</td>
			</tr>
			<tr>
				<td>
				<p>慢日志</td>
				<td>
				<p>记录所有执行时间超过<span>long_query_time</span>秒的所有查询或不使用索引的查询。</td>
			</tr>
		</table>
		<p>默认情况下，所有日志创建于<strong><span>mysqld</span></strong>数据目录中。通过刷新日志，你可以强制 
		<strong><span>mysqld</span></strong>来关闭和重新打开日志文件（或者在某些情况下切换到一个新的日志）。当你执行一个<span>FLUSH 
		LOGS</span>语句或执行<strong><span 
>mysqladmin flush-logs</span></strong>或<strong><span>mysqladmin 
		refresh</span></strong>时，出现日志刷新。参见<a href="sql-syntax.html#flush" title="13.5.5.2. FLUSH Syntax">13.5.5.2节，“FLUSH语法”</a>。</p>
		<p>如果你正使用<span>MySQL</span>复制功能，从复制服务器将维护更多日志文件，被称为接替日志。相关讨论参见<a href="replication.html">第6章：</a><a href="replication.html" title="Chapter 6. Replication in MySQL"><i>MySQL中的复制</i></a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="error-log"></a>
			5.11.1.&nbsp;错误日志</h3></div></div></div>
			<p>错误日志文件包含了当<strong><span 
>mysqld</span></strong>启动和停止时，以及服务器在运行过程中发生任何严重错误时的相关信息。</p>
			<p>如果<strong><span>mysqld</span></strong>莫名其妙地死掉并且<strong><span>mysqld_safe</span></strong>需要重新启动它，<strong><span>mysqld_safe</span></strong>在错误日志中写入一条<span  >restarted 
			mysqld</span>消息。如果<strong><span>mysqld</span></strong>注意到需要自动检查或着修复一个表，则错误日志中写入一条消息。</p>
			<p>在一些操作系统中，如果<strong><span 
>mysqld</span></strong>死掉，错误日志包含堆栈跟踪信息。跟踪信息可以用来确定<strong><span>mysqld</span></strong>死掉的地方。参见<a href="porting.html#using-stack-trace" title="E.1.4. Using a Stack Trace">E.1.4节，“使用堆栈跟踪”</a>。</p>
			<p>可以用<span>--log-error[=<i>file_name</i>]</span>选项来指定<strong><span 
>mysqld</span></strong>保存错误日志文件的位置。如果没有给定<span><i><span>file_name</span></i></span>值，<strong><span>mysqld</span></strong>使用错误日志名<span><i><span>host_name.err
			</span></i></span>并在数据目录中写入日志文件。如果你执行<span>FLUSH 
			LOGS</span>，错误日志用<span>-old</span>重新命名后缀并且<strong><span>mysqld</span></strong>创建一个新的空日志文件。<span>(</span>如果未给出<span>--log-error</span>选项，则不会重新命名）<span>。</span></p>
			<p>如果不指定<span>--log-error</span>，或者<span>(</span>在<span>Windows</span>中<span>)</span>如果你使用<span>--console</span>选项，错误被写入标准错误输出<span>stderr</span>。通常标准输出为你的终端。</p>
			<p>在<span>Windows</span>中，如果未给出<span>--console</span>选项，错误输出总是写入<span>.err</span>文件。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="query-log"></a>
			5.11.2.&nbsp;通用查询日志</h3></div></div></div><a class="indexterm" name="id2786662"></a><a class="indexterm" name="id2786669"></a></div><div class="section"><div class="titlepage"><div><div>
			如果你想要知道<strong><span 
>mysqld</span></strong>内部发生了什么，你应该用<span>--log[=<i>file_name</i>]</span>或<span>-l 
			[<i>file_name</i>]</span>选项启动它。如果没有给定<span><i><span>file_name</span></i></span>的值，
			默认名是<span><i><span>host_name</span></i><span>.log</span></span><b>。</b>所有连接和语句被记录到日志文件。当你怀疑在客户端发生了错误并想确切地知道该客户端发送给<strong><span>mysqld</span></strong>的语句时，该日志可能非常有用<b>。</b><p>
			<strong><span>mysqld</span></strong>按照它接收的顺序记录语句到查询日志。这可能与执行的顺序不同。这与更新日志和二进制日志不同，它们在查询执行后，但是任何一个锁释放之前记录日志。<span>(</span>查询日志还包含所有语句，而二进制日志不包含只查询数据的语句）<span>。
			</span></p>
			<p>服务器重新启动和日志刷新不会产生新的一般查询日志文件<span>(</span>尽管刷新关闭并重新打开一般查询日志文件<span>)</span>。在<span>Unix</span>中，你可以通过下面的命令重新命名文件并创建一个新文件：</p>
			<pre><span>shell&gt; </span><span><b><span>mv hostname.log hostname-old.log</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin flush-logs</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cp hostname-old.log to-backup-directory</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>rm hostname-old.log</span></b></span></pre>
			<p>在<span>Windows</span>中，服务器打开日志文件期间你不能重新命名日志文件。你必须先停止服务器然后重新命名日志文件。然后，重启服务器来创建新的日志文件。</p>
			<h3 class="title"><a name="binary-log"></a>
			5.11.3.&nbsp;二进制日志</h3></div></div></div><a class="indexterm" name="id2786780"></a><a class="indexterm" name="id2786787"></a><a class="indexterm" name="id2786797"></a>
			<p>二进制日志以一种更有效的格式，并且是事务安全的方式包含更新日志中可用的所有信息。</p>
			<p>二进制日志包含了所有更新了数据或者已经潜在更新了数据（例如，没有匹配任何行的一个<span>DELETE</span>）的所有语句。语句以“<span class="quote">事件</span>”的形式保存，它描述数据更改。</p>
			<p><strong><span>注</span></strong>释：二进制日志已经代替了老的更新日志，更新日志在<span>MySQL 
			5.1</span>中不再使用。</p>
			<p>
			二进制日志还包含关于每个更新数据库的语句的执行时间信息。它不包含没有修改任何数据的语句。如果你想要记录所有语句（例如，为了识别有问题的查询），你应使用一般查询日志。参见<a href="database-administration.html#query-log" title="5.11.2. The General Query Log">5.11.2节，“通用查询日志”</a>。</p>
			<p>二进制日志的主要目的是在恢复使能够最大可能地更新数据库，因为二进制日志包含备份后进行的所有更新。</p>
			<p>二进制日志还用于在主复制服务器上记录所有将发送给从服务器的语句。参见<a href="replication.html">第6章：</a><a href="replication.html" title="Chapter 6. Replication in MySQL"><i>MySQL中的复制</i></a>。</p>
			<p>运行服务器时若启用二进制日志则性能大约慢<span>1%</span>。但是，二进制日志的好处，即用于恢复并允许设置复制超过了这个小小的性能损失。</p>
			<p>当用<span>--log-bin[=<i>file_name</i>]</span>选项启动时，<strong><span 
>mysqld</span></strong>写入包含所有更新数据的<span>SQL</span>命令的日志文件。如果未给出<i><span  >file_name</span></i>值，
			默认名为<span>-bin</span>后面所跟的主机名。如果给出了文件名，但没有包含路径，则文件被写入数据目录。建议指定一个文件名，原因参见<a href="problems.html#open-bugs" title="A.8.1. Open Issues in MySQL">A.8.1节，“MySQL中的打开事宜”</a>。</p>
			<p>如果你在日志名中提供了扩展名<span>(</span>例如，<span  >--log-bin=<i>file_name.extension</i></span><span>)</span>，则扩展名被悄悄除掉并忽略。</p>
			<p><strong><span>mysqld</span></strong>在每个二进制日志名后面添加一个数字扩展名。每次你启动服务器或刷新日志时该数字则增加。如果当前的日志大小达到<span>max_binlog_size</span>，还会自动创建新的二进制日志。如果你正使用大的事务，二进制日志还会超过<span>max_binlog_size</span>：事务全写入一个二进制日志中，绝对不要写入不同的二进制日志中。</p>
			<p>为了能够知道还使用了哪个不同的二进制日志文件，<strong><span>mysqld</span></strong>还创建一个二进制日志索引文件，包含所有使用的二进制日志文件的文件名。默认情况下与二进制日志文件的文件名相同，扩展名为<span>&#39;.index&#39;</span>。你可以用<span>--log-bin-index[=<i>file_name</i>]</span>选项更改二进制日志索引文件的文件名。当<strong><span>mysqld</span></strong>在运行时，不应手动编辑该文件；如果这样做将会使<strong><span>mysqld</span></strong>变得混乱。</p>
			<p>可以用<span>RESET 
			MASTER</span>语句删除所有二进制日志文件，或用<span>PURGE 
			MASTER LOGS</span>只删除部分二进制文件。参见<a href="sql-syntax.html#reset" title="13.5.5.5. RESET Syntax">13.5.5.5节，“RESET语法”</a>和<a href="sql-syntax.html#replication-master-sql" title="13.6.1. SQL Statements for Controlling Master Servers">13.6.1节，“用于控制主服务器的SQL语句”</a>。</p>
			<p>二进制日志格式有一些已知限制，会影响从备份恢复。参见<a href="replication.html#replication-features" title="6.7. Replication Features and Known Problems">6.7节，“复制特性和已知问题”</a>。</p>
			<p>保存程序和触发器的二进制日志的描述参见<a href="stored-procedures.html#stored-procedure-logging" title="20.4. Binary Logging of Stored Routines and Triggers">20.4节，“存储子程序和触发程序的二进制日志功能”</a>。</p>
			<p>可以使用下面的<strong><span 
>mysqld</span></strong>选项来影响记录到二进制日志知的内容。又见选项后面的讨论。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--binlog-do-db=<i>db_name</i></span></p>
			<p>告诉主服务器，如果当前的数据库<span>(</span>即<span>USE</span>选定的数据库<span>)</span>是<span><i><span>db_name</span></i></span>，应将更新记录到二进制日志中。其它所有没有明显指定的数据库<span>&nbsp;
			</span>被忽略。如果使用该选项，你应确保只对当前的数据库进行更新。</p>
			<p>对于<span>CREATE 
			DATABASE</span>、<span>ALTER 
			DATABASE</span>和<span>DROP 
			DATABASE</span>语句，有一个例外，即通过操作的数据库来决定是否应记录语句，而不是用当前的数据库。</p>
			<p>一个不能按照期望执行的例子：如果用<span>binlog-do-db=sales</span>启动服务器，并且执行<span><span>USE 
			prices; UPDATE sales.january SET amount=amount+1000</span><span>；</span></span>，该语句不写入二进制日志。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--binlog-ignore-db=<i>db_name</i></span></p>
			<p>告诉主服务器，如果当前的数据库<span>(</span>即<span>USE</span>选定的数据库<span>)</span>是<span><i><span>db_name</span></i></span>，不应将更新保存到二进制日志中。如果你使用该选项，你应确保只对当前的数据库进行更新。</p>
			<p>一个不能按照你期望的执行的例子：如果服务器用<span>binlog-ignore-db=sales</span>启动，并且执行<span><span>USE 
			prices; UPDATE sales.january SET amount=amount+1000</span><span>；</span></span>，该语句不写入二进制日志。</p>
			<p>类似于<span>--binlog-do-db</span>，对于<span>CREATE 
			DATABASE</span>、<span>ALTER 
			DATABASE</span>和<span>DROP 
			DATABASE</span>语句，有一个例外，即通过操作的数据库来决定是否应记录语句，而不是用当前的数据库。</p>
			<p>要想记录或忽视多个数据库，使用多个选项，为每个数据库指定相应的选项。</p>
			<p>服务器根据下面的规则对选项进行评估，以便将更新记录到二进制日志中或忽视。请注意对于<span>CREATE</span><span>/</span><span>ALTER</span><span>/</span><span>DROP 
			DATABASE</span>语句有一个例外。在这些情况下，根据以下规则，所<i>创建、<em><span>修改或删除的</span></em></i>数据库将代替当前的数据库。</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>是否有<span>binlog-do-db</span>或<span>binlog-ignore-db</span>规则<span>?
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>没有：将语句写入二进制日志并退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有：执行下一步。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>有一些规则<span>(</span><span>binlog-do-db</span>或<span>binlog-ignore-db</span>或二者都有<span>)</span>。当前有一个数据库<span>(</span><span>USE</span>是否选择了数据库<span>?)?
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>没有：<i>不要</i>写入语句，并退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有：执行下一步。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>有当前的数据库。是否有<span>binlog-do-db</span>规则<span>?
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有：当前的数据库是否匹配<span>binlog-do-db</span>规则<span>?
			</span></p>
			<p >
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>有：写入语句并退出。</p>
			<p >
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>没有：不要写入语句，退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>No</span>：执行下一步。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>有一些<span>binlog-ignore-db</span>规则。当前的数据库是否匹配<span>binlog-ignore-db</span>规则<span>?
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有：不要写入语句，并退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>没有：写入查询并退出。</p>
			<p>例如，只用<span>binlog-do-db=sales</span>运行的服务器不将当前数据库不为<span>sales</span>的语句写入二进制日志<span>(</span>换句话说，<span>binlog-do-db</span>有时可以表示“<span class="quote">忽视其它数据库</span>”<span>)</span>。</p>
			<p>如果你正进行复制，应确保没有从服务器在使用旧的二进制日志文件，方可删除它们。一种方法是每天一次执行<strong><span>mysqladmin 
			flush-logs</span></strong>并删除三天前的所有日志。可以手动删除，或最好使用<span>PURGE 
			MASTER LOGS</span><span>(</span>参见<a href="sql-syntax.html#replication-master-sql" title="13.6.1. SQL Statements for Controlling Master Servers">13.6.1节，“用于控制主服务器的SQL语句”</a><span>)</span>，该语句还会安全地更新二进制日志索引文件<span>(</span>可以采用日期参数<span>)</span>。</p>
			<p>具有<span>SUPER</span>权限的客户端可以通过<span>SET 
			SQL_LOG_BIN=0</span>语句禁止将自己的语句记入二进制记录。参见<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3节，“SET语法”</a>。</p>
			<p>你可以用<strong><span>mysqlbinlog</span></strong>实用工具检查二进制日志文件。如果你想要重新处理日志止的语句，这很有用。例如，可以从二进制日志更新<span>MySQL</span>服务器，方法如下：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqlbinlog log-file | mysql -h server_name</span></b></span></pre>
			<p>关于<strong><span>mysqlbinlog</span></strong>实用工具的详细信息以及如何使用它，参见<a href="client-side-scripts.html#mysqlbinlog" title="8.6. mysqlbinlog — Utility for Processing Binary Log Files">8.6节，“mysqlbinlog：用于处理二进制日志文件的实用工具”</a>。</p>
			<p>如果你正使用事务，必须使用<span>MySQL</span>二进制日志进行备份，而不能使用旧的更新日志。</p>
			<p>查询结束后、锁定被释放前或提交完成后则立即记入二进制日志。这样可以确保按执行顺序记入日志。</p>
			<p>对非事务表的更新执行完毕后立即保存到二进制日志中。对于事务表，例如<span>BDB</span>或<span>InnoDB</span>表，所有更改表的更新<span>(</span><span>UPDATE</span>、<span>DELETE</span>或<span>INSERT</span><span>)
			</span>被缓存起来，直到服务器接收到<span>COMMIT</span>语句。在该点，执行完<span>COMMIT</span>之前，<strong><span>mysqld</span></strong>将整个事务写入二进制日志。当处理事务的线程启动时，它为缓冲查询分配<span>binlog_cache_size</span>大小的内存。如果语句大于该值，线程则打开临时文件来保存事务。线程结束后临时文件被删除。</p>
			<p>
			<span>Binlog_cache_use</span>状态变量显示了使用该缓冲区<span>(</span>也可能是临时文件<span>)</span>保存语句的事务的数量。<span>Binlog_cache_disk_use</span>状态变量显示了这些事务中实际上有多少必须使用临时文件。这两个变量可以用于将<span>binlog_cache_size</span>调节到足够大的值，以避免使用临时文件。</p>
			<p><span>max_binlog_cache_size(</span>默认<span>4GB)</span>可以用来限制用来缓存多语句事务的缓冲区总大小。如果某个事务大于该值，将会失败并
			回滚。</p>
			<p>如果你正使用更新日志或二进制日志，当使用<span>CREATE 
			... SELECT</span><span> or </span>
			<span>INSERT ... SELECT</span>时，并行插入被转换为普通插入。这样通过在备份时使用日志可以确保重新创建表的备份。</p>
			<p>请注意<span>MySQL 5.1</span>值的二进制日志格式与以前版本的<span>MySQL</span>不同，因为复制改进了。参见<a href="replication.html#replication-compatibility" title="6.5. Replication Compatibility Between MySQL Versions">6.5节，“不同MySQL版本之间的复制兼容性”</a>。</p>
			<p>默认情况下，并不是每次写入时都将二进制日志与硬盘同步。因此如果操作系统或机器<span>(</span>不仅仅是<span>MySQL</span>服务器<span>)</span>崩溃，有可能二进制日志中最后的语句丢失了。要想防止这种情况，你可以使用<span>sync_binlog</span>全局变量<span>(1</span>是最安全的值，但也是最慢的<span>)</span>，使二进制日志在每<span><i><span>N</span></i></span>次二进制日志写入后与硬盘同步。参见<a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">5.3.3节，“服务器系统变量”</a>。即使<span>sync_binlog</span>设置为<span>1,</span>出现崩溃时，也有可能表内容和二进制日志内容之间存在不一致性。例如，如果使用<span>InnoDB</span>表，<span>MySQL</span>服务器处理<span>COMMIT</span>语句，它将整个事务写入二进制日志并将事务提交到<span>InnoDB</span>中<span>。</span>如果在两次操作之间出现崩溃，重启时，事务被<span>InnoDB</span>回滚，但仍然存在二进制日志中。可以用<span>--innodb-safe-binlog</span>选项解决该问题，可以增加<span>InnoDB</span>表内容和二进制日志之间的一致性。<span>(</span>注释：在<span>MySQL 
			5.1</span>中不需要<span>--innodb-safe-binlog</span>；由于引入了<span>XA</span>事务支持，该选项作废了）<span>。
			</span></p>
			<p>该选项可以提供更大程度的安全，还应对<span>MySQL</span>服务器进行配置，使每个事务的二进制日志<span>(</span><span>sync_binlog 
			=1</span><span>)</span>和<span>(</span>默认情况为真<span>)</span><span>InnoDB</span>日志与硬盘同步。该选项的效果是崩溃后重启时，在滚回事务后，<span>MySQL</span>服务器从二进制日志剪切
			回滚的<span>InnoDB</span>事务。这样可以确保二进制日志反馈<span>InnoDB</span>表的确切数据等，并使从服务器保持与主服务器保持同步<span>(</span>不接收
			回滚的语句<span>)</span>。</p>
			<p>请注意即使<span>MySQL</span>服务器更新其它存储引擎而不是<span>InnoDB</span>，也可以使用<span>--innodb-safe-binlog</span>。在<span>InnoDB</span>崩溃恢复时，只从二进制日志中删除影响<span>InnoDB</span>表的语句<span>/</span>事务。如果崩溃恢复时<span>MySQL</span>服务器发现二进制日志变短了<span>(</span>即至少缺少一个成功提交的<span>InnoDB</span>事务<span>)</span>，如果<span>sync_binlog 
			=1</span>并且硬盘<span>/</span>文件系统的确能根据需要进行同步<span>(</span>有些不需要<span>)</span>则不会发生，则输出错误消息<span> 
			(&quot;</span>二进制日志<span>&lt;</span>名<span>&gt;</span>比期望的要小<span>&quot;)</span>。在这种情况下，二进制日志不准确，复制应从主服务器的数据快照开始。</p>
			<p>写入二进制日志文件和二进制日志索引文件的方法与写入<span>MyISAM</span>表相同。参见<a href="problems.html#full-disk" title="A.4.3. How MySQL Handles a Full Disk">A.4.3节，“MySQL处理磁盘满的方式”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="slow-query-log"></a>
			5.11.4.&nbsp;慢速查询日志</h3></div></div></div><a class="indexterm" name="id2787743"></a><a class="indexterm" name="id2787750"></a>
			<p>用<span>--log-slow-queries[=<i>file_name</i>]</span>选项启动时，<strong><span>mysqld</span></strong>写一个包含所有执行时间超过<span>long_query_time</span>秒的<span>SQL</span>语句的日志文件。获得初使表锁定的时间不算作执行时间。</p>
			<p>如果没有给出<span><i><span>file_name</span></i></span>值，
			默认未主机名，后缀为<span>-slow.log</span>。如果给出了文件名，但不是绝对路径名，文件则写入数据目录。</p>
			<p>语句执行完并且所有锁释放后记入慢查询日志。记录顺序可以与执行顺序不相同。</p>
			<p>慢查询日志可以用来找到执行时间长的查询，可以用于优化。但是，检查又长又慢的查询日志会很困难。要想容易些，你可以使用<strong><span>mysqldumpslow</span></strong>命令获得日志中显示的查询摘要来处理慢查询日志。</p>
			<p>在<span>MySQL 5.1</span>的慢查询日志中，不使用索引的慢查询同使用索引的查询一样记录。要想防止不使用索引的慢查询记入慢查询日志，使用<span>--log-short-format</span>选项。参见<a href="database-administration.html#server-options" title="5.3.1. mysqld Command-Line Options">5.3.1节，“<span><strong class="command">mysqld</strong></span>命令行选项”</a>。</p>
			<p>在<span>MySQL 5.1</span>中<span>,</span>通过<span>--log-slow-admin-statements</span>服务器选项，你可以请求将慢管理语句，例如<span>OPTIMIZE 
			TABLE</span>、<span>ANALYZE 
			TABLE</span>和 <span>
			ALTER TABLE</span>写入慢查询日志。</p>
			<p>用查询缓存处理的查询不加到慢查询日志中，因为表有零行或一行而不能从索引中受益的查询也不写入慢查询日志。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="log-file-maintenance"></a>
			5.11.5.&nbsp;日志文件维护</h3></div></div></div><a class="indexterm" name="id2787873"></a><a class="indexterm" name="id2787883"></a><a class="indexterm" name="id2787893"></a>
			<p><span>MySQL</span>服务器可以创建各种不同的日志文件，从而可以很容易地看见所进行的操作。参见<a href="database-administration.html#log-files" title="5.11. The MySQL Log Files">5.11节，“MySQL日志文件”</a>。但是，你必须定期清理这些文件，确保日志不会占用太多的硬盘空间。</p>
			<p>当启用日志使用<span>MySQL</span>时，你可能想要不时地备份并删除旧的日志文件，并告诉<span>MySQL</span>开始记入新文件。参见<a href="database-administration.html#backup" title="5.9.1. Database Backups">5.9.1节，“数据库备份”</a>。</p>
			<p>在<span> Linux (</span><span>Redhat</span><span>)</span>的安装上，你可为此使用<span>mysql-log-rotate</span>脚本。如果你从<span>RPM</span>分发安装<strong><span>MySQL</span></strong>，脚本应该自动被安装了。</p>
			<p>在其它系统上，你必须自己安装短脚本，你可从<span><b><span>cron</span></b></span>等入手处理日志文件。</p>
			<p>你可以通过<strong><span>mysqladmin 
			flush-logs</span></strong>或<span>SQL</span>语句<span>FLUSH 
			LOGS</span>来强制<strong><span
宋体;">MySQL</span></strong>开始使用新的日志文件。</p>
			<p>日志清空操作做下列事情：</p>
			<ul type="disc">
				<li>如果使用标准日志<span>(</span><span>--log</span><span>)</span>或慢查询日志<span>(</span><span>--log-slow-queries</span><span>)</span>，关闭并重新打开日志文件。<span>(</span>默认为<span>mysql.log</span>和<span>`hostname`-slow.log</span><span>)</span>。</li>
				<li>如果使用更新日志<span>(</span><span>--log-update</span><span>)</span>或二进制日志<span>(</span><span>--log-bin</span><span>)</span>，关闭日志并且打开有更高序列号的新日志文件。</li>
			</ul>
			<p>如果你只使用更新日志，你只需要重新命名日志文件，然后在备份前清空日志。例如，你可以这样做：</p>
			<pre><span>shell&gt; </span><span><b><span>cd mysql-data-directory</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mv mysql.log mysql.old</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin flush-logs</span></b></span></pre>
			<p>然后做备份并删除<tt >“<span>mysql.old</span>”</tt>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="multiple-servers"></a>
		5.12.&nbsp;在同一台机器上运行多个MySQL服务器</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#multiple-windows-servers">
			5.12.1. 在Windows下运行多个服务器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-unix-servers">
			5.12.2. 在Unix中运行多个服务器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-server-clients">
			5.12.3. 在多服务器环境中使用客户端程序</a></span></dt></dl></div><a class="indexterm" name="id2788055"></a><a class="indexterm" name="id2788066"></a><a class="indexterm" name="id2788073"></a><a class="indexterm" name="id2788080"></a><a class="indexterm" name="id2788090"></a>
		<p>在一些情况下，你可能想要在同一台机器上运行多个<strong><span>mysqld</span><span
宋体;">服务器</span></strong>。你可能想要测试一个新的<span>MySQL</span>发布，同时不影响现有产品的设置。或者，你可能想使不同的用户访问来访问不同的<strong><span>mysqld</span><span>服务器</span></strong>以便他们自己来管理。<span>(</span>例如，你可能是一个<span>Internet</span>服务提供商，希望为不同的客户来提供独立的<span>MySQL</span>安装）<span>。</span></p>
		<p>要想在一个单独的机器上运行多个服务器，每个服务器必须有唯一的各运行参数值。这些值可以在命令行中设置或在选项文件中设置。参见<a href="using-mysql-programs.html#program-options" title="4.3. Specifying Program Options">4.3节，“指定程序选项”</a>。</p>
		<p>至少下面的选项对每个服务器必须是不同的：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--port=<i>port_num</i></span></p>
		<p>
		<span>--port</span>控制着<span>TCP/IP</span>连接的端口号。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--socket=<i>path</i></span></p>
		<p>
		<span>--socket</span>控制<span>Unix</span>中的<span>Unix</span>套接字文件路径和在<span>Windows</span>中的命名管道名称。在<span>Windows</span>中，只有支持命名管道连接的服务器才需要明确指定管道名称。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--shared-memory-base-name=<i>name</i></span></p>
		<p>该选项当前只在<span>Windows</span>中使用。它指定<span>Windows</span>服务器使用的、允许客户端通过共享内存来连接的共享内存名。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--pid-file=<i>path</i></span></p>
		<p>该选项只在<span>Unix</span>中使用。它指出服务器在其中写入进程<span>ID</span>的文件名。</p>
		<p>如果你使用下面的日志文件选项，对于每个服务器来说，它们必须是不同的：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>&nbsp;
		</span>
		<span>--log=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--log-bin=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--log-update=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--log-error=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--bdb-logdir=<i>path</i></span></p>
		<p>日志文件选项的描述参见<a href="database-administration.html#log-file-maintenance" title="5.11.5. Log File Maintenance">5.11.5节，“日志文件维护”</a>。</p>
		<p>为了提高性能，你可以为每个服务器指定下面选项的不同的值，以便在物理磁盘之间平均分配负荷：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--tmpdir=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--bdb-tmpdir=<i>path</i></span></p>
		<p>还推荐使用不同的临时目录，以便容易地确定哪个<span>MySQL</span>服务器创建了给定的临时文件。</p>
		<p>一般情况，每个服务器应还使用不同的数据目录，可以通过<span>--datadir=path</span>选项来指定。</p>
		<p><strong><span>警告：</span></strong>一般情况，你决不要让两个服务器更新相同数据库中的数据。否则，如果你的操作系统不支持故障排除系统锁定，该可能会导致非常奇怪的结果。如果（不理会该警告）运行的多个服务器使用相同的数据目录并且启用了日志记录，你必须使用适当的选项来为每个服务器指定唯一的日志文件名。否则，服务器尝试用相同的文件来记录日志。请注意这种类型的设置只能在<span>MyISAM</span>和<span>MERGE</span>表上工作，对其它任何存储引擎不起作用。</p>
		<p>多个服务器共享一个数据目录的警告也适用于<span>NFS</span>环境。允许多个<span>MySQL</span>服务器通过<span>NFS</span>访问一个共同的数据目录是一个<em><span>非常不好的主义</span></em>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>主要问题是<span>NFS</span>存在速度瓶颈。它不是用于这种用途。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>用<span>NFS</span>的另一个冒险是你必须提出一个方法来确保两个或多个服务器不会相互干扰。<span>NFS</span>文件的锁定通常由<span>lockd</span>后台程序处理，但是目前，没有一个运行平台能够在每种情况下<span>100%</span>可靠地进行锁定。</p>
		<p>使你更加容易：忘记在服务器之间通过<span>NFS</span>共享数据目录。一个较好的解决方案是使用包含几个<span>CPU</span>并且和使用有效处理多线程的操作系统的机器。</p>
		<p>如果在不同的位置有多个<span>MySQL</span>的安装，一般情况可以用<span>--basedir=path</span>选项为每个服务器指定基本安装目录，使每个服务器使用不同的数据目录、日志文件和<span>PID</span>文件。（所有这些值的
		默认值相对于根目录来确定）。那样的话， 
		你唯一需要指定的其它选项是<span>--socket</span>和<span>--port</span>选项。例如，假如使用<span>tar</span>文件二进制分发版安装不同的<span>MySQL</span>版本。这些安装在不同的位置，因此可以使用各个安装服务器相应的根目录中的<strong><span>bin/mysqld_safe</span></strong>命令<strong><span>来</span></strong>启动服务器。<strong><span>mysqld_safe</span></strong>确定正确的<span>--basedir</span>选项传递给<strong><span 
>mysqld</span></strong>，你仅需要为<strong><span>mysqld_safe</span></strong>指定<span>--socket</span>和<span>--port</span>选项。</p>
		<p>
		正如下面几节所讨论的那样，可以通过设置环境变量或用指定的命令行选项来启动更多的服务器。但是，如果你需要在一个更稳定的基础上运行多个服务器，一个更方便的方法是使用选项文件来为每个服务器指定那些选项值，它对每个服务器必须是唯一的。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="multiple-windows-servers"></a>
			5.12.1.&nbsp;在Windows下运行多个服务器</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#multiple-windows-command-line-servers">
				5.12.1.1. 在命令行中启动多个Windows服务器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-windows-services">
				5.12.1.2. 做为服务启动多个Windows服务器</a></span></dt></dl></div>
			<p>在<span>Windows</span>中，可以从命令行手动启动来运行多个服务器，每个服务器使用合适的操作参数。在基于<span>Windows 
			NT</span>的系统中，安装几个服务器时，你还有将多个服务器安装为<span>Windows</span>服务并运行的选项。关于从命令行运行<span>MySQL</span>服务器或作为服务运行的一般说明在
        <a href="installing.html#windows-installation" title="2.3. Installing MySQL on Windows">
			2.3节，“在Windows上安装MySQL”</a>中给出。本节描述怎样确保你用不同的启动选项值（对于每个服务器必须是唯一的，例如数据目录）启动各个服务器。这些选项的描述见<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12节，“在同一台机器上运行多个MySQL服务器”</a>。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="multiple-windows-command-line-servers"></a>
				5.12.1.1.&nbsp;在命令行中启动多个Windows服务器</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				为了从命令行手动启动多个服务器，可以在命令行中或在选项文件中指定适当的选项。把选项放在选项文件中比较方便，但是需要确保每个服务器可以获得自己的选项。为了实现，为每个创建一个选项文件，并且运行服务时通过<span  >--defaults-file</span>选项告诉服务器选项文件名。<p>
				假设你想要在端口<span>3307</span>使用数据目录<span>C:\mydata1</span>运行<strong><span>mysqld</span></strong>，并且想在端口<span>3308</span>使用数据目录<span>C:\mydata1</span>运行<strong><span>mysqld-max</span></strong>。<span>(</span>要想这样做，启动服务器之前要确保，每个数据目录存在并且有自己的<span>mysql</span>数据库拷贝，它包含
				授权表）<span>。
				</span></p>
				<p>然后创建两个选项文件。例如，创建一个文件名为<span>C:\my-opts1.cnf</span>的配置文件，它看起来象这个样子：</p>
				<pre><span>[mysqld]</span></pre>
				<pre><span>datadir = C:/mydata1</span></pre>
				<pre><span>port = 3307</span></pre>
				<p>创建第二个文件名为<span>C:\my-opts1.cnf</span>的配置文件，它看起来象这个样子：</p>
				<pre><span>mysqld]</span></pre>
				<pre><span>datadir = C:/mydata2</span></pre>
				<pre><span>port = 3308</span></pre>
				<p>然后，用它们自己的选项文件启动每个服务器：</p>
				<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqld --defaults-file=C:\my-opts1.cnf</span></b></span></pre>
				<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqld-max --defaults-file=C:\my-opts2.cnf</span></b></span></pre>
				<p>在<span>NT</span>中，每个服务器在前台启动（服务器退出前，不会显示新的提示符）；需要在两个控制台窗口中执行这两个命令。</p>
				<p>要想关闭服务器，必须连接到相应的端口号：</p>
				<p>
				<span  >C:\&gt;
				</span><b><span>C:\mysql\bin\mysqladmin 
				--port=3307 shutdown</span></b></p>
				<p>
				<span  >C:\&gt;
				</span><b><span>C:\mysql\bin\mysqladmin 
				--port=3308 shutdown</span></b></p>
				<p>如刚才所讨论的，服务器配置允许客户端通过<span>TCP/IP</span>来连接。如果你的<span>Windows</span>版本支持命名管道并且你想允许命名管道连接，使用<strong><span>mysqld-nt</span></strong>或<strong><span>mysqld-max-nt</span></strong>服务器并指定启用命名管道并且指定管道名的选项。支持命名管道连接的每个服务器必须使用一个唯一的管道名。例如，<span>C:\my-opts1.cnf</span>文件可能象这样来书写：</p>
				<pre><span>[mysqld]</span></pre>
				<pre><span>datadir = C:/mydata1</span></pre>
				<pre><span>port = 3307</span></pre>
				<pre><span>enable-named-pipe</span></pre>
				<pre><span>socket = mypipe1</span></pre>
				<p>然后，这样启动服务器：</p>
				<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqld-nt --defaults-file=C:\my-opts1.cnf</span></b></span></pre>
				<p>同样修改第<span>2</span>个服务器使用的<span>C:\my-opts2.cnf</span>文件。</p>
				<h4 class="title"><a name="multiple-windows-services"></a>
				5.12.1.2.&nbsp;做为服务启动多个Windows服务器</h4></div></div></div>
				<p>在基于<span>NT</span>的系统中，<span>MySQL</span>服务器可以以<span>Windows</span>服务的方式来运行。安装、控制和删除单个<span>MySQL</span>服务的过程描述见<a href="installing.html#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12节，“以Windows服务方式启动MySQL”</a>。</p>
				<p>你还可以以服务的方式安装多个<span>MySQL</span>服务器。此时，除了所有参数对每个服务器必须是唯一的，你还必须确保每个服务器使用不同的服务名。</p>
				<p>在下面的说明中，假设你想要运行<strong><span>mysqld-nt</span></strong>服务器的两个不同的版本，它们分别安装在<span>C:\mysql-4.1.8</span>和<span>C:\mysql-5.1.2-alpha</span>目录中。<span>(</span>可能存在这种情况，如果你正在运行版本<span>4.1.8</span>作为你的产品服务器，还想使用<span>5.1.2-alpha</span>版本来进行测试）<span>。
				</span></p>
				<p>当用<span  >--install</span>或<span  >--install-manual</span>选项安装一个<span>MySQL</span>服务时，应遵从以下原则：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你没有指定服务名，服务器使用默认的<span>MySQL</span>服务名，从标准选项文件的<span>[mysqld]</span>组中读取选项。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你在<span  >--install</span>选项后指定了服务名，服务器忽略<span>[mysqld]</span>选项组，从具有相同名的组中读取选项作为服务名。服务器从标准选项文件中读取选项。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果你在服务名后面指定一个<span>--defaults-file</span>选项，服务器忽略标准选项文件，只从命名的文件的<span>[mysqld]</span>组读取选项。</p>
				<p><strong><span>注</span></strong>释：<span>MySQL 
				4.0.17</span>之前，只有使用默认服务名（<span><span>MySQL</span><span>）</span></span>安装的一个服务器或使用服务名<strong><span>mysqld</span></strong>显式安装的一个服务器从标准选项文件读<span>[mysqld]</span>组。到<span>4.0.17</span>时，如果服务器读标准选项文件，则它们均读<span>[mysqld]</span>组，即使它们安装时使用了另一个服务名。这样允许你为选项使用<span>[mysqld]</span>组，用于所有<span>MySQL</span>服务器，并将根据每个服务器命名的选项组用于该服务器<span>，即使用那个服务名安装的服务器。</span></p>
				<p>
				根据前面叙述，你可以通过几个方法来设置多个服务器。下面的说明描述了一些示例。在尝试之前，应确保你首先关闭并且卸载了所有已有的<span>MySQL</span>服务器。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>方法<span>1</span>：</span></strong>在一个标准选项文件中指定所有服务器选项。要想这样做，为每个服务器使用不同的服务名。假设你想使用服务名<span>mysqld1</span>运行<span>4.1.8</span>版的<strong><span>mysqld-nt</span><span>并</span></strong>使用服务名<span>mysqld2</span>运行<span>5.1.2-alpha</span>版的<strong><span>mysqld-n</span></strong><b><span>t</span></b>。在这种情况下，你可以为<span>4.1.8</span>使用<span>[mysqld1]</span>组，为<span>5.1.2-alpha</span>使用<span>[mysqld2]</span>组。例如，你可以象这样建立 
				<span>C:\my.cnf</span>文件：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span># options for mysqld1 service</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[mysqld1]</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>basedir = C:/mysql-4.1.8</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>port = 3307</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>enable-named-pipe</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>socket = mypipe1</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span># options for mysqld2 service</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[mysqld2]</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>basedir = C:/mysql-5.1.2-alpha</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>port = 3308</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>enable-named-pipe</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>socket = mypipe2</span></pre>
				<p>如下面所示安装服务器，使用服务器的全路径名来确保<span>Windows</span>为每个服务注册正确的可执行程序：</p>
				<pre ><span>C:\&gt; </span><span><b><span>C:\mysql-4.1.8\bin\mysqld-nt --install mysqld1</span></b></span></pre>
				<pre ><span>C:\&gt; </span><span><b><span>C:\mysql-5.1.2-alpha\bin\mysqld-nt --install mysqld2</span></b></span></pre>
				<p>为了启动服务器，使用服务管理器，或用带有适当的服务名的<strong><span>NET 
				START</span></strong>：</p>
				<p>
				<span  >C:\&gt;
				</span><b><span>NET START 
				mysqld1</span></b></p>
				<p>
				<span  >C:\&gt;
				</span><b><span>NET START 
				mysqld2</span></b></p>
				<p>要想停止服务，使用服务管理器，或用带有适当的服务名的<strong><span>NET 
				STOP</span></strong>：</p>
				<pre ><span>C:\&gt; </span><span><b><span>NET STOP mysqld1</span></b></span></pre>
				<pre ><span>C:\&gt; </span><span><b><span>NET STOP mysqld2</span></b></span></pre>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>方法<span>2</span>：</span></strong>为每个服务器用不同的文件指定选项，当你安装服务时使用<span>--defaults-file</span>告诉每个服务器使用什么文件。此时，每个文件应用一个<span>[mysqld]</span>组列出选项。</p>
				<p>使用这种方法为<span>4.1.8</span>版本的<strong><span>mysqld-nt</span></strong>指定选项，应象这样创建一个<span>C:\my-opts1.cnf</span>文件：</p>
				<pre ><span>[mysqld]</span></pre>
				<pre ><span>basedir = C:/mysql-4.1.8</span></pre>
				<pre ><span>port = 3307</span></pre>
				<pre ><span>enable-named-pipe</span></pre>
				<pre ><span>socket = mypipe1</span></pre>
				<p>对于<span>5.1.2-alpha</span>版的<strong><span>mysqld-nt</span></strong>，象这样创建一个<span>C:\my-opts2.cnf</span>文件：</p>
				<pre ><span>[mysqld]</span></pre>
				<pre ><span>basedir = C:/mysql-5.1.2-alpha port = 3308</span></pre>
				<pre ><span>enable-named-pipe</span></pre>
				<pre ><span>socket = mypipe2</span></pre>
				<p>安装服务如下（在一个单一行中输入每个命令）：</p>
				<pre ><span>C:\&gt; </span><span><b><span>C:\mysql-4.1.8\bin\mysqld-nt -- installmysqld1</span></b></span></pre>
				<pre ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --defaults-file=C:\my-opts1.cnf</span></pre>
				<pre ><span>C:\&gt; </span><span><b><span>C:\mysql-5.1.2-alpha\bin\mysqld-nt -- installmysqld2</span></b></span></pre>
				<pre ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --defaults-file=C:\my-opts2.cnf</span></pre>
				<p>当你作为服务安装一个<span>MySQL</span>服务器时，要想使用<span>--defaults-file</span>选项，你必须在此选项之前加服务名。</p>
				<p>安装服务后，按照与前面的示例相同的方法启动和停止。</p>
				<p>要想卸载多个服务，对每个服务使用<strong><span>mysqld 
				--remove</span></strong>，在<span>--remove</span>选项后指定服务名。如果服务名是
				默认的<span>(</span><span>MySQL</span><span>)</span>，你可以不指定。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="multiple-unix-servers"></a>
			5.12.2.&nbsp;在Unix中运行多个服务器</h3></div></div></div>
			<p>在<span>Unix</span>中运行多个服务器最容易的方法是使用不同的<span>TCP/IP</span>端口<span>s</span>和<span>Unix</span>套接字文件编译，因此每个实例在不同的网络接口侦听。另外，每个安装应在不同的基础目录中编译，那将自动为你的每个服务器产生使用不同的编译进来的数据目录、日志文件和<span>PID</span>文件位置。</p>
			<p>假设一个现有的<span>4.1.8</span>版本服务器配置为默认<span>TCP/IP</span>端口号<span>(3306)</span>和<span>Unix</span>套接字文件<span>(</span><span>/tmp/mysql.sock</span><span>)</span>。要想配置一个新的<span>5.1.2-alpha</span>版的服务器来使用不同的操作参数，使用一个<strong><span>configure</span></strong>命令，大概象这样使用：</p>
			<pre><span>shell&gt; </span><span><b><span>./configure --with-tcp-port=<i>port_number</i> \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--with-unix-socket-path=<i>file_name</i> \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--prefix=/usr/local/mysql-5.1.2-alpha</span></b></span></pre>
			<p>这里，<span><i><span>port_number</span></i></span>和<span><i><span>file_name</span></i></span>必须不同于默认<span>TCP/IP</span>端口号和<span>Unix</span>套接字文件路径名，并且<span>--prefix</span>值应指定一个不同于现有<span>MySQL</span>安装目录的安装目录。</p>
			<p>如果你有一个<span>MySQL</span>服务器正侦听一个给定的端口号，你可以使用下面的命令来找出针对一些重要配置变量它使用了那些操作参数，包括基础目录和<span>Unix</span>套接字文件名：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin --host=<i>host_name</i> --port=<i>port_number</i> variables</span></b></span></pre>
			<p>通过该命令显示的信息，当配置其它服务器时，你可以告诉服务器该选项没有使用的值。</p>
			<p>请注意，如果你指定<span>localhost</span>作为一个主机名，<strong><span>mysqladmin</span></strong>默认使用<span>Unix</span>套接字文件连接，而不是<span>TCP/IP</span>。从<span> 
			MySQL 4.1</span>开始，通过<span><span>--protocol=</span><span> 
			TCP | SOCKET | PIPE | MEMORY}</span></span>选项，你可以显示地指定连接协议。</p>
			<p>如果只是用一个不同的<span>Unix</span>套接字文件和<span>TCP/IP</span>端口号启动，不必编译新的<span>MySQL</span>服务器。还可以在运行时指定这些值。这样做的一个方法是使用命令行选项：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_safe --socket=<i>file_name</i> --port=<i>port_number</i></span></b></span></pre>
			<p>要启动第二个服务器，提供不同的<span>--socket</span>和<span><span>--</span><span>port</span></span>选项值，并且传递一个<span>--datadir=path</span>选项给<strong><span>mysqld_safe</span></strong>，以便服务器使用一个不同的数据目录。</p>
			<p>达到相似效果的另一个方法是使用环境变量来设置<span> Unix</span>套接字文件名和<span>TCP/IP</span>端口号：</p>
			<pre><span>shell&gt; </span><span><b><span>MYSQL_UNIX_PORT=/tmp/mysqld-new.sock</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>MYSQL_TCP_PORT=3307</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>export MYSQL_UNIX_PORT MYSQL_TCP_PORT</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysql_install_db --user=mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqld_safe --datadir=/path/to/datadir &amp;</span></b></span></pre>
			<p>这是一个快速启动第二个服务器以用于测试的方法。该方法的最大好处是环境变量设定值适用于你从相同的<span>shell</span>调用的任何客户端程序。因而，那些客户端连接自动指向第二个服务器！</p>
			<p>
        <a href="environment-variables.html" title="Appendix F. Environment Variables">
			附录F：<i>环境变量</i></a>包括你可以使用的影响<strong><span 
>mysqld</span></strong>的其它环境变量列表<strong><span style="
">。</span></strong></p>
			<p>对于自动服务器启动，对于每个服务器，机器引导时执行的启动脚本应执行下面的命令，每个命令用一个相应的选项文件路径：</p>
			<pre><span>mysqld_safe --defaults-file=path</span></pre>
			<p>每个选项文件应包含一个给定服务器特定的选项值。</p>
			<p>在<span>Unix</span>中，<strong><span>mysqld_multi</span></strong>脚本是启动多个服务器的另一个方法。参见<a href="database-administration.html#mysqld-multi" title="5.1.5. mysqld_multi — Program for Managing Multiple MySQL Servers">5.1.5节，“mysqld_multi：管理多个MySQL服务器的程序”</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="multiple-server-clients"></a>
			5.12.3.&nbsp;在多服务器环境中使用客户端程序</h3></div></div></div>
			<p>当你想要用一个客户端程序连接一个<span>MySQL</span>服务器时，该服务器侦听不同的网络<span>接口，而不是编译到你的客户端的网络接口，你可以使用下面的方法：</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>启动客户端，用<span>--host=<i>host_name</i> 
			--port=<i>port_number</i></span>通过<span>TCP/IP</span>来连接一个远程服务器，用<span>--host=127.0.0.1 
			--port=<i>port_number</i></span>通过<span>TCP/IP</span>来连接一个本地服务器，或者用<span>--host=localhost 
			--socket=<i>file_name</i></span>通过一个<span>Unix</span>套接字文件或一个<span>Windows</span>命名管道来连接一个本地服务器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>从<span>MySQL 4.1</span>起，启动客户端时用<span>--protocol=tcp</span>通过<span>TCP/IP</span>来连接，用<span>--protocol=socket</span>通过一个<span>Unix</span>套接字文件来连接，用<span>--protocol=pipe</span>通过一个命名管道来连接，或用<span>--protocol=memory</span>通过共享内存来连接。对于<span>TCP/IP</span>连接，你可能还需要指定<span>--host</span>和<span><span>--</span><span>port</span></span>选项。对于其它类型的连接，你可能需要指定一个<span>--socket</span>选项来指定一个<span>Unix</span>套接字文件或命名管道名，或者一个<span>--shared-memory-base-name</span>选项来指定共享内存名。共享内存连接仅在<span>Windows</span>中支持。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Unix</span>中，在你启动客户端之前，设置<span>MYSQL_UNIX_PORT</span>和<span>MYSQL_TCP_PORT</span>环境变量来指定<span>Unix</span>套接字文件和<span>TCP/IP</span>端口号。如果你经常使用具体的套接字文件或端口号，你可以在<span>.login</span>文件中放置命令来设置环境变量以便你每次登录时该命令起作用。参见<a href="environment-variables.html" title="Appendix F. Environment Variables">附录F：<i>环境变量</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在一个选项文件的<span>[client]</span>组中指定默认<span>Unix</span>套接字文件和<span>TCP/IP</span>端口号。例如，你可以在<span>Windows</span>中使用<span>C:\my.cnf</span>文件，或在<span>Unix</span>中主目录内使用<span>.my.cnf</span>文件。参见<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>C</span>程序中，在<span>mysql_real_connect()</span>调用时，你可以指定套接字文件或端口号参数。通过调用<span><span>mysql_options()</span>，</span>你还可以有程序读选项文件。参见<a href="apis.html#c-api-functions" title="25.2.3. C API Function Descriptions">25.2.3节，“C API函数描述”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果你正在使用<span>Perl </span>
			<span>DBD::mysql</span>模块，你可以从<span>MySQL</span>选项文件中读取选项。例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>$dsn = &quot;DBI:mysql:test;mysql_read_default_group=client;&quot;</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;mysql_read_default_file=/usr/local/mysql/data/my.cnf&quot;;</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp; </span><span>$dbh = DBI-&gt;connect($dsn, $user, $password);</span></pre>
			<p>参见<a href="apis.html#perl" title="25.4. MySQL Perl API">25.4节，“MySQL Perl API”</a>。</p>
			<p>其它程序接口可以为读选项文件提供相似的功能。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="query-cache"></a>
		5.13.&nbsp;MySQL查询高速缓冲</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#query-cache-how">
			5.13.1. 查询高速缓冲如何工作</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-in-select">
			5.13.2. 查询高速缓冲SELECT选项</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-configuration">
			5.13.3. 查询高速缓冲配置</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-status-and-maintenance">
			5.13.4. 查询高速缓冲状态和维护</a></span></dt></dl></div><a class="indexterm" name="id2789707"></a><a class="indexterm" name="id2789713"></a>
		<p>查询缓存存储<span>SELECT</span>查询的文本以及发送给客户端的相应结果。如果随后收到一个相同的查询，服务器从查询缓存中重新得到查询结果，而不再需要解析和执行查询。</p>
		<p>如果你有一个不经常改变的表并且服务器收到该表的大量相同查询，查询缓存在这样的应用环境中十分有用。对于许多<span>Web</span>服务器来说存在这种典型情况，它根据数据库内容生成大量的动态页面。</p>
		<p><strong><span>注</span></strong>释：查询缓存不返回旧的数据。当表更改后，查询缓存值的相关条目被清空。</p>
		<p><strong><span>注</span></strong>释：如果你有许多<strong><span 
>mysqld</span></strong>服务器更新相同的<span>MyISAM</span>表，在这种情况下查询缓存不起作用。</p>
		<p><strong><span>注</span></strong>释：查询缓存不适用于服务器方编写的语句。如果正在使用服务器方编写的语句，要考虑到这些语句将不会应用查询缓存。参见
      <a href="apis.html#c-api-prepared-statements" title="25.2.4. C API Prepared Statements">
		25.2.4节，“C API预处理语句”</a>。</p>
		<p>下面是查询缓存的一些性能数据。这些结果是在<span>Linux Alpha 2 x 500MHz</span>系统（<span>2GB 
		RAM</span>，<span>64MB</span>查询缓存）上运行<span>MySQL</span>基准组件产生的。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果执行的所有查询是简单的<span>(</span>如从只有一行数据的表中选取一行<span>)</span>，但查询是不同的，查询不能被缓存，查询缓存激活率是<span>13%</span>。这可以看作是最坏的情形。在实际应用中，查询要复杂得多，因此，查询缓存使用率一般会很低。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>从只有一行的表中查找一行数据时，使用查询缓存比不使用速度快<span>2</span><span>38%</span><span>。这可以看作查询使用缓存时速度提高最小的情况。</span></p>
		<p>服务器启动时要禁用查询缓存，设置<span>query_cache_size</span>系统变量为<span>0</span>。禁用查询缓存代码后，<span>没有明显的速度提高。</span>编译<span>MySQL</span>时，通过在<strong><span>configure</span><span>中</span></strong>使用<span>--without-query-cache</span>选项，可以从服务器中彻底去除查询缓存能力。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="query-cache-how"></a>
			5.13.1.&nbsp;查询高速缓冲如何工作</h3></div></div></div>
			<p>本节描述查询缓存的工作原理。<a href="database-administration.html#query-cache-configuration" title="5.13.3. Query Cache Configuration">5.13.3节，“查询高速缓冲配置”</a>描述了怎样控制是否使用查询缓存。</p>
			<p>查询解析之前进行比较，因此下面的两个查询被查询缓存认为是不相同的：</p>
			<pre><span>SELECT * FROM </span><span><i><span>tbl_name</span></i></span></pre>
			<pre><span>Select * from </span><span><i><span>tbl_name</span></i></span></pre>
			<p>查询必须是完全相同的<span>(</span>逐字节相同<span>)</span>才能够被认为是相同的。另外，同样的查询字符串由于其它原因可能认为是不同的。使用不同的数据库、不同的协议版本或者不同
			默认字符集的查询被认为是不同的查询并且分别进行缓存。</p>
			<p>从查询缓存中提取一个查询之前，<span>MySQL</span>检查用户对所有相关数据库和表的<span>SELECT</span>权限。<span>如果没有权限，</span>不使用缓存结果。</p>
			<p>如果从查询缓存中返回一个查询结果，服务器把<span>Qcache_hits</span>状态变量的值加一，而不是<span>Com_select</span>变量。参见<a href="database-administration.html#query-cache-status-and-maintenance" title="5.13.4. Query Cache Status and Maintenance">5.13.4节，“查询高速缓冲状态和维护”</a>。</p>
			<p>如果一个表被更改了，那么使用那个表的所有缓冲查询将不再有效，并且从缓冲区中移出。这包括那些映射到改变了的表的使用<span>MERGE</span>表的查询。一个表可以被许多类型的语句更改，例如<span>INSERT</span>、<span>UPDATE</span>、<span>DELETE</span>、<span>TRUNCATE</span>、<span>ALTER 
			TABLE</span>、<span>DROP 
			TABLE</span>或<span>DROP 
			DATABASE</span>。</p>
			<p><span>COMMIT</span>执行完后，被更改的事务<span>InnoDB</span>表不再有效。</p>
			<p>使用<span>InnoDB</span>表时，查询缓存也在事务中工作，使用该表的版本号来检测其内容是否仍旧是当前的。</p>
			<p>在<span>MySQL 5.1</span>中，视图产生的查询被缓存。</p>
			<p>
			<span>SELECT SQL_CALC_FOUND_ROWS 
			...</span>和<span>SELECT 
			FOUND_ROWS()</span><span> type</span>类型的查询使用查询缓存。即使因创建的行数也被保存在缓冲区内，前面的查询从缓存中提取，<span>FOUND_ROWS()</span>也返回正确的值。</p>
			<p>如果一个查询包含下面函数中的任何一个，它不会被缓存：</p>
			<table border="1" cellpadding="0" id="table19">
				<tr>
					<td>
					<p>
					<span>BENCHMARK()</span></td>
					<td>
					<p>
					<span>CONNECTION_ID()</span></td>
					<td>
					<p>
					<span>CURDATE()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CURRENT_DATE()</span></td>
					<td>
					<p>
					<span>CURRENT_TIME()</span></td>
					<td>
					<p>
					<span>
					CURRENT_TIMESTAMP()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CURTIME()</span></td>
					<td>
					<p>
					<span>DATABASE()</span></td>
					<td>
					<p>带一个参数的<span>ENCRYPT()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>FOUND_ROWS()</span></td>
					<td>
					<p>
					<span>GET_LOCK()</span></td>
					<td>
					<p>
					<span>LAST_INSERT_ID()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>LOAD_FILE()</span></td>
					<td>
					<p>
					<span>MASTER_POS_WAIT()</span></td>
					<td>
					<p>
					<span>NOW()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>RAND()</span></td>
					<td>
					<p>
					<span>RELEASE_LOCK()</span></td>
					<td>
					<p>
					<span>SYSDATE()</span></td>
				</tr>
				<tr>
					<td>
					<p>不带参数的<span>UNIX_TIMESTAMP()</span></td>
					<td>
					<p>
					<span>USER()</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
			</table>
			<p>在下面的这些条件下，查询也不会被缓存：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>引用自定义函数<span>(UDFs)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>引用自定义变量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>引用<span>mysql</span>系统数据库中的表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>下面方式中的任何一种：</p>
			<pre ><span>SELECT ...IN SHARE MODE</span></pre>
			<pre ><span>SELECT ...FOR UPDATE</span></pre>
			<pre ><span>SELECT ...INTO OUTFILE ...</span></pre>
			<pre ><span>SELECT ...INTO DUMPFILE ...</span></pre>
			<pre ><span>SELECT * FROM ...WHERE autoincrement_col IS NULL</span></pre>
			<p>最后一种方式不能被缓存是因为它被用作为<span>ODBC</span>工作区来获取最近插入的<span>ID</span>值。参见<a href="connectors.html#odbc-and-last-insert-id" title="26.1.14.1. How to Get the Value of an AUTO_INCREMENT Column in ODBC">26.1.14.1节，“如何在ODBC中获取AUTO_INCREMENT列的值<code class="literal"></code>”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span>被作为编写好的语句，即使没有使用占位符。例如，下面使用的查询：</p>
			<pre ><span>char *my_sql_stmt = &quot;SELECT a</span>，<span>b FROM table_c&quot;;</span></pre>
			<pre ><span>&nbsp;&nbsp; </span><span>/* ...*/</span></pre>
			<pre ><span>mysql_stmt_prepare(stmt</span>，<span>my_sql_stmt</span>，<span>strlen(my_sql_stmt));</span></pre>
			<p>不被缓存。参见<a href="apis.html#c-api-prepared-statements" title="25.2.4. C API Prepared Statements">25.2.4节，“C API预处理语句”</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>TEMPORARY</span>表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不使用任何表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>用户有某个表的列级权限。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="query-cache-in-select"></a>
			5.13.2.&nbsp;查询高速缓冲SELECT选项</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			可以在<span>SELECT</span>语句中指定查询缓存相关选项：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span><span>SQL_CACHE</span></p>
			<p>如果<span  >query_cache_type</span>系统变量的值是<span>ON</span>或<span><span>DEMAND</span>，</span>查询结果被缓存。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span><span>SQL_NO_CACHE</span></p>
			<p>查询结果不被缓存。</p>
			<p>示例：</p>
			<pre><span>SELECT SQL_CACHE id, name FROM customer;</span></pre>
			<pre><span>SELECT SQL_NO_CACHE id, name FROM customer;</span></pre>
			<h3 class="title"><a name="query-cache-configuration"></a>
			5.13.3.&nbsp;查询高速缓冲配置</h3></div></div></div>
			<p>通过<span  >have_query_cache</span>服务器系统变量指示查询缓存是否可用：</p>
			<pre><span>mysql&gt; </span><b><span>SHOW VARIABLES LIKE &#39;have_query_cache&#39;;</span></b></pre>
			<pre><span>+------------------+-------+</span></pre>
			<pre><span>| Variable_name&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre><span>+------------------+-------+</span></pre>
			<pre><span>| have_query_cache | YES&nbsp;&nbsp; |</span></pre>
			<pre><span>+------------------+-------+</span></pre>
			<p>即使禁用查询缓存，当使用标准<span> MySQL</span>二进制时，这个值总是<span>YES</span>。</p>
			<p>其它几个系统变量控制查询缓存操作。当启动<strong><span>mysqld</span></strong>时，这些变量可以在选项文件或者命令行中设置。所有查询缓存系统变量名以<span  >query_cache_
			</span>开头。它们的详细描述见<a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">5.3.3节，“服务器系统变量”</a>，还给出了额外的配置信息。</p>
			<p>为了设置查询缓存大小，设置<span  >query_cache_size</span>系统变量。设置为<span>0</span>表示禁用查询缓存。
			默认缓存大小设置为<span>0</span>；也就是禁用查询缓存。</p>
			<p>当设置<span  >query_cache_size</span>变量为非零值时，应记住查询缓存至少大约需要<span>40KB</span>来分配其数据结构。<span>(</span>具体大小取决于系统结构）<span>。</span>如果你把该值设置的太小，将会得到一个警告，如本例所示：</p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SET GLOBAL 
			query_cache_size = 40000;</span></b></p>
			<p>
			<span  >Query OK, 
			0 rows affected, 1 warning (0.00 sec)</span></p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SHOW WARNINGS\G</span></b></p>
			<p>
			<span  >
			*************************** 1. row ***************************</span></p>
			<p>
			<span  >&nbsp; Level: 
			Warning</span></p>
			<p>
			<span  >&nbsp;&nbsp; Code: 
			1282</span></p>
			<p>
			<span  >Message: 
			Query cache failed to set size 39936; new query cache size is 0</span></p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SET GLOBAL 
			query_cache_size = 41984;</span></b></p>
			<p>
			<span  >Query OK, 
			0 rows affected (0.00 sec)</span></p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SHOW VARIABLES 
			LIKE &#39;query_cache_size&#39;;</span></b></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>
			<span  >| 
			Variable_name&nbsp;&nbsp;&nbsp; | Value |</span></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>
			<span  >| 
			query_cache_size | 41984 |</span></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>如果查询缓存大小设置为大于<span>0</span>，<span  >query_cache_type</span>变量影响其工作方式。这个变量可以设置为下面的值：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>0</span>或<span>OFF</span>将阻止缓存或查询缓存结果。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>1</span>或<span>ON</span>将允许缓存，以<span>SELECT 
			SQL_NO_CACHE</span>开始的查询语句除外。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>2</span>或<span  >DEMAND</span>，仅对以<span  >SELECT 
			SQL_CACHE</span>开始的那些查询语句启用缓存。</p>
			<p>设置<span  >query_cache_type</span>变量的<span>GLOBAL</span>值将决定更改后所有连接客户端的缓存行为。具体客户端可以通过设置<span  >query_cache_type</span>变量的会话值控制它们本身连接的缓存行为。例如，一个客户可以禁用自己的查询缓存，方法如下：</p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SET SESSION 
			query_cache_type = OFF;</span></b></p>
			<p>要控制可以被缓存的具体查询结果的最大值，应设置<span  >query_cache_limit</span>变量。
			默认值是<span>1MB</span>。</p>
			<p>
			当一个查询结果（返回给客户端的数据）从查询缓冲中提取期间，它在查询缓存中排序。因此，数据通常不在大的数据块中处理。查询缓存根据数据排序要求分配数据块，因此，当一个数据块用完后分配一个新的数据块。因为内存分配操作是昂贵的<span>(</span>费时的<span>)</span>，所以通过<span  >query_cache_min_res_unit</span>系统变量给查询缓存分配最小值。当查询执行时，最新的结果数据块根据实际数据大小来确定，因此可以释放不使用的内存。根据你的服务器执行查询的类型，你会发现调整<span  >query_cache_min_res_unit</span>变量的值是有用的：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span  >
			query_cache_min_res_unit</span>默认值是<span>4KB</span>。这应该适合大部分情况。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			如果你有大量返回小结果数据的查询，默认数据块大小可能会导致内存碎片，显示为大量空闲内存块。由于缺少内存，内存碎片会强制查询缓存从缓存内存中修整（删除）查询。这时，你应该减少<span  >query_cache_min_res_unit</span>变量的值。空闲块和由于修整而移出的查询的数量通过<span  >Qcache_free_blocks</span>和<span  >Qcache_lowmem_prunes</span>变量的值给出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span>如果大量查询返回大结果（检查 
			<span>Qcache_total_blocks</span>和<span  >Qcache_queries_in_cache</span>状态变量），你可以通过增加<span>query_cache_min_res_unit</span>变量的值来提高性能。但是，注意不要使它变得太大（参见前面的条目）。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="query-cache-status-and-maintenance"></a>
			5.13.4.&nbsp;查询高速缓冲状态和维护</h3></div></div></div>
			<p>可以使用下面的语句检查<span>MySQL</span>服务器是否提供查询缓存功能：</p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SHOW VARIABLES 
			LIKE &#39;have_query_cache&#39;;</span></b></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>
			<span  >| 
			Variable_name&nbsp;&nbsp;&nbsp; | Value |</span></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>
			<span  >| 
			have_query_cache | YES&nbsp;&nbsp; |</span></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>可以使用<span  >FLUSH 
			QUERY CACHE</span>语句来清理查询缓存碎片以提高内存使用性能。该语句不从缓存中移出任何查询。</p>
			<p><span  >RESET 
			QUERY CACHE</span>语句从查询缓存中移出所有查询。<span  >FLUSH 
			TABLES</span>语句也执行同样的工作。</p>
			<p>为了监视查询缓存性能，使用<span>SHOW 
			STATUS</span>查看缓存状态变量：</p>
			<pre><span>mysql&gt; </span><span><b><span>SHOW STATUS LIKE &#39;Qcache%&#39;;</span></b></span></pre>
			<pre><span>+-------------------------+--------+</span></pre>
			<pre><span>|</span>变量名<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span>值<span> |</span></pre>
			<pre><span>+-------------------------+--------+</span></pre>
			<pre><span>| Qcache_free_blocks&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 36&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Qcache_free_memory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 138488 |</span></pre>
			<pre><span>| Qcache_hits&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 79570&nbsp; |</span></pre>
			<pre><span>| Qcache_inserts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 27087&nbsp; |</span></pre>
			<pre><span>| Qcache_lowmem_prunes&nbsp;&nbsp;&nbsp; | 3114&nbsp;&nbsp; |</span></pre>
			<pre><span>| Qcache_not_cached&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 22989&nbsp; |</span></pre>
			<pre><span>| Qcache_queries_in_cache | 415&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Qcache_total_blocks&nbsp;&nbsp;&nbsp;&nbsp; | 912&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-------------------------+--------+</span></pre>
			<p>这些变量的描述见<a href="database-administration.html#server-status-variables" title="5.3.4. Server Status Variables">5.3.4节，“服务器状态变量”</a>。这里描述它们的一些应用。</p>
			<p><span>SELECT</span>查询的总数量等价于：</p>
			<pre><span>Com_select</span></pre>
			<pre><span>+ Qcache_hits</span></pre>
			<pre><span>+ queries with errors found by parser</span></pre>
			<p><span>Com_select</span>的值等价于：</p>
			<pre><span>Qcache_inserts</span></pre>
			<pre><span>+ Qcache_not_cached</span></pre>
			<pre><span>+ queries with errors found during columns/rights check</span></pre>
			<p>查询缓存使用长度可变块，因此<span>Qcache_total_blocks</span>和<span>Qcache_free_blocks</span>可以显示查询缓存内存碎片。执行<span  >FLUSH 
			QUERY CACHE</span>后，只保留一个空闲块。</p>
			<p>
			每个缓存查询至少需要两个块（一个块用于查询文本，一个或多个块用于查询结果）。并且，每一个查询使用的每个表需要一个块。但是，如果两个或多个查询使用相同的表，仅需要分配一个块。</p>
			<p><span>
			Qcache_lowmem_prunes</span>状态变量提供的信息能够帮助你你调整查询缓存的大小。它计算为了缓存新的查询而从查询缓冲区中移出到自由内存中的查询的数目。查询缓冲区使用最近最少使用<span>(LRU)</span>策略来确定哪些查询从缓冲区中移出。调整信息在<a href="database-administration.html#query-cache-configuration" title="5.13.3. Query Cache Configuration">5.13.3节，“查询高速缓冲配置”</a>中给出。</div></div></div><div><hr><p>
      这是MySQL参考手册的翻译版本，关于MySQL参考手册，<span class="GramE">请访问</span><a target="_top"  href="http://dev.mysql.com/doc/mysql/en">dev.mysql.com</a>。 
		原始参考手册为英文版，与英文版参考手册相比，本翻译版可能不是最新的。</p></div>
</body></html>
