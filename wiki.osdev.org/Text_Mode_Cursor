<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Text Mode Cursor - OSDev Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"daeb04b1b9a495873e0dd993","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Text_Mode_Cursor","wgTitle":"Text Mode Cursor","wgCurRevisionId":29094,"wgRevisionId":29094,"wgArticleId":1932,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages using deprecated source tags","Video","Text UI","VGA"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Text_Mode_Cursor","wgRelevantArticleId":1932,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],
"wgMFDisplayWikibaseDescriptions":{"search":false,"nearby":false,"watchlist":false,"tagline":false},"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgVector2022PreviewPages":[],"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgEditSubmitButtonLabelPublish":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.DarkMode.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","mmv.head","mmv.bootstrap.autostart","ext.DarkMode","ext.moderation.notify","ext.moderation.ve","ext.moderation.ajaxhook","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=ext.DarkMode.styles%7Cext.pygments%7Cext.visualEditor.desktopArticleTarget.noscript%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://wiki.osdev.org/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.7"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="OSDev Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="OSDev Wiki Atom feed" href="https://wiki.osdev.org/index.php?title=Special:RecentChanges&amp;feed=atom"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Text_Mode_Cursor rootpage-Text_Mode_Cursor skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Text Mode Cursor</span></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From OSDev Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="Text_Mode_Cursor#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="Text_Mode_Cursor#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><p>In <a href="Text_mode" class="mw-redirect" title="Text mode">text mode</a>, the cursor does not work the same way as in high-level languages, automatically moving to one place after the last written character. Instead, it is simply a blinking area that can be resized, shown, hidden, and moved by the OS.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Text_Mode_Cursor#With_the_BIOS"><span class="tocnumber">1</span> <span class="toctext">With the BIOS</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Text_Mode_Cursor#Enabling_the_Cursor"><span class="tocnumber">1.1</span> <span class="toctext">Enabling the Cursor</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="Text_Mode_Cursor#Disabling_the_Cursor"><span class="tocnumber">1.2</span> <span class="toctext">Disabling the Cursor</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Text_Mode_Cursor#Moving_the_Cursor"><span class="tocnumber">1.3</span> <span class="toctext">Moving the Cursor</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Text_Mode_Cursor#Get_Cursor_Data"><span class="tocnumber">1.4</span> <span class="toctext">Get Cursor Data</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="Text_Mode_Cursor#Without_the_BIOS"><span class="tocnumber">2</span> <span class="toctext">Without the BIOS</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="Text_Mode_Cursor#Enabling_the_Cursor_2"><span class="tocnumber">2.1</span> <span class="toctext">Enabling the Cursor</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Text_Mode_Cursor#Disabling_the_Cursor_2"><span class="tocnumber">2.2</span> <span class="toctext">Disabling the Cursor</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="Text_Mode_Cursor#Moving_the_Cursor_2"><span class="tocnumber">2.3</span> <span class="toctext">Moving the Cursor</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Text_Mode_Cursor#Get_Cursor_Position"><span class="tocnumber">2.4</span> <span class="toctext">Get Cursor Position</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="Text_Mode_Cursor#Font_based_&quot;graphical&quot;_cursor"><span class="tocnumber">3</span> <span class="toctext">Font based "graphical" cursor</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="Text_Mode_Cursor#Used_by"><span class="tocnumber">3.1</span> <span class="toctext">Used by</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="Text_Mode_Cursor#How_to_implement"><span class="tocnumber">3.2</span> <span class="toctext">How to implement</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="Text_Mode_Cursor#A_Note_on_GRUB"><span class="tocnumber">4</span> <span class="toctext">A Note on GRUB</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="Text_Mode_Cursor#See_Also"><span class="tocnumber">5</span> <span class="toctext">See Also</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="Text_Mode_Cursor#External_Links"><span class="tocnumber">5.1</span> <span class="toctext">External Links</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="With_the_BIOS">With the <a href="BIOS" title="BIOS">BIOS</a></span></h2>
<p>To manipulate the cursor with the BIOS, use int 0x10, the interrupt for screen functions.
</p>
<h3><span class="mw-headline" id="Enabling_the_Cursor">Enabling the Cursor</span></h3>
<p>Enabling the cursor also allows you to set the start and end scanlines, the rows where the cursor starts and ends. The highest scanline is 0 and the lowest scanline is the maximum scanline (usually 15).
</p>
<ul><li>AH = 0x01</li>
<li>CH = start scanline</li>
<li>CL = end scanline</li></ul>
<h3><span class="mw-headline" id="Disabling_the_Cursor">Disabling the Cursor</span></h3>
<ul><li>AH = 0x01</li>
<li>CH = 0x3F (bits 6-7 unused, bit 5 disables cursor, bits 0-4 control cursor shape)</li></ul>
<h3><span class="mw-headline" id="Moving_the_Cursor">Moving the Cursor</span></h3>
<ul><li>AH = 0x02</li>
<li>BH = display page (usually, if not always 0)</li>
<li>DH = row</li>
<li>DL = column</li></ul>
<h3><span class="mw-headline" id="Get_Cursor_Data">Get Cursor Data</span></h3>
<ul><li>AH = 0x03</li>
<li>BH = display page (usually, if not always 0)</li></ul>
<p>The return values:
</p>
<ul><li>CH = start scanline</li>
<li>CL = end scanline</li>
<li>DH = row</li>
<li>DL = column</li></ul>
<h2><span class="mw-headline" id="Without_the_BIOS">Without the <a href="BIOS" title="BIOS">BIOS</a></span></h2>
<p>Without BIOS access, manipulating the cursor requires sending data directly to the hardware.
</p>
<h3><span class="mw-headline" id="Enabling_the_Cursor_2">Enabling the Cursor</span></h3>
<p>Enabling the cursor also allows you to set the start and end scanlines, the rows where the cursor starts and ends. The highest scanline is 0 and the lowest scanline is the maximum scanline (usually 15).
</p><p><b>Source in C</b>
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">enable_cursor</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">cursor_start</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">cursor_end</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0A</span><span class="p">);</span><span class="w"></span>
<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D5</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">inb</span><span class="p">(</span><span class="mh">0x3D5</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xC0</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cursor_start</span><span class="p">);</span><span class="w"></span>

<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">);</span><span class="w"></span>
<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D5</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">inb</span><span class="p">(</span><span class="mh">0x3D5</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xE0</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cursor_end</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h3><span class="mw-headline" id="Disabling_the_Cursor_2">Disabling the Cursor</span></h3>
<p><b>Source in C</b>
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">disable_cursor</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0A</span><span class="p">);</span><span class="w"></span>
<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D5</span><span class="p">,</span><span class="w"> </span><span class="mh">0x20</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p><b>Source in Assembly</b>
</p>
<div class="mw-highlight mw-highlight-lang-asm mw-content-ltr" dir="ltr"><pre><span></span><span class="nl">disable_cursor:</span><span class="w"></span>
<span class="w">	</span><span class="nf">pushf</span><span class="w"></span>
<span class="w">	</span><span class="nf">push</span><span class="w"> </span><span class="no">eax</span><span class="w"></span>
<span class="w">	</span><span class="nf">push</span><span class="w"> </span><span class="no">edx</span><span class="w"></span>

<span class="w">	</span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">0x3D4</span><span class="w"></span>
<span class="w">	</span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0xA</span><span class="w">	</span><span class="c1">; low cursor shape register</span>
<span class="w">	</span><span class="nf">out</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">al</span><span class="w"></span>

<span class="w">	</span><span class="nf">inc</span><span class="w"> </span><span class="no">dx</span><span class="w"></span>
<span class="w">	</span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0x20</span><span class="w">	</span><span class="c1">; bits 6-7 unused, bit 5 disables the cursor, bits 0-4 control the cursor shape</span>
<span class="w">	</span><span class="nf">out</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">al</span><span class="w"></span>

<span class="w">	</span><span class="nf">pop</span><span class="w"> </span><span class="no">edx</span><span class="w"></span>
<span class="w">	</span><span class="nf">pop</span><span class="w"> </span><span class="no">eax</span><span class="w"></span>
<span class="w">	</span><span class="nf">popf</span><span class="w"></span>
<span class="w">	</span><span class="nf">ret</span><span class="w"></span>
</pre></div>
<h3><span class="mw-headline" id="Moving_the_Cursor_2">Moving the Cursor</span></h3>
<p>Keep in mind that you don't need to update the cursor's location every time a new character is displayed. It would be faster to instead only update it after printing an entire string.
</p><p><b>Source in C</b>
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">update_cursor</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">VGA_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>

<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">);</span><span class="w"></span>
<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D5</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">pos</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">));</span><span class="w"></span>
<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0E</span><span class="p">);</span><span class="w"></span>
<span class="w">	</span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D5</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">)</span><span class="w"> </span><span class="p">((</span><span class="n">pos</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p><b>Source in Assembly</b>
</p>
<div class="mw-highlight mw-highlight-lang-asm mw-content-ltr" dir="ltr"><pre><span></span><span class="nl">Cursor:</span><span class="w"></span>
<span class="nf">VGA.Width</span><span class="w"> </span><span class="no">equ</span><span class="w"> </span><span class="mi">80</span><span class="w"></span>

<span class="nl">.SetCoords:</span><span class="w"></span>
<span class="c1">; input bx = x, ax = y</span>
<span class="c1">; modifies ax, bx, dx</span>

<span class="w">	</span><span class="nf">mov</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="no">VGA.Width</span><span class="w"></span>
<span class="w">	</span><span class="nf">mul</span><span class="w"> </span><span class="no">dl</span><span class="w"></span>
<span class="w">	</span><span class="nf">add</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span><span class="w"></span>

<span class="nl">.SetOffset:</span><span class="w"></span>
<span class="c1">; input bx = cursor offset</span>
<span class="c1">; modifies al, dx</span>

<span class="w">	</span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">0x03D4</span><span class="w"></span>
<span class="w">	</span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0x0F</span><span class="w"></span>
<span class="w">	</span><span class="nf">out</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">al</span><span class="w"></span>

<span class="w">	</span><span class="nf">inc</span><span class="w"> </span><span class="no">dl</span><span class="w"></span>
<span class="w">	</span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">bl</span><span class="w"></span>
<span class="w">	</span><span class="nf">out</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">al</span><span class="w"></span>

<span class="w">	</span><span class="nf">dec</span><span class="w"> </span><span class="no">dl</span><span class="w"></span>
<span class="w">	</span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0x0E</span><span class="w"></span>
<span class="w">	</span><span class="nf">out</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">al</span><span class="w"></span>

<span class="w">	</span><span class="nf">inc</span><span class="w"> </span><span class="no">dl</span><span class="w"></span>
<span class="w">	</span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">bh</span><span class="w"></span>
<span class="w">	</span><span class="nf">out</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">al</span><span class="w"></span>
<span class="w">	</span><span class="nf">ret</span><span class="w"></span>
</pre></div>
<h3><span class="mw-headline" id="Get_Cursor_Position">Get Cursor Position</span></h3>
<p>With this code, you get: <tt>pos = y * VGA_WIDTH + x</tt>. To obtain the coordinates, just calculate: <tt>y = pos / VGA_WIDTH; x = pos&#160;% VGA_WIDTH;</tt>.
</p><p><b>Source in C</b>
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">uint16_t</span><span class="w"> </span><span class="nf">get_cursor_position</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pos</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">inb</span><span class="p">(</span><span class="mh">0x3D5</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">outb</span><span class="p">(</span><span class="mh">0x3D4</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0E</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pos</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">((</span><span class="kt">uint16_t</span><span class="p">)</span><span class="n">inb</span><span class="p">(</span><span class="mh">0x3D5</span><span class="p">))</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h2><span id="Font_based_.22graphical.22_cursor"></span><span class="mw-headline" id="Font_based_&quot;graphical&quot;_cursor">Font based "graphical" cursor</span></h2>
<h3><span class="mw-headline" id="Used_by">Used by</span></h3>
<p>Back in the DOS days it was quite common not to use the hardware VGA cursor at all, instead overriding the VGA fonts to create an arrow pointer just like in graphical modes. This technique was used in <a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/Norton_Utilities">Norton Utilities</a> or the DOS version of <a href="Norton_Diskedit" title="Norton Diskedit">Norton Diskedit</a> for example.
</p><p><a href="./File:Itmouse.png" class="image" title="Arrow cursor in text mode"><img alt="Arrow cursor in text mode" src="images/9/95/Itmouse.png" decoding="async" width="240" height="160" data-file-width="240" data-file-height="160" /></a>
</p><p>You can easily spot this font altering cursor by the cursor color: as only the fonts are altered and the attribute bytes are untouched, the pointer changes color as you move it around.
</p><p>Here's another example from the Screenshots forum <a rel="nofollow" class="external text" href="https://forum.osdev.org/download/file.php?id=2264&amp;mode=view">TUI with 8x8 characters and pointing finger-shaped cursor</a>
</p>
<h3><span class="mw-headline" id="How_to_implement">How to implement</span></h3>
<p>The basic principle is to store 4 bytes (2x2) from the screen, copy their <a href="VGA_Fonts" title="VGA Fonts">VGA Fonts</a> to some unused box drawing characters (0xC0 - 0xDF), OR mask the arrow onto then write those 2x2 box drawing characters on screen. Then when the mouse moved, the original 4 bytes are restored on screen, and the whole procedure repeated on the new position.
</p><p>It is important to use box drawing characters, because normally VGA displays fonts as 9x16, adding an empty 9th column, which would cause a "gap" in the pointer. With the box drawing characters that 9th column is a copy of the 8th column, and therefore does not cut the pointer in half. If you use 8x8 characters (like 80x50 or 132x50 modes) then there are no character separator columns, and you are free to use any character you like. On the forum example above you can spot the cursor on the ASCII table at characters 0xF0 - 0xF3.
</p><p>Although the arrow size is the same as one character (typically 8x16 or 8x8), as the pointer can be moved with pixel precision it can overlap with the next character both horizontally and vertically, thus giving the total 4 bytes requirement:
</p>
<pre>char 1   attr 1   char 2   attr 2 
........|????????|........|????????       first line
........|????????|........|????????       (note attribute bytes are untouched)
........|????????|........|????????
....x...|????????|........|????????
....xx..|????????|........|????????
....xxx.|????????|........|????????
....xxxx|????????|........|????????
....xxxx|????????|x.......|????????
--------+--------+--------+--------
....xxxx|????????|xx......|????????       second line
....xxxx|????????|xxx.....|????????
....xxxx|????????|xxxx....|????????
.......x|????????|x.......|????????
.......x|????????|x.......|????????
........|????????|xx......|????????
........|????????|........|????????
........|????????|........|????????
char 3   attr 3   char 4   attr 4
</pre>
<p>You can read the VGA Fonts with BIOS, or if you're already in protected mode, with VGA registers. Read <a href="VGA_Fonts" title="VGA Fonts">VGA Fonts</a> article for more information.
</p><p>The character positions are calculated by dividing mouse coordinates by font size: cx = mx / 8 and cy = my / 16. Then you calculate my&#160;% 16 to get the first byte of the font glyph to be modified, and mx&#160;% 8 to get the shift value by which you have to shift the arrow mask.
</p>
<h2><span class="mw-headline" id="A_Note_on_GRUB">A Note on GRUB</span></h2>
<p>If the timeout is set to 0 in your grub.cfg, the cursor will be disabled and you will need to enable it yourself. Otherwise, <a href="GRUB" title="GRUB">GRUB</a> will enable the cursor for you. Because of this inconsistency, it is a good idea to always enable the cursor. Even if you don't set the timeout to 0, you might want to in the future, or someone might change it on their system.
</p>
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<ul><li><a href="VGA_Hardware" title="VGA Hardware">VGA Hardware</a></li>
<li><a href="Text_UI" title="Text UI">Text UI</a></li></ul>
<h3><span class="mw-headline" id="External_Links">External Links</span></h3>
<ul><li><a rel="nofollow" class="external free" href="http://www.osdever.net/FreeVGA/vga/textcur.htm">http://www.osdever.net/FreeVGA/vga/textcur.htm</a></li>
<li><a rel="nofollow" class="external free" href="https://web.archive.org/web/20080731014051/http://www.bookcase.com:80/library/dos/ints/int10.html">https://web.archive.org/web/20080731014051/http://www.bookcase.com:80/library/dos/ints/int10.html</a></li>
<li><a rel="nofollow" class="external free" href="https://web.archive.org/web/20120324083032/http://www.arl.wustl.edu/~lockwood/class/cs306/books/artofasm/Chapter_13/CH13-2.html">https://web.archive.org/web/20120324083032/http://www.arl.wustl.edu/~lockwood/class/cs306/books/artofasm/Chapter_13/CH13-2.html</a></li>
<li><a rel="nofollow" class="external free" href="https://en.wikipedia.org/wiki/VGA-compatible_text_mode">https://en.wikipedia.org/wiki/VGA-compatible_text_mode</a></li></ul>
<!-- 
NewPP limit report
Cached time: 20250212005754
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.050 seconds
Real time usage: 0.833 seconds
Preprocessor visited node count: 91/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 14108/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:1932-0!canonical and timestamp 20250212005753 and revision id 29094.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.osdev.org/index.php?title=Text_Mode_Cursor&amp;oldid=29094">https://wiki.osdev.org/index.php?title=Text_Mode_Cursor&amp;oldid=29094</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://wiki.osdev.org/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li><li><a href="./Category:Video" title="Category:Video">Video</a></li><li><a href="./Category:Text_UI" title="Category:Text UI">Text UI</a></li><li><a href="./Category:VGA" title="Category:VGA">VGA</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-login" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Special:UserLogin&amp;returnto=Text+Mode+Cursor" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li><li id="pt-darkmode" class="mw-list-item"><a href="Text_Mode_Cursor#" class="ext-darkmode-link"><span>Dark mode</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="Text_Mode_Cursor" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="mw-list-item"><a href="./Talk:Text_Mode_Cursor" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="Text_Mode_Cursor"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Text_Mode_Cursor&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Text_Mode_Cursor&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="https://wiki.osdev.org/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search OSDev Wiki" aria-label="Search OSDev Wiki" autocapitalize="sentences" title="Search OSDev Wiki [f]" accesskey="f" id="searchInput"
				>
				<input type="hidden" name="title" value="Special:Search">
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="index.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-mainpage" class="mw-list-item"><a href="index.html" title="Visit the main page [z]" accesskey="z"><span>Main Page</span></a></li><li id="n-portal" class="mw-list-item"><a href="http://forum.osdev.org/" rel="nofollow" title="About the project, what you can do, where to find things"><span>Forums</span></a></li><li id="n-FAQ" class="mw-list-item"><a href="./Category:FAQ"><span>FAQ</span></a></li><li id="n-OS-Projects" class="mw-list-item"><a href="Projects"><span>OS Projects</span></a></li><li id="n-randompage" class="mw-list-item"><a href="https://wiki.osdev.org/Special:Random" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-about" class="vector-menu mw-portlet mw-portlet-about vector-menu-portal portal" aria-labelledby="p-about-label" role="navigation"  >
	<h3
		id="p-about-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">About</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-This-site" class="mw-list-item"><a href="./OSDevWiki:About"><span>This site</span></a></li><li id="n-Joining" class="mw-list-item"><a href="./OSDevWiki:Joining"><span>Joining</span></a></li><li id="n-Editing-help" class="mw-list-item"><a href="./OSDevWiki:Editing"><span>Editing help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="./Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li></ul>
		
	</div>
</nav>


<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="./Special:WhatLinksHere/Text_Mode_Cursor" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="https://wiki.osdev.org/Special:RecentChangesLinked/Text_Mode_Cursor" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="./Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Text_Mode_Cursor&amp;oldid=29094" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Text_Mode_Cursor&amp;action=info" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 7 June 2024, at 13:39.</li>
	<li id="footer-info-0">This page has been accessed 14,184 times.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="./OSDev_Wiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="./OSDev_Wiki:About">About OSDev Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="./OSDev_Wiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://wiki.osdev.org/index.php?title=Text_Mode_Cursor&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.050","walltime":"0.833","ppvisitednodes":{"value":91,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":14108,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20250212005754","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":94});});</script>
</body>
</html>