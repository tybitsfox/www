<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>File Systems - OSDev Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"769af91b593d7524317f051c","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"File_Systems","wgTitle":"File Systems","wgCurRevisionId":29327,"wgRevisionId":29327,"wgArticleId":1505,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages using duplicate arguments in template calls","Tone","In Progress","OS theory","Filesystems"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"File_Systems","wgRelevantArticleId":1505,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],
"wgRestrictionMove":[],"wgRedirectedFrom":"Filesystem","wgMFDisplayWikibaseDescriptions":{"search":false,"nearby":false,"watchlist":false,"tagline":false},"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgVector2022PreviewPages":[],"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgInternalRedirectTargetUrl":"/File_Systems","wgEditSubmitButtonLabelPublish":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","skins.vector.styles.legacy":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.DarkMode.styles":"ready"};RLPAGEMODULES=["mediawiki.action.view.redirect","site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","mmv.head","mmv.bootstrap.autostart","ext.DarkMode","ext.moderation.notify","ext.moderation.ve","ext.moderation.ajaxhook","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=ext.DarkMode.styles%7Cext.visualEditor.desktopArticleTarget.noscript%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://wiki.osdev.org/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.7"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="OSDev Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="OSDev Wiki Atom feed" href="https://wiki.osdev.org/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<link rel="canonical" href="File_Systems"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-File_Systems rootpage-File_Systems skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">File Systems</span></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From OSDev Wiki</div>
		<div id="contentSub"><span class="mw-redirectedfrom">(Redirected from <a href="https://wiki.osdev.org/index.php?title=Filesystem&amp;redirect=no" class="mw-redirect" title="Filesystem">Filesystem</a>)</span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="Filesystem#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="Filesystem#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><center>
<table style="border: 1px solid #cfcfbf; margin-top: 25px; margin-bottom: 25px; background-color: #f0f0ff; text-align: center;">
<tbody><tr>
<td>
<p>This article's <b>tone or style</b> may not reflect the encyclopedic tone used throughout the wiki. See <a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/Wikipedia:Writing_better_articles#Tone">Wikipedia's article on tone</a> for suggestions.
</p>
</td></tr></tbody></table>
</center>
<table style="font-size:95%; line-height:1.5em; padding:0.25em; float:right; margin: 0 0 8px 15px; clear: right; border:1px solid #aaaaaa; background:#eee; text-align:center; width:200px; ;"><tbody><tr><th style="background:#ffce7b; padding:0.3em; font-size:1.1em;"><a class="mw-selflink selflink">Filesystems</a></th></tr><tr><th>Virtual Filesystems</th></tr><tr><td><div>
<p><a href="VFS" title="VFS">VFS</a><br />
</p>
</div></td></tr><tr><th>Disk Filesystems</th></tr><tr><td><div>
<p><a href="FAT" title="FAT">FAT</a> <a href="FAT12" class="mw-redirect" title="FAT12">12</a>/<a href="FAT16" class="mw-redirect" title="FAT16">16</a>/<a href="FAT32" class="mw-redirect" title="FAT32">32</a>, <a href="VFAT" class="mw-redirect" title="VFAT">VFAT</a>, <a href="ExFAT" title="ExFAT">ExFAT</a><br />
<a href="Ext2" title="Ext2">Ext 2</a>/<a href="Ext3" title="Ext3">3</a>/<a href="Ext4" title="Ext4">4</a><br />
<a href="LEAN" title="LEAN">LEAN</a><br />
<a href="HPFS" title="HPFS">HPFS</a><br />
<a href="NTFS" title="NTFS">NTFS</a><br />
<a href="HFS" title="HFS">HFS</a><br />
<a href="HFS+" title="HFS+">HFS+</a><br />
<a href="MFS" title="MFS">MFS</a><br />
<a href="ReiserFS" title="ReiserFS">ReiserFS</a><br />
<a href="FFS_(Amiga)" title="FFS (Amiga)">FFS (Amiga)</a><br />
<a href="FFS_(BSD)" class="mw-redirect" title="FFS (BSD)">FFS (BSD)</a>/<a href="UFS" title="UFS">UFS</a><br />
<a href="BeFS" title="BeFS">BeFS</a><br />
<a href="BFS" title="BFS">BFS</a><br />
<a href="XFS" title="XFS">XFS</a><br />
<a href="SFS" title="SFS">SFS</a><br />
<a href="ZDSFS" title="ZDSFS">ZDSFS</a><br />
<a href="ZFS" title="ZFS">ZFS</a><br />
<a href="USTAR" title="USTAR">USTAR</a><br />
</p>
</div></td></tr><tr><th>CD/DVD Filesystems</th></tr><tr><td><div>
<p><a href="ISO_9660" title="ISO 9660">ISO 9660</a><br />
<a href="Joliet" title="Joliet">Joliet</a><br />
<a href="UDF" title="UDF">UDF</a><br />
</p>
</div></td></tr><tr><th><a href="./Category:Network_Filesystems" title="Category:Network Filesystems">Network Filesystems</a></th></tr><tr><td><div>
<p><a href="NFS" title="NFS">NFS</a><br />
<a href="RFS" title="RFS">RFS</a><br />
<a href="AFS" title="AFS">AFS</a><br />
</p>
</div></td></tr><tr><th>Flash Filesystems</th></tr><tr><td><div>
<p><a href="JFFS2" title="JFFS2">JFFS2</a><br />
<a href="YAFFS" title="YAFFS">YAFFS</a><br />
</p>
</div></td></tr></tbody></table>
<p>File systems are the operating system's method of ordering data on persistent storage devices like disks. They provide an abstracted interface to access data on these devices in such a way that it can be read or modified efficiently. Which file system is convenient depends on the target application of the operating system. For example, Windows uses the FAT32 or NTFS file system. If a disk has a large capacity, FAT32 is inconvenient, because the FAT system was designed considering the smaller disks available at that time. At the same time, an NTFS file system is not convenient on a tiny disk, because it was designed to work with large volumes of data - there would be excessive overhead when using devices such as a 1.44 MB floppy disk.
</p><p>For details on specific filesystems, browse <a href="./Category:Filesystems" title="Category:Filesystems">this list</a> of filesystems.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Filesystem#File_System_Theory"><span class="tocnumber">1</span> <span class="toctext">File System Theory</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Filesystem#Indexing_Methods"><span class="tocnumber">1.1</span> <span class="toctext">Indexing Methods</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="Filesystem#inodes"><span class="tocnumber">1.1.1</span> <span class="toctext">inodes</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="Filesystem#FAT"><span class="tocnumber">1.1.2</span> <span class="toctext">FAT</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="Filesystem#Workings_of_File_Systems"><span class="tocnumber">2</span> <span class="toctext">Workings of File Systems</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="Filesystem#Allocation_Table"><span class="tocnumber">2.1</span> <span class="toctext">Allocation Table</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="Filesystem#Separate_file_and_system_areas"><span class="tocnumber">2.2</span> <span class="toctext">Separate file and system areas</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Filesystem#Other_methods"><span class="tocnumber">2.3</span> <span class="toctext">Other methods</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="Filesystem#Network_File_Systems"><span class="tocnumber">3</span> <span class="toctext">Network File Systems</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="Filesystem#File_systems_for_OSDevers"><span class="tocnumber">4</span> <span class="toctext">File systems for OSDevers</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="Filesystem#&quot;Beginners&quot;_filesystems"><span class="tocnumber">4.1</span> <span class="toctext">"Beginners" filesystems</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="Filesystem#Rolling_your_own"><span class="tocnumber">4.2</span> <span class="toctext">Rolling your own</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="Filesystem#Guidelines_if_you_do_decide_to_roll_your_own"><span class="tocnumber">4.2.1</span> <span class="toctext">Guidelines if you do decide to roll your own</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="Filesystem#Expert_filesystems"><span class="tocnumber">4.3</span> <span class="toctext">Expert filesystems</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="Filesystem#See_Also"><span class="tocnumber">5</span> <span class="toctext">See Also</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="Filesystem#External_links"><span class="tocnumber">5.1</span> <span class="toctext">External links</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="File_System_Theory">File System Theory</span></h2>
<center>
<table style="border: 1px solid #cfcfbf; margin-top: 25px; margin-bottom: 25px; background-color: #f0f0ff; text-align: center;">
<tbody><tr>
<td>
<p><a href="./File:Under_Construction.png" class="image" title="This page is under construction!"><img alt="This page is under construction!" src="images/1/14/Under_Construction.png" decoding="async" width="50" height="50" data-file-width="50" data-file-height="50" /></a>
This page or section is a work in progress and may thus be incomplete. Its content may be changed in the near future.
</p>
</td>
<td>
</td></tr></tbody></table>
</center>
<p>A filesystem provides a generalized structure over persistent storage, allowing the low-level structure of the devices (e.g., disk, tape, flash memory storage) to be abstracted away. Generally speaking, the goal of a filesystem is allowing logical groups of data to be organized into <i>files</i>, which can be manipulated as a unit. In order to do this, the filesystem must provide some sort of index of the locations of files in the actual secondary storage. The fundamental operations of any filesystem are:
</p>
<ul><li>Tracking the available storage space</li>
<li>Tracking which block or blocks of data belong to which files</li>
<li>Creating new files</li>
<li>Reading data from existing files into memory</li>
<li>Updating the data in the files</li>
<li>Deleting existing files</li></ul>
<p>(Perceptive readers will note that the last four operations - Create, Read, Update, and Delete, or CRUD - are also applicable to many other data structures, and are fundamental to databases as well as filesystems.)
</p><p>Additionally, there are other features which go along with a practical filesystem:
</p>
<ul><li>Assigning human-readable names to files, and renaming files after creation</li>
<li>Allowing files to be divided among non-contiguous blocks in storage, and tracking the parts of files even when they are <i>fragmented</i> across the medium</li>
<li>Providing some form of hierarchical structure, allowing the files to be divided into <i>directories</i> or <i>folders</i></li>
<li>Buffering reading and writing to reduce the number of actual operation on the physical medium</li>
<li>Caching frequently accessed files or parts of files to speed up access</li>
<li>Allowing files to be marked as 'read-only' to prevent unintentional corruption of critical data</li>
<li>Providing a mechanism for preventing unauthorized access to a user's files</li></ul>
<p>Additional features may be found on some filesystems as well, such as automatic encryption, or journalling of read/write activity.
</p>
<h3><span class="mw-headline" id="Indexing_Methods">Indexing Methods</span></h3>
<p>There are several methods of indexing the contents of files, with the most commonly used being <i>i-nodes</i> and <i>File Allocation Tables</i>.
</p>
<h4><span class="mw-headline" id="inodes">inodes</span></h4>
<p>inodes (information nodes) are a crucial design element in most Unix file systems: Each file is made of data blocks (the sectors that contains your raw data bits), index blocks (containing pointers to data blocks so that you know which sector is the nth in the sequence), and one inode block.
</p><p>The inode is the root of the index blocks, and can also be the sole index block if the file is small enough. Moreover, as Unix file systems support hard links (the same file may appear several times in the directory tree), inodes are a natural place to store Metadata such as file size, owner, creation/access/modification times, locks, etc.
</p>
<h4><span class="mw-headline" id="FAT">FAT</span></h4>
<p>The File Allocation Table (<a href="FAT" title="FAT">FAT</a>) is the primary indexing mechanism for MS-DOS and it's descendants. There are several variants on FAT, but the general design is to have a table (actually a pair of tables, one serving as a backup for the first in case it is corrupted) which holds a list of blocks of a given size, which map to the whole capacity of the disk.
</p>
<h2><span class="mw-headline" id="Workings_of_File_Systems">Workings of File Systems</span></h2>
<p>There are several common approaches to storing disk information. However, in comparison to <a href="Memory_Management" class="mw-redirect" title="Memory Management">memory management</a>, there are some key differences in managing disk media:
</p>
<ul><li>Data can only be written in fixed size chunks.</li>
<li>Access times are different for different locations on the disk. Seeking is usually a costly operation.</li>
<li>Data throughput is very small compared to RAM</li>
<li>Data commonly has to be maintained</li></ul>
<p>Hence some file systems have specialized structures, algorithms, or combinations thereof to improve speed ratings.
</p>
<h3><span class="mw-headline" id="Allocation_Table">Allocation Table</span></h3>
<p>The allocation table is comparable to the bitmap approach. However instead of just having a field free or occupied, it may contain other information. Advantage is that the use of this structure is simple, Disadvantage is that this approach is relatively slow, and a separate set of data is needed to define the which sections are used, and in which order.
<a href="FAT" title="FAT">FAT</a> for example, combines a linked list and an allocation table in the same structure. 
</p>
<h3><span class="mw-headline" id="Separate_file_and_system_areas">Separate file and system areas</span></h3>
<p>Some filesystems keep metadata and actual contents in separate areas on the disk. This makes specific sorts of data easy to find, as well as allowing for a special 'free' area. Downside is that you have to keep track of the boundary or boundaries between these areas, as the usage can differ and the disk has to adapt for that (big files: more data, less metadata; small files: less data, more metadata).
This method is used prominently in <a href="SFS" title="SFS">SFS</a>.
</p>
<h3><span class="mw-headline" id="Other_methods">Other methods</span></h3>
<center>
<table style="border: 1px solid #cfcfbf; margin-top: 25px; margin-bottom: 25px; background-color: #f0f0ff; text-align: center;">
<tbody><tr>
<td>
<p><a href="./File:Under_Construction.png" class="image" title="This page is under construction!"><img alt="This page is under construction!" src="images/1/14/Under_Construction.png" decoding="async" width="50" height="50" data-file-width="50" data-file-height="50" /></a>
This page or section is a work in progress and may thus be incomplete. Its content may be changed in the near future.
</p>
</td>
<td>
</td></tr></tbody></table>
</center>
<h2><span class="mw-headline" id="Network_File_Systems">Network File Systems</span></h2>
<p>All these file systems are a way to create a large, distributed storage system from a collection of "back end" systems. That means you cannot (for instance) format a disk in 'NFS' but you instead mount a 'virtual' NFS partition that will reflect what's on another machine. Note that a new generation of file systems is under heavy research, basing on latest P2P, cryptography and error correction techniques (such as the Ocean Store Project or Archival Intermemory.)
</p><p>For details on various network file systems <a href="./Category:Network_Filesystems" title="Category:Network Filesystems">look here</a>
</p>
<h2><span class="mw-headline" id="File_systems_for_OSDevers">File systems for OSDevers</span></h2>
<p>While you could pick &lt;insert favorite filesystem here&gt; as your OS main filesystem, you might want to consider all options. Commonly, you'll want to have a filesystem that is operational very quickly so that you can concentrate on the rest before implementing a 'real filesystem'
</p>
<h3><span id=".22Beginners.22_filesystems"></span><span class="mw-headline" id="&quot;Beginners&quot;_filesystems">"Beginners" filesystems</span></h3>
<p>There are only five filesystems that are both relatively easy to implement and worth to consider. There is no general recommendation as the choice depends largely on style and OS design. Instead you can read the comparison and make your own educated decision.
</p><p><b><a href="USTAR" title="USTAR">USTAR</a></b>
</p>
<ul><li><code>+</code> Of these beginner "filesystems", this is the simplest by far to implement</li>
<li><code>+</code> Incredibly simple: a sector with metadata followed by data sectors</li>
<li><code>+</code> Widely used: utilities to create tar images are available for every mainstream OS and many minor ones</li>
<li><code>+</code> Supports special files (like devices and symlinks)</li>
<li><code>+</code> Supports Unix permissions</li>
<li><code>-</code> Not a filesystem in the common understanding of the term</li>
<li><code>-</code> Generally read-only, was never designed for in-place modifications</li>
<li><code>-</code> No support for fragmentation</li>
<li><code>-</code> No standard partition type for it (not that you should even consider using USTAR as a disk partition format)</li>
<li><code>-</code> Not actually the format used for ramdisks by things like Linux - that's CPIO</li></ul>
<p><b>RAMFS/TMPFS</b>
</p>
<ul><li><code>+</code> High flexibility of implementation</li>
<li><code>+</code> Fast</li>
<li><code>+</code> Will allow you to test out your VFS API without having to rely on filesystem specifics</li>
<li><code>+</code> *Highly* recommended as a starter filesystem to avoid morphing your VFS interface around a specific filesystem</li>
<li><code>+</code> Ideal to unpack a <a href="USTAR" title="USTAR">USTAR</a> or <a href="https://wiki.osdev.org/index.php?title=CPIO&amp;action=edit&amp;redlink=1" class="new" title="CPIO (page does not exist)">CPIO</a> <a href="Initrd" title="Initrd">initrd</a> image into</li>
<li><code>-</code> Changes are, obviously, not persistent, and only in memory, to be wiped after a reboot</li></ul>
<p><b><a href="FAT" title="FAT">FAT</a></b>
</p>
<ul><li><code>+</code> Can be read and written by virtually all OSes</li>
<li><code>+</code> The 'standard' for floppies</li>
<li><code>+</code> Relatively easy to implement</li>
<li><code>-</code> Part of it involving long filenames and compatibility is <a rel="nofollow" class="external text" href="http://en.swpat.org/wiki/Microsoft_FAT_patents">patented by Microsoft</a></li>
<li><code>-</code> Large overhead</li>
<li><code>-</code> No support for large (&gt;4 GB) files</li>
<li><code>-</code> No support for Unix permissions</li></ul>
<p><b><a href="Ext2" title="Ext2">Ext2</a></b>
</p>
<ul><li><code>+</code> Supports large files (with an extension)</li>
<li><code>+</code> Supports Unix permissions</li>
<li><code>+</code> Can be put on floppies</li>
<li><code>+</code> Can be read and written from Linux</li>
<li><code>-</code> Can not natively be read and written from Windows (but <a rel="nofollow" class="external text" href="http://www.fs-driver.org/">drivers</a> are available)</li>
<li><code>-</code> Very large overhead</li>
<li><code>-</code> Of these beginner filesystems, this is the most complex</li></ul>
<p><b><a href="BMFS" title="BMFS">BMFS</a></b>
</p>
<ul><li><code>+</code> Supports large files</li>
<li><code>+</code> Implementation Available as static library</li>
<li><code>+</code> Comes with utility program for creating disk images on Linux and Windows</li>
<li><code>+</code> Comes with FUSE bindings, allowing it to be mounted on Linux systems</li>
<li><code>+</code> Contains source code documentation</li>
<li><code>-</code> Does not support fragmentation</li>
<li><code>-</code> Less control over the source code</li></ul>
<p><b><a href="ISO_9660" title="ISO 9660">ISO 9660</a></b>
The defined standard for CDs. If you boot from CD then this is the way to go. If not, don't make it your first filesystem.
</p>
<h3><span class="mw-headline" id="Rolling_your_own">Rolling your own</span></h3>
<p>There are many different kinds of filesystems around, from the well-known to the more obscure ones. The most unfortunate thing about filesystems is that every hobbyist OS programmer thinks that the filesystem they design is the ultimate technology, when in reality it's usually just a copy of FAT with a change here and there, perhaps because it is one of the easiest to implement. The world doesn't need another FAT-like filesystem. Investigate all the possibilities before you decide to roll your own.
</p><p>If despite of this warning you decide to create your own file system, then you should start that by implementing a <a href="FUSE" title="FUSE">FUSE</a> driver for it. This gives the advantage that you can mount your file system image as any other storage device, and you can lists its contents, create new files and directories etc. with standard tools. FUSE is available for Linux, MacOSX and Windows as well.
</p>
<h4><span class="mw-headline" id="Guidelines_if_you_do_decide_to_roll_your_own">Guidelines if you do decide to roll your own</span></h4>
<ul><li>Consider carefully what it will be used for.</li>
<li>Use a program to figure out the layout (e.g. a spreadsheet). The basic areas needed are:
<ul><li>Bootsector.  This is essential for booting on some systems such as BIOS-x86 and Atari ST, unnecessary for others such as UEFI and OpenFirmware. Even if you don't intend to boot on systems which require it, reserving the first sector will allow your OS to be ported to them at a later time. Note that reserving space for a MBR-like partition table is needed to allow the filesystem to work in "logical partitions".</li>
<li>Partition metadata. This could fit into the first sector with the boot code, or be a separate group of sectors at a specific location. (FAT puts it in the first sector, calling it the FAT parameter block. ext* use a separate location, calling it the superblock.) At a minimum, this should contain the filesystem size, location of the file table, and a version number.  Leave plenty of reserved space for features you don't think of. If you put it in the first sector, don't forget to leave space for a jmp instruction, the boot code, and a partition table!</li>
<li>File table.  Don't think of this as just a simple table containing a list of files and their locations.  One idea is, instead of storing files, the system would store file parts, and the file table would list the parts in each file.  This would be useful for saving space if many files on the disk are the same or similar (for example, license agreements).</li>
<li>Data area.  Files will be stored here.</li></ul></li>
<li>Create a program to read and write disk images with your filesystem.  Parts of this will be portable into the fs driver.</li>
<li>It is strongly recommended to create a <a href="FUSE" title="FUSE">FUSE</a> driver for your file system.</li>
<li>Implement the fs into your OS.</li></ul>
<h3><span class="mw-headline" id="Expert_filesystems">Expert filesystems</span></h3>
<p>Once you have a beginner's file system under your belt you might want support for more advanced ones. Here are some:
</p>
<ul><li><a href="NTFS" title="NTFS">NTFS</a> - (Windows) New Technologies File System. It's hard to find documentation. Try <a rel="nofollow" class="external text" href="http://www.opensource.apple.com/source/ntfs/">Apple NTFS (open source)</a>.</li>
<li>Btrfs - B-tree file system. It's a Linux file system with features such as copy-on-write and transparent compression.</li></ul>
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<ul><li><a href="I_use_a_Custom_Filesystem_-_What_Bootloader_Solution_is_right_for_me?" title="I use a Custom Filesystem - What Bootloader Solution is right for me?">I use a Custom Filesystem - What Bootloader Solution is right for me?</a></li></ul>
<h3><span class="mw-headline" id="External_links">External links</span></h3>
<ul><li><a rel="nofollow" class="external text" href="https://blog.koehntopp.info/2023/05/05/50-years-in-filesystems-1974.html">50 years in filesystems</a> -- an approachable account of the history of file systems. Includes, among other information, some real-world examples of heuristics one can use to avoid fragmentation.</li></ul>
<!-- 
NewPP limit report
Cached time: 20250211125150
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.030 seconds
Real time usage: 0.031 seconds
Preprocessor visited node count: 410/1000000
Post‐expand include size: 4705/2097152 bytes
Template argument size: 2576/2097152 bytes
Highest expansion depth: 8/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    7.735      1 -total
 78.76%    6.092      1 Template:Filesystems
 69.90%    5.407      1 Template:SmallNavBox
 50.63%    3.916     20 Template:If
 33.53%    2.594     20 Template:Show1
 13.24%    1.024      1 Template:Tone
  5.13%    0.397      2 Template:In_Progress
  4.61%    0.357      1 Template:NoteBox
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:1505-0!canonical and timestamp 20250211125150 and revision id 29327.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.osdev.org/index.php?title=File_Systems&amp;oldid=29327">https://wiki.osdev.org/index.php?title=File_Systems&amp;oldid=29327</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://wiki.osdev.org/index.php?title=Category:Pages_using_duplicate_arguments_in_template_calls&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using duplicate arguments in template calls (page does not exist)">Pages using duplicate arguments in template calls</a></li><li><a href="./Category:Tone" title="Category:Tone">Tone</a></li><li><a href="./Category:In_Progress" title="Category:In Progress">In Progress</a></li><li><a href="./Category:OS_theory" title="Category:OS theory">OS theory</a></li><li><a href="./Category:Filesystems" title="Category:Filesystems">Filesystems</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-login" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Special:UserLogin&amp;returnto=File+Systems" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li><li id="pt-darkmode" class="mw-list-item"><a href="Filesystem#" class="ext-darkmode-link"><span>Dark mode</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="File_Systems" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="mw-list-item"><a href="./Talk:File_Systems" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="File_Systems"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=File_Systems&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=File_Systems&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="https://wiki.osdev.org/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search OSDev Wiki" aria-label="Search OSDev Wiki" autocapitalize="sentences" title="Search OSDev Wiki [f]" accesskey="f" id="searchInput"
				>
				<input type="hidden" name="title" value="Special:Search">
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="index.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-mainpage" class="mw-list-item"><a href="index.html" title="Visit the main page [z]" accesskey="z"><span>Main Page</span></a></li><li id="n-portal" class="mw-list-item"><a href="http://forum.osdev.org/" rel="nofollow" title="About the project, what you can do, where to find things"><span>Forums</span></a></li><li id="n-FAQ" class="mw-list-item"><a href="./Category:FAQ"><span>FAQ</span></a></li><li id="n-OS-Projects" class="mw-list-item"><a href="Projects"><span>OS Projects</span></a></li><li id="n-randompage" class="mw-list-item"><a href="https://wiki.osdev.org/Special:Random" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-about" class="vector-menu mw-portlet mw-portlet-about vector-menu-portal portal" aria-labelledby="p-about-label" role="navigation"  >
	<h3
		id="p-about-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">About</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-This-site" class="mw-list-item"><a href="./OSDevWiki:About"><span>This site</span></a></li><li id="n-Joining" class="mw-list-item"><a href="./OSDevWiki:Joining"><span>Joining</span></a></li><li id="n-Editing-help" class="mw-list-item"><a href="./OSDevWiki:Editing"><span>Editing help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="./Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li></ul>
		
	</div>
</nav>


<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="./Special:WhatLinksHere/File_Systems" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="./Special:RecentChangesLinked/File_Systems" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="./Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=File_Systems&amp;oldid=29327" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=File_Systems&amp;action=info" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 15 December 2024, at 13:05.</li>
	<li id="footer-info-0">This page has been accessed 20,723 times.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="./OSDev_Wiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="./OSDev_Wiki:About">About OSDev Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="./OSDev_Wiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://wiki.osdev.org/index.php?title=File_Systems&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.030","walltime":"0.031","ppvisitednodes":{"value":410,"limit":1000000},"postexpandincludesize":{"value":4705,"limit":2097152},"templateargumentsize":{"value":2576,"limit":2097152},"expansiondepth":{"value":8,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    7.735      1 -total"," 78.76%    6.092      1 Template:Filesystems"," 69.90%    5.407      1 Template:SmallNavBox"," 50.63%    3.916     20 Template:If"," 33.53%    2.594     20 Template:Show1"," 13.24%    1.024      1 Template:Tone","  5.13%    0.397      2 Template:In_Progress","  4.61%    0.357      1 Template:NoteBox"]},"cachereport":{"timestamp":"20250211125150","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":147});});</script>
</body>
</html>