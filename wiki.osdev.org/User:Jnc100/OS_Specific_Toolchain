<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>OS Specific Toolchain - OSDev Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"3f0a1cea171d1d391171a977","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"OS_Specific_Toolchain","wgTitle":"OS Specific Toolchain","wgCurRevisionId":29272,"wgRevisionId":29272,"wgArticleId":2164,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages using duplicate arguments in template calls","Pages using deprecated source tags","Pages with syntax highlighting errors","Level 3 Tutorials","Tools","Tutorials"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"OS_Specific_Toolchain","wgRelevantArticleId":2164,
"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRedirectedFrom":"User:Jnc100/OS_Specific_Toolchain","wgMFDisplayWikibaseDescriptions":{"search":false,"nearby":false,"watchlist":false,"tagline":false},"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgVector2022PreviewPages":[],"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgInternalRedirectTargetUrl":"/OS_Specific_Toolchain","wgEditSubmitButtonLabelPublish":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.DarkMode.styles":"ready"};RLPAGEMODULES=["mediawiki.action.view.redirect","site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader",
"mmv.head","mmv.bootstrap.autostart","ext.DarkMode","ext.moderation.notify","ext.moderation.ve","ext.moderation.ajaxhook","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=ext.DarkMode.styles%7Cext.pygments%7Cext.visualEditor.desktopArticleTarget.noscript%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://wiki.osdev.org/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.7"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="../favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="../opensearch_desc.php" title="OSDev Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="../api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="OSDev Wiki Atom feed" href="https://wiki.osdev.org/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<link rel="canonical" href="../OS_Specific_Toolchain"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-OS_Specific_Toolchain rootpage-OS_Specific_Toolchain skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">OS Specific Toolchain</span></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From OSDev Wiki</div>
		<div id="contentSub"><span class="mw-redirectedfrom">(Redirected from <a href="https://wiki.osdev.org/index.php?title=User:Jnc100/OS_Specific_Toolchain&amp;redirect=no" class="mw-redirect" title="User:Jnc100/OS Specific Toolchain">User:Jnc100/OS Specific Toolchain</a>)</span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="OS_Specific_Toolchain#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="OS_Specific_Toolchain#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><table style="font-size:95%; line-height:1.5em; padding:0.25em; float:right; margin: 0 0 8px 15px; clear:right; border:1px solid #aaaaaa; background:#eee; text-align:center;;"><tbody><tr><th>Difficulty level</th></tr><tr><td><a href="../File:Difficulty_3.png" class="image"><img alt="Difficulty 3.png" src="../images/c/c1/Difficulty_3.png" decoding="async" width="46" height="14" data-file-width="46" data-file-height="14" /></a><br />Advanced</td></tr></tbody></table>
<p>This tutorial will guide you through creating a toolchain comprising Binutils and GCC that specifically targets your operating system. The instructions below teach Binutils and GCC how to create programs for a hypothetical OS named 'MyOS'. 
</p><p>Until now you have been using a <a href="../GCC_Cross-Compiler" title="GCC Cross-Compiler">cross-compiler</a> configured to use an existing generic bare target. This is very convenient when starting out as you get a reliable target and the compiler doesn't make any bad assumptions because it thinks it is targeting an existing operating system. However, when you proceed it becomes useful if the compiler knows it is targeting your operating system and what its customs are. For instance, you can make the compiler define a <tt>__myos__</tt> preprocessor macro, know which directories to search for include files in, what special <tt>crt*.o</tt> files are used when linking against libc, and so on. It also becomes much easier to cross-compile software to your OS when you simply have to invoke <tt>x86_64-myos-gcc hello.c -o hello</tt> to cross-compile a program. Additionally part of the instructions here can be applied to other software packages that also use the GNU build system, which will help you <a href="../Cross-Porting_Software" title="Cross-Porting Software">port existing software</a>.
</p><p>This tutorial teaches you how to set up a cross-compiler that specifically targets your OS. This is actually the first step of <i>porting Binutils and GCC to your operating system</i>: Any information you give GCC about your OS will help it run on your OS. Once your OS Specific Toolchain has been set up and you have built your OS with it, you can continue by using the cross-compiler to cross-compile the compiler itself to your OS, assuming your libc and kernel is powerful enough. For more information see <a href="../Porting_GCC_to_your_OS" title="Porting GCC to your OS">Porting GCC to your OS</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="OS_Specific_Toolchain#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="OS_Specific_Toolchain#Making_your_changes_reproducible"><span class="tocnumber">2</span> <span class="toctext">Making your changes reproducible</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="OS_Specific_Toolchain#Modifying_Binutils"><span class="tocnumber">3</span> <span class="toctext">Modifying Binutils</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="OS_Specific_Toolchain#config.sub"><span class="tocnumber">3.1</span> <span class="toctext">config.sub</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="OS_Specific_Toolchain#bfd/config.bfd"><span class="tocnumber">3.2</span> <span class="toctext">bfd/config.bfd</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="OS_Specific_Toolchain#gas/configure.tgt"><span class="tocnumber">3.3</span> <span class="toctext">gas/configure.tgt</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="OS_Specific_Toolchain#ld/configure.tgt"><span class="tocnumber">3.4</span> <span class="toctext">ld/configure.tgt</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="OS_Specific_Toolchain#ld/emulparams/elf_i386_myos.sh"><span class="tocnumber">3.5</span> <span class="toctext">ld/emulparams/elf_i386_myos.sh</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="OS_Specific_Toolchain#ld/emulparams/elf_x86_64_myos.sh"><span class="tocnumber">3.6</span> <span class="toctext">ld/emulparams/elf_x86_64_myos.sh</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="OS_Specific_Toolchain#ld/Makefile.am"><span class="tocnumber">3.7</span> <span class="toctext">ld/Makefile.am</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="OS_Specific_Toolchain#Modifying_GCC"><span class="tocnumber">4</span> <span class="toctext">Modifying GCC</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="OS_Specific_Toolchain#config.sub_2"><span class="tocnumber">4.1</span> <span class="toctext">config.sub</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="OS_Specific_Toolchain#gcc/config.gcc"><span class="tocnumber">4.2</span> <span class="toctext">gcc/config.gcc</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="OS_Specific_Toolchain#gcc/config/myos.h"><span class="tocnumber">4.3</span> <span class="toctext">gcc/config/myos.h</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="OS_Specific_Toolchain#libstdc++-v3/crossconfig.m4"><span class="tocnumber">4.4</span> <span class="toctext">libstdc++-v3/crossconfig.m4</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="OS_Specific_Toolchain#libgcc/config.host"><span class="tocnumber">4.5</span> <span class="toctext">libgcc/config.host</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="OS_Specific_Toolchain#fixincludes/mkfixinc.sh"><span class="tocnumber">4.6</span> <span class="toctext">fixincludes/mkfixinc.sh</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="OS_Specific_Toolchain#Further_Customization"><span class="tocnumber">5</span> <span class="toctext">Further Customization</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="OS_Specific_Toolchain#Changing_the_Default_Include_Directory"><span class="tocnumber">5.1</span> <span class="toctext">Changing the Default Include Directory</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="OS_Specific_Toolchain#Changing_the_Default_Library_Directory"><span class="tocnumber">5.2</span> <span class="toctext">Changing the Default Library Directory</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="OS_Specific_Toolchain#Start_Files_Directory"><span class="tocnumber">5.3</span> <span class="toctext">Start Files Directory</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="OS_Specific_Toolchain#Dynamic_linking"><span class="tocnumber">5.4</span> <span class="toctext">Dynamic linking</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="OS_Specific_Toolchain#Linker_Options"><span class="tocnumber">5.5</span> <span class="toctext">Linker Options</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="OS_Specific_Toolchain#Selecting_a_C_Library"><span class="tocnumber">6</span> <span class="toctext">Selecting a C Library</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="OS_Specific_Toolchain#Building"><span class="tocnumber">7</span> <span class="toctext">Building</span></a></li>
<li class="toclevel-1 tocsection-26"><a href="OS_Specific_Toolchain#Conclusion"><span class="tocnumber">8</span> <span class="toctext">Conclusion</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="OS_Specific_Toolchain#Common_errors"><span class="tocnumber">9</span> <span class="toctext">Common errors</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="OS_Specific_Toolchain#Whitespaces"><span class="tocnumber">9.1</span> <span class="toctext">Whitespaces</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="OS_Specific_Toolchain#Autoconf"><span class="tocnumber">9.2</span> <span class="toctext">Autoconf</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30"><a href="OS_Specific_Toolchain#See_Also"><span class="tocnumber">10</span> <span class="toctext">See Also</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="OS_Specific_Toolchain#Articles"><span class="tocnumber">10.1</span> <span class="toctext">Articles</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>You need the following before you get started:
</p>
<ul><li>A build environment that can successfully build a <a href="../GCC_Cross-Compiler" title="GCC Cross-Compiler">GCC Cross-Compiler</a>.</li>
<li>autoconf (exactly version 2.69)</li>
<li>automake (exactly version 1.15.1)</li>
<li>libtool</li>
<li>The latest Binutils source code (2.39 at time of writing).</li>
<li>The latest GCC source code (12.2.0 at time of writing).</li>
<li>Knowledge of the internals of Binutils and GCC.</li>
<li>Knowledge of autoconf and automake.</li>
<li>The dependencies of Binutils and GCC as detailed in <a href="../GCC_Cross-Compiler" title="GCC Cross-Compiler">GCC Cross-Compiler</a>.</li></ul>
<p>If you're compiling a later version of GCC/binutils, find versions of autoconf and automake that were released just prior to your version of GCC/binutils.  See the <a href="../Cross-Compiler_Successful_Builds" title="Cross-Compiler Successful Builds">Cross-Compiler Successful Builds</a> page for known compatible versions of GCC and binutils.
</p><p>Additionally you will need a <a href="../C_Library" title="C Library">C Library</a> as described in a later section. As detailed in <a href="../Hosted_GCC_Cross-Compiler" title="Hosted GCC Cross-Compiler">Hosted GCC Cross-Compiler</a>, it doesn't need to support much and the functionality can be stubbed, but libgcc will need to believe you have a libc.
</p><p>You should decide exactly what targets you'll add to Binutils and GCC. If you have been using a generic <tt>i686-elf</tt> or <tt>x86_64-elf</tt> or such target, you'll simply want to swap <tt>-elf</tt> with <tt>-myos</tt> and get <tt>i686-myos</tt> and <tt>x86_64-myos</tt>. Naturally, don't actually write myos, but rather use the name of your OS converted to lower case. See <a href="../Target_Triplet" title="Target Triplet">Target Triplet</a>.
</p><p>This tutorial currently only have instructions for adding a new x86 and x86_64 target for myos, but it serves as a good enough example that it should be trivial to add more processors by basing it on these instructions and what other operating systems have done.
</p>
<h2><span class="mw-headline" id="Making_your_changes_reproducible">Making your changes reproducible</span></h2>
<p>Since at some point you might have a contributor that wants participate in your project, you likely want to make your toolchain setup reproducible. Instead of downloading the tar-balls, it is therefore a good idea to clone the repositories of binutils (<a rel="nofollow" class="external free" href="https://sourceware.org/git/binutils-gdb.git">https://sourceware.org/git/binutils-gdb.git</a>) and gcc (<a rel="nofollow" class="external free" href="https://gcc.gnu.org/git/gcc.git">https://gcc.gnu.org/git/gcc.git</a>) locally.
</p><p>All release versions are tagged within these repositories, so you can use <tt>"git checkout binutils-2_39"</tt> and <tt>"git checkout releases/gcc-12.2.0"</tt> to switch to the correct versions respectively. After making the described changes, you can easily create a patch using <tt>"git diff"</tt> which you can reuse later.
Another option would be to fork one of the mirror repositories on GitHub.
</p>
<h2><span class="mw-headline" id="Modifying_Binutils">Modifying Binutils</span></h2>
<h3><span class="mw-headline" id="config.sub">config.sub</span></h3>
<p>This is a file you will modify in the same way for each package.  It is a GNU standard file produced by including the line 'AC_CANONICAL_SYSTEM' in a configure.ac that is processed by autoconf, and is designed to convert a canonical name of the form <tt>i686-pc-myos</tt> into separate variables for the processor, vendor and OS, and also rejects systems it doesn't know about.  We simply need to add 'myos' to the list of acceptable operating systems.  Find the section that begins with the comment "<tt>Now accept the basic system types</tt>" (it begins '<tt>-gnu*</tt>') and add '<tt>-myos*</tt>' to the list.  Find a line with some free room and add your entry there.
</p>
<h3><span id="bfd.2Fconfig.bfd"></span><span class="mw-headline" id="bfd/config.bfd">bfd/config.bfd</span></h3>
<p>This file is part of the configuration for libbfd, the back-end to Binutils which provides a consistent interface for many object file formats.  Generally, each platform-specific version of Binutils contains a libbfd which only supports the object files normally in use on that system, as otherwise the library would be massive (libbfd can support a _lot_ of object types).  We need to associate our os with some particular object types.  There is a long list starting 'WHEN ADDING ENTRIES TO THIS MATRIX' with the first line as 'case "${targ}" in'.  We need to add our full canonical name to this list, by adding some cases such as:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>  i<span class="o">[</span><span class="m">3</span>-7<span class="o">]</span><span class="m">86</span>-*-myos*<span class="o">)</span>
    <span class="nv">targ_defvec</span><span class="o">=</span>i386_elf32_vec
    <span class="nv">targ_selvecs</span><span class="o">=</span>
    <span class="nv">targ64_selvecs</span><span class="o">=</span>x86_64_elf64_vec
    <span class="p">;;</span>
<span class="c1">#ifdef BFD64</span>
  x86_64-*-myos*<span class="o">)</span>
    <span class="nv">targ_defvec</span><span class="o">=</span>x86_64_elf64_vec
    <span class="nv">targ_selvecs</span><span class="o">=</span>i386_elf32_vec
    <span class="nv">want64</span><span class="o">=</span><span class="nb">true</span>
    <span class="p">;;</span>
<span class="c1">#endif</span>
</pre></div>
<p><b>Note:</b> If using binutils-2.24 or older, change <i>i386_elf32_vec</i> to <i>bfd_elf32_i386_vec</i> and <i>x86_64_elf64_vec</i> to <i>bfd_elf64_x86_64_vec</i>.
</p><p>Be sure to follow the instructions in the comment block above the list and add your entry beneath the comment "<tt>#START OF targmatch.h</tt>". If you like, you could support different object formats (look at other entries in the list, and the contents of 'bfd' for hints) and also provide more than one to the <tt>targ_selvecs</tt> line. For instance, you can support coff object files if you add <tt>i386coff_vec</tt> to the <tt>targ_selvecs</tt> list. All the <tt>x86_64</tt> entries in the file file are wrapped in <tt>#ifdef BFD64</tt>, as when targmatch.sed processes this file to turn it into to targmatch.h, it will add <tt>#ifdef BFD64</tt> so that the relevant code is only compiled when targeting a 64 bit platform
</p>
<h3><span id="gas.2Fconfigure.tgt"></span><span class="mw-headline" id="gas/configure.tgt">gas/configure.tgt</span></h3>
<p>This file tells the gnu assembler what type of output to generate for each target.  It automatically matches the i686 part of your target and generates the correct output for that.  We just need to tell it what type of object file to generate for myos.  In the section starting '<tt>Assign object format ... case ${generic_target} in</tt>' you need to add a line like
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>  i386-*-myos*<span class="o">)</span>    <span class="nv">fmt</span><span class="o">=</span>elf <span class="p">;;</span>
</pre></div>
<p>You should use '<tt>i386</tt>' in this line even if you are targeting x86_64.  This is the only file where you should do it.  It is basically because the variable 'generic_target' is not your canonical target name, but rather a variable generated further up in the configure.tgt file, and it sets the first part to <tt>i386</tt> for any <tt>i[3-7]86</tt> or <tt>x86_64</tt>.
</p><p>Note: this will use the 'generic' emulation. One side-effect is that gas will interpret slash ('/') as a comment, not as a division operator. This will break any code like "<tt>movl $(ADDRESS/PAGE_SIZE), %eax</tt>". Using "<tt>fmt=elf em=gnu&#160;;;</tt>" or "<tt>fmt=elf em=linux&#160;;;</tt>" will disable slash as a comment character.
</p>
<h3><span id="ld.2Fconfigure.tgt"></span><span class="mw-headline" id="ld/configure.tgt">ld/configure.tgt</span></h3>
<p>This file tells the gnu linker what 'emulation' to use for each target.  An emulation is basically a combination of linker script and executable file format.  We are going to define our own emulation called <tt>elf_i386_myos</tt>.  We need to add an entry to the case statement here after '<tt>Please try to keep this table more or less in alphabetic order ... case "${targ}</tt>" in':
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>i<span class="o">[</span><span class="m">3</span>-7<span class="o">]</span><span class="m">86</span>-*-myos*<span class="o">)</span>
			<span class="nv">targ_emul</span><span class="o">=</span>elf_i386_myos
			<span class="nv">targ_extra_emuls</span><span class="o">=</span>elf_i386
			<span class="nv">targ64_extra_emuls</span><span class="o">=</span><span class="s2">&quot;elf_x86_64_myos elf_x86_64&quot;</span>
			<span class="p">;;</span>
x86_64-*-myos*<span class="o">)</span>
			<span class="nv">targ_emul</span><span class="o">=</span>elf_x86_64_myos
			<span class="nv">targ_extra_emuls</span><span class="o">=</span><span class="s2">&quot;elf_i386_myos elf_x86_64 elf_i386&quot;</span>
			<span class="p">;;</span>
</pre></div>
<ul><li><b>elf_i386_myos</b> is a 32-bit target for your OS.</li>
<li><b>elf_x86_64_myos</b> is a 64-bit target for your OS.</li>
<li><b>elf_i386</b> is a bare 32-bit target as you had with <tt>i686-elf</tt>.</li>
<li><b>elf_x86_64</b> is a bare 64-bit target for your OS as you had with <tt>x86_64-elf</tt>.</li></ul>
<p>This setup provides you with a 32-bit toolchain that also can produce 64-bit executables, and a 64-bit toolchain that can also produce 64-bit executables. This comes in handy if you use objcopy, for instance. You can also add <tt>targ_extra_emuls</tt> entries to specify other targets ld should support. See the <tt>ld/configure.tgt</tt> file for examples.
</p>
<h3><span id="ld.2Femulparams.2Felf_i386_myos.sh"></span><span class="mw-headline" id="ld/emulparams/elf_i386_myos.sh">ld/emulparams/elf_i386_myos.sh</span></h3>
<p>Now we need to actually define our emulation. There is a generic file called <tt>ld/genscripts.sh</tt> which creates the required linker scripts for our target (you need more than one, depending on shared object usage and the like: I have 13 for a single target). It uses a linker script template (from the ld/scripttempl directory) to do this, and it creates the actual emulation C file from an emulation template (from the ld/emultempl directory). These templates are customised by running a script in the ld/emulparams directory which sets various variables. You are welcome to define your own emulation and linker templates, but I find the ELF ones adequate, given that they can be customised by simply adding a file to the emulparams directory. This is what we are going to do now. The content of the file could be something like:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>source_sh <span class="si">${</span><span class="nv">srcdir</span><span class="si">}</span>/emulparams/elf_i386.sh
<span class="nv">TEXT_START_ADDR</span><span class="o">=</span>0x08000000
</pre></div>
<p>This script is included by <tt>ld/genscripts.sh</tt> to customize its behavior through shell variables. We include the base <tt>elf_i386.sh</tt> script as it sets reasonable defaults. Finally, we override the variables whose defaults we disagree with.
</p><p>There are a large number of variables that can be set here to customize your toolchain. Read the documentation and look at existing emulations for further information. These are some of the variables that can be set:
</p>
<ul><li><b>GENERATE_SHLIB_SCRIPT</b>=<i>yes|no</i> Whether to generate a linker script for shared libraries. We enable this as you might want it later.</li>
<li><b>GENERATE_PIE_SCRIPT</b>=<i>yes|no</i> Whether to generate a linker script for position independent executables. We enable this as you might want it later.</li>
<li><b>SCRIPT_NAME</b>=<i>name</i> Controls which ld/scripttempl/<i>name</i>.sc script generates our linker scripts.</li>
<li><b>TEMPLATE_NAME</b>=<i>name</i> Controls which ld/emultempl/<i>name</i>.em script generates our bfd emulation C implementation.</li>
<li><b>OUTPUT_FORMAT</b>=<i>name</i> The name of the BFD output target we use.</li>
<li><b>TEXT_START_ADDR</b>=0x<i>value</i> Controls where the executable begins in memory.</li></ul>
<p>You can read the base <tt>elf_i386.sh</tt> script for the defaults of these variables, you can then decide for yourself if you wish to override them for your operating system.
</p>
<h3><span id="ld.2Femulparams.2Felf_x86_64_myos.sh"></span><span class="mw-headline" id="ld/emulparams/elf_x86_64_myos.sh">ld/emulparams/elf_x86_64_myos.sh</span></h3>
<p>This file is just like the above <tt>ld/emulparams/elf_i386_myos.sh</tt> but for x86_64.
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>source_sh <span class="si">${</span><span class="nv">srcdir</span><span class="si">}</span>/emulparams/elf_x86_64.sh
</pre></div>
<h3><span id="ld.2FMakefile.am"></span><span class="mw-headline" id="ld/Makefile.am">ld/Makefile.am</span></h3>
<p>We now just need to tell make how to produce the emulation C file for our specific emulation. Putting the '<tt>targ_emul=elf_i386_myos</tt>' line into <tt>ld/configure.tgt</tt> above implies that your host linker will try to link your target ld executable with an object file called <tt>eelf_i386_myos.o</tt>. There is a default rule to generate this from <tt>eelf_i386_myos.c</tt>, so we just need to tell it how to make this <tt>eelf_i386_myos.c</tt> file.  As stated above, we let the genscripts.sh file do the hard work. You need to add <tt>eelf_i386_myos.c</tt> to the <tt>ALL_EMULATION_SOURCES</tt> list; you also need to add <tt>eelf_x86_64_myos.c</tt> to the <tt>ALL_64_EMULATION_SOURCES</tt> list if applicable.
</p><p><b>Note</b>: You <i>must</i> run <tt>automake</tt> in the <tt>ld</tt> directory after you modify <tt>Makefile.am</tt> to regenerate <tt>Makefile.in</tt>.
</p>
<h2><span class="mw-headline" id="Modifying_GCC">Modifying GCC</span></h2>
<h3><span class="mw-headline" id="config.sub_2">config.sub</span></h3>
<p>Similar modification to config.sub in Binutils.
</p>
<h3><span id="gcc.2Fconfig.gcc"></span><span class="mw-headline" id="gcc/config.gcc">gcc/config.gcc</span></h3>
<p>This file defines what needs to be built for each particular target and what to include in the final executable.  There are two main sections: one which defines generic options for your operating system, and those which define options specific to your operating system on each individual machine type. 
</p><p>For the first part, find the '<tt>case ${target} in</tt>' line just after '<tt># Common parts for widely ported systems</tt>' (around line 688) and add something like:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>*-*-myos*<span class="o">)</span>
  <span class="nv">extra_options</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$extra_options</span><span class="s2"> gnu-user.opt&quot;</span>
  <span class="nv">gas</span><span class="o">=</span>yes
  <span class="nv">gnu_ld</span><span class="o">=</span>yes
  <span class="nv">default_use_cxa_atexit</span><span class="o">=</span>yes
  <span class="nv">use_gcc_stdint</span><span class="o">=</span>provide
  <span class="p">;;</span>
</pre></div>
<ul><li><b>extra_options="$extra_options gnu-user.opt"</b> our operating system has options such as -pthread</li>
<li><b>gas=yes</b> our operating system by default uses the GNU assembler</li>
<li><b>gnu_ld=yes</b> out operating system by default uses the GNU linker</li>
<li><b>default_use_cxa_atexit=yes</b> We will provide <i>__cxa_atexit</i> (You will need to provide this in your standard library)</li>
<li><b>use_gcc_stdint=provide</b>  This instructs gcc to provide you with a <i>stdint.h</i> appropiate for your target.  Change <tt>provide</tt> to <tt>wrap</tt> if you have your own <i>stdint.h</i>, to make GCC wrap yours. Alternatively use <tt>none</tt> to make gcc not install such a header and let libc supply it.</li></ul>
<p>The second section we need to add to is the architecture-specific one. Find the '<tt>case ${target} in</tt>' line just before '<tt>tm_file="${tm_file} elfos.h newlib-stdint.h"</tt>' (around line 1094) and add something like:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>i<span class="o">[</span><span class="m">34567</span><span class="o">]</span><span class="m">86</span>-*-myos*<span class="o">)</span>
    <span class="nv">tm_file</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">tm_file</span><span class="si">}</span><span class="s2"> i386/unix.h i386/att.h elfos.h glibc-stdint.h i386/i386elf.h myos.h&quot;</span>
    <span class="p">;;</span>
x86_64-*-myos*<span class="o">)</span>
    <span class="nv">tm_file</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">tm_file</span><span class="si">}</span><span class="s2"> i386/unix.h i386/att.h elfos.h glibc-stdint.h i386/i386elf.h i386/x86-64.h myos.h&quot;</span>
    <span class="p">;;</span>
</pre></div>
<p>This defines which target configuration header files gets used. You can make <tt>i386/myos32.h</tt> and <tt>i386/myos64.h</tt> files if desired.
</p>
<h3><span id="gcc.2Fconfig.2Fmyos.h"></span><span class="mw-headline" id="gcc/config/myos.h">gcc/config/myos.h</span></h3>
<p>This header allows you to customize your toolchain using preprocessor macros. The relevant parts of GCC will include this header (as controlled by <tt>gcc/config.gcc</tt>) and modify the behavior according to your customizations. 
</p><p>You can explore <tt>gcc/defaults.h</tt> for a full list of things you can modify, and more importantly, the assumptions GCC will make about various aspects of your target. For instance, if <tt>PID_TYPE</tt> is not defined in <tt>myos.h</tt>, then GCC will default it to <tt>int</tt>, which can be problematic if that's not what your <tt>pid_t</tt> is defined as.
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cm">/* Useful if you wish to make target-specific GCC changes. */</span><span class="w"></span>
<span class="cp">#undef TARGET_MYOS</span>
<span class="cp">#define TARGET_MYOS 1</span>

<span class="cm">/* Default arguments you want when running your</span>
<span class="cm">   i686-myos-gcc/x86_64-myos-gcc toolchain */</span><span class="w"></span>
<span class="cp">#undef LIB_SPEC</span>
<span class="cp">#define LIB_SPEC &quot;-lc&quot; </span><span class="cm">/* link against C standard library */</span><span class="cp"></span>

<span class="cm">/* Files that are linked before user code.</span>
<span class="cm">   The %s tells GCC to look for these files in the library directory. */</span><span class="w"></span>
<span class="cp">#undef STARTFILE_SPEC</span>
<span class="cp">#define STARTFILE_SPEC &quot;crt0.o%s crti.o%s crtbegin.o%s&quot;</span>

<span class="cm">/* Files that are linked after user code. */</span><span class="w"></span>
<span class="cp">#undef ENDFILE_SPEC</span>
<span class="cp">#define ENDFILE_SPEC &quot;crtend.o%s crtn.o%s&quot;</span>

<span class="cm">/* Additional predefined macros. */</span><span class="w"></span>
<span class="cp">#undef TARGET_OS_CPP_BUILTINS</span>
<span class="cp">#define TARGET_OS_CPP_BUILTINS()      \</span>
<span class="cp">  do {                                \</span>
<span class="cp">    builtin_define (&quot;__myos__&quot;);      \</span>
<span class="cp">    builtin_define (&quot;__unix__&quot;);      \</span>
<span class="cp">    builtin_assert (&quot;system=myos&quot;);   \</span>
<span class="cp">    builtin_assert (&quot;system=unix&quot;);   \</span>
<span class="cp">    builtin_assert (&quot;system=posix&quot;);   \</span>
<span class="cp">  } while(0);</span>
</pre></div>
<h3><span id="libstdc.2B.2B-v3.2Fcrossconfig.m4"></span><span class="mw-headline" id="libstdc++-v3/crossconfig.m4">libstdc++-v3/crossconfig.m4</span></h3>
<p>This file describes how the libstdc++ configure file will examine your operating system and adjust the provided features of libstdc++ accordingly. Add a case similar to
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>  *-myos*)
    GLIBCXX_CHECK_COMPILER_FEATURES
    GLIBCXX_CHECK_LINKER_FEATURES
    GLIBCXX_CHECK_MATH_SUPPORT
    GLIBCXX_CHECK_STDLIB_SUPPORT
   &#160;;;</pre></div>
<p><b>Note</b>: You need to run <tt>autoconf</tt> in the <tt>libstdc++-v3</tt> directory.
</p>
<h3><span id="libgcc.2Fconfig.host"></span><span class="mw-headline" id="libgcc/config.host">libgcc/config.host</span></h3>
<p>Find the '<tt>case ${host} in</tt>' just prior to '<tt>extra_parts="$extra_parts crtbegin.o crtend.o crti.o crtn.o"</tt>' (around line 368) and add the cases:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>i<span class="o">[</span><span class="m">34567</span><span class="o">]</span><span class="m">86</span>-*-myos*<span class="o">)</span>
	<span class="nv">extra_parts</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$extra_parts</span><span class="s2"> crti.o crtbegin.o crtend.o crtn.o&quot;</span>
	<span class="nv">tmake_file</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$tmake_file</span><span class="s2"> i386/t-crtstuff t-crtstuff-pic t-libgcc-pic&quot;</span>
	<span class="p">;;</span>
x86_64-*-myos*<span class="o">)</span>
	<span class="nv">extra_parts</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$extra_parts</span><span class="s2"> crti.o crtbegin.o crtend.o crtn.o&quot;</span>
	<span class="nv">tmake_file</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$tmake_file</span><span class="s2"> i386/t-crtstuff t-crtstuff-pic t-libgcc-pic&quot;</span>
	<span class="p">;;</span>
</pre></div>
<h3><span id="fixincludes.2Fmkfixinc.sh"></span><span class="mw-headline" id="fixincludes/mkfixinc.sh">fixincludes/mkfixinc.sh</span></h3>
<p>You should disable fixincludes for your operating system. Find the case statement and add a pattern for your operating system. For instance:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># Check for special fix rules for particular targets</span>
<span class="k">case</span> <span class="nv">$machine</span> <span class="k">in</span>
    *-myos* <span class="p">|</span> <span class="se">\</span>
    *-*-myos* <span class="p">|</span> <span class="se">\</span>
    i?86-*-cygwin* <span class="p">|</span> <span class="se">\</span>
	<span class="c1"># (... snip ...)</span>
    powerpcle-*-eabi* <span class="o">)</span>
	<span class="c1">#  IF there is no include fixing,</span>
	<span class="c1">#  THEN create a no-op fixer and exit</span>
	<span class="o">(</span><span class="nb">echo</span> <span class="s2">&quot;#! /bin/sh&quot;</span> <span class="p">;</span> <span class="nb">echo</span> <span class="s2">&quot;exit 0&quot;</span> <span class="o">)</span> &gt; <span class="si">${</span><span class="nv">target</span><span class="si">}</span>
        <span class="p">;;</span>
</pre></div>
<p>A number of operating systems (especially older and obscure ones) provide troublesome systems headers that fail to strictly comply with various standards. The GCC developers consider it their job to fix these headers. GCC will look into your system root, apply a bunch of patterns to detect headers it doesn't like, then it copies that header into a private GCC system directory (that overrides your standard system directory) and attempts to fix the header. Sometimes fixincludes even break working headers (some people refer to it as breakincludes).
</p><p>This is rather inconvenient as your libc will likely happen to trigger these patterns (and false positives often happens). Any time you change your system headers, you have to rebuild your compiler so the fixed versions get updated. The first time you encounter this, it will show up as a system header that does nothing different even though you edit it.
</p><p>This addition to the <tt>mkfixinc.sh</tt> file forcefully disables fixincludes for your operating system. It's your job to provide working system headers, not the compiler developers'.
</p>
<h2><span class="mw-headline" id="Further_Customization">Further Customization</span></h2>
<p><b>TODO</b>: Document more various tips and tricks for further customization of OS specific toolchains.
</p>
<h3><span class="mw-headline" id="Changing_the_Default_Include_Directory">Changing the Default Include Directory</span></h3>
<p>If you wish to change the default include directory from <tt>/usr/include</tt>, you can override the <tt>native_system_header_dir</tt> variable in <tt>gcc/config.gcc</tt> in the case for your OS.
</p>
<h3><span class="mw-headline" id="Changing_the_Default_Library_Directory">Changing the Default Library Directory</span></h3>
<p>If you wish to change the default library directory from <tt>/usr/lib</tt>, you can change it to <tt>/lib</tt> by adding the following block of code to the case just below the declaration of <tt>NATIVE_LIB_DIRS</tt> in <tt>binutils/ld/configure.tgt</tt> (around line 1056).
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="o">*-*-</span><span class="n">myos</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="n">NATIVE_LIB_DIRS</span><span class="o">=</span><span class="err">&#39;</span><span class="o">/</span><span class="n">lib</span><span class="w"> </span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="err">&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">;;</span><span class="w"></span>
</pre></div>
<h3><span class="mw-headline" id="Start_Files_Directory">Start Files Directory</span></h3>
<p>You can modify which directory GCC looks for the crt0.o, crti.o and crtn.o in. The path to that directory is stored in <tt>STANDARD_STARTFILE_PREFIX</tt>. For instance, if you change the library directory to <tt>/lib</tt> in Binutils and want GCC to match, you can add the following to <tt>gcc/config/myos.h</tt>:
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#undef STANDARD_STARTFILE_PREFIX</span>
<span class="cp">#define STANDARD_STARTFILE_PREFIX &quot;/lib/&quot;</span>
</pre></div>
<p>Note that the trailing slash is important as the raw crt*.o names are appended without first adding a slash.
</p><p><br />
</p>
<h3><span class="mw-headline" id="Dynamic_linking">Dynamic linking</span></h3>
<p>If you want to support dynamic linking with your toolchain, you need to...
</p>
<ul><li>Pass the <tt>"--enable-shared"</tt> flag to the <tt>./configure</tt> scripts of both binutils and gcc</li>
<li>Set <tt>LINK_SPEC</tt> in your "gcc/config/myos.h" so the gcc driver will pass the correct flags to the linker:</li></ul>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#undef LINK_SPEC</span>
<span class="cp">#define LINK_SPEC &quot;%{shared:-shared}&#160;%{static:-static}&#160;%{!shared:&#160;%{!static:&#160;%{rdynamic:-export-dynamic}}}&quot;</span>
</pre></div>
<h3><span class="mw-headline" id="Linker_Options">Linker Options</span></h3>
<p>You can modify the arguments passed to the linker using <tt>LINK_SPEC</tt>. This can be used to force 4KB alignment of sections on 64 bit systems, as ld defaults to 2MB alignment.
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cm">/* Tell ld to force 4KB pages*/</span><span class="w"></span>
<span class="cp">#undef LINK_SPEC</span>
<span class="cp">#define LINK_SPEC &quot;-z max-page-size=4096&quot;</span>
</pre></div>
<h2><span class="mw-headline" id="Selecting_a_C_Library">Selecting a C Library</span></h2>
<dl><dd><i>Main article:</i> <a href="../C_Library" title="C Library">C Library</a></dd></dl>
<p>At this point, you have to decide which <a href="../C_Library" title="C Library">C Library</a> to use. You have options:
</p>
<ul><li><a href="../Creating_a_C_Library" title="Creating a C Library">Create your own C library</a>.</li>
<li>Pick an existing <a href="../C_Library" title="C Library">C Library</a> such as <a href="../Porting_Newlib" title="Porting Newlib">Newlib</a>.</li></ul>
<h2><span class="mw-headline" id="Building">Building</span></h2>
<dl><dd><i>Main article:</i> <a href="../Hosted_GCC_Cross-Compiler" title="Hosted GCC Cross-Compiler">Hosted GCC Cross-Compiler</a></dd></dl>
<p>Your OS specific toolchain is built differently from the introductory <tt>i686-elf</tt> toolchain as it has a user-space and standard library. In particular, you need to ensure your libc meets the minimum requirements for libgcc. You need to install the standard library headers into your <a href="../Meaty_Skeleton#System_Root" title="Meaty Skeleton">System Root</a> before building the cross-compiler. You need to tell the cross-binutils and cross-gcc where the system root is via the configure option <tt>--with-sysroot=/path/to/sysroot</tt>. You can then build your libc with your cross-compiler and then finally libstdc++ if desired.
</p>
<h2><span class="mw-headline" id="Conclusion">Conclusion</span></h2>
<p>You now have a <tt>i686-myos</tt> toolchain that can be used instead of your old <tt>i686-elf</tt> toolchain. Your new toolchain is effectively just a renamed <tt>i686-elf</tt> with customizations. You should switch all your operating system build scripts to use this new compiler, even the kernel and libk, as your new compiler is capable of providing a freestanding environment.
</p><p>You will certainly wish to package up your custom toolchain (and be able to create a diff between the upstream version and your custom version for others to audit). Contributors should be able to download tarballs of your myos-binutils and myos-gcc packages, so they can build themselves your custom toolchain. 
</p>
<h2><span class="mw-headline" id="Common_errors">Common errors</span></h2>
<h3><span class="mw-headline" id="Whitespaces">Whitespaces</span></h3>
<p>Some files need tabs, some files need spaces and some files accept happily any mixture. Use an editor that can display special chars such as tabs and spaces, to be sure you use the right form. Whitespace errors may result in 'make' reporting missing separators. Some editors will replace a tab with four spaces, which will also cause invalid separator issues.
</p>
<h3><span class="mw-headline" id="Autoconf">Autoconf</span></h3>
<p>There are several steps that conclude in running '<tt>autoconf</tt>' or '<tt>automake</tt>', '<tt>autoreconf</tt>', be sure you did not miss them. The order of autoconf/-reconf calls in a package is important. These errors may result in missing subdirectories of the build-* directory and/or 'make' reporting missing targets.
</p>
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<h3><span class="mw-headline" id="Articles">Articles</span></h3>
<ul><li><a href="../GCC" title="GCC">GCC</a></li></ul>
<!-- 
NewPP limit report
Cached time: 20250212023058
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.092 seconds
Real time usage: 1.884 seconds
Preprocessor visited node count: 309/1000000
Post‐expand include size: 452/2097152 bytes
Template argument size: 118/2097152 bytes
Highest expansion depth: 23/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 10344/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00% 1852.846      1 -total
  0.27%    5.064      4 Template:If
  0.24%    4.516      1 Template:Rating
  0.24%    4.463      4 Template:Show1
  0.06%    1.039      4 Template:Eq
  0.04%    0.759      2 Template:Main
  0.03%    0.507      4 Template:Eq1
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:2164-0!canonical and timestamp 20250212023056 and revision id 29272.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.osdev.org/index.php?title=OS_Specific_Toolchain&amp;oldid=29272">https://wiki.osdev.org/index.php?title=OS_Specific_Toolchain&amp;oldid=29272</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="../Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://wiki.osdev.org/index.php?title=Category:Pages_using_duplicate_arguments_in_template_calls&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using duplicate arguments in template calls (page does not exist)">Pages using duplicate arguments in template calls</a></li><li><a href="https://wiki.osdev.org/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li><li><a href="https://wiki.osdev.org/index.php?title=Category:Pages_with_syntax_highlighting_errors&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages with syntax highlighting errors (page does not exist)">Pages with syntax highlighting errors</a></li><li><a href="../Category:Level_3_Tutorials" title="Category:Level 3 Tutorials">Level 3 Tutorials</a></li><li><a href="../Category:Tools" title="Category:Tools">Tools</a></li><li><a href="../Category:Tutorials" title="Category:Tutorials">Tutorials</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-login" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Special:UserLogin&amp;returnto=OS+Specific+Toolchain" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li><li id="pt-darkmode" class="mw-list-item"><a href="OS_Specific_Toolchain#" class="ext-darkmode-link"><span>Dark mode</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="../OS_Specific_Toolchain" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="mw-list-item"><a href="../Talk:OS_Specific_Toolchain" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="../OS_Specific_Toolchain"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=OS_Specific_Toolchain&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=OS_Specific_Toolchain&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="https://wiki.osdev.org/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search OSDev Wiki" aria-label="Search OSDev Wiki" autocapitalize="sentences" title="Search OSDev Wiki [f]" accesskey="f" id="searchInput"
				>
				<input type="hidden" name="title" value="Special:Search">
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="../index.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-mainpage" class="mw-list-item"><a href="../index.html" title="Visit the main page [z]" accesskey="z"><span>Main Page</span></a></li><li id="n-portal" class="mw-list-item"><a href="http://forum.osdev.org/" rel="nofollow" title="About the project, what you can do, where to find things"><span>Forums</span></a></li><li id="n-FAQ" class="mw-list-item"><a href="../Category:FAQ"><span>FAQ</span></a></li><li id="n-OS-Projects" class="mw-list-item"><a href="../Projects"><span>OS Projects</span></a></li><li id="n-randompage" class="mw-list-item"><a href="https://wiki.osdev.org/Special:Random" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-about" class="vector-menu mw-portlet mw-portlet-about vector-menu-portal portal" aria-labelledby="p-about-label" role="navigation"  >
	<h3
		id="p-about-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">About</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-This-site" class="mw-list-item"><a href="../OSDevWiki:About"><span>This site</span></a></li><li id="n-Joining" class="mw-list-item"><a href="../OSDevWiki:Joining"><span>Joining</span></a></li><li id="n-Editing-help" class="mw-list-item"><a href="../OSDevWiki:Editing"><span>Editing help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="../Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li></ul>
		
	</div>
</nav>


<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="../Special:WhatLinksHere/OS_Specific_Toolchain" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="../Special:RecentChangesLinked/OS_Specific_Toolchain" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="../Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=OS_Specific_Toolchain&amp;oldid=29272" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=OS_Specific_Toolchain&amp;action=info" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 7 October 2024, at 19:44.</li>
	<li id="footer-info-0">This page has been accessed 26,989 times.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="../OSDev_Wiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../OSDev_Wiki:About">About OSDev Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="../OSDev_Wiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://wiki.osdev.org/index.php?title=OS_Specific_Toolchain&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="../resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="../resources/assets/poweredby_mediawiki_132x47.png 1.5x, ../resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.092","walltime":"1.884","ppvisitednodes":{"value":309,"limit":1000000},"postexpandincludesize":{"value":452,"limit":2097152},"templateargumentsize":{"value":118,"limit":2097152},"expansiondepth":{"value":23,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":10344,"limit":5000000},"timingprofile":["100.00% 1852.846      1 -total","  0.27%    5.064      4 Template:If","  0.24%    4.516      1 Template:Rating","  0.24%    4.463      4 Template:Show1","  0.06%    1.039      4 Template:Eq","  0.04%    0.759      2 Template:Main","  0.03%    0.507      4 Template:Eq1"]},"cachereport":{"timestamp":"20250212023058","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":1988});});</script>
</body>
</html>