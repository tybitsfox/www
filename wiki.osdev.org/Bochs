<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Bochs - OSDev Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"47a60edc03a2b1c0f1e24332","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Bochs","wgTitle":"Bochs","wgCurRevisionId":26405,"wgRevisionId":26405,"wgArticleId":1556,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages using duplicate arguments in template calls","Pages using deprecated source tags","Emulators"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Bochs","wgRelevantArticleId":1556,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],
"wgMFDisplayWikibaseDescriptions":{"search":false,"nearby":false,"watchlist":false,"tagline":false},"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgVector2022PreviewPages":[],"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgEditSubmitButtonLabelPublish":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.DarkMode.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","ext.DarkMode","ext.moderation.notify","ext.moderation.ve","ext.moderation.ajaxhook","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=ext.DarkMode.styles%7Cext.pygments%7Cext.visualEditor.desktopArticleTarget.noscript%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://wiki.osdev.org/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.7"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="OSDev Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="OSDev Wiki Atom feed" href="https://wiki.osdev.org/index.php?title=Special:RecentChanges&amp;feed=atom"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Bochs rootpage-Bochs skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Bochs</span></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From OSDev Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="Bochs#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="Bochs#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><table style="font-size:95%; line-height:1.5em; padding:0.25em; float:right; margin: 0 0 8px 15px; clear: right; border:1px solid #aaaaaa; background:#eee; text-align:center; width:200px; ;"><tbody><tr><th style="background:#ffce7b; padding:0.3em; font-size:1.1em;"><a href="Emulators" title="Emulators">Emulators</a></th></tr><tr><th>PC Emulators</th></tr><tr><td><div>
<p><a class="mw-selflink selflink">Bochs</a><br />
<a href="QEMU" title="QEMU">QEMU</a><br />
</p>
</div></td></tr><tr><th>PC Virtual Machine Monitors</th></tr><tr><td><div>
<p><a href="https://wiki.osdev.org/index.php?title=KVM&amp;action=edit&amp;redlink=1" class="new" title="KVM (page does not exist)">KVM</a><br />
<a href="Microsoft_Virtual_PC" title="Microsoft Virtual PC">Virtual PC</a><br />
<a href="VirtualBox" title="VirtualBox">VirtualBox</a><br />
<a href="VMware" title="VMware">VMware</a><br />
</p>
</div></td></tr><tr><th>PowerPC Emulators</th></tr><tr><td><div>
<p><a href="PearPC" title="PearPC">PearPC</a><br />
</p>
</div></td></tr></tbody></table>
<p><b>Bochs</b> is a steadily improving emulator for the <a href="./Category:X86" title="Category:X86">x86</a> platform. It greatly improves OS development because the virtual machine restarts much quicker than real hardware, plus it offers detailed debugging functionality that can help greatly during kernel development.
</p><p>It is strongly suggested to get two installations of Bochs - in addition to the out-of-the-box version (which might well be one of the binary downloads), you should also compile a second instance with the internal debugger enabled - so when something strange occurs that your 'normal' debugging tools can't trace, you can cross-check it with the debug version. You may also wish to enable (and use) the debug IO ports.
</p><p><br />
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Bochs#Frequent_error_messages"><span class="tocnumber">1</span> <span class="toctext">Frequent error messages</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Bochs#Running_in_Bogus_Memory"><span class="tocnumber">1.1</span> <span class="toctext">Running in Bogus Memory</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="Bochs#3rd_exception_with_no_resolution"><span class="tocnumber">1.2</span> <span class="toctext">3rd exception with no resolution</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Bochs#I/O_Operand_Size"><span class="tocnumber">1.3</span> <span class="toctext">I/O Operand Size</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Bochs#fetch_raw_descriptor:_LDTR.valid=0"><span class="tocnumber">1.4</span> <span class="toctext">fetch_raw_descriptor: LDTR.valid=0</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="Bochs#Differences_between_Bochs_and_real_hardware"><span class="tocnumber">2</span> <span class="toctext">Differences between Bochs and real hardware</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="Bochs#Bochs_image_files_in_a_nutshell"><span class="tocnumber">3</span> <span class="toctext">Bochs image files in a nutshell</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="Bochs#Bochs_debugging_facilities"><span class="tocnumber">4</span> <span class="toctext">Bochs debugging facilities</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="Bochs#GUI_debugger"><span class="tocnumber">4.1</span> <span class="toctext">GUI debugger</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Bochs#I/O_debugger_macros"><span class="tocnumber">4.2</span> <span class="toctext">I/O debugger macros</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="Bochs#Magic_Breakpoint"><span class="tocnumber">4.3</span> <span class="toctext">Magic Breakpoint</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="Bochs#Debugging_SMP"><span class="tocnumber">4.4</span> <span class="toctext">Debugging SMP</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="Bochs#Internal_debugger_commands"><span class="tocnumber">4.5</span> <span class="toctext">Internal debugger commands</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="Bochs#Debugging_Triple_Faults"><span class="tocnumber">4.6</span> <span class="toctext">Debugging Triple Faults</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="Bochs#Compiling_Bochs_from_Source"><span class="tocnumber">5</span> <span class="toctext">Compiling Bochs from Source</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="Bochs#See_Also"><span class="tocnumber">6</span> <span class="toctext">See Also</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="Bochs#Articles"><span class="tocnumber">6.1</span> <span class="toctext">Articles</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="Bochs#External_Links"><span class="tocnumber">6.2</span> <span class="toctext">External Links</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Frequent_error_messages">Frequent error messages</span></h2>
<h3><span class="mw-headline" id="Running_in_Bogus_Memory">Running in Bogus Memory</span></h3>
<p>You sent your code pointer (EIP) to some uninitialized memory area. This means you either followed a NULL (or uninitialized) pointer, or you damaged the return address of your <a href="Stack#Stack_example_on_the_X86_architecture" title="Stack">stack frame</a>. Make your code more clean, test pointers before you follow them, initialize every pointer (especially those who are on the stack) and enable *-Wall* in GCC.
</p>
<h3><span class="mw-headline" id="3rd_exception_with_no_resolution">3rd exception with no resolution</span></h3>
<p>The CPU didn't manage to invoke an exception handler and would normally <a href="Triple_Fault" title="Triple Fault">triple fault</a>. This is probably due to a bad <a href="Interrupt_Descriptor_Table" title="Interrupt Descriptor Table">IDT</a> register content, or a bad IDT descriptor. Sometimes (but less likely), it can also be due to a severe bug in your exception handler code. Check your exception works with "illegal" asm instructions like <tt>idiv 0</tt>, or
</p>
<div class="mw-highlight mw-highlight-lang-asm mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="nf">push</span><span class="w"> </span><span class="mi">0xf001</span><span class="w"></span>
<span class="w"> </span><span class="nf">pop</span><span class="w"> </span><span class="no">ds</span><span class="w">                   </span><span class="c1">; 0xf001 is no valid segment,</span>
<span class="w"> </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="err">~</span><span class="p">[</span><span class="no">ds</span><span class="p">:</span><span class="mi">0x12345678</span><span class="p">]</span><span class="w"> </span><span class="c1">; let&#39;s see if we get the GPF</span>
</pre></div>
<p>In several cases, there are other error messages prior to this one which can provide more details in the error. Some common messages that might be displayed:
</p>
<ul><li>interrupt(): gate descriptor is not valid sys seg</li></ul>
<dl><dd>You have not loaded an IDT, or the IDT is corrupt</dd></dl>
<ul><li>interrupt(): SS selector null</li></ul>
<dl><dd><ul><li>You have no TSS</li>
<li>You haven't set SS0 / ESP0 in the TSS</li></ul></dd></dl>
<ul><li>CR0 = 0xe0000001 CR2 = 0xe0000001</li></ul>
<dl><dd><ul><li>Your page tables are not page-aligned</li>
<li>Your page tables do not point to the correct parts of memory</li></ul></dd></dl>
<h3><span id="I.2FO_Operand_Size"></span><span class="mw-headline" id="I/O_Operand_Size">I/O Operand Size</span></h3>
<p>Bochs performs some rather paranoid checks on I/O operand size. Reading a byte from port 0x1234 is usually not the same thing as reading a 32-bit value. Go back to your chip's data sheet and double-check that your sizes are correct.
</p>
<h3><span id="fetch_raw_descriptor:_LDTR.valid.3D0"></span><span class="mw-headline" id="fetch_raw_descriptor:_LDTR.valid=0">fetch_raw_descriptor: LDTR.valid=0</span></h3>
<p>Many of you have said "but ... I do not have an LDT and I read it wasn't mandatory!?". You're right. And so is Bochs. This message usually means that your program tried to load a selector with some garbage value, which happened to have the 3rd bit (Table Indicator) set. The CPU will try to look up the descriptor in the LDT, but there's no LDT registered! In most cases, the error comes from some mispairing of push and pop on the stack, which lead to a non-selector value to be loaded in a segment register.
</p><p>If you're still stuck, download the Bochs source package and search for the message you received. Then, maybe you can add extra information to the message-printing code (like the faulty offset of a segfault, the segment limit, etc). But keep away from modifying Bochs' operations! Every time I suspected a bug in Bochs, I was just misunderstanding the Intel Manual...
</p>
<h2><span class="mw-headline" id="Differences_between_Bochs_and_real_hardware">Differences between Bochs and real hardware</span></h2>
<dl><dt>Bochs enables the A20 line in the BIOS</dt>
<dd>Your PC doesn't necessarily do so. Sometimes there's a BIOS option, sometimes there isn't. Check your code that enables the A20 line and make sure it has no issues with faster hardware.</dd></dl>
<dl><dt>Bochs wipes out its memory</dt>
<dd>In Bochs, memory is always filled with zero until you (or the BIOS) put something else. On a normal PC, uninitialized memory tends to contain garbage (most often all-ones) or traces of previous executions. Check your pointers, initialize them, print your code on paper if necessary.</dd></dl>
<dl><dt>Bochs does not properly emulate CPU cache/TLB</dt>
<dd>Although Bochs does have these constructs, they do not work the same as a regular CPU cache or TLB and do not change based on which CPU is being emulated.  If you're not handling caching or TLB refreshes correctly, behavior may differ in Bochs vs. hardware (i.e. it may work on Bochs but not on hardware, or vice versa).</dd></dl>
<dl><dt>Bochs floppy has no errors</dt>
<dd>In a physical PC, it's common to issue up to 3 read commands on a sector/track before it can be read fine. If you don't have proper error check/recovery in your bootsector, you're likely to run something that is not your kernel...</dd></dl>
<dl><dt>Bochs is flexible about returning to real mode</dt>
<dd>Despite what Chris Giese's Protected Mode tutorial states, you do not have to be in 16-bit protected mode to clear the PE bit of CR0. If you fail to enter 16-bit protected mode on a real PC, it will hang, without giving any error indication - no triple fault or anything!</dd></dl>
<dl><dt>Bochs' timer is not real time</dt>
<dd>(unless you configure it closer to real time). Waiting for 2 second on bochs will let any virtual device that needs 2 seconds to be ready be ready, but that could be just 0.02 seconds for you ... or that could be 200 seconds.</dd></dl>
<p>Adding 
</p>
<pre>clock: sync=realtime, time0=local
</pre>
<p>will cause interrupts at real intervals, but may overload the emulated OS with PIT interrupts and overflow the stack (if it's pre-emptible) Using <tt>sync=slowdown</tt> will also set it to real-time speeds, but with a constant amount of virtual clock cycles between each virtual second. For both the slowdown and original clock, you need to set the amount of instructions executed per second to the desired value.
</p>
<dl><dt>CPU is always Intel/AMD</dt>
<dd>Bochs emulates a CPU, so CPUID will always report back Intel (if emulating a 32-bit system) or AMD (if emulating a 64-bit system) regardless of what is really in your system.</dd></dl>
<p>Newer versions of Bochs allow you to specify the vendor string in the CPU tag:
</p>
<pre>cpu: vendor_string="test        "
# must be a twelve-character ASCII string!
</pre>
<h2><span class="mw-headline" id="Bochs_image_files_in_a_nutshell">Bochs image files in a nutshell</span></h2>
<p>To use Bochs to boot your custom kernel, search for the "floppya" and "boot" lines in the bochsrc configuration file. The following configuration allows you to use, and boot from, the "real" floppy drive of your computer:
</p>
<pre>floppya: 1_44=/dev/fd0, status=inserted
boot: floppy
</pre>
<p>For Windows users, that should read:
</p>
<pre>floppya: 1_44=a:, status=inserted
boot: floppy
</pre>
<p>But this is awfully slow, and puts lots of stress on the floppy when you are in a tight patch - make - boot cycle. Bochs offers the use of image files, including an interactive tool to create an image file (bximage.exe). Note that Bochs will emulate the floppy's internals even when the image is a device rather than a regular file ...
</p>
<h2><span class="mw-headline" id="Bochs_debugging_facilities">Bochs debugging facilities</span></h2>
<p>Bochs has several features that eases debugging. Many of them must be enabled via an configure switch:
</p>
<h3><span class="mw-headline" id="GUI_debugger">GUI debugger</span></h3>
<p>Bochs has a command-line internal debugger, and a graphical interface on top of it.  You must compile Bochs with the configuration option and then edit your bochsrc file in order to enable the GUI debugger.  I use this line in my bochsrc file to enable graphical debugging in X:
</p>
<pre> display_library: x, options="gui_debug"
</pre>
<p>In a Windows environment, add this line to your bochsrc.bxrc
</p>
<pre> display_library: win32, options="gui_debug"
</pre>
<p>It seems that on Windows, the "option" flag (what the above line used to read) will be accepted, but the GUI window will not appear.
</p>
<h3><span id="I.2FO_debugger_macros"></span><span class="mw-headline" id="I/O_debugger_macros">I/O debugger macros</span></h3>
<p>Some useful macros when Bochs is compiled with the I/O debug ports enabled (<tt>port_e9_hack: enabled=1</tt> if Bochs 2.4 or newer, <tt>configure --port-e9-hack</tt> if not):
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="c1">//outputs a character to the debug console</span>
<span class="w"> </span><span class="cp">#define BochsConsolePrintChar(c) outportb(0xe9, c)</span>
<span class="w"> </span><span class="c1">//stops simulation and breaks into the debug console</span>
<span class="w"> </span><span class="cp">#define BochsBreak() outportw(0x8A00,0x8A00); outportw(0x8A00,0x08AE0);</span>
</pre></div>
<h3><span class="mw-headline" id="Magic_Breakpoint">Magic Breakpoint</span></h3>
<p>When you're using Bochs with the <a rel="nofollow" class="external text" href="http://bochs.sourceforge.net/doc/docbook/user/internal-debugger.html">internal debugger</a>, you can trigger the debugger via a facility called <a rel="nofollow" class="external text" href="http://bochs.sourceforge.net/doc/docbook/user/bochsrc.html#AEN2324">magic breakpoints</a>. To trigger a breakpoint, you can insert <tt>xchg bx, bx</tt> (in GAS syntax, <tt>xchgw %bx, %bx</tt>) anywhere in the code and Bochs will trap into the debugger as soon as it executes it. On real hardware this has no effect as it merely replaces the BX register with itself.
</p><p>You should put the following line in your Bochs configuration file to have it listen to magic breakpoints:
</p>
<pre>magic_break: enabled=1
</pre>
<p>On older versions, enabling the debugger alone doesn't compile in magic breakpoint support, you will also need to specify <tt>--enable-magic-breakpoint</tt> when configuring the build on those versions.
</p>
<h3><span class="mw-headline" id="Debugging_SMP">Debugging SMP</span></h3>
<p>When using the internal debugger, you may use the following command to switch CPUs:
</p>
<pre> set $cpu = &lt;n&gt;
</pre>
<p>I also found this was necessary on occasion in the GUI debugger, even though it has buttons for each CPU.
</p>
<h3><span class="mw-headline" id="Internal_debugger_commands">Internal debugger commands</span></h3>
<p>You can pass a file containing debug commands to automatically run whenever you start bochs with the internal debugger.  (bochs -rc &lt;file&gt;)
</p><p>Bochs places an automatic breakpoint just before the BIOS loads, this can be automatically skipped by putting <tt>continue</tt> as the first command in the said file.
</p>
<h3><span class="mw-headline" id="Debugging_Triple_Faults">Debugging Triple Faults</span></h3>
<p>When using the internal debugger, you may change this line in your Bochs configuration file:
</p>
<pre>reset_on_triple_fault 0
</pre>
<p>This line disables the emulator reset on a Triple fault, enabling you to debug the code after a Triple fault occured (Very useful while implementing paging).
</p>
<h2><span class="mw-headline" id="Compiling_Bochs_from_Source">Compiling Bochs from Source</span></h2>
<p>Bochs has many compile-time configuration options, some of which conflict, and therefore a binary distribution of Bochs may not be suitable for your purposes.  I found it was best to compile my own copy of Bochs to be sure I had the features that I needed.  Also, you should consider using the CVS snapshot version of Bochs if the released version is old and not working for you.  I found this was necessary up until version 2.4 was released, for example.  On Ubuntu, you may have to run
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>  sudo apt-get install libgtk2.0-dev
</pre></div>
<p>and enter your password.  On other linux distros, try the equivalent.
</p><p>The array of Bochs configuration options can be confusing, and you cannot assume the defaults are going to be sensible.  These are the options I use, this can get you started:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>  ./configure --enable-smp <span class="se">\</span>
              --enable-cpu-level<span class="o">=</span><span class="m">6</span> <span class="se">\</span>
              --enable-all-optimizations <span class="se">\</span>
              --enable-x86-64 <span class="se">\</span>
              --enable-pci <span class="se">\</span>
              --enable-vmx <span class="se">\</span>
              --enable-debugger <span class="se">\</span>
              --enable-disasm <span class="se">\</span>
              --enable-debugger-gui <span class="se">\</span>
              --enable-logging <span class="se">\</span>
              --enable-fpu <span class="se">\</span>
              --enable-3dnow <span class="se">\</span>
              --enable-sb16<span class="o">=</span>dummy <span class="se">\</span>
              --enable-cdrom <span class="se">\</span>
              --enable-x86-debugger <span class="se">\</span>
              --enable-iodebug <span class="se">\</span>
              --disable-plugins <span class="se">\</span>
              --disable-docbook <span class="se">\</span>
              --with-x --with-x11 --with-term --with-sdl2
</pre></div>
<p>A few notes:
</p>
<ul><li>If you are on Windows, that last line should probably read "--with-win32".</li>
<li>On Linux, using SDL as the display library over X11 is preferable as the performance appears to increase greatly on some setups</li>
<li>Bochs has GDB stub support, and its own internal debugger.  These cannot be compiled into the same Bochs binary.  The internal debugger is very useful, its flag is --enable-debugger</li>
<li>The GDB stub in Bochs does not support SMP, last time I checked.</li>
<li>If you do not enable PCI, then the Intel Multiprocessing tables will not appear in memory.</li>
<li>I was unable to successfully load the GUI debugger without specifying <tt>--disable-plugins</tt>.  Otherwise, I get dynamic loading symbol errors.</li>
<li>Post-2.4.2 several of the CPU specific options were folded into the CPU-level specification and are therefore deprecated.  They have been removed from the example above.</li>
<li>The default compile does not support x86-64, --enable-x86-64 will turn it on</li>
<li>On many Linux distributions it is possible to install Bochs via a package manager. For example, on distributions that use apt-get we can do</li></ul>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>  sudo apt-get install bochs
  sudo apt-get install bochs-x
</pre></div>
<p>to install Bochs and the X11 plugin (which may crash on ubuntu/linux mint: install the sdl plugin and use sdl instead of x as the display library in this case). Note that there is a big chance that the graphical debugger is not enabled in the binaries from the package manager.
</p>
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<h3><span class="mw-headline" id="Articles">Articles</span></h3>
<ul><li><a href="Bochs_Graphics_Adaptor" class="mw-redirect" title="Bochs Graphics Adaptor">Bochs Graphics Adaptor</a></li>
<li><a href="Emulator_Comparison" title="Emulator Comparison">Emulator Comparison</a></li>
<li><a href="GDB" title="GDB">GDB</a></li>
<li><a href="./Category:Disk_Image_Utilities" title="Category:Disk Image Utilities">Category:Disk Image Utilities</a></li></ul>
<h3><span class="mw-headline" id="External_Links">External Links</span></h3>
<ul><li><a rel="nofollow" class="external text" href="http://bochs.sourceforge.net">Bochs Homepage</a></li>
<li><a rel="nofollow" class="external text" href="http://bochs.sourceforge.net/doc/docbook/user/internal-debugger.html">Bochs internal debugger commands documentation</a></li>
<li><a rel="nofollow" class="external text" href="http://www.codeproject.com/system/MakingOS_2.asp">CodeProject article on using Bochs</a></li></ul>
<!-- 
NewPP limit report
Cached time: 20250211122139
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.047 seconds
Real time usage: 0.711 seconds
Preprocessor visited node count: 384/1000000
Post‐expand include size: 1630/2097152 bytes
Template argument size: 905/2097152 bytes
Highest expansion depth: 8/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 3141/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    8.725      1 Template:Emulators
100.00%    8.725      1 -total
 66.31%    5.786      1 Template:SmallNavBox
 48.02%    4.190     20 Template:If
 31.76%    2.771     20 Template:Show1
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:1556-0!canonical and timestamp 20250211122138 and revision id 26405.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.osdev.org/index.php?title=Bochs&amp;oldid=26405">https://wiki.osdev.org/index.php?title=Bochs&amp;oldid=26405</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://wiki.osdev.org/index.php?title=Category:Pages_using_duplicate_arguments_in_template_calls&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using duplicate arguments in template calls (page does not exist)">Pages using duplicate arguments in template calls</a></li><li><a href="https://wiki.osdev.org/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li><li><a href="./Category:Emulators" title="Category:Emulators">Emulators</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-login" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Special:UserLogin&amp;returnto=Bochs" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li><li id="pt-darkmode" class="mw-list-item"><a href="Bochs#" class="ext-darkmode-link"><span>Dark mode</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="Bochs" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Talk:Bochs&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="Bochs"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Bochs&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Bochs&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="https://wiki.osdev.org/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search OSDev Wiki" aria-label="Search OSDev Wiki" autocapitalize="sentences" title="Search OSDev Wiki [f]" accesskey="f" id="searchInput"
				>
				<input type="hidden" name="title" value="Special:Search">
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="index.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-mainpage" class="mw-list-item"><a href="index.html" title="Visit the main page [z]" accesskey="z"><span>Main Page</span></a></li><li id="n-portal" class="mw-list-item"><a href="http://forum.osdev.org/" rel="nofollow" title="About the project, what you can do, where to find things"><span>Forums</span></a></li><li id="n-FAQ" class="mw-list-item"><a href="./Category:FAQ"><span>FAQ</span></a></li><li id="n-OS-Projects" class="mw-list-item"><a href="Projects"><span>OS Projects</span></a></li><li id="n-randompage" class="mw-list-item"><a href="https://wiki.osdev.org/Special:Random" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-about" class="vector-menu mw-portlet mw-portlet-about vector-menu-portal portal" aria-labelledby="p-about-label" role="navigation"  >
	<h3
		id="p-about-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">About</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-This-site" class="mw-list-item"><a href="./OSDevWiki:About"><span>This site</span></a></li><li id="n-Joining" class="mw-list-item"><a href="./OSDevWiki:Joining"><span>Joining</span></a></li><li id="n-Editing-help" class="mw-list-item"><a href="./OSDevWiki:Editing"><span>Editing help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="./Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li></ul>
		
	</div>
</nav>


<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="./Special:WhatLinksHere/Bochs" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="https://wiki.osdev.org/Special:RecentChangesLinked/Bochs" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="./Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Bochs&amp;oldid=26405" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Bochs&amp;action=info" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-lang" class="vector-menu mw-portlet mw-portlet-lang vector-menu-portal portal" aria-labelledby="p-lang-label" role="navigation"  >
	<h3
		id="p-lang-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">In other languages</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li class="interlanguage-link interwiki-de mw-list-item"><a href="http://www.lowlevel.eu/wiki/Bochs" title="Bochs – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li></ul>
		
	</div>
</nav>

</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 16 September 2021, at 19:50.</li>
	<li id="footer-info-0">This page has been accessed 17,633 times.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="./OSDev_Wiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="./OSDev_Wiki:About">About OSDev Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="./OSDev_Wiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://wiki.osdev.org/index.php?title=Bochs&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.047","walltime":"0.711","ppvisitednodes":{"value":384,"limit":1000000},"postexpandincludesize":{"value":1630,"limit":2097152},"templateargumentsize":{"value":905,"limit":2097152},"expansiondepth":{"value":8,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":3141,"limit":5000000},"timingprofile":["100.00%    8.725      1 Template:Emulators","100.00%    8.725      1 -total"," 66.31%    5.786      1 Template:SmallNavBox"," 48.02%    4.190     20 Template:If"," 31.76%    2.771     20 Template:Show1"]},"cachereport":{"timestamp":"20250211122139","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":815});});</script>
</body>
</html>