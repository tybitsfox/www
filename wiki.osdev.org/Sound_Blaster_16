<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Sound Blaster 16 - OSDev Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"c9992d38284638ff6112b414","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Sound_Blaster_16","wgTitle":"Sound Blaster 16","wgCurRevisionId":29159,"wgRevisionId":29159,"wgArticleId":2237,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages using deprecated source tags","Sound"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Sound_Blaster_16","wgRelevantArticleId":2237,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],
"wgMFDisplayWikibaseDescriptions":{"search":false,"nearby":false,"watchlist":false,"tagline":false},"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgVector2022PreviewPages":[],"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgEditSubmitButtonLabelPublish":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.DarkMode.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","ext.DarkMode","ext.moderation.notify","ext.moderation.ve","ext.moderation.ajaxhook","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=ext.DarkMode.styles%7Cext.pygments%7Cext.visualEditor.desktopArticleTarget.noscript%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://wiki.osdev.org/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://wiki.osdev.org/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.7"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="OSDev Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="OSDev Wiki Atom feed" href="https://wiki.osdev.org/index.php?title=Special:RecentChanges&amp;feed=atom"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Sound_Blaster_16 rootpage-Sound_Blaster_16 skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Sound Blaster 16</span></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From OSDev Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="Sound_Blaster_16#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="Sound_Blaster_16#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><p>The Sound Blaster series is a family of sound cards made by Creative. For many years they were the standard audio cards on IBM PC's.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Sound_Blaster_16#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Sound_Blaster_16#Digital_Signal_Processor"><span class="tocnumber">2</span> <span class="toctext">Digital Signal Processor</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Sound_Blaster_16#Operations"><span class="tocnumber">3</span> <span class="toctext">Operations</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Sound_Blaster_16#Reseting_DSP_(detecting_DSP)"><span class="tocnumber">3.1</span> <span class="toctext">Reseting DSP (detecting DSP)</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Sound_Blaster_16#Setting_IRQ"><span class="tocnumber">3.2</span> <span class="toctext">Setting IRQ</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Sound_Blaster_16#Programming_DMA"><span class="tocnumber">3.3</span> <span class="toctext">Programming DMA</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="Sound_Blaster_16#Writing_transfer_mode_to_DSP"><span class="tocnumber">3.4</span> <span class="toctext">Writing transfer mode to DSP</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Sound_Blaster_16#Writing_type_of_sound_data_to_DSP"><span class="tocnumber">3.5</span> <span class="toctext">Writing type of sound data to DSP</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="Sound_Blaster_16#Playing_sound"><span class="tocnumber">4</span> <span class="toctext">Playing sound</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="Sound_Blaster_16#Code"><span class="tocnumber">5</span> <span class="toctext">Code</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="Sound_Blaster_16#QEMU_support"><span class="tocnumber">6</span> <span class="toctext">QEMU support</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="Sound_Blaster_16#Workarounds"><span class="tocnumber">6.1</span> <span class="toctext">Workarounds</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="Sound_Blaster_16#See_Also"><span class="tocnumber">7</span> <span class="toctext">See Also</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="Sound_Blaster_16#External_Links"><span class="tocnumber">7.1</span> <span class="toctext">External Links</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>The Sound Blaster 16 is the successor to the Sound Blaster Pro audio card found in many older computers. It was first brought out in 1992. The main improvement over the Pro is its 16-bit digital audio sampling (hence the name). Most SB16 cards are PCI compatible, as Creative made this improvement shortly after releasing the card, upgrading from ISA.
</p>
<h2><span class="mw-headline" id="Digital_Signal_Processor">Digital Signal Processor</span></h2>
<p>The DSP built into the Sound Blaster 16 supports playing and recording audio in 8-bit and 16-bit PCM encoded samples, along with playing several other formats (ADPCM, etc.).  The base I/O register address can be found using the PCI bus for PCI models, or by detecting the presence of an older ISA Sound Blaster by issuing a Get Version command to one of several common I/O port addresses (0x220, 0x240, etc.) and waiting for a response.
</p>
<table border="2" cellpadding="4" cellspacing="0" style="margin-top:1em; margin-bottom:1em; background:#f9f9f9; border:1px #aaa solid; border-collapse:collapse; &#123;&#123;&#123;1&#125;&#125;&#125;">
<tbody><tr>
<th>Port
</th>
<th>Description
</th></tr>
<tr>
<td>0x224</td>
<td>DSP Mixer port
</td></tr>
<tr>
<td>0x225</td>
<td>DSP Mixer data port
</td></tr>
<tr>
<td>0x226</td>
<td>DSP Reset
</td></tr>
<tr>
<td>0x22A</td>
<td>DSP Read
</td></tr>
<tr>
<td>0x22C</td>
<td>DSP Write
</td></tr>
<tr>
<td>0x22E</td>
<td>DSP Read Status (Read this port to acknowledge 8-bit interrupt)
</td></tr>
<tr>
<td>0x22F</td>
<td>DSP 16-bit Interrupt Acknowledge (Read this port to acknowledge 16-bit interrupt)  (DSP Version 4.0+ Only)
</td></tr>
</tbody></table>
<table border="2" cellpadding="4" cellspacing="0" style="margin-top:1em; margin-bottom:1em; background:#f9f9f9; border:1px #aaa solid; border-collapse:collapse; &#123;&#123;&#123;1&#125;&#125;&#125;">
<tbody><tr>
<th>Command for DSP Write
</th>
<th>Description
</th>
<th>Output/input for command
</th></tr>
<tr>
<td>0x40</td>
<td>Set time constant</td>
<td>8 bit value
</td></tr>
<tr>
<td>0x41</td>
<td>Set Output Sample Rate</td>
<td>high bit/low bit
</td></tr>
<tr>
<td>0xD1</td>
<td>Turn speaker on</td>
<td>
</td></tr>
<tr>
<td>0xD3</td>
<td>Turn speaker off</td>
<td>
</td></tr>
<tr>
<td>0xD0</td>
<td>Stop playing 8 bit channel</td>
<td>
</td></tr>
<tr>
<td>0xD4</td>
<td>Resume playback of 8 bit channel</td>
<td>
</td></tr>
<tr>
<td>0xD5</td>
<td>Stop playing 16 bit channel</td>
<td>
</td></tr>
<tr>
<td>0xD6</td>
<td>Resume playback of 16 bit channel</td>
<td>
</td></tr>
<tr>
<td>0xE1</td>
<td>Get DSP version</td>
<td>major version/minor version
</td></tr>
</tbody></table>
<table border="2" cellpadding="4" cellspacing="0" style="margin-top:1em; margin-bottom:1em; background:#f9f9f9; border:1px #aaa solid; border-collapse:collapse; &#123;&#123;&#123;1&#125;&#125;&#125;">
<tbody><tr>
<th>Command for Mixer port
</th>
<th>Description
</th>
<th>Mixer data port
</th></tr>
<tr>
<td>0x22</td>
<td>Master volume</td>
<td>0xLR L=left volume R=right volume min=0x0 max=0xF (default value is 0xCC or 0x11)
</td></tr>
<tr>
<td>0x80</td>
<td>Set IRQ</td>
<td>See below
</td></tr>
</tbody></table>
<p>There are two modes for transfering data. First is single mode - data from buffer are played, interrupt is fired and playing is stopped. It make lower quality of sound. Second is auto mode - data from buffer are playing forever and interrupt is fired after play buffer. You should use interrupt for re-filling buffer.
</p>
<h2><span class="mw-headline" id="Operations">Operations</span></h2>
<h3><span id="Reseting_DSP_.28detecting_DSP.29"></span><span class="mw-headline" id="Reseting_DSP_(detecting_DSP)">Reseting DSP (detecting DSP)</span></h3>
<ol><li>Send 1 to DSP reset port</li>
<li>Wait 3 microseconds</li>
<li>Send 0 to DSP reset port</li>
<li>Now should be in DSP read port 0xAA.</li></ol>
<p>Some SB-compatible cards returned 0xAA on first check but on second check they reported their specific version.
</p>
<h3><span class="mw-headline" id="Setting_IRQ">Setting IRQ</span></h3>
<ol><li>Send 0x80 to Mixer port</li>
<li>Send value of your IRQ to Mixer data port</li></ol>
<p>0x01=IRQ 2 0x02=IRQ 5 0x04=IRQ 7 0x08=IRQ 10 Usually is used IRQ 5. You can read this port too for get actual IRQ.
</p>
<h3><span class="mw-headline" id="Programming_DMA">Programming DMA</span></h3>
<p>You can get more info about programming DMA on page <a rel="nofollow" class="external autonumber" href="http://homepages.cae.wisc.edu/~brodskye/sb16doc/sb16doc.html">[1]</a> .
</p><p>Programming 8 bit transfers throught channel 1 (channel number is 1):
</p>
<ol><li>Disable channel by writing to port 0x0A value 0x05 (channel number + 0x04)</li>
<li>Write value to flip-flop port 0x0C (any value e.g. 1)</li>
<li>Send transfer mode to 0x0B (0x48 for single mode/0x58 for auto mode + channel number)</li>
<li>Send page number to 0x83(page port of channel 1) For example if you have sound data at 0x100450, page is 0x10.</li>
<li>Send low bits of position to port 0x02(addr. port of channel 1) For example(see above) is 0x50.</li>
<li>Send high bits of position to port 0x02(addr. port of channel 1) For example(see above) is 0x04.</li>
<li>Send low bits of length of data to port 0x03(count port of channel 1) For example if is length 0x0FFF, send 0xFF</li>
<li>Send high bits of length of data to port 0x03(count port of channel 1) For example if is length 0x0FFF, send 0x0F</li>
<li>Enable channel by writing channel number to port 0x0A</li></ol>
<p>Programming 16 bit transfers throught channel 5 (channel number is 1 too):
</p>
<ol><li>Disable channel by writing to port 0xD4 value 0x05 (channel number + 0x04)</li>
<li>Write value to flip-flop port 0xD8 (any value e.g. 1)</li>
<li>Send transfer mode to 0xD6 (0x48 for single mode/0x58 for auto mode + channel number)</li>
<li>Send page number to 0x8B(page port of channel 5) For example if you have sound data at 0x100450, page is 0x10.</li>
<li>Send low bits of position to port 0xC4(addr. port of channel 5) For example(see above) is 0x50.</li>
<li>Send high bits of position to port 0xC4(pos. port of channel 5) For example(see above) is 0x04.</li>
<li>Send low bits of length of data to port 0xC6(count port of channel 5) For example if is length 0x0FFF, send 0xFF</li>
<li>Send high bits of length of data to port 0xC6(count port of channel 5) For example if is length 0x0FFF, send 0x0F</li>
<li>Enable channel by writing channel number to port 0xD4</li></ol>
<h3><span class="mw-headline" id="Writing_transfer_mode_to_DSP">Writing transfer mode to DSP</span></h3>
<p>Usually values are 0xB0 for 16 bit playing sound or 0xC0 for 8 bit playing sound.
</p>
<table border="2" cellpadding="4" cellspacing="0" style="margin-top:1em; margin-bottom:1em; background:#f9f9f9; border:1px #aaa solid; border-collapse:collapse; &#123;&#123;&#123;1&#125;&#125;&#125;">
<tbody><tr>
<th>Bit 7-4
</th>
<th>Bit 3
</th>
<th>Bit 2
</th>
<th>Bit 1
</th>
<th>Bit 0
</th></tr>
<tr>
<td>0xB=16 bit transfer 0xC=8 bit transfer</td>
<td>0=playing sound 1=recording sound</td>
<td>0</td>
<td>0=FIFO off 1=FIFO on</td>
<td>0
</td></tr>
</tbody></table>
<h3><span class="mw-headline" id="Writing_type_of_sound_data_to_DSP">Writing type of sound data to DSP</span></h3>
<p>You must write type of sound data after write transfer mode.
</p>
<table border="2" cellpadding="4" cellspacing="0" style="margin-top:1em; margin-bottom:1em; background:#f9f9f9; border:1px #aaa solid; border-collapse:collapse; &#123;&#123;&#123;1&#125;&#125;&#125;">
<tbody><tr>
<th>Bit 7
</th>
<th>Bit 6
</th>
<th>Bit 5
</th>
<th>Bit 4
</th>
<th>Bit 3
</th>
<th>Bit 2
</th>
<th>Bit 1
</th>
<th>Bit 0
</th></tr>
<tr>
<td>0</td>
<td>0</td>
<td>0=mono 1=stereo</td>
<td>0=unsigned 1=signed</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0
</td></tr>
</tbody></table>
<h2><span class="mw-headline" id="Playing_sound">Playing sound</span></h2>
<ol><li>Reset DSP</li>
<li>Load sound data to memory</li>
<li>Set master volume</li>
<li>Turn speaker on</li>
<li>Program ISA DMA to transfer</li>
<li>Set time constant. Notice that the Sound Blaster 16 is able to use sample rates instead of time constants using command 0x41 instead of 0x40. <br /> You can calculate the time constant like this: Time constant = 65536 - (256000000 / (channels * sampling rate))</li>
<li>Set output sample rate</li>
<li>Write transfer mode to DSP</li>
<li>Write type of sound data</li>
<li>Write data length to DSP(Low byte/High byte) (You must calculate LENGTH-1 e.g. if is your real length 0x0FFF, you must send 0xFE and 0x0F)</li></ol>
<h2><span class="mw-headline" id="Code">Code</span></h2>
<div class="mw-highlight mw-highlight-lang-asm mw-content-ltr" dir="ltr"><pre><span></span><span class="w">  </span><span class="err">%</span><span class="nf">macro</span><span class="w"> </span><span class="no">OUTB</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="err">%</span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="err">%</span><span class="mi">2</span><span class="w"></span>
<span class="w">    </span><span class="nf">out</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">al</span><span class="w"></span>
<span class="w">  </span><span class="err">%</span><span class="nf">endmacro</span><span class="w"></span>

<span class="w">  </span><span class="err">%</span><span class="nf">macro</span><span class="w"> </span><span class="no">INB</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="err">%</span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="nf">in</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">dx</span><span class="w"></span>
<span class="w">  </span><span class="err">%</span><span class="nf">endmacro</span><span class="w"></span>


<span class="w">  </span><span class="c1">;SOUND BLASTER 16 driver in real mode</span>

<span class="w">  </span><span class="c1">;reset sound blaster</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x226</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">;reset port</span>
<span class="w">  </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">86</span><span class="no">h</span><span class="w"></span>
<span class="w">  </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">0x0000</span><span class="w"></span>
<span class="w">  </span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">0xFFFF</span><span class="w"></span>
<span class="w">  </span><span class="nf">int</span><span class="w"> </span><span class="mi">15</span><span class="no">h</span><span class="w"> </span><span class="c1">;wait</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x226</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="c1">;reset port</span>

<span class="w">  </span><span class="c1">;turn speaker on</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x22C</span><span class="p">,</span><span class="w"> </span><span class="mi">0xD1</span><span class="w"></span>

<span class="w">  </span><span class="c1">;DMA channel 1</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x0A</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="c1">;disable channel 1 (number of channel + 0x04)</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x0C</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">;flip flop</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mi">0x49</span><span class="w"> </span><span class="c1">;transfer mode</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x83</span><span class="p">,</span><span class="w"> </span><span class="mi">0x01</span><span class="w"> </span><span class="c1">;PAGE TRANSFER (EXAMPLE POSITION IN MEMORY 0x[01]0F04) - SET THIS VALUE FOR YOU</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x02</span><span class="p">,</span><span class="w"> </span><span class="mi">0x04</span><span class="w"> </span><span class="c1">;POSITION LOW BIT (EXAMPLE POSITION IN MEMORY 0x010F[04]) - SET THIS VALUE FOR YOU</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x02</span><span class="p">,</span><span class="w"> </span><span class="mi">0x0F</span><span class="w"> </span><span class="c1">;POSITON HIGH BIT (EXAMPLE POSITION IN MEMORY 0x01[0F]04) - SET THIS VALUE FOR YOU</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x03</span><span class="p">,</span><span class="w"> </span><span class="mi">0xFF</span><span class="w"> </span><span class="c1">;COUNT LOW BIT (EXAMPLE 0x0FFF) - SET THIS VALUE FOR YOU</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x03</span><span class="p">,</span><span class="w"> </span><span class="mi">0x0F</span><span class="w"> </span><span class="c1">;COUNT HIGH BIT (EXAMPLE 0x0FFF) - SET THIS VALUE FOR YOU</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x0A</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">;enable channel 1</span>

<span class="w">  </span><span class="c1">;program sound blaster 16</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x22C</span><span class="p">,</span><span class="w"> </span><span class="mi">0x40</span><span class="w"> </span><span class="c1">;set time constant</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x22C</span><span class="p">,</span><span class="w"> </span><span class="mi">165</span><span class="w"> </span><span class="c1">;10989 Hz</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x22C</span><span class="p">,</span><span class="w"> </span><span class="mi">0xC0</span><span class="w"> </span><span class="c1">;8 bit sound</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x22C</span><span class="p">,</span><span class="w"> </span><span class="mi">0x00</span><span class="w"> </span><span class="c1">;mono and unsigned sound data</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x22C</span><span class="p">,</span><span class="w"> </span><span class="mi">0xFE</span><span class="w"> </span><span class="c1">;COUNT LOW BIT - COUNT LENGTH-1 (EXAMPLE 0x0FFF SO 0x0FFE) - SET THIS VALUE FOR YOU</span>
<span class="w">  </span><span class="nf">OUTB</span><span class="w"> </span><span class="mi">0x22C</span><span class="p">,</span><span class="w"> </span><span class="mi">0x0F</span><span class="w"> </span><span class="c1">;COUNT HIGH BIT - COUNT LENGTH-1 (EXAMPLE 0x0FFF SO 0x0FFE) - SET THIS VALUE FOR YOU</span>

<span class="w">  </span><span class="c1">;now transfer start - don&#39;t forget to handle irq</span>
</pre></div>
<h2><span class="mw-headline" id="QEMU_support">QEMU support</span></h2>
<p>QEMU is one of the few hypervisors/emulators that support this sound card.
To run QEMU with Sound Blaster 16 emulation, use the <code>-soundhw sb16</code> option.
</p><p><b>Warning</b>: recent versions of QEMU (&gt;= 4.0) have a broken support for
this sound card. See bug: <a rel="nofollow" class="external autonumber" href="https://bugs.launchpad.net/qemu/+bug/1873769">[2]</a>.
Briefly, when QEMU's GTK UI is used and audio is playing, you'll experience
the QEMU window freezing. In addition, there will be flickering in the audio
as well.
</p>
<h3><span class="mw-headline" id="Workarounds">Workarounds</span></h3>
<ol><li>Use an older version of QEMU. With QEMU 2.11 the problem simply does not exist.</li>
<li>Use <a rel="nofollow" class="external text" href="https://virt-manager.org">virt-manager</a> which connects to QEMU using Spice. The problem does not exist in this case because QEMU's GTK UI is not used. BUT, configuring QEMU to emulate Sound Blaster 16 through virt-manager requires some tricky settings:
<ol><li>Add any sound card to the VM</li>
<li>In virt-manager's Edit -&gt; Preferences menu check the "Enable XML editing" box.</li>
<li>Open VM's hardware and after selecting the sound card, click on the XML tab and replace its contents with:<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">&lt;sound</span> <span class="na">model=</span><span class="s">&quot;sb16&quot;</span><span class="nt">/&gt;</span>
</pre></div></li></ol></li>
<li>Run the OS using QEMU's <code>-curses</code> option or use QEMU's <code>-kernel</code> and <code>-nographic</code> (serial console): in this case, there will be no "freeze", but there still be some flickering in the audio.</li></ol>
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<h3><span class="mw-headline" id="External_Links">External Links</span></h3>
<ul><li><a rel="nofollow" class="external free" href="http://www.qzx.com/pc-gpe/">http://www.qzx.com/pc-gpe/</a></li>
<li><a rel="nofollow" class="external free" href="https://web.archive.org/web/20190613202127/http://homepages.cae.wisc.edu/~brodskye/sb16doc/sb16doc.html">https://web.archive.org/web/20190613202127/http://homepages.cae.wisc.edu/~brodskye/sb16doc/sb16doc.html</a></li>
<li><a rel="nofollow" class="external text" href="http://ftp.lanet.lv/ftp/mirror/x2ftp/msdos/programming/mxinfo/">Some documents at the bottom (.zip)</a></li></ul>
<!-- 
NewPP limit report
Cached time: 20250211122511
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.030 seconds
Real time usage: 0.326 seconds
Preprocessor visited node count: 69/1000000
Post‐expand include size: 810/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 8235/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.823      1 -total
 72.42%    0.596      5 Template:Wikitable
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:2237-0!canonical and timestamp 20250211122510 and revision id 29159.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.osdev.org/index.php?title=Sound_Blaster_16&amp;oldid=29159">https://wiki.osdev.org/index.php?title=Sound_Blaster_16&amp;oldid=29159</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://wiki.osdev.org/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li><li><a href="./Category:Sound" title="Category:Sound">Sound</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-login" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Special:UserLogin&amp;returnto=Sound+Blaster+16" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li><li id="pt-darkmode" class="mw-list-item"><a href="Sound_Blaster_16#" class="ext-darkmode-link"><span>Dark mode</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="Sound_Blaster_16" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Talk:Sound_Blaster_16&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="Sound_Blaster_16"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Sound_Blaster_16&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Sound_Blaster_16&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="https://wiki.osdev.org/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search OSDev Wiki" aria-label="Search OSDev Wiki" autocapitalize="sentences" title="Search OSDev Wiki [f]" accesskey="f" id="searchInput"
				>
				<input type="hidden" name="title" value="Special:Search">
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="index.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-mainpage" class="mw-list-item"><a href="index.html" title="Visit the main page [z]" accesskey="z"><span>Main Page</span></a></li><li id="n-portal" class="mw-list-item"><a href="http://forum.osdev.org/" rel="nofollow" title="About the project, what you can do, where to find things"><span>Forums</span></a></li><li id="n-FAQ" class="mw-list-item"><a href="./Category:FAQ"><span>FAQ</span></a></li><li id="n-OS-Projects" class="mw-list-item"><a href="Projects"><span>OS Projects</span></a></li><li id="n-randompage" class="mw-list-item"><a href="https://wiki.osdev.org/Special:Random" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-about" class="vector-menu mw-portlet mw-portlet-about vector-menu-portal portal" aria-labelledby="p-about-label" role="navigation"  >
	<h3
		id="p-about-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">About</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-This-site" class="mw-list-item"><a href="./OSDevWiki:About"><span>This site</span></a></li><li id="n-Joining" class="mw-list-item"><a href="./OSDevWiki:Joining"><span>Joining</span></a></li><li id="n-Editing-help" class="mw-list-item"><a href="./OSDevWiki:Editing"><span>Editing help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="./Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li></ul>
		
	</div>
</nav>


<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="./Special:WhatLinksHere/Sound_Blaster_16" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="https://wiki.osdev.org/Special:RecentChangesLinked/Sound_Blaster_16" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="./Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Sound_Blaster_16&amp;oldid=29159" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="https://wiki.osdev.org/index.php?title=Sound_Blaster_16&amp;action=info" title="More information about this page"><span>Page information</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 25 June 2024, at 15:54.</li>
	<li id="footer-info-0">This page has been accessed 11,675 times.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="./OSDev_Wiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="./OSDev_Wiki:About">About OSDev Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="./OSDev_Wiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://wiki.osdev.org/index.php?title=Sound_Blaster_16&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.030","walltime":"0.326","ppvisitednodes":{"value":69,"limit":1000000},"postexpandincludesize":{"value":810,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":3,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":8235,"limit":5000000},"timingprofile":["100.00%    0.823      1 -total"," 72.42%    0.596      5 Template:Wikitable"]},"cachereport":{"timestamp":"20250211122511","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":427});});</script>
</body>
</html>