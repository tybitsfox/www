<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
    <meta name="generator" content="AsciiDoc 8.2.7" />
    <link rel="stylesheet" href="xhtml11.css" type="text/css" />
    <link rel="icon" href="chrome://vimperator/skin/icon.png" type="image/png" />
    <script type="application/x-javascript;version=1.8" src="help.js"></script>
    <title>autocommands.html</title>
  </head>
<body>
<h1 style="font-size: inherit; text-align: right;">
  <span class="tag" style="float: none;">autocommands.html</span>
</h1>
<div class="para"><p><div style="float: right; padding-left: 1px;"> <form action="https://www.paypal.com/cgi-bin/webscr" method="post"> <fieldset class="paypal"> <input type="hidden" name="cmd" value="_s-xclick"/> <input type="image" src="data:image/gif;base64,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" name="submit" alt="Make payments with PayPal - it's fast, free and secure!"/> <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----"/> </fieldset> </form> </div> <span class="vimperator-logo"></span></p></div>
<div class="para"><p><span class="tag">autocommands</span><br />
<span class="tag">自动命令</span><br /></p></div>
<div class="para"><p>自动命令是一种在特定事件发生时自动执行代码的方法。</p></div>
<div class="para"><p><span class="tag">:au</span> <span class="tag">:autocmd</span><br />
<div class="key">:au[tocmd]</div></p></div>
<div class="quoteblock">
<div class="content">
<div class="para"><p>在事件发生时自动执行命令。</p></div>
<div class="para"><p><a class="command" href="#">:au[tocmd]</a> <span class="argument">&#123;event&#125;</span> <span class="argument">&#123;pat&#125;</span> <span class="argument">&#123;cmd&#125;</span></p></div>
<div class="para"><p></p></div>
<div class="ilist"><ul>
<li>
<p>
<a class="command" href="#">:autocmd<span class="argument">&#91;!&#93;</span></a> <span class="argument">&#123;events&#125;</span> <span class="argument">&#123;pat}：列出或删除事件 {events&#125;</span> 和模式 <span class="argument">&#123;pat&#125;</span> 相对应的自动命令
</p>
</li>
<li>
<p>
<a class="command" href="#">:autocmd<span class="argument">&#91;!&#93;</span></a> <span class="argument">&#123;events}：列出或删除和事件 {events&#125;</span> 相匹配的自动命令
</p>
</li>
<li>
<p>
<a class="command" href="#">:autocmd<span class="argument">&#91;!&#93;</span></a> * <span class="argument">&#123;pat}：列出或删除和模式 {pat&#125;</span> 相匹配的自动命令
</p>
</li>
<li>
<p>
<a class="command" href="#">:autocmd<span class="argument">&#91;!&#93;</span></a>：列出或删除所有自动命令
</p>
</li>
</ul></div>
<div class="para"><p></p></div>
<div class="tableblock">
<table rules="none"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="240" />
<col width="468" />
<tbody valign="top">
  <tr>
    <td align="left">
    <strong>BookmarkAdd</strong>
    </td>
    <td align="left">
    在一个页面被加为书签后被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>ColorScheme</strong>
    </td>
    <td align="left">
    在一个配色方案加载后被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>DOMLoad</strong>
    </td>
    <td align="left">
    在一个页面的 DOM 完全加载后被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>DownloadPost</strong>
    </td>
    <td align="left">
    在下载完成时被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>Fullscreen</strong>
    </td>
    <td align="left">
    在浏览器的全屏状态发生改变时被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>LocationChange</strong>
    </td>
    <td align="left">
    在切换标签页或打开一个新的网址时被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>PageLoadPre</strong>
    </td>
    <td align="left">
    在开始加载页面前被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>PageLoad</strong>
    </td>
    <td align="left">
    在一个页面重新加载或打开时被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>ShellCmdPost</strong>
    </td>
    <td align="left">
    在使用 <a class="command" href="">:!</a><span class="argument">&#123;cmd&#125;</span> 执行完一条 shell 命令后被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>VimperatorEnter</strong>
    </td>
    <td align="left">
    在 Firefox 启动后被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>VimperatorLeavePre</strong>
    </td>
    <td align="left">
    在退出 Firefox 时所有模块被注销之前被触发
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>VimperatorLeave</strong>
    </td>
    <td align="left">
    在退出 Firefox 之前被触发
    </td>
  </tr>
</tbody>
</table>
</div>
<div class="para"><p>模式 <span class="argument">&#123;pat&#125;</span> 是一个正则表达式。如果你希望匹配任意 URL，可以用 .* 。</p></div>
<div class="para"><p>注意：Vim 中 <span class="argument">&#123;pat&#125;</span> 使用的是 glob 表达式而这里使用的是正则表达式。</p></div>
<div class="para"><p>下列关键字在相关的地方是可用的：</p></div>
<div class="tableblock">
<table rules="none"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="171" />
<col width="537" />
<tbody valign="top">
  <tr>
    <td align="left">
    <strong>&lt;url&gt;</strong>
    </td>
    <td align="left">
    选择事件所依据的 URL。
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>&lt;title&gt;</strong>
    </td>
    <td align="left">
    页面、书签或下载项的标题。
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>&lt;tab&gt;</strong>
    </td>
    <td align="left">
    事件发生的标签页。
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>&lt;tags&gt;</strong>
    </td>
    <td align="left">
    地址 &lt;url&gt; 的标签，仅用于 *BookmarkAdd*。
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>&lt;keyword&gt;</strong>
    </td>
    <td align="left">
    书签的关键字，仅用于 *BookmarkAdd*。
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>&lt;icon&gt;</strong>
    </td>
    <td align="left">
    地址 &lt;url&gt; 的图标，仅用于 *BookmarkAdd*。
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>&lt;size&gt;</strong>
    </td>
    <td align="left">
    已下载文件的大小，仅用于 *DownloadPost*。
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>&lt;file&gt;</strong>
    </td>
    <td align="left">
    下载项的目的路径，仅用于 *DownloadPost*。
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>&lt;state&gt;</strong>
    </td>
    <td align="left">
    全屏状态，仅用于 *Fullscreen*。
    </td>
  </tr>
  <tr>
    <td align="left">
    <strong>&lt;name&gt;</strong>
    </td>
    <td align="left">
    配色方案的名称，仅用于 *ColorScheme*。
    </td>
  </tr>
</tbody>
</table>
</div>
</div>
<div class="attribution">
</div></div>
<div class="para"><p><span class="tag">:doautoa</span> <span class="tag">:doautoall</span>
<div class="key">:doautoa[ll] <span class="argument">&#123;event&#125;</span> <span class="argument">[url]</span></div><br /></p></div>
<div class="quoteblock">
<div class="content">
<div class="para"><p>对所有缓冲区执行和指定 URL 匹配的自动命令。如果没有指定 <span class="argument">[url]</span> 那么使用当前 URL。</p></div>
</div>
<div class="attribution">
</div></div>
<div class="para"><p><span class="tag">:do</span> <span class="tag">:doautocmd</span>
<div class="key">:do[autocmd] <span class="argument">&#123;event&#125;</span> <span class="argument">[url]</span></div><br /></p></div>
<div class="quoteblock">
<div class="content">
<div class="para"><p>对当前缓冲区执行和指定 URL 匹配的自动命令。如果没有指定 <span class="argument">[url]</span> 那么使用当前 URL。</p></div>
</div>
<div class="attribution">
</div></div>
<div class="para"><p><table style="border-bottom: 1px solid silver; width: 100%">
<tr style="width: 100%"><td style="width: 50%"><h2>例子</h2></td><td style="width: 50%">


 <a id="autocmd-examples"/><span class="tag">autocmd-examples</span>
</td></tr>
</table></p></div>
<div class="para"><p>对 Google 的所有站点启用 <em>passthrough</em> 模式：</p></div>
<div class="para"><p>&#160;<a class="command" href="#">:autocmd LocationChange .* js modes.passAllKeys = /google\.com/.test(buffer.URL)</a></p></div>
<div class="para"><p>对 Google 的 <strong>某些</strong> 站点启用 <em>passthrough</em> 模式：</p></div>
<div class="para"><p>&#160;<a class="command" href="#">:autocmd LocationChange .* js modes.passAllKeys = /(www|mail)\.google\.com/.test(buffer.URL)</a></p></div>
<div class="para"><p>在使用 Gmail 撰写邮件时将 filetype （文件类型）设置为 mail （邮件）：</p></div>
<div class="para"><p>&#160;<a class="command" href="">:autocmd LocationChange .* :set editor=gvim\ -f</a><br />
&#160;<a class="command" href="">:autocmd LocationChange mail\.google\.com :set editor="gvim -f -c <a class="option" href="#">'set ft=mail'</a>"</a></p></div>
<div id="footer">
<div id="footer-text">
Last updated 2009-04-08 16:18:19 CST
</div>
</div>
</body>
</html>
