<HTML><HEAD><TITLE>mcrypt_encrypt</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="Mcrypt Encryption Functions" HREF="ref.mcrypt.html"><LINK REL="PREVIOUS" TITLE="mcrypt_enc_self_test" HREF="function.mcrypt-enc-self-test.html"><LINK REL="NEXT" TITLE="mcrypt_generic_deinit" HREF="function.mcrypt-generic-deinit.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="refentry" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.mcrypt-enc-self-test.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.mcrypt-generic-deinit.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><H1><A NAME="function.mcrypt-encrypt"></A>mcrypt_encrypt</H1><DIV CLASS="refnamediv"><A NAME="AEN54445"></A><P> (PHP 4 &#62;= 4.0.2)</P>mcrypt_encrypt&nbsp;--&nbsp;Encrypts plaintext with given parameters</DIV><DIV CLASS="refsect1"><A NAME="AEN54448"></A><H2>Description</H2>string <B CLASS="methodname">mcrypt_encrypt</B> ( string cipher, string key, string data, string mode [, string iv])<BR></BR><P>&#13; <B CLASS="function">mcrypt_encrypt()</B> encrypts the data
and returns the encrypted data.
</P><P>&#13; <TT CLASS="parameter"><I>Cipher</I></TT> is one of the MCRYPT_ciphername
constants of the name of the algorithm as string.
</P><P>&#13; <TT CLASS="parameter"><I>Key</I></TT> is the key with which the data
will be encrypted. If it's smaller that the required keysize, it
is padded with '<TT CLASS="literal">\0</TT>'. It is better not to use ASCII strings for
keys. It is recommended to use the mhash functions to create a key
from a string.
</P><P>&#13; <TT CLASS="parameter"><I>Data</I></TT> is the data that will be encrypted
with the given cipher and mode. If the size of the data is not
n * blocksize, the data will be padded with '<TT CLASS="literal">\0</TT>'. The returned
crypttext can be larger that the size of the data that is given
by <TT CLASS="parameter"><I>data</I></TT>.
</P><P>&#13; <TT CLASS="parameter"><I>Mode</I></TT> is one of the MCRYPT_MODE_modename
constants of one of "ecb", "cbc", "cfb", "ofb", "nofb" or
"stream".
</P><P>&#13; The <TT CLASS="parameter"><I>IV</I></TT> parameter is used for the
initialisation in CBC, CFB, OFB modes, and in some algorithms
in STREAM mode. If you do not supply an IV, while it is needed
for an algorithm, the function issues a warning and uses an
IV with all bytes set to '<TT CLASS="literal">\0</TT>'.
</P><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN54485"></A><P><B>例子 1. <B CLASS="function">mcrypt_encrypt()</B> Example</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;$iv_size </font><font color="#007700">= </font><font color="#0000BB">mcrypt_get_iv_size</font><font color="#007700">(</font><font color="#0000BB">MCRYPT_RIJNDAEL_256</font><font color="#007700">, </font><font color="#0000BB">MCRYPT_MODE_ECB</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$iv </font><font color="#007700">= </font><font color="#0000BB">mcrypt_create_iv</font><font color="#007700">(</font><font color="#0000BB">$iv_size</font><font color="#007700">, </font><font color="#0000BB">MCRYPT_RAND</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$key </font><font color="#007700">= </font><font color="#DD0000">"This is a very secret key"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$text </font><font color="#007700">= </font><font color="#DD0000">"Meet me at 11 o'clock behind the monument."</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#0000BB">strlen</font><font color="#007700">(</font><font color="#0000BB">$text</font><font color="#007700">) . </font><font color="#DD0000">"\n"</font><font color="#007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$crypttext </font><font color="#007700">= </font><font color="#0000BB">mcrypt_encrypt</font><font color="#007700">(</font><font color="#0000BB">MCRYPT_RIJNDAEL_256</font><font color="#007700">, </font><font color="#0000BB">$key</font><font color="#007700">, </font><font color="#0000BB">$text</font><font color="#007700">, </font><font color="#0000BB">MCRYPT_MODE_ECB</font><font color="#007700">, </font><font color="#0000BB">$iv</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#0000BB">strlen</font><font color="#007700">(</font><font color="#0000BB">$crypttext</font><font color="#007700">) . </font><font color="#DD0000">"\n"</font><font color="#007700">;<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE><P>&#13; The above example will print out:
<TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE CLASS="screen">42
64</PRE></TD></TR></TABLE>
</P></DIV></TD></TR></TABLE>
</P><P>&#13; See also <A HREF="function.mcrypt-module-open.html"><B CLASS="function">mcrypt_module_open()</B></A> for a more advanced API
and an example.
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.mcrypt-enc-self-test.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.mcrypt-generic-deinit.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">mcrypt_enc_self_test</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="ref.mcrypt.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">mcrypt_generic_deinit</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
