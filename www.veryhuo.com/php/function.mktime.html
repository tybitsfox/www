<HTML><HEAD><TITLE>mktime</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="时间日期函数库" HREF="ref.datetime.html"><LINK REL="PREVIOUS" TITLE="microtime" HREF="function.microtime.html"><LINK REL="NEXT" TITLE="strftime" HREF="function.strftime.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="refentry" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.microtime.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.strftime.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><H1><A NAME="function.mktime"></A>mktime</H1><DIV CLASS="refnamediv"><A NAME="AEN18726"></A><P> (PHP 3, PHP 4 )</P>mktime&nbsp;--&nbsp;取得一个日期的 UNIX 时间戳</DIV><DIV CLASS="refsect1"><A NAME="AEN18729"></A><H2>说明</H2>int <B CLASS="methodname">mktime</B> ( [int hour [, int minute [, int second [, int month [, int day [, int year [, int is_dst]]]]]]])<BR></BR><P>&#13; <SPAN CLASS="emphasis"><I CLASS="emphasis">警告：</I></SPAN>注意参数的奇怪顺序，这和标准的 UNIX mktime()
调用中的参数顺序不同。在脚本经常会混淆这些值而出错。
</P><P>&#13; 根据给出的参数返回 Unix 时间戳。时间戳是一个长整数，包含了从
Unix 新纪元（1970 年 1 月 1 日）到给定时间的秒数。
</P><P>&#13; 参数可以从右向左省略，任何省略的参数会被设置成本地日期和时间的当前值。
</P><P>&#13; <TT CLASS="parameter"><I>is_dst</I></TT> 在夏令时可以被设为 1，如果不是则设为
0，或者不知道是否为夏令时的话设为 -1（默认值）。如果不知道，PHP
会尝试自己判断。这可能会产生未预期（但不是错误）的结果。
</P><DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
<TT CLASS="parameter"><I>is_dst</I></TT> 是 3.0.10 版新加的。
</P></BLOCKQUOTE></DIV><P>&#13; <B CLASS="function">mktime()</B> 可以用来做日期计算和验证，对于超出范围的输入它可以自动计算出正确的值来。例如，下面的每一行都会输出字符串“Jan-01-1998”。
<TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN18766"></A><P><B>例子 1. <B CLASS="function">mktime()</B> 例子</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#007700">echo </font><font color="#0000BB">date </font><font color="#007700">(</font><font color="#DD0000">"M-d-Y"</font><font color="#007700">, </font><font color="#0000BB">mktime </font><font color="#007700">(</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">12</font><font color="#007700">,</font><font color="#0000BB">32</font><font color="#007700">,</font><font color="#0000BB">1997</font><font color="#007700">));<br />echo </font><font color="#0000BB">date </font><font color="#007700">(</font><font color="#DD0000">"M-d-Y"</font><font color="#007700">, </font><font color="#0000BB">mktime </font><font color="#007700">(</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">13</font><font color="#007700">,</font><font color="#0000BB">1</font><font color="#007700">,</font><font color="#0000BB">1997</font><font color="#007700">));<br />echo </font><font color="#0000BB">date </font><font color="#007700">(</font><font color="#DD0000">"M-d-Y"</font><font color="#007700">, </font><font color="#0000BB">mktime </font><font color="#007700">(</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">1</font><font color="#007700">,</font><font color="#0000BB">1</font><font color="#007700">,</font><font color="#0000BB">1998</font><font color="#007700">));<br />echo </font><font color="#0000BB">date </font><font color="#007700">(</font><font color="#DD0000">"M-d-Y"</font><font color="#007700">, </font><font color="#0000BB">mktime </font><font color="#007700">(</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">1</font><font color="#007700">,</font><font color="#0000BB">1</font><font color="#007700">,</font><font color="#0000BB">98</font><font color="#007700">));<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
<TT CLASS="parameter"><I>Year</I></TT> 可以是两位或四位数字，取值从
0-69 表示 2000-2069 以及 70-99 表示 1970-1999（在如今很常见的
time_t 是 32 位有符号整数的系统中，<TT CLASS="parameter"><I>year</I></TT>
的有效范围是 1901 到 2038）。
</P><P>&#13; <DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>Windows: </B>
目前所有的 Windows 系统都不支持负的时间戳。因此合法的年份范围只包括从
1970 到 2038。
</P></BLOCKQUOTE></DIV>
</P><P>&#13; 给定月份的最后一天可以表达为下个月的第 "0" 天，而不是 -1
天。下面两个例子都将产生字符串“The last day in Feb 2000 is: 29”。
<TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN18777"></A><P><B>例子 2. 每个月的最后一天</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />$lastday </font><font color="#007700">= </font><font color="#0000BB">mktime </font><font color="#007700">(</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">3</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">2000</font><font color="#007700">);<br />echo </font><font color="#0000BB">strftime </font><font color="#007700">(</font><font color="#DD0000">"Last day in Feb 2000 is: %d"</font><font color="#007700">, </font><font color="#0000BB">$lastday</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></font><font color="#0000BB">$lastday </font><font color="#007700">= </font><font color="#0000BB">mktime </font><font color="#007700">(</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">4</font><font color="#007700">,-</font><font color="#0000BB">31</font><font color="#007700">,</font><font color="#0000BB">2000</font><font color="#007700">);<br />echo </font><font color="#0000BB">strftime </font><font color="#007700">(</font><font color="#DD0000">"Last day in Feb 2000 is: %d"</font><font color="#007700">, </font><font color="#0000BB">$lastday</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P><P>&#13; 年，月，日都等于零的日期被认为是非法的（否则会被当作
30.11.1999，这是很怪的行为）。
</P><P>&#13; 参见 <A HREF="function.date.html"><B CLASS="function">date()</B></A> 和 <A HREF="function.time.html"><B CLASS="function">time()</B></A>。
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.microtime.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.strftime.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">microtime</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="ref.datetime.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">strftime</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
