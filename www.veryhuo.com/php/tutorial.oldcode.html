<HTML><HEAD><TITLE>在新版本的 PHP 中使用旧的 PHP 代码</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="简明教程" HREF="tutorial.html"><LINK REL="PREVIOUS" TITLE="处理表单" HREF="tutorial.forms.html"><LINK REL="NEXT" TITLE="下一步做什么？" HREF="tutorial.whatsnext.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="sect1" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="tutorial.forms.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom">章 2. 简明教程</TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="tutorial.whatsnext.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="sect1"><H1 CLASS="sect1"><A NAME="tutorial.oldcode"></A>在新版本的 PHP 中使用旧的 PHP 代码</H1><P>&#13; 现在，PHP 已经发展成为一种流行的脚本语言，您可以在很多公共的资源里找到您可以在您自己的脚本中重新利用的代码。PHP 语言的开发者为向下兼容性下了很多功夫，因此在新版本的 PHP 下，老版本的代码应该可以在不作任何改动的情况下（理想地）运行。不过实际上，我们还是必须对老的代码做一些改动。
</P><P>&#13; 有可能影响到老版本的代码的最重要的两点改动分别是：
<P></P><UL><LI><P>&#13; 取消了旧的 <TT CLASS="varname">$HTTP_*_VARS</TT> 数组（在函数或者方法中他们原本是全局变量）。PHP <A HREF="http://www.php.net/release_4_1_0.php" TARGET="_top">4.1.0</A> 版本引入了如下<A HREF="language.variables.predefined.html#language.variables.superglobals">自动全局数组变量</A>：
<TT CLASS="varname">$_GET</TT>、<TT CLASS="varname">$_POST</TT>、
<TT CLASS="varname">$_COOKIE</TT>、<TT CLASS="varname">$_SERVER</TT>、
<TT CLASS="varname">$_FILE</TT>、<TT CLASS="varname">$_ENV</TT>、<TT CLASS="varname">$_REQUEST</TT> 以及 <TT CLASS="varname">$_SESSION</TT>。 老的 <TT CLASS="varname">$HTTP_*_VARS</TT> 数组，诸如 $HTTP_POST_VARS 等，从 PHP 3 就已经开始使用，它们仍然存在。
在 PHP 5.0.0 中，长的 PHP
<A HREF="language.variables.predefined.html">预定义</A>数组可以通过设置
<A HREF="configuration.directives.html#ini.register-long-arrays">register_long_arrays</A> 来屏蔽。
</P></LI><LI><P>&#13; 外部变量不再默认得被注册为全局变量。也就是说，从 PHP <A HREF="http://www.php.net/release_4_2_0.php" TARGET="_top">4.2.0</A> 版本开始，$php.ini; 中的设置选项 <A HREF="configuration.directives.html#ini.register-globals">register_globals</A> 默认值变成了 <SPAN CLASS="emphasis"><I CLASS="emphasis">off</I></SPAN>。我们建议您用以上提到的自动全局数组变量来访问这些值。但可能老的脚本、书籍以及教程都可能建立在该设置为 on 的基础上。如果该选项被设置为 on，则您便可以在 URL <TT CLASS="literal">http://www.example.com/foo.php?id=42</TT> 中直接使用变量 <TT CLASS="varname">$id</TT>。但不管被设置为 on 还是 off，<TT CLASS="varname">$_GET['id']</TT> 一直有效。
</P></LI></UL>
</P><P>&#13; 如果您希望了解关于这些改动的细节，请参阅“<A HREF="language.variables.predefined.html">预定义变量</A>”一节以及其中的超链接。
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="tutorial.forms.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="tutorial.whatsnext.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">处理表单</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="tutorial.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">下一步做什么？</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
