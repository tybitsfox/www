<HTML><HEAD><TITLE>mSQL Functions</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="函数参考" HREF="funcref.html"><LINK REL="PREVIOUS" TITLE="udm_set_agent_param" HREF="function.udm-set-agent-param.html"><LINK REL="NEXT" TITLE="msql_affected_rows" HREF="function.msql-affected-rows.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="reference" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.udm-set-agent-param.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.msql-affected-rows.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="reference"><A NAME="ref.msql"></A><DIV CLASS="TITLEPAGE"><H1 CLASS="title">LXIII. mSQL Functions</H1><DIV CLASS="PARTINTRO"><A NAME="AEN64023"></A><DIV CLASS="section"><H1 CLASS="section"><A NAME="msql.intro"></A>介绍</H1><P>&#13; These functions allow you to access mSQL database servers. More
information about mSQL can be found at
<A HREF="http://www.hughes.com.au/" TARGET="_top">http://www.hughes.com.au/</A>.
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="msql.installation"></A>安装</H1><P>&#13; In order to have these functions available, you must compile PHP with
msql support by using the
<TT CLASS="option">--with-msql[=DIR]</TT> option. DIR is the mSQL
base install directory, defaults to <TT CLASS="filename">/usr/local/Hughes</TT>.
</P><DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>Note to Win32 Users: </B>
In order to enable this module on a Windows environment, you must copy
<TT CLASS="filename">msql.dll</TT> from the DLL folder of the PHP/Win32
binary package to the SYSTEM32 folder of your windows machine.
(Ex: <TT CLASS="filename">C:\WINNT\SYSTEM32</TT> or
<TT CLASS="filename">C:\WINDOWS\SYSTEM32</TT>)
</P></BLOCKQUOTE></DIV></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="msql.configuration"></A>运行时配置</H1><P>这些函数的行为受到全局<A HREF="configuration.html#configuration.file">配置文件</A> <TT CLASS="filename">php.ini</TT> 的影响。</P><P>&#13; <DIV CLASS="table"><A NAME="AEN64045"></A><P><B>表格 1. mSQL configuration options</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><THEAD><TR><TH ALIGN="LEFT" VALIGN="MIDDLE">Name</TH><TH ALIGN="LEFT" VALIGN="MIDDLE">Default</TH><TH ALIGN="LEFT" VALIGN="MIDDLE">Changeable</TH></TR></THEAD><TBODY><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">msql.allow_persistent</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">"On"</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">PHP_INI_SYSTEM</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">msql.max_persistent</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">"-1"</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">PHP_INI_SYSTEM</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">msql.max_links</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">"-1"</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">PHP_INI_SYSTEM</TD></TR></TBODY></TABLE></DIV>
For further details and definition of the PHP_INI_* constants see
<A HREF="function.ini-set.html"><B CLASS="function">ini_set()</B></A>.
</P><P>以下是该配置选项的简要解释。</P><P>&#13; <P></P><DIV CLASS="variablelist"><DL><DT><A NAME="ini.msql.allow-persistent"></A><TT CLASS="parameter"><I>msql.allow_persistent</I></TT>
<A HREF="language.types.boolean.html"><B CLASS="type">boolean</B></A></DT><DD><P>&#13; Whether to allow persistent mSQL connections.
</P></DD><DT><A NAME="ini.msql.max-persistent"></A><TT CLASS="parameter"><I>msql.max_persistent</I></TT>
<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A></DT><DD><P>&#13; The maximum number of persistent mSQL connections per process.
</P></DD><DT><A NAME="ini.msql.max-links"></A><TT CLASS="parameter"><I>msql.max_links</I></TT>
<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A></DT><DD><P>&#13; The maximum number of mSQL connections per process, including
persistent connections.
</P></DD></DL></DIV>
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="msql.resources"></A>资源类型</H1><P>&#13; There are two resource types used in the mSQL module. The first one
is the link identifier for a database connection, the second a resource
which holds the result of a query.
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="msql.constants"></A>预定义常量</H1><P>&#13;由于这些常量是由该扩展模块定义的，因此只有在该扩展模块被编译到 PHP 中，或者在运行时被动态加载后，这些常量才有效。</P><P></P><DIV CLASS="variablelist"><DL><DT><TT CLASS="constant"><B>MSQL_ASSOC</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13;
</P></DD><DT><TT CLASS="constant"><B>MSQL_NUM</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13;
</P></DD><DT><TT CLASS="constant"><B>MSQL_BOTH</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13;
</P></DD></DL></DIV></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="msql.examples"></A>范例</H1><P>&#13; This simple example shows how to connect, execute a query, print
resulting rows and disconnect from a mSQL database.
<TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN64116"></A><P><B>例子 1. mSQL usage example</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">/* Connecting, selecting database */<br /></font><font color="#0000BB">$link </font><font color="#007700">= </font><font color="#0000BB">msql_connect</font><font color="#007700">(</font><font color="#DD0000">'localhost'</font><font color="#007700">, </font><font color="#DD0000">'username'</font><font color="#007700">, </font><font color="#DD0000">'password'</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;or die(</font><font color="#DD0000">'Could not connect : ' </font><font color="#007700">. </font><font color="#0000BB">msql_error</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">));<br /><br /></font><font color="#0000BB">msql_select_db</font><font color="#007700">(</font><font color="#DD0000">'database'</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;or die(</font><font color="#DD0000">'Could not select database'</font><font color="#007700">, </font><font color="#0000BB">$link</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* Issue SQL query */<br /></font><font color="#0000BB">$query </font><font color="#007700">= </font><font color="#DD0000">'SELECT * FROM my_table'</font><font color="#007700">;<br /></font><font color="#0000BB">$result </font><font color="#007700">= </font><font color="#0000BB">msql_query</font><font color="#007700">(</font><font color="#0000BB">$query</font><font color="#007700">, </font><font color="#0000BB">$link</font><font color="#007700">) or die(</font><font color="#DD0000">'Query failed : ' </font><font color="#007700">. </font><font color="#0000BB">msql_error</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">));<br /><br /></font><font color="#FF8000">/* Printing results in HTML */<br /></font><font color="#007700">echo </font><font color="#DD0000">"&lt;table&gt;\n"</font><font color="#007700">;<br />while (</font><font color="#0000BB">$row </font><font color="#007700">= </font><font color="#0000BB">msql_fetch_array</font><font color="#007700">(</font><font color="#0000BB">$result</font><font color="#007700">, </font><font color="#0000BB">MSQL_ASSOC</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"\t&lt;tr&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach (</font><font color="#0000BB">$row </font><font color="#007700">as </font><font color="#0000BB">$col_value</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"\t\t&lt;td&gt;$col_value&lt;/td&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"\t&lt;/tr&gt;\n"</font><font color="#007700">;<br />}<br />echo </font><font color="#DD0000">"&lt;/table&gt;\n"</font><font color="#007700">;<br /><br /></font><font color="#FF8000">/* Free result set */<br /></font><font color="#0000BB">msql_free_result</font><font color="#007700">(</font><font color="#0000BB">$result</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* Close connection */<br /></font><font color="#0000BB">msql_close</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P></DIV></DIV><DIV CLASS="TOC"><DL><DT><B>目录</B></DT><DT><A HREF="function.msql-affected-rows.html">msql_affected_rows</A>&nbsp;--&nbsp;Returns number of affected rows</DT><DT><A HREF="function.msql-close.html">msql_close</A>&nbsp;--&nbsp;Close mSQL connection</DT><DT><A HREF="function.msql-connect.html">msql_connect</A>&nbsp;--&nbsp;Open mSQL connection</DT><DT><A HREF="function.msql-create-db.html">msql_create_db</A>&nbsp;--&nbsp;Create mSQL database</DT><DT><A HREF="function.msql-createdb.html">msql_createdb</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-create-db.html"><B CLASS="function">msql_create_db()</B></A></DT><DT><A HREF="function.msql-data-seek.html">msql_data_seek</A>&nbsp;--&nbsp;Move internal row pointer</DT><DT><A HREF="function.msql-db-query.html">msql</A>&nbsp;--&nbsp;Send mSQL query</DT><DT><A HREF="function.msql-dbname.html">msql_dbname</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-result.html"><B CLASS="function">msql_result()</B></A></DT><DT><A HREF="function.msql-drop-db.html">msql_drop_db</A>&nbsp;--&nbsp;Drop (delete) mSQL database</DT><DT><A HREF="function.msql-error.html">msql_error</A>&nbsp;--&nbsp;Returns error message of last msql call</DT><DT><A HREF="function.msql-fetch-array.html">msql_fetch_array</A>&nbsp;--&nbsp;Fetch row as array</DT><DT><A HREF="function.msql-fetch-field.html">msql_fetch_field</A>&nbsp;--&nbsp;Get field information</DT><DT><A HREF="function.msql-fetch-object.html">msql_fetch_object</A>&nbsp;--&nbsp;Fetch row as object</DT><DT><A HREF="function.msql-fetch-row.html">msql_fetch_row</A>&nbsp;--&nbsp;Get row as enumerated array</DT><DT><A HREF="function.msql-field-flags.html">msql_field_flags</A>&nbsp;--&nbsp;Get field flags</DT><DT><A HREF="function.msql-field-len.html">msql_field_len</A>&nbsp;--&nbsp;Get field length</DT><DT><A HREF="function.msql-field-name.html">msql_field_name</A>&nbsp;--&nbsp;Get field name</DT><DT><A HREF="function.msql-field-seek.html">msql_field_seek</A>&nbsp;--&nbsp;Set field offset</DT><DT><A HREF="function.msql-field-table.html">msql_field_table</A>&nbsp;--&nbsp;Get table name for field</DT><DT><A HREF="function.msql-field-type.html">msql_field_type</A>&nbsp;--&nbsp;Get field type</DT><DT><A HREF="function.msql-fieldflags.html">msql_fieldflags</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-field-flags.html"><B CLASS="function">msql_field_flags()</B></A></DT><DT><A HREF="function.msql-fieldlen.html">msql_fieldlen</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-field-len.html"><B CLASS="function">msql_field_len()</B></A></DT><DT><A HREF="function.msql-fieldname.html">msql_fieldname</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-field-name.html"><B CLASS="function">msql_field_name()</B></A></DT><DT><A HREF="function.msql-fieldtable.html">msql_fieldtable</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-field-table.html"><B CLASS="function">msql_field_table()</B></A></DT><DT><A HREF="function.msql-fieldtype.html">msql_fieldtype</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-field-type.html"><B CLASS="function">msql_field_type()</B></A></DT><DT><A HREF="function.msql-free-result.html">msql_free_result</A>&nbsp;--&nbsp;Free result memory</DT><DT><A HREF="function.msql-list-dbs.html">msql_list_dbs</A>&nbsp;--&nbsp;List mSQL databases on server</DT><DT><A HREF="function.msql-list-fields.html">msql_list_fields</A>&nbsp;--&nbsp;List result fields</DT><DT><A HREF="function.msql-list-tables.html">msql_list_tables</A>&nbsp;--&nbsp;List tables in an mSQL database</DT><DT><A HREF="function.msql-num-fields.html">msql_num_fields</A>&nbsp;--&nbsp;Get number of fields in result</DT><DT><A HREF="function.msql-num-rows.html">msql_num_rows</A>&nbsp;--&nbsp;Get number of rows in result</DT><DT><A HREF="function.msql-numfields.html">msql_numfields</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-num-fields.html"><B CLASS="function">msql_num_fields()</B></A></DT><DT><A HREF="function.msql-numrows.html">msql_numrows</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-num-rows.html"><B CLASS="function">msql_num_rows()</B></A></DT><DT><A HREF="function.msql-pconnect.html">msql_pconnect</A>&nbsp;--&nbsp;Open persistent mSQL connection</DT><DT><A HREF="function.msql-query.html">msql_query</A>&nbsp;--&nbsp;Send mSQL query</DT><DT><A HREF="function.msql-regcase.html">msql_regcase</A>&nbsp;--&nbsp;Alias of <A HREF="function.sql-regcase.html"><B CLASS="function">sql_regcase()</B></A></DT><DT><A HREF="function.msql-result.html">msql_result</A>&nbsp;--&nbsp;Get result data</DT><DT><A HREF="function.msql-select-db.html">msql_select_db</A>&nbsp;--&nbsp;Select mSQL database</DT><DT><A HREF="function.msql-tablename.html">msql_tablename</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-result.html"><B CLASS="function">msql_result()</B></A></DT><DT><A HREF="function.msql.html">msql</A>&nbsp;--&nbsp;Alias of <A HREF="function.msql-db-query.html"><B CLASS="function">msql_db_query()</B></A></DT></DL></DIV></DIV></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.udm-set-agent-param.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.msql-affected-rows.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">udm_set_agent_param</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="funcref.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">msql_affected_rows</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
