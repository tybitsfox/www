<HTML><HEAD><TITLE>输出控制函数</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="函数参考" HREF="funcref.html"><LINK REL="PREVIOUS" TITLE="ovrimos_rollback" HREF="function.ovrimos-rollback.html"><LINK REL="NEXT" TITLE="flush" HREF="function.flush.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="reference" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.ovrimos-rollback.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.flush.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="reference"><A NAME="ref.outcontrol"></A><DIV CLASS="TITLEPAGE"><H1 CLASS="title">LXXVIII. 输出控制函数</H1><DIV CLASS="PARTINTRO"><A NAME="AEN83824"></A><DIV CLASS="section"><H1 CLASS="section"><A NAME="outcontrol.intro"></A>介绍</H1><P>&#13; 输出控制函数可以用来控制脚本的输出。这些函数在某些特殊情况下很有用，特别是脚本中已经输出了信息之后，再想向浏览器发送头信息的情况。输出控制函数不会作用于
<A HREF="function.header.html"><B CLASS="function">header()</B></A> 或 <A HREF="function.setcookie.html"><B CLASS="function">setcookie()</B></A>
函数发送的头信息，而只会影响类似于 <A HREF="function.echo.html"><B CLASS="function">echo()</B></A>
函数输出的信息和嵌入在 PHP 代码之间的信息。
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="outcontrol.requirements"></A>需求</H1><P>无需外部库文件就可以加入本扩展模块的支持。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="outcontrol.installation"></A>安装</H1><P>这些函数作为 PHP 核心的一部分，无需被安装即可使用。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="outcontrol.configuration"></A>运行时配置</H1><P>这些函数的行为受到全局<A HREF="configuration.html#configuration.file">配置文件</A> <TT CLASS="filename">php.ini</TT> 的影响。</P><P>&#13; <DIV CLASS="table"><A NAME="AEN83843"></A><P><B>表格 1. 输出控制 配置选项</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><THEAD><TR><TH ALIGN="LEFT" VALIGN="MIDDLE">名称</TH><TH ALIGN="LEFT" VALIGN="MIDDLE">默认值</TH><TH ALIGN="LEFT" VALIGN="MIDDLE">作用范围</TH></TR></THEAD><TBODY><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">output_buffering</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">"0"</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">PHP_INI_PERDIR|PHP_INI_SYSTEM</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">output_handler</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">NULL</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">PHP_INI_PERDIR|PHP_INI_SYSTEM</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">implicit_flush</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">"0"</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">PHP_INI_PERDIR|PHP_INI_SYSTEM</TD></TR></TBODY></TABLE></DIV>
更多关于常量 PHP_INI_* 的细节和解释参见
<A HREF="function.ini-set.html"><B CLASS="function">ini_set()</B></A>.
</P><P>以下是该配置选项的简要解释。</P><P>&#13; <P></P><DIV CLASS="variablelist"><DL><DT><A NAME="ini.output-buffering"></A><TT CLASS="parameter"><I>output_buffering</I></TT>
<A HREF="language.types.boolean.html"><B CLASS="type">boolean</B></A>/<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A></DT><DD><P>&#13; 本标记设置为 On 的时，将在所有的脚本中使用输出控制。如果要限制输出缓冲区的最大值，可以将标记设置成该最大字节数（例如， output_buffering=4096）。
</P></DD><DT><A NAME="ini.output-handler"></A><TT CLASS="parameter"><I>output_handler</I></TT>
<A HREF="language.types.string.html"><B CLASS="type">string</B></A></DT><DD><P>&#13; 该标记可将脚本所有的输出，重定向到一个函数。例如，将 output_handler 设置为<A HREF="function.mb-output-handler.html"><B CLASS="function">mb_output_handler()</B></A>时，
字符的编码将被修改为指定的编码。设置的任何处理函数，将自动的处理输出缓冲。
</P><DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
不能同时使用<A HREF="function.mb-output-handler.html"><B CLASS="function">mb_output_handler()</B></A>和<B CLASS="function">ob_inconv_handler()</B> ，
也不能同时使用<A HREF="function.ob-gzhandler.html"><B CLASS="function">ob_gzhandler()</B></A>和<A HREF="ref.zlib.html#ini.zlib.output-compression">zlib.output_compression</A>。
</P></BLOCKQUOTE></DIV></DD><DT><A NAME="ini.implicit-flush"></A><TT CLASS="parameter"><I>implicit_flush</I></TT>
<A HREF="language.types.boolean.html"><B CLASS="type">boolean</B></A></DT><DD><P>&#13; 默认为 <TT CLASS="constant"><B>FALSE</B></TT> 。如将该标记改为 <TT CLASS="constant"><B>TRUE</B></TT> ，PHP将使输出层，在每段信息块输出后，自动刷新。
这等同于在每次使用<A HREF="function.print.html"><B CLASS="function">print()</B></A>，<A HREF="function.echo.html"><B CLASS="function">echo()</B></A> 等函数 或每个<TT CLASS="literal">HTML</TT>块之后，
调用<TT CLASS="literal">PHP</TT>中的<A HREF="function.flush.html"><B CLASS="function">flush()</B></A>函数。
</P><P>&#13; 不在web环境中使用<TT CLASS="literal">PHP</TT>时，打开这个选项对程序执行的性能有严重的影响，通常只推荐在调试时使用。
在<TT CLASS="literal">CLI SAPI</TT>的执行模式下，该标记默认为 <TT CLASS="constant"><B>TRUE</B></TT> 。
</P><P>&#13; 参见 <A HREF="function.ob-implicit-flush.html"><B CLASS="function">ob_implicit_flush()</B></A>。
</P></DD></DL></DIV>
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="outcontrol.resources"></A>资源类型</H1><P>该扩展模块未定义任何资源类型。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="outcontrol.constants"></A>预定义常量</H1><P>该扩展模块未定义任何常量。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="outcontrol.examples"></A>范例</H1><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN83916"></A><P><B>例子 1. 输出控制范例</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /><br />ob_start</font><font color="#007700">();<br />echo </font><font color="#DD0000">"Hello\n"</font><font color="#007700">;<br /><br /></font><font color="#0000BB">setcookie</font><font color="#007700">(</font><font color="#DD0000">"cookiename"</font><font color="#007700">, </font><font color="#DD0000">"cookiedata"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">ob_end_flush</font><font color="#007700">();<br /><br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P><P>&#13; 在上面的例子中，函数 <A HREF="function.echo.html"><B CLASS="function">echo()</B></A>
输出信息将被保存在输出缓冲中，直到
<A HREF="function.ob-end-flush.html"><B CLASS="function">ob_end_flush()</B></A>
函数被调用。和期望的一样，<A HREF="function.setcookie.html"><B CLASS="function">setcookie()</B></A>
函数存储 cookie
的时候没有导致错误。（通常情况下，已经有数据输出后，是不能正常的向浏览器发送头信息的。）
</P><DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
当从 PHP 4.1（包括 4.2）升级到 4.3 时，由于早期版本的 bug，必须确保在
<TT CLASS="filename">php.ini</TT> 中将<TT CLASS="literal">implict_flush</TT> 被设置成
<TT CLASS="literal">OFF</TT>，否则所有由
<A HREF="function.ob-start.html"><B CLASS="function">ob_start()</B></A> 函数处理的信息都会被直接输出。
</P></BLOCKQUOTE></DIV></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="outcontrol.seealso"></A>相关参考</H1><P>&#13; 相关函数：<A HREF="function.header.html"><B CLASS="function">header()</B></A> 和
<A HREF="function.setcookie.html"><B CLASS="function">setcookie()</B></A>。
</P></DIV></DIV><DIV CLASS="TOC"><DL><DT><B>目录</B></DT><DT><A HREF="function.flush.html">flush</A>&nbsp;--&nbsp;Flush the output buffer</DT><DT><A HREF="function.ob-clean.html">ob_clean</A>&nbsp;--&nbsp;
Clean (erase) the output buffer
</DT><DT><A HREF="function.ob-end-clean.html">ob_end_clean</A>&nbsp;--&nbsp;
Clean (erase) the output buffer and turn off output buffering
</DT><DT><A HREF="function.ob-end-flush.html">ob_end_flush</A>&nbsp;--&nbsp;
Flush (send) the output buffer and turn off output buffering
</DT><DT><A HREF="function.ob-flush.html">ob_flush</A>&nbsp;--&nbsp;
Flush (send) the output buffer
</DT><DT><A HREF="function.ob-get-clean.html">ob_get_clean</A>&nbsp;--&nbsp;
Get current buffer contents and delete current output buffer
</DT><DT><A HREF="function.ob-get-contents.html">ob_get_contents</A>&nbsp;--&nbsp;
Return the contents of the output buffer
</DT><DT><A HREF="function.ob-get-flush.html">ob_get_flush</A>&nbsp;--&nbsp;
Flush the output buffer, return it as a string and turn off output buffering
</DT><DT><A HREF="function.ob-get-length.html">ob_get_length</A>&nbsp;--&nbsp;
Return the length of the output buffer
</DT><DT><A HREF="function.ob-get-level.html">ob_get_level</A>&nbsp;--&nbsp;
Return the nesting level of the output buffering mechanism
</DT><DT><A HREF="function.ob-get-status.html">ob_get_status</A>&nbsp;--&nbsp;
Get status of output buffers
</DT><DT><A HREF="function.ob-gzhandler.html">ob_gzhandler</A>&nbsp;--&nbsp;
ob_start callback function to gzip output buffer
</DT><DT><A HREF="function.ob-implicit-flush.html">ob_implicit_flush</A>&nbsp;--&nbsp;
Turn implicit flush on/off
</DT><DT><A HREF="function.ob-list-handlers.html">ob_list_handlers</A>&nbsp;--&nbsp;
List all output handlers in use
</DT><DT><A HREF="function.ob-start.html">ob_start</A>&nbsp;--&nbsp;Turn on output buffering</DT><DT><A HREF="function.output-add-rewrite-var.html">output_add_rewrite_var</A>&nbsp;--&nbsp;
Add URL rewriter values
</DT><DT><A HREF="function.output-reset-rewrite-vars.html">output_reset_rewrite_vars</A>&nbsp;--&nbsp;
Reset URL rewriter values
</DT></DL></DIV></DIV></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.ovrimos-rollback.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.flush.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">ovrimos_rollback</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="funcref.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">flush</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
