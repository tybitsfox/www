<HTML><HEAD><TITLE>正则表达式函数库（POSIX 扩展）</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="函数参考" HREF="funcref.html"><LINK REL="PREVIOUS" TITLE="qdom_tree" HREF="function.qdom-tree.html"><LINK REL="NEXT" TITLE="ereg_replace" HREF="function.ereg-replace.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="reference" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.qdom-tree.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.ereg-replace.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="reference"><A NAME="ref.regex"></A><DIV CLASS="TITLEPAGE"><H1 CLASS="title">XCIII. 正则表达式函数库（POSIX 扩展）</H1><DIV CLASS="PARTINTRO"><A NAME="AEN96431"></A><DIV CLASS="section"><H1 CLASS="section"><A NAME="regex.intro"></A>介绍</H1><DIV CLASS="tip"><BLOCKQUOTE CLASS="tip"><P><B>提示: </B>
PHP 也支持使用 Perl 兼容语法的
<A HREF="ref.pcre.html">PCRE 函数库</A>，支持
non-greedy 匹配，断言，条件子模式以及其它许多
POSIX 扩展正则表达式语法所不支持的特性。
</P></BLOCKQUOTE></DIV><DIV CLASS="warning"><P></P><TABLE CLASS="warning" BORDER="1" WIDTH="100%"><TR><TD ALIGN="CENTER"><B>警告</B></TD></TR><TR><TD ALIGN="LEFT"><P>&#13; 本类正则表达式并不能安全用于二进制模式。<A HREF="ref.pcre.html">PCRE
函数库</A>则可以。
</P></TD></TR></TABLE></DIV><P>&#13; 正则表达式在 PHP 中用来做复杂的字符串操作。支持正则表达式的函数为：
<P></P><UL><LI><P><A HREF="function.ereg.html"><B CLASS="function">ereg()</B></A></P></LI><LI><P><A HREF="function.ereg-replace.html"><B CLASS="function">ereg_replace()</B></A></P></LI><LI><P><A HREF="function.eregi.html"><B CLASS="function">eregi()</B></A></P></LI><LI><P><A HREF="function.eregi-replace.html"><B CLASS="function">eregi_replace()</B></A></P></LI><LI><P><A HREF="function.split.html"><B CLASS="function">split()</B></A></P></LI><LI><P><A HREF="function.spliti.html"><B CLASS="function">spliti()</B></A></P></LI></UL>
</P><P>&#13; 这些函数都接受一个正则表达式字符串作为其第一个参数。PHP 使用由
POSIX 1003.3 定义的 POSIX 扩展正则表达式。POSIX
正则表达式完整的描述见包含在 PHP 发行包中 regex 目录下的 man
页面。可以通过类似
<B CLASS="command">man /usr/local/src/regex/regex.7</B>
的命令来阅读。
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="regex.requirements"></A>需求</H1><P>无需外部库文件就可以加入本扩展模块的支持。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="regex.installation"></A>安装</H1><DIV CLASS="warning"><P></P><TABLE CLASS="warning" BORDER="1" WIDTH="100%"><TR><TD ALIGN="CENTER"><B>警告</B></TD></TR><TR><TD ALIGN="LEFT"><P>&#13; 除非知道自己在做什么，否则不要改变 TYPE。
</P></TD></TR></TABLE></DIV><P>&#13; 要激活 regexp 的支持在配置 PHP 时加上
<TT CLASS="option">--with-regex[=TYPE]</TT>。TYPE
可以是
system，apache 或 php 之一。默认使用 php。
</P><P> <TT CLASS="literal">PHP</TT> 的 Windows 版本已经内置该扩展模块的支持。您无需加载任何附加的扩展库即可使用这些函数。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="regex.configuration"></A>运行时配置</H1><P>该扩展模块未定义任何设置指令。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="regex.resources"></A>资源类型</H1><P>该扩展模块未定义任何资源类型。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="regex.constants"></A>预定义常量</H1><P>该扩展模块未定义任何常量。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="regex.examples"></A>范例</H1><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN96485"></A><P><B>例子 1. 正则表达式例子</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">// 如果在 $string 中任何地方找到 "abc" 则返回 &amp;true;<br /></font><font color="#0000BB">ereg </font><font color="#007700">(</font><font color="#DD0000">"abc"</font><font color="#007700">, </font><font color="#0000BB">$string</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// 如果 $string 以 "abc" 开头则返回 &amp;true;<br /></font><font color="#0000BB">ereg </font><font color="#007700">(</font><font color="#DD0000">"^abc"</font><font color="#007700">, </font><font color="#0000BB">$string</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// 如果 $string 以 "abc" 结尾则返回 &amp;true;<br /></font><font color="#0000BB">ereg </font><font color="#007700">(</font><font color="#DD0000">"abc$"</font><font color="#007700">, </font><font color="#0000BB">$string</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// 如果用户浏览器是 Netscape 2，3 或 MSIE 3 则返回 &amp;true;<br /></font><font color="#0000BB">eregi </font><font color="#007700">(</font><font color="#DD0000">"(ozilla.[23]|MSIE.3)"</font><font color="#007700">, </font><font color="#0000BB">$HTTP_USER_AGENT</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// 将三个空格分隔的单词放入 $regs[1]，$regs[2] 和 $regs[3] 中<br /></font><font color="#0000BB">ereg </font><font color="#007700">(</font><font color="#DD0000">"([[:alnum:]]+) ([[:alnum:]]+) ([[:alnum:]]+)"</font><font color="#007700">, </font><font color="#0000BB">$string</font><font color="#007700">,</font><font color="#0000BB">$regs</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// 将 &lt;br /&gt; 标记放到 $string 开头<br /></font><font color="#0000BB">$string </font><font color="#007700">= </font><font color="#0000BB">ereg_replace </font><font color="#007700">(</font><font color="#DD0000">"^"</font><font color="#007700">, </font><font color="#DD0000">"&lt;br /&gt;"</font><font color="#007700">, </font><font color="#0000BB">$string</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// 将 &lt;br /&gt; 标记放到 $string 结尾<br /></font><font color="#0000BB">$string </font><font color="#007700">= </font><font color="#0000BB">ereg_replace </font><font color="#007700">(</font><font color="#DD0000">"$"</font><font color="#007700">, </font><font color="#DD0000">"&lt;br /&gt;"</font><font color="#007700">, </font><font color="#0000BB">$string</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// 删除 $string 中的所有换行符<br /></font><font color="#0000BB">$string </font><font color="#007700">= </font><font color="#0000BB">ereg_replace </font><font color="#007700">(</font><font color="#DD0000">"\n"</font><font color="#007700">, </font><font color="#DD0000">""</font><font color="#007700">, </font><font color="#0000BB">$string</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="regex.seealso"></A>相关参考</H1><P>&#13; Perl 兼容语法的正则表达式见
<A HREF="ref.pcre.html">PCRE 函数库</A>。简单的命令行解释器风格的通配符匹配由
<A HREF="function.fnmatch.html"><B CLASS="function">fnmatch()</B></A> 提供。
</P></DIV></DIV><DIV CLASS="TOC"><DL><DT><B>目录</B></DT><DT><A HREF="function.ereg-replace.html">ereg_replace</A>&nbsp;--&nbsp;替换正则表达式</DT><DT><A HREF="function.ereg.html">ereg</A>&nbsp;--&nbsp;正则表达式匹配</DT><DT><A HREF="function.eregi-replace.html">eregi_replace</A>&nbsp;--&nbsp;不区分大小写替换正则表达式</DT><DT><A HREF="function.eregi.html">eregi</A>&nbsp;--&nbsp;不区分大小写的正则表达式匹配</DT><DT><A HREF="function.split.html">split</A>&nbsp;--&nbsp;用正则表达式将字符串分割到数组中</DT><DT><A HREF="function.spliti.html">spliti</A>&nbsp;--&nbsp;
用正则表达式不区分大小写将字符串分割到数组中
</DT><DT><A HREF="function.sql-regcase.html">sql_regcase</A>&nbsp;--&nbsp;
产生用于不区分大小的匹配的正则表达式
</DT></DL></DIV></DIV></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.qdom-tree.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.ereg-replace.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">qdom_tree</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="funcref.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">ereg_replace</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
