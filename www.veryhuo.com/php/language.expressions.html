<HTML><HEAD><TITLE>表达式</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="语言参考" HREF="langref.html"><LINK REL="PREVIOUS" TITLE="预定义常量" HREF="language.constants.predefined.html"><LINK REL="NEXT" TITLE="运算符" HREF="language.operators.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="chapter" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="language.constants.predefined.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="language.operators.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="chapter"><H1><A NAME="language.expressions">章 9. 表达式</A></H1><P>&#13; 表达式是 PHP 最重要的基石。在 PHP
中，几乎你所写的任何东西都是一个表达式。简单但却最精确的定义一个表达式的方式就是“anything that has a value”。
</P><P>&#13; 最基本的表达式形式是常量和变量。当你键入“$a = 5”，即将值 '5' 分配给变量
$a。'5'，很明显，值为 5，换句话说 '5' 是一个值为5的表达式（既然如此，'5' 是一个整型常量）。
</P><P>&#13; 赋值之后，你所盼望的情况是 $a 的值为5，因而如果你写下
$b = $a，期望的是它犹如 $b = 5 一样。换句话说，$a 是一个值也为 5
的表达式。如果一切运行正确，那这正是将要发生的正确结果。
</P><P>&#13; 稍微复杂的表达式例子就是函数。例如，考虑下面的函数：
<DIV CLASS="informalexample"><A NAME="AEN4512"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#007700">function </font><font color="#0000BB">foo </font><font color="#007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000BB">5</font><font color="#007700">;<br />}<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE><P></P></DIV>
</P><P>&#13; 假定你已经熟悉了函数的概念（如果不是的话，请看一下函数的相关章节），那么键入
<TT CLASS="literal">$c = foo()</TT> 从本质上来说就如写下
<TT CLASS="literal">$c = 5</TT>，而且你是正确的。 函数也是表达式，表达式的值即为它们的返回值。既然
foo() 返回5，表达式 ‘foo()’ 的值也是5。通常函数不会仅仅返回一个静态值，而可能会计算一些东西。
</P><P>&#13; 当然，PHP 中的值常常并非是整型的。PHP
支持三种标量值类型：整型值，浮点值和字符串值（标量值不能拆分为更小的单元，比如：数组）。PHP
也支持两种复合类型：数组和对象。这两种类型具可以赋值给变量或者从函数返回。
</P><P>&#13; 到目前为止，PHP/FI 2 的用户不应该感到任何的变化。然而，当许多其它语言为之努力的时候，PHP
在相同道路上促进了表达式的成长。PHP
是一种面向表达式的语言，从这一方面来讲几乎一切都是表达式。考虑刚才我们已经研究过的例子，“$a =
5”。可以轻松的看到这里有两个相关的值，整型常量 5，而且变量 $a
的值也被更新为 5。但是事实是：这里只有一个相关的附加值，即被分配的值本身。赋值操作计算需分配的值，即
5。实际上，意味着“$a = 5”，不必管它是做什么的，是一个值为 5
的表达式。因而，一些像这样的代码“$b = ($a = 5)”和“$a =5;
$b=5”（分号标志着语句的结束）。因为赋值操作的顺序是由右到左的，你也可以这么写“$b = $a =5”。
</P><P>&#13; 另外一个很好的面向表达式的例子就是前、后递增和递减。PHP/FI 2
和多数其它语言的用户应该比较熟悉变量 ++ 和变量 -- 符号。即递增和递减操作符。在
PHP/FI 2 中，语句“$a++”没有值（不是表达式），这样的话你便不能为其赋值或者以任何其它方式来使用它。PHP
通过将其变为了表达式，类似 C 语言，增强了递增/递减的能力。在
PHP 和 C 语言 中，有两种类型的递增前递增和后递增，本质上来讲，前递增和后递增均增加了变量的值，并且对于变量的影响是相同的。不同的是递增表达式的值。前递增，写做“++$variable”，求增加后的值（PHP
在读取变量的值之前，增加变量的值，因而称之为“前递增”）。后递增，写做‘$variable++’，求变量未递增之前的原始值（PHP
在读取变量的值之后，增加变量的值，因而叫做‘后递增’）。【译者注：前递增，++$a，则该表达式的值加
1；后递增，$a++，则该表达式的值不变。】
</P><P>&#13; 一个常用到表达式类型是比较表达式。这些表达式求值 0 或者
1，即 <TT CLASS="constant"><B>FALSE</B></TT> 或者 <TT CLASS="constant"><B>TRUE</B></TT>(分别的)。PHP
支持 &#62;（大于），&#62;=（大于等于），==（等于），!=（不等于），&#60;（小于），&#60;= (小于等于)。这些表达式都是在条件判断语句，比如，<TT CLASS="literal">if</TT>
语句中最常用的。
</P><P>&#13; 这里，我们将要研究的最后一个例子是组合的赋值操作符表达式。你已经知道如果想要为变量
$a 加1，可以简单的写‘$a++’或者‘++$a’。但是如果你想为变量增加大于
1 的值，比如 3，该怎么做？你可以多次写‘$a++’，但这样明显不是一种高效舒适的方法，一个更加通用的做法是‘$a
= $a + 3’。‘$a + 3’ 计算 $a 加上 3 的值，并且得到的值重新赋予变量
$a，于是 $a 的值增加了3。在 PHP 及其它几种类似 C
的语言中，你可以以一种更加简短的形式完成上述功能，因而也更加清楚快捷。为
$a 的当前值加 3，可以这样写：$a += 3。这里的意思是“取变量 $a 的值，加
3，得到的结果再次分配给变量 $a”。除了更简略和清楚外，也可以更快的运行。‘$a +=
3’的值，如同一个正常赋值操作的值，是赋值后的值。注意它不是 3，而是
$a 加上3的组合值（即已经分配给 $a 的值）【译者注：这里表达式‘$a += 3’的值是什么呢？不是
3，也不是 $a 的原始值，而是完成 +3 操作后变量 $a
的值】。 任何两位操作符都可以使用在复制操作符模式，例如‘$a -= 5’（从变量
$a 的值中减去 5），‘$b *= 7’ （变量 $b 乘以 7），等等。
</P><P>&#13; 有一些表达式，如果你没有在别的语言中看到过的话，可能认为它们是多余的，如三重操作符：
<DIV CLASS="informalexample"><A NAME="AEN4526"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE CLASS="programlisting">$first ? $second : $third</PRE></TD></TR></TABLE><P></P></DIV>
如果第一个子表达式的值是 <TT CLASS="constant"><B>TRUE</B></TT>（非零），那么计算第二个子表达式的值，其值即为整个表达式的值。否则，将是第三个子表达式的值。
</P><P>&#13; 下面的例子一般来说应该可以稍微帮你理解前、后递增和表达式：
<DIV CLASS="informalexample"><A NAME="AEN4530"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#007700">function </font><font color="#0000BB">double</font><font color="#007700">(</font><font color="#0000BB">$i</font><font color="#007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000BB">$i</font><font color="#007700">*</font><font color="#0000BB">2</font><font color="#007700">;<br />}<br /></font><font color="#0000BB">$b </font><font color="#007700">= </font><font color="#0000BB">$a </font><font color="#007700">= </font><font color="#0000BB">5</font><font color="#007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/* assign the value five into the variable $a and $b */<br /></font><font color="#0000BB">$c </font><font color="#007700">= </font><font color="#0000BB">$a</font><font color="#007700">++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/* post-increment, assign original value of $a<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(5) to $c */<br /></font><font color="#0000BB">$e </font><font color="#007700">= </font><font color="#0000BB">$d </font><font color="#007700">= ++</font><font color="#0000BB">$b</font><font color="#007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/* pre-increment, assign the incremented value of<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$b (6) to $d and $e */<br /><br />/* at this point, both $d and $e are equal to 6 */<br /><br /></font><font color="#0000BB">$f </font><font color="#007700">= </font><font color="#0000BB">double</font><font color="#007700">(</font><font color="#0000BB">$d</font><font color="#007700">++);&nbsp;&nbsp;</font><font color="#FF8000">/* assign twice the value of $d before<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the increment, 2*6 = 12 to $f */<br /></font><font color="#0000BB">$g </font><font color="#007700">= </font><font color="#0000BB">double</font><font color="#007700">(++</font><font color="#0000BB">$e</font><font color="#007700">);&nbsp;&nbsp;</font><font color="#FF8000">/* assign twice the value of $e after<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the increment, 2*7 = 14 to $g */<br /></font><font color="#0000BB">$h </font><font color="#007700">= </font><font color="#0000BB">$g </font><font color="#007700">+= </font><font color="#0000BB">10</font><font color="#007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/* first, $g is incremented by 10 and ends with the<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value of 24. the value of the assignment (24) is<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then assigned into $h, and $h ends with the value<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of 24 as well. */<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE><P></P></DIV>
</P><P>&#13; 在本章的开始，我们说过我们将会描述多种语句类型，并且如同许诺的那样，表达式可以是语句。尽管如此，不是每个表达式都是一个语句。而这样的话，一个语句，它的形式是
'expr' ';'，一个表达式有一个分号结尾。在‘$b=$a=5;’，$a = 5
是一个有效的表达式，但是它却不是一个语句。‘$b=$a=5;’ 却是一个有效的语句。
</P><P>&#13; 最后一件值得提起的事情就是表达式的真实值。在许多事件中，大体上主要是在条件执行和循环中，不要专注于表达式中明确的值，反而要注意表达式的值是否是
<TT CLASS="constant"><B>TRUE</B></TT> 或者 <TT CLASS="constant"><B>FALSE</B></TT>。常量 <TT CLASS="constant"><B>TRUE</B></TT> 和 <TT CLASS="constant"><B>FALSE</B></TT> （大小写无关）是两种可能的
Boolean 值。如果有必要，一个表达式将自动转换为 Boolean。参见<A HREF="language.types.type-juggling.html#language.types.typecasting">类型强制转换</A>一节。
</P><P>&#13; PHP 提供了一套完整强大的表达式，而为它提供完整的文件资料已经超出了本手册的范围。上面的例子应该为你提供了一个好的关于什么是表达式和怎样构建一个有用的表达式的概念。在本手册的其余部分，我们将始终使用
<TT CLASS="replaceable"><I>expr</I></TT>来表示一个有效的 PHP 表达式。
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="language.constants.predefined.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="language.operators.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">预定义常量</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="langref.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">运算符</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
