<HTML><HEAD><TITLE>foreach</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="流程控制" HREF="control-structures.html"><LINK REL="PREVIOUS" TITLE="for" HREF="control-structures.for.html"><LINK REL="NEXT" TITLE="break" HREF="control-structures.break.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="sect1" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="control-structures.for.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom">章 11. 流程控制</TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="control-structures.break.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="sect1"><H1 CLASS="sect1"><A NAME="control-structures.foreach"></A><TT CLASS="literal">foreach</TT></H1><P>&#13; PHP 4（不是 PHP 3）包括了 <TT CLASS="literal">foreach</TT> 结构，和 Perl 以及其他语言很像。这只是一种遍历数组简便方法。<TT CLASS="literal">foreach</TT> 仅能用于数组，当试图将其用于其它数据类型或者一个未初始化的变量时会产生错误。有两种语法，第二种比较次要但却是第一种的有用的扩展。
<DIV CLASS="informalexample"><A NAME="AEN5138"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE CLASS="programlisting">foreach (array_expression as $value) statement
foreach (array_expression as $key =&#62; $value) statement</PRE></TD></TR></TABLE><P></P></DIV>
</P><P>&#13; 第一种格式遍历给定的 <TT CLASS="literal">array_expression</TT> 数组。每次循环中，当前单元的值被赋给 <TT CLASS="literal">$value</TT> 并且数组内部的指针向前移一步（因此下一次循环中将会得到下一个单元）。
</P><P>&#13; 第二种格式做同样的事，只除了当前单元的键值也会在每次循环中被赋给变量 <TT CLASS="literal">$key</TT>。
</P><P>&#13; <DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
当 <TT CLASS="literal">foreach</TT> 开始执行时，数组内部的指针会自动指向第一个单元。这意味着不需要在 <TT CLASS="literal">foreach</TT> 循环之前调用 <A HREF="function.reset.html"><B CLASS="function">reset()</B></A>。
</P></BLOCKQUOTE></DIV>
</P><P>&#13; <DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
此外注意 <TT CLASS="literal">foreach</TT> 所操作的是指定数组的一个拷贝，而不是该数组本身。因此即使有
<A HREF="function.each.html"><B CLASS="function">each()</B></A> 的构造，原数组指针也没有变，数组单元的值也不受影响。
</P></BLOCKQUOTE></DIV>
</P><P>&#13; <DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
<TT CLASS="literal">foreach</TT> 不支持用“@”来禁止错误信息的能力。
</P></BLOCKQUOTE></DIV>
</P><P>&#13; 你可能注意到了以下的代码功能完全相同：
<DIV CLASS="informalexample"><A NAME="AEN5161"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />$arr </font><font color="#007700">= array(</font><font color="#DD0000">"one"</font><font color="#007700">, </font><font color="#DD0000">"two"</font><font color="#007700">, </font><font color="#DD0000">"three"</font><font color="#007700">);<br /></font><font color="#0000BB">reset </font><font color="#007700">(</font><font color="#0000BB">$arr</font><font color="#007700">);<br />while (list(, </font><font color="#0000BB">$value</font><font color="#007700">) = </font><font color="#0000BB">each </font><font color="#007700">(</font><font color="#0000BB">$arr</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"Value: $value&lt;br&gt;\n"</font><font color="#007700">;<br />}<br /><br />foreach (</font><font color="#0000BB">$arr </font><font color="#007700">as </font><font color="#0000BB">$value</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"Value: $value&lt;br&gt;\n"</font><font color="#007700">;<br />}<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE><P></P></DIV>
以下代码功能也完全相同：
<DIV CLASS="informalexample"><A NAME="AEN5163"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />reset </font><font color="#007700">(</font><font color="#0000BB">$arr</font><font color="#007700">);<br />while (list(</font><font color="#0000BB">$key</font><font color="#007700">, </font><font color="#0000BB">$value</font><font color="#007700">) = </font><font color="#0000BB">each </font><font color="#007700">(</font><font color="#0000BB">$arr</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"Key: $key; Value: $value&lt;br&gt;\n"</font><font color="#007700">;<br />}<br /><br />foreach (</font><font color="#0000BB">$arr </font><font color="#007700">as </font><font color="#0000BB">$key </font><font color="#007700">=&gt; </font><font color="#0000BB">$value</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"Key: $key; Value: $value&lt;br&gt;\n"</font><font color="#007700">;<br />}<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE><P></P></DIV>
</P><P>&#13; 示范用法的更多例子：
<DIV CLASS="informalexample"><A NAME="AEN5166"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">/* foreach example 1: value only */<br /><br /></font><font color="#0000BB">$a </font><font color="#007700">= array (</font><font color="#0000BB">1</font><font color="#007700">, </font><font color="#0000BB">2</font><font color="#007700">, </font><font color="#0000BB">3</font><font color="#007700">, </font><font color="#0000BB">17</font><font color="#007700">);<br /><br />foreach (</font><font color="#0000BB">$a </font><font color="#007700">as </font><font color="#0000BB">$v</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;print </font><font color="#DD0000">"Current value of \$a: $v.\n"</font><font color="#007700">;<br />}<br /><br /></font><font color="#FF8000">/* foreach example 2: value (with key printed for illustration) */<br /><br /></font><font color="#0000BB">$a </font><font color="#007700">= array (</font><font color="#0000BB">1</font><font color="#007700">, </font><font color="#0000BB">2</font><font color="#007700">, </font><font color="#0000BB">3</font><font color="#007700">, </font><font color="#0000BB">17</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$i </font><font color="#007700">= </font><font color="#0000BB">0</font><font color="#007700">; </font><font color="#FF8000">/* for illustrative purposes only */<br /><br /></font><font color="#007700">foreach (</font><font color="#0000BB">$a </font><font color="#007700">as </font><font color="#0000BB">$v</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;print </font><font color="#DD0000">"\$a[$i] =&gt; $v.\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$i</font><font color="#007700">++;<br />}<br /><br /></font><font color="#FF8000">/* foreach example 3: key and value */<br /><br /></font><font color="#0000BB">$a </font><font color="#007700">= array (<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">"one" </font><font color="#007700">=&gt; </font><font color="#0000BB">1</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">"two" </font><font color="#007700">=&gt; </font><font color="#0000BB">2</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">"three" </font><font color="#007700">=&gt; </font><font color="#0000BB">3</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">"seventeen" </font><font color="#007700">=&gt; </font><font color="#0000BB">17<br /></font><font color="#007700">);<br /><br />foreach (</font><font color="#0000BB">$a </font><font color="#007700">as </font><font color="#0000BB">$k </font><font color="#007700">=&gt; </font><font color="#0000BB">$v</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;print </font><font color="#DD0000">"\$a[$k] =&gt; $v.\n"</font><font color="#007700">;<br />}<br /><br /></font><font color="#FF8000">/* foreach example 4: multi-dimensional arrays */<br /><br /></font><font color="#0000BB">$a</font><font color="#007700">[</font><font color="#0000BB">0</font><font color="#007700">][</font><font color="#0000BB">0</font><font color="#007700">] = </font><font color="#DD0000">"a"</font><font color="#007700">;<br /></font><font color="#0000BB">$a</font><font color="#007700">[</font><font color="#0000BB">0</font><font color="#007700">][</font><font color="#0000BB">1</font><font color="#007700">] = </font><font color="#DD0000">"b"</font><font color="#007700">;<br /></font><font color="#0000BB">$a</font><font color="#007700">[</font><font color="#0000BB">1</font><font color="#007700">][</font><font color="#0000BB">0</font><font color="#007700">] = </font><font color="#DD0000">"y"</font><font color="#007700">;<br /></font><font color="#0000BB">$a</font><font color="#007700">[</font><font color="#0000BB">1</font><font color="#007700">][</font><font color="#0000BB">1</font><font color="#007700">] = </font><font color="#DD0000">"z"</font><font color="#007700">;<br /><br />foreach (</font><font color="#0000BB">$a </font><font color="#007700">as </font><font color="#0000BB">$v1</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach (</font><font color="#0000BB">$v1 </font><font color="#007700">as </font><font color="#0000BB">$v2</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print </font><font color="#DD0000">"$v2\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></font><font color="#FF8000">/* foreach example 5: dynamic arrays */<br /><br /></font><font color="#007700">foreach (array(</font><font color="#0000BB">1</font><font color="#007700">, </font><font color="#0000BB">2</font><font color="#007700">, </font><font color="#0000BB">3</font><font color="#007700">, </font><font color="#0000BB">4</font><font color="#007700">, </font><font color="#0000BB">5</font><font color="#007700">) as </font><font color="#0000BB">$v</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;print </font><font color="#DD0000">"$v\n"</font><font color="#007700">;<br />}<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE><P></P></DIV>
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="control-structures.for.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="control-structures.break.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><TT CLASS="literal">for</TT></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="control-structures.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><TT CLASS="literal">break</TT></TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
