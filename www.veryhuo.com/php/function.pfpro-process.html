<HTML><HEAD><TITLE>pfpro_process</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="Verisign Payflow Pro Functions" HREF="ref.pfpro.html"><LINK REL="PREVIOUS" TITLE="pfpro_process_raw" HREF="function.pfpro-process-raw.html"><LINK REL="NEXT" TITLE="pfpro_version" HREF="function.pfpro-version.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="refentry" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.pfpro-process-raw.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.pfpro-version.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><H1><A NAME="function.pfpro-process"></A>pfpro_process</H1><DIV CLASS="refnamediv"><A NAME="AEN87306"></A><P> (PHP 4 &#62;= 4.0.2)</P>pfpro_process&nbsp;--&nbsp;Process a transaction with Payflow Pro</DIV><DIV CLASS="refsect1"><A NAME="AEN87309"></A><H2>Description</H2>array <B CLASS="methodname">pfpro_process</B> ( array parameters [, string address [, int port [, int timeout [, string proxy_address [, int proxy_port [, string proxy_logon [, string proxy_password]]]]]]])<BR></BR><P>&#13; Returns: An associative array containing the response
</P><P>
<B CLASS="function">pfpro_process()</B> processes a transaction
with Payflow Pro. The first parameter is an associative
array containing keys and values that will be encoded and
passed to the processor.
</P><P>&#13; The second parameter is optional and specifies the host
to connect to. By default this is "test.signio.com", so
you will certainly want to change this to "connect.signio.com"
in order to process live transactions.
</P><P>&#13; The third parameter specifies the port to connect on. It
defaults to 443, the standard SSL port.
</P><P>&#13; The fourth parameter specifies the timeout to be used, in seconds.
This defaults to 30 seconds. Note that this timeout appears to only
begin once a link to the processor has been established and so your
script could potentially continue for a very long time in the event
of DNS or network problems.
</P><P>&#13; The fifth parameter, if required, specifies the hostname of your
SSL proxy. The sixth parameter specifies the port to use.
</P><P>&#13; The seventh and eighth parameters specify the logon identity
and password to use on the proxy.
</P><P>&#13; The function returns an associative array of the keys and values
in the response.
</P><DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
Be sure to read the Payflow Pro Developers Guide for full details
of the required parameters.
</P></BLOCKQUOTE></DIV><TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN87349"></A><P><B>例子 1. Payflow Pro example</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /><br />pfpro_init</font><font color="#007700">();<br /><br /></font><font color="#0000BB">$transaction </font><font color="#007700">= array(</font><font color="#DD0000">'USER'&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">=&gt; </font><font color="#DD0000">'mylogin'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'PWD'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">=&gt; </font><font color="#DD0000">'mypassword'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'PARTNER' </font><font color="#007700">=&gt; </font><font color="#DD0000">'VeriSign'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'TRXTYPE' </font><font color="#007700">=&gt; </font><font color="#DD0000">'S'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'TENDER'&nbsp;&nbsp;</font><font color="#007700">=&gt; </font><font color="#DD0000">'C'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'AMT'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">=&gt; </font><font color="#0000BB">1.50</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'ACCT'&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">=&gt; </font><font color="#DD0000">'4111111111111111'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'EXPDATE' </font><font color="#007700">=&gt; </font><font color="#DD0000">'0904'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$response </font><font color="#007700">= </font><font color="#0000BB">pfpro_process</font><font color="#007700">(</font><font color="#0000BB">$transaction</font><font color="#007700">);<br /><br />if (!</font><font color="#0000BB">$response</font><font color="#007700">) {<br />&nbsp;&nbsp;die(</font><font color="#DD0000">"Couldn't establish link to Verisign.\n"</font><font color="#007700">);<br />}<br /><br />echo </font><font color="#DD0000">"Verisign response code was " </font><font color="#007700">. </font><font color="#0000BB">$response</font><font color="#007700">[</font><font color="#DD0000">'RESULT'</font><font color="#007700">];<br />echo </font><font color="#DD0000">", which means: " </font><font color="#007700">. </font><font color="#0000BB">$response</font><font color="#007700">[</font><font color="#DD0000">'RESPMSG'</font><font color="#007700">] . </font><font color="#DD0000">"\n"</font><font color="#007700">;<br /><br />echo </font><font color="#DD0000">"\nThe transaction request: "</font><font color="#007700">;<br /></font><font color="#0000BB">print_r</font><font color="#007700">(</font><font color="#0000BB">$transaction</font><font color="#007700">);<br /><br />echo </font><font color="#DD0000">"\nThe response: "</font><font color="#007700">;<br /></font><font color="#0000BB">print_r</font><font color="#007700">(</font><font color="#0000BB">$response</font><font color="#007700">);<br /><br /></font><font color="#0000BB">pfpro_cleanup</font><font color="#007700">();<br /><br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.pfpro-process-raw.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.pfpro-version.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">pfpro_process_raw</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="ref.pfpro.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">pfpro_version</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
