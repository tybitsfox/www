<HTML><HEAD><TITLE>stream_set_write_buffer</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="Stream Functions" HREF="ref.stream.html"><LINK REL="PREVIOUS" TITLE="stream_set_timeout" HREF="function.stream-set-timeout.html"><LINK REL="NEXT" TITLE="stream_socket_accept" HREF="function.stream-socket-accept.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="refentry" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.stream-set-timeout.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.stream-socket-accept.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><H1><A NAME="function.stream-set-write-buffer"></A>stream_set_write_buffer</H1><DIV CLASS="refnamediv"><A NAME="AEN106838"></A><P> (PHP 4 &#62;= 4.3.0)</P>stream_set_write_buffer&nbsp;--&nbsp;Sets file buffering on the given stream</DIV><DIV CLASS="refsect1"><A NAME="AEN106841"></A><H2>Description</H2>int <B CLASS="methodname">stream_set_write_buffer</B> ( resource stream, int buffer)<BR></BR><P>&#13; Output using <A HREF="function.fwrite.html"><B CLASS="function">fwrite()</B></A> is normally buffered at
8K. This means that if there are two processes wanting to write
to the same output stream (a file), each is paused after 8K of
data to allow the other to write.
<B CLASS="function">stream_set_write_buffer()</B>
sets the buffering for write operations on the given filepointer
<TT CLASS="parameter"><I>stream</I></TT> to <TT CLASS="parameter"><I>buffer</I></TT> bytes.
If <TT CLASS="parameter"><I>buffer</I></TT> is 0 then write operations are
unbuffered. This ensures that all writes with
<A HREF="function.fwrite.html"><B CLASS="function">fwrite()</B></A> are completed before other processes
are allowed to write to that output stream.
</P><P>&#13; The function returns 0 on success, or EOF if the request cannot
be honored.
</P><P>&#13; The following example demonstrates how to use
<B CLASS="function">stream_set_write_buffer()</B> to create an unbuffered stream.
<TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN106862"></A><P><B>例子 1. <B CLASS="function">stream_set_write_buffer()</B> example</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />$fp </font><font color="#007700">= </font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#0000BB">$file</font><font color="#007700">, </font><font color="#DD0000">"w"</font><font color="#007700">);<br />if (</font><font color="#0000BB">$fp</font><font color="#007700">) {<br />&nbsp;&nbsp;</font><font color="#0000BB">stream_set_write_buffer</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#0000BB">0</font><font color="#007700">);<br />&nbsp;&nbsp;</font><font color="#0000BB">fputs</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">, </font><font color="#0000BB">$output</font><font color="#007700">);<br />&nbsp;&nbsp;</font><font color="#0000BB">fclose</font><font color="#007700">(</font><font color="#0000BB">$fp</font><font color="#007700">);<br />}<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P><P>&#13; See also <A HREF="function.fopen.html"><B CLASS="function">fopen()</B></A> and <A HREF="function.fwrite.html"><B CLASS="function">fwrite()</B></A>.
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.stream-set-timeout.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.stream-socket-accept.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">stream_set_timeout</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="ref.stream.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">stream_socket_accept</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
