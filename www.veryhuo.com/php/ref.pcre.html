<HTML><HEAD><TITLE>正则表达式函数库（Perl 兼容）</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="函数参考" HREF="funcref.html"><LINK REL="PREVIOUS" TITLE="recode" HREF="function.recode.html"><LINK REL="NEXT" TITLE="preg_grep" HREF="function.preg-grep.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="reference" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.recode.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.preg-grep.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="reference"><A NAME="ref.pcre"></A><DIV CLASS="TITLEPAGE"><H1 CLASS="title">XCI. 正则表达式函数库（Perl 兼容）</H1><DIV CLASS="PARTINTRO"><A NAME="AEN95848"></A><DIV CLASS="section"><H1 CLASS="section"><A NAME="pcre.intro"></A>介绍</H1><P>&#13; 本类函数中所使用的模式极其类似
Perl。表达式应被包含在定界符中，如斜线（/）。任何不是字母、数字或反斜线（\）的字符都可以作为定界符。如果作为定界符的字符必须被用在表达式本身中，则需要用反斜线转义。自
PHP 4.0.4 起，也可以使用 Perl
风格的 ()，{}，[] 和 &#60;&#62; 匹配定界符。
</P><P>&#13; 结束定界符后可以跟上不同的修正符以影响匹配方式。见<A HREF="missing-stuff.html#pcre.pattern.modifiers">模式修正符</A>。
</P><P>&#13; PHP 也支持 POSIX 扩展语法的正则表达式，见<A HREF="ref.regex.html">正则表达式函数库（POSIX 扩展）</A>。
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="pcre.requirements"></A>需求</H1><P>&#13; 正则表达式的支持是由 PCRE（Perl Compatible Regular Expression）库提供的，这是个开放源代码的软件，作者为
Philip Hazel，版权属于英国剑桥大学。可于以下地址获得：<A HREF="ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/" TARGET="_top">ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/</A>。
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="pcre.installation"></A>安装</H1><P>&#13; 自 PHP 4.2.0 起这些函数默认被激活。可以通过
<TT CLASS="option">--without-pcre-regex</TT>
禁用 PCRE 函数。如果不使用绑定的库的话，用
<TT CLASS="option">--with-pcre-regex=DIR</TT>
来指定 PCRE 库文件和头文件的路径。对早期版本必须在编译时用
<TT CLASS="option">--with-pcre-regex[=DIR]</TT>
才能使用这些函数。
</P><P> <TT CLASS="literal">PHP</TT> 的 Windows 版本已经内置该扩展模块的支持。您无需加载任何附加的扩展库即可使用这些函数。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="pcre.configuration"></A>运行时配置</H1><P>该扩展模块未定义任何设置指令。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="pcre.resources"></A>资源类型</H1><P>该扩展模块未定义任何资源类型。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="pcre.constants"></A>预定义常量</H1><P>&#13;由于这些常量是由该扩展模块定义的，因此只有在该扩展模块被编译到 PHP 中，或者在运行时被动态加载后，这些常量才有效。</P><DIV CLASS="table"><A NAME="AEN95877"></A><P><B>表格 1. PREG 常量</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><THEAD><TR><TH ALIGN="LEFT" VALIGN="MIDDLE">常量</TH><TH ALIGN="LEFT" VALIGN="MIDDLE">说明</TH></TR></THEAD><TBODY><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">PREG_PATTERN_ORDER</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 对结果排序使得 $matches[0] 为整个模式的匹配结果的数组，$matches[1]
为第一个括号内的子模式所匹配的字符串的数组，等等。本标记仅用于
<A HREF="function.preg-match-all.html"><B CLASS="function">preg_match_all()</B></A>。
</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">PREG_SET_ORDER</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 对结果排序使得 $matches[0] 为第一组匹配结果的数组，$matches[1]
为第二组匹配结果的数组，等等。本标记仅用于
<A HREF="function.preg-match-all.html"><B CLASS="function">preg_match_all()</B></A>。
</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">PREG_OFFSET_CAPTURE</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 见 <TT CLASS="constant"><B>PREG_SPLIT_OFFSET_CAPTURE</B></TT>
的说明。本标记自 <TT CLASS="literal">PHP 4.3.0</TT> 起可用。
</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">PREG_SPLIT_NO_EMPTY</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 本标记使 <A HREF="function.preg-split.html"><B CLASS="function">preg_split()</B></A> 仅返回非空的结果。
</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">PREG_SPLIT_DELIM_CAPTURE</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 本标记使 <A HREF="function.preg-split.html"><B CLASS="function">preg_split()</B></A> 也捕获定界符模式中的括号表达。本标记自
<TT CLASS="literal">PHP 4.0.5</TT> 起可用。
</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">PREG_SPLIT_OFFSET_CAPTURE</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 如果设定本标记，对每个出现的匹配结果也同时返回其附属的字符串偏移量。注意这改变了返回的数组的值，使其中的每个单元也是一个数组，其中第一项为匹配字符串，第二项为其偏移量。本标记自
<TT CLASS="literal">PHP 4.3.0</TT> 起可用且仅用于 <A HREF="function.preg-split.html"><B CLASS="function">preg_split()</B></A>。
</TD></TR></TBODY></TABLE></DIV></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="pcre.examples"></A>范例</H1><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN95915"></A><P><B>例子 1. 合法的模式举例</B></P><P></P><UL><LI><P><TT CLASS="literal">/&#60;\/\w+&#62;/</TT></P></LI><LI><P><TT CLASS="literal">|(\d{3})-\d+|Sm</TT></P></LI><LI><P><TT CLASS="literal">/^(?i)php[34]/</TT></P></LI><LI><P><TT CLASS="literal">{^\s+(\s+)?$}</TT></P></LI></UL></DIV></TD></TR></TABLE>
</P><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN95931"></A><P><B>例子 2. 非法的模式举例</B></P><P></P><UL><LI><P>&#13; <TT CLASS="literal">/href='(.*)'</TT> - 缺少结束定界符
</P></LI><LI><P>&#13; <TT CLASS="literal">/\w+\s*\w+/J</TT> - 未知的修正符 'J'
</P></LI><LI><P>&#13; <TT CLASS="literal">1-\d3-\d3-\d4|</TT> - 缺少起始定界符
</P></LI></UL></DIV></TD></TR></TABLE>
</P></DIV></DIV><DIV CLASS="TOC"><DL><DT><B>目录</B></DT><DT><A HREF="function.preg-grep.html">preg_grep</A>&nbsp;--&nbsp;
返回与模式匹配的数组单元
</DT><DT><A HREF="function.preg-match-all.html">preg_match_all</A>&nbsp;--&nbsp;进行全局正则表达式匹配</DT><DT><A HREF="function.preg-match.html">preg_match</A>&nbsp;--&nbsp;进行正则表达式匹配</DT><DT><A HREF="function.preg-quote.html">preg_quote</A>&nbsp;--&nbsp;转义正则表达式字符</DT><DT><A HREF="function.preg-replace-callback.html">preg_replace_callback</A>&nbsp;--&nbsp;用回调函数执行正则表达式的搜索和替换</DT><DT><A HREF="function.preg-replace.html">preg_replace</A>&nbsp;--&nbsp;执行正则表达式的搜索和替换</DT><DT><A HREF="function.preg-split.html">preg_split</A>&nbsp;--&nbsp;用正则表达式分割字符串</DT></DL></DIV></DIV></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.recode.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.preg-grep.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">recode</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="funcref.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">preg_grep</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
