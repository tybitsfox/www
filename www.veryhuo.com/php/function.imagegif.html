<HTML><HEAD><TITLE>imagegif</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="图像函数库" HREF="ref.image.html"><LINK REL="PREVIOUS" TITLE="imagegd" HREF="function.imagegd.html"><LINK REL="NEXT" TITLE="imageinterlace" HREF="function.imageinterlace.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="refentry" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.imagegd.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.imageinterlace.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><H1><A NAME="function.imagegif"></A>imagegif</H1><DIV CLASS="refnamediv"><A NAME="AEN40060"></A><P> (PHP 3, PHP 4 )</P>imagegif&nbsp;--&nbsp;以 GIF 格式将图像输出到浏览器或文件</DIV><DIV CLASS="refsect1"><A NAME="AEN40063"></A><H2>说明</H2>int <B CLASS="methodname">imagegif</B> ( resource image [, string filename])<BR></BR><P>&#13; <B CLASS="function">imagegif()</B> 从 <TT CLASS="parameter"><I>image</I></TT>
图像以 <TT CLASS="parameter"><I>filename</I></TT> 为文件名创建一个
<SPAN CLASS="acronym">GIF</SPAN> 图像。<TT CLASS="parameter"><I>image</I></TT>
参数是 <A HREF="function.imagecreate.html"><B CLASS="function">imagecreate()</B></A> 函数的返回值。
</P><P>&#13; 图像格式为 <SPAN CLASS="acronym">GIF87a</SPAN>。如果用了
<A HREF="function.imagecolortransparent.html"><B CLASS="function">imagecolortransparent()</B></A> 使图像为透明，则其格式为
<SPAN CLASS="acronym">GIF89a</SPAN>。
</P><P>&#13; <TT CLASS="parameter"><I>filename</I></TT> 参数为可选，如果省略，则原始图像流将被直接输出。通过
<A HREF="function.header.html"><B CLASS="function">header()</B></A> 发送 Content-type: image/gif 可以使 PHP
脚本直接输出 <SPAN CLASS="acronym">GIF</SPAN> 图像。
<DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
不过从 GD 库 1.6 起所有的 GIF 支持都移除了，如果使用这些 GD
库时本函数不可用。希望在 2004 年中期能够发布支持
<SPAN CLASS="acronym">GIF</SPAN> 的 GD 库。更多信息见
<A HREF="http://www.boutell.com/gd/" TARGET="_top">GD Project</A> 站点。
</P><P>&#13; 以下代码段通过自动检测 GD 支持的图像类型来写出移植性更好的
PHP 程序。用更灵活的代码替代了原来的
<TT CLASS="literal">header("Content-type: image/gif");
imagegif($im);</TT>：
<DIV CLASS="informalexample"><A NAME="AEN40095"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#007700">if (</font><font color="#0000BB">function_exists</font><font color="#007700">(</font><font color="#DD0000">"imagegif"</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">header </font><font color="#007700">(</font><font color="#DD0000">"Content-type: image/gif"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">imagegif </font><font color="#007700">(</font><font color="#0000BB">$im</font><font color="#007700">);<br />}<br />elseif (</font><font color="#0000BB">function_exists</font><font color="#007700">(</font><font color="#DD0000">"imagejpeg"</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">header </font><font color="#007700">(</font><font color="#DD0000">"Content-type: image/jpeg"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">imagejpeg </font><font color="#007700">(</font><font color="#0000BB">$im</font><font color="#007700">, </font><font color="#DD0000">""</font><font color="#007700">, </font><font color="#0000BB">0.5</font><font color="#007700">);<br />}<br />elseif (</font><font color="#0000BB">function_exists</font><font color="#007700">(</font><font color="#DD0000">"imagepng"</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">header </font><font color="#007700">(</font><font color="#DD0000">"Content-type: image/png"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">imagepng </font><font color="#007700">(</font><font color="#0000BB">$im</font><font color="#007700">);<br />}<br />elseif (</font><font color="#0000BB">function_exists</font><font color="#007700">(</font><font color="#DD0000">"imagewbmp"</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">header </font><font color="#007700">(</font><font color="#DD0000">"Content-type: image/vnd.wap.wbmp"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">imagewbmp </font><font color="#007700">(</font><font color="#0000BB">$im</font><font color="#007700">);<br />}<br />else<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</font><font color="#DD0000">"No image support in this PHP server"</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE><P></P></DIV>
</P></BLOCKQUOTE></DIV>
<DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
自 PHP 3.0.18 和 4.0.2 起可以用
<A HREF="function.imagetypes.html"><B CLASS="function">imagetypes()</B></A> 函数代替
<A HREF="function.function-exists.html"><B CLASS="function">function_exists()</B></A> 来检查是否支持某种图像格式：
<DIV CLASS="informalexample"><A NAME="AEN40101"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#007700">if (</font><font color="#0000BB">imagetypes</font><font color="#007700">() &amp; </font><font color="#0000BB">IMG_GIF</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">header </font><font color="#007700">(</font><font color="#DD0000">"Content-type: image/gif"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">imagegif </font><font color="#007700">(</font><font color="#0000BB">$im</font><font color="#007700">);<br />}<br />elseif (</font><font color="#0000BB">imagetypes</font><font color="#007700">() &amp; </font><font color="#0000BB">IMG_JPG</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... </font><font color="#0000BB">etc</font><font color="#007700">.<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE><P></P></DIV>
</P></BLOCKQUOTE></DIV>
</P><P>&#13; 参见 <A HREF="function.imagepng.html"><B CLASS="function">imagepng()</B></A>，<A HREF="function.imagewbmp.html"><B CLASS="function">imagewbmp()</B></A>，<A HREF="function.imagejpeg.html"><B CLASS="function">imagejpeg()</B></A>
和 <A HREF="function.imagetypes.html"><B CLASS="function">imagetypes()</B></A>。
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.imagegd.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.imageinterlace.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">imagegd</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="ref.image.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">imageinterlace</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
