<HTML><HEAD><TITLE>FTP 函数库</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="函数参考" HREF="funcref.html"><LINK REL="PREVIOUS" TITLE="fribidi_log2vis" HREF="function.fribidi-log2vis.html"><LINK REL="NEXT" TITLE="ftp_alloc" HREF="function.ftp-alloc.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="reference" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.fribidi-log2vis.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.ftp-alloc.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="reference"><A NAME="ref.ftp"></A><DIV CLASS="TITLEPAGE"><H1 CLASS="title">XXXIII. FTP 函数库</H1><DIV CLASS="PARTINTRO"><A NAME="AEN31035"></A><DIV CLASS="section"><H1 CLASS="section"><A NAME="ftp.intro"></A>介绍</H1><P>&#13; FTP 函数库可以帮助您实现客户机与服务器之间标准文件传送协议（FTP）的规范进行文件传送。FTP
的详细定义参见 <A HREF="http://www.faqs.org/rfcs/rfc959.html" TARGET="_top">http://www.faqs.org/rfcs/rfc959.html</A>。此扩展库用来使运行的脚本对
FTP 服务器进行广泛的控制。如果你只想在一个
FTP 服务器上读写文件，考虑使用<A HREF="ref.filesystem.html">文件系统函数库</A>中的
<A HREF="wrappers.ftp.html"><TT CLASS="literal">ftp://</TT> wrapper</A>，它提供了简单和更直观的接口。
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="ftp.requirements"></A>需求</H1><P>无需外部库文件就可以加入本扩展模块的支持。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="ftp.installation"></A>安装</H1><P>&#13; In order to use FTP functions with your PHP configuration, you should
add the <TT CLASS="option">--enable-ftp</TT> option when
installing PHP 4 or <TT CLASS="option">--with-ftp</TT> when using
PHP 3.
</P><P> <TT CLASS="literal">PHP</TT> 的 Windows 版本已经内置该扩展模块的支持。您无需加载任何附加的扩展库即可使用这些函数。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="ftp.configuration"></A>运行时配置</H1><P>该扩展模块未定义任何设置指令。</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="ftp.resources"></A>资源类型</H1><P>&#13; 在 FTP 模块中使用了一个资源类型，该资源类型为 FTP 的连接句柄，由函数 <A HREF="function.ftp-connect.html"><B CLASS="function">ftp_connect()</B></A> 产生。
</P></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="ftp.constants"></A>预定义常量</H1><P>&#13;由于这些常量是由该扩展模块定义的，因此只有在该扩展模块被编译到 PHP 中，或者在运行时被动态加载后，这些常量才有效。</P><P></P><DIV CLASS="variablelist"><DL><DT><TT CLASS="constant"><B>FTP_ASCII</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13;
</P></DD><DT><TT CLASS="constant"><B>FTP_TEXT</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13;
</P></DD><DT><TT CLASS="constant"><B>FTP_BINARY</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13;
</P></DD><DT><TT CLASS="constant"><B>FTP_IMAGE</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13;
</P></DD><DT><TT CLASS="constant"><B>FTP_TIMEOUT_SEC</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13; 参考函数 <A HREF="function.ftp-set-option.html"><B CLASS="function">ftp_set_option()</B></A>。
</P></DD></DL></DIV><P>&#13; 下列变量在 PHP 4.3.0 以后版本中被加入。
</P><P></P><DIV CLASS="variablelist"><DL><DT><TT CLASS="constant"><B>FTP_AUTOSEEK</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13; 参考函数 <A HREF="function.ftp-set-option.html"><B CLASS="function">ftp_set_option()</B></A>。
</P></DD><DT><TT CLASS="constant"><B>FTP_AUTORESUME</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13; 为 GET 和 PUT 请求自动决定恢复和开始的位置
(只能工作在 FTP_AUTOSEEK 打开的情况下)
</P></DD><DT><TT CLASS="constant"><B>FTP_FAILED</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13; 异步传输失败
</P></DD><DT><TT CLASS="constant"><B>FTP_FINISHED</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13; 异步传输成功
</P></DD><DT><TT CLASS="constant"><B>FTP_MOREDATA</B></TT>
(<A HREF="language.types.integer.html"><B CLASS="type">integer</B></A>)</DT><DD><P>&#13; 异步传输是活动状态的
</P></DD></DL></DIV></DIV><DIV CLASS="section"><H1 CLASS="section"><A NAME="ftp.examples"></A>范例</H1><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN31131"></A><P><B>例子 1. FTP 实例</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">// set up basic connection<br /></font><font color="#0000BB">$conn_id </font><font color="#007700">= </font><font color="#0000BB">ftp_connect</font><font color="#007700">(</font><font color="#0000BB">$ftp_server</font><font color="#007700">); <br /><br /></font><font color="#FF8000">// login with username and password<br /></font><font color="#0000BB">$login_result </font><font color="#007700">= </font><font color="#0000BB">ftp_login</font><font color="#007700">(</font><font color="#0000BB">$conn_id</font><font color="#007700">, </font><font color="#0000BB">$ftp_user_name</font><font color="#007700">, </font><font color="#0000BB">$ftp_user_pass</font><font color="#007700">); <br /><br /></font><font color="#FF8000">// check connection<br /></font><font color="#007700">if ((!</font><font color="#0000BB">$conn_id</font><font color="#007700">) || (!</font><font color="#0000BB">$login_result</font><font color="#007700">)) { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"FTP connection has failed!"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"Attempted to connect to $ftp_server for user $ftp_user_name"</font><font color="#007700">; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit; <br />&nbsp;&nbsp;&nbsp;&nbsp;} else {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"Connected to $ftp_server, for user $ftp_user_name"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br /></font><font color="#FF8000">// upload the file<br /></font><font color="#0000BB">$upload </font><font color="#007700">= </font><font color="#0000BB">ftp_put</font><font color="#007700">(</font><font color="#0000BB">$conn_id</font><font color="#007700">, </font><font color="#0000BB">$destination_file</font><font color="#007700">, </font><font color="#0000BB">$source_file</font><font color="#007700">, </font><font color="#0000BB">FTP_BINARY</font><font color="#007700">); <br /><br /></font><font color="#FF8000">// check upload status<br /></font><font color="#007700">if (!</font><font color="#0000BB">$upload</font><font color="#007700">) { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"FTP upload has failed!"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;} else {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"Uploaded $source_file to $ftp_server as $destination_file"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br /></font><font color="#FF8000">// close the FTP stream <br /></font><font color="#0000BB">ftp_close</font><font color="#007700">(</font><font color="#0000BB">$conn_id</font><font color="#007700">); <br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P></DIV></DIV><DIV CLASS="TOC"><DL><DT><B>目录</B></DT><DT><A HREF="function.ftp-alloc.html">ftp_alloc</A>&nbsp;--&nbsp;Allocates space for a file to be uploaded.</DT><DT><A HREF="function.ftp-cdup.html">ftp_cdup</A>&nbsp;--&nbsp;切换到当前目录的父目录</DT><DT><A HREF="function.ftp-chdir.html">ftp_chdir</A>&nbsp;--&nbsp;在 FTP 服务器上切换当前目录</DT><DT><A HREF="function.ftp-chmod.html">ftp_chmod</A>&nbsp;--&nbsp;Set permissions on a file via FTP</DT><DT><A HREF="function.ftp-close.html">ftp_close</A>&nbsp;--&nbsp;关闭一个活动的 FTP 连接</DT><DT><A HREF="function.ftp-connect.html">ftp_connect</A>&nbsp;--&nbsp;建立一个新的 FTP 连接</DT><DT><A HREF="function.ftp-delete.html">ftp_delete</A>&nbsp;--&nbsp;删除 FTP 服务器上的一个文件</DT><DT><A HREF="function.ftp-exec.html">ftp_exec</A>&nbsp;--&nbsp;请求运行一条 FTP 命令</DT><DT><A HREF="function.ftp-fget.html">ftp_fget</A>&nbsp;--&nbsp;从 FTP 服务器上下载一个文件并保存到本地一个已经打开的文件中</DT><DT><A HREF="function.ftp-fput.html">ftp_fput</A>&nbsp;--&nbsp;上传一个已经打开的文件到 FTP 服务器</DT><DT><A HREF="function.ftp-get-option.html">ftp_get_option</A>&nbsp;--&nbsp;返回当前 FTP 连接的各种不同的选项设置</DT><DT><A HREF="function.ftp-get.html">ftp_get</A>&nbsp;--&nbsp;从 FTP 服务器上下载一个文件</DT><DT><A HREF="function.ftp-login.html">ftp_login</A>&nbsp;--&nbsp;登录 FTP 服务器</DT><DT><A HREF="function.ftp-mdtm.html">ftp_mdtm</A>&nbsp;--&nbsp;返回指定文件的最后修改时间</DT><DT><A HREF="function.ftp-mkdir.html">ftp_mkdir</A>&nbsp;--&nbsp;建立新目录</DT><DT><A HREF="function.ftp-nb-continue.html">ftp_nb_continue</A>&nbsp;--&nbsp;连续获取／发送文件（non-blocking）</DT><DT><A HREF="function.ftp-nb-fget.html">ftp_nb_fget</A>&nbsp;--&nbsp;Retrieves a file from the FTP server and writes it to an open file (non-blocking)</DT><DT><A HREF="function.ftp-nb-fput.html">ftp_nb_fput</A>&nbsp;--&nbsp;Stores a file from an open file to the FTP server (non-blocking)</DT><DT><A HREF="function.ftp-nb-get.html">ftp_nb_get</A>&nbsp;--&nbsp;从 FTP 服务器上获取文件并写入本地文件（non-blocking）</DT><DT><A HREF="function.ftp-nb-put.html">ftp_nb_put</A>&nbsp;--&nbsp;存储一个文件至 FTP 服务器（non-blocking）</DT><DT><A HREF="function.ftp-nlist.html">ftp_nlist</A>&nbsp;--&nbsp;返回给定目录的文件列表</DT><DT><A HREF="function.ftp-pasv.html">ftp_pasv</A>&nbsp;--&nbsp;返回当前 FTP 被动模式是否打开</DT><DT><A HREF="function.ftp-put.html">ftp_put</A>&nbsp;--&nbsp;上传文件到 FTP 服务器</DT><DT><A HREF="function.ftp-pwd.html">ftp_pwd</A>&nbsp;--&nbsp;返回当前目录名</DT><DT><A HREF="function.ftp-quit.html">ftp_quit</A>&nbsp;--&nbsp;<A HREF="function.ftp-close.html"><B CLASS="function">ftp_close()</B></A> 的别名</DT><DT><A HREF="function.ftp-raw.html">ftp_raw</A>&nbsp;--&nbsp;Sends an arbitrary command to an FTP server</DT><DT><A HREF="function.ftp-rawlist.html">ftp_rawlist</A>&nbsp;--&nbsp;返回指定目录下文件的详细列表</DT><DT><A HREF="function.ftp-rename.html">ftp_rename</A>&nbsp;--&nbsp;更改 FTP 服务器上指定的文件名</DT><DT><A HREF="function.ftp-rmdir.html">ftp_rmdir</A>&nbsp;--&nbsp;删除一个目录</DT><DT><A HREF="function.ftp-set-option.html">ftp_set_option</A>&nbsp;--&nbsp;设置各种 FTP 运行时选项</DT><DT><A HREF="function.ftp-site.html">ftp_site</A>&nbsp;--&nbsp;向服务器发送 SITE 命令</DT><DT><A HREF="function.ftp-size.html">ftp_size</A>&nbsp;--&nbsp;返回指定文件的大小</DT><DT><A HREF="function.ftp-ssl-connect.html">ftp_ssl_connect</A>&nbsp;--&nbsp;Opens an Secure SSL-FTP connection</DT><DT><A HREF="function.ftp-systype.html">ftp_systype</A>&nbsp;--&nbsp;返回远程 FTP 服务器的系统类型</DT></DL></DIV></DIV></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.fribidi-log2vis.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.ftp-alloc.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">fribidi_log2vis</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="funcref.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">ftp_alloc</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
