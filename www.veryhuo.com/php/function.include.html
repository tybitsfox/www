<HTML><HEAD><TITLE>include</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="流程控制" HREF="control-structures.html"><LINK REL="PREVIOUS" TITLE="require" HREF="function.require.html"><LINK REL="NEXT" TITLE="require_once" HREF="function.require-once.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="sect1" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.require.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom">章 11. 流程控制</TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.require-once.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="sect1"><H1 CLASS="sect1"><A NAME="function.include"></A><A HREF="function.include.html"><B CLASS="function">include()</B></A></H1><P>&#13; <A HREF="function.include.html"><B CLASS="function">include()</B></A> 语句包括并运行指定文件。
</P><P>&#13; 以下文档也适用于
<A HREF="function.require.html"><B CLASS="function">require()</B></A>。这两种结构除了在如何处理失败之外完全一样。<A HREF="function.include.html"><B CLASS="function">include()</B></A>
产生一个<A HREF="phpdevel-errors.html#internal.e-warning">警告</A>而 <A HREF="function.require.html"><B CLASS="function">require()</B></A> 则导致一个<A HREF="phpdevel-errors.html#internal.e-error">致命错误</A>。换句话说，如果你想在遇到丢失文件时停止处理页面就用
<A HREF="function.require.html"><B CLASS="function">require()</B></A>。<A HREF="function.include.html"><B CLASS="function">include()</B></A>
就不是这样，脚本会继续运行。同时也要确认设置了合适的 <A HREF="configuration.directives.html#ini.include-path">include_path</A>。
</P><P>&#13; 当一个文件被包括时，其中所包含的代码继承了 include 所在行的<A HREF="language.variables.scope.html">变量范围</A>。从该处开始，调用文件在该行处可用的任何变量在被调用的文件中也都可用。
</P><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN5374"></A><P><B>例子 11-3. 基本的 <A HREF="function.include.html"><B CLASS="function">include()</B></A> 例子</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
vars.php<br /><font color="#0000BB">&lt;?php<br /><br />$color </font><font color="#007700">= </font><font color="#DD0000">'green'</font><font color="#007700">;<br /></font><font color="#0000BB">$fruit </font><font color="#007700">= </font><font color="#DD0000">'apple'</font><font color="#007700">;<br /><br /></font><font color="#0000BB">?&gt;<br /></font><br />test.php<br /><font color="#0000BB">&lt;?php<br /><br /></font><font color="#007700">echo </font><font color="#DD0000">"A $color $fruit"</font><font color="#007700">; </font><font color="#FF8000">// A<br /><br /></font><font color="#007700">include </font><font color="#DD0000">'vars.php'</font><font color="#007700">;<br /><br />echo </font><font color="#DD0000">"A $color $fruit"</font><font color="#007700">; </font><font color="#FF8000">// A green apple<br /><br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P><P>&#13; 如果 include 出现于调用文件中的一个函数里，则被调用的文件中所包含的所有代码将表现得如同它们是在该函数内部定义的一样。所以它将遵循该函数的变量范围。
</P><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN5380"></A><P><B>例子 11-4. 函数中的包括</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /><br /></font><font color="#007700">function </font><font color="#0000BB">foo</font><font color="#007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;global </font><font color="#0000BB">$color</font><font color="#007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;include </font><font color="#DD0000">'vars.php'</font><font color="#007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"A $color $fruit"</font><font color="#007700">;<br />}<br /><br /></font><font color="#FF8000">/* vars.php is in the scope of foo() so&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br /> * $fruit is NOT available outside of this&nbsp;&nbsp;*<br /> * scope.&nbsp;&nbsp;$color is because we declared it *<br /> * as global.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><br /></font><font color="#0000BB">foo</font><font color="#007700">();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// A green apple<br /></font><font color="#007700">echo </font><font color="#DD0000">"A $color $fruit"</font><font color="#007700">;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// A green<br /><br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P><P>&#13; 当一个文件被包括时，语法解析器在目标文件的开头脱离 PHP 模式并进入 HTML 模式，到文件结尾处恢复。由于此原因，目标文件中应被当作 PHP 代码执行的任何代码都必须被包括在<A HREF="language.basic-syntax.html#language.basic-syntax.phpmode">有效的 PHP 起始和结束标记</A>之中。
</P><P>&#13; 如果“<A HREF="ref.filesystem.html#ini.allow-url-fopen">URL fopen wrappers</A>”在
PHP 中被激活（默认配置），可以用 URL（通过 HTTP 或者其它支持的封装协议 －
所支持的协议见 <A HREF="wrappers.html">附录 J</A>）而不是本地文件来指定要被包括的文件。如果目标服务器将目标文件作为 PHP 代码解释，则可以用适用于 HTTP GET 的 URL 请求字符串来向被包括的文件传递变量。严格的说这和包括一个文件并继承父文件的变量空间并不是一回事；该脚本文件实际上已经在远程服务器上运行了，而本地脚本则包括了其结果。
</P><DIV CLASS="warning"><P></P><TABLE CLASS="warning" BORDER="1" WIDTH="100%"><TR><TD ALIGN="CENTER"><B>警告</B></TD></TR><TR><TD ALIGN="LEFT"><P>Windows 版本的 PHP
在 4.3.0 版之前不支持该函数的远程文件访问，即使
<A HREF="ref.filesystem.html#ini.allow-url-fopen">allow_url_fopen</A> 选项已被激活。
</P></TD></TR></TABLE></DIV><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN5392"></A><P><B>例子 11-5. 通过 HTTP 进行的 <A HREF="function.include.html"><B CLASS="function">include()</B></A></B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /><br /></font><font color="#FF8000">/* This example assumes that www.example.com is configured to parse .php *<br /> * files and not .txt files. Also, 'Works' here means that the variables *<br /> * $foo and $bar are available within the included file.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><br />// Won't work; file.txt wasn't handled by www.example.com as PHP<br /></font><font color="#007700">include </font><font color="#DD0000">'http://www.example.com/file.txt?foo=1&amp;bar=2'</font><font color="#007700">;<br /><br /></font><font color="#FF8000">// Won't work; looks for a file named 'file.php?foo=1&amp;bar=2' on the<br />// local filesystem.<br /></font><font color="#007700">include </font><font color="#DD0000">'file.php?foo=1&amp;bar=2'</font><font color="#007700">;<br /><br /></font><font color="#FF8000">// Works.<br /></font><font color="#007700">include </font><font color="#DD0000">'http://www.example.com/file.php?foo=1&amp;bar=2'</font><font color="#007700">;<br /><br /></font><font color="#0000BB">$foo </font><font color="#007700">= </font><font color="#0000BB">1</font><font color="#007700">;<br /></font><font color="#0000BB">$bar </font><font color="#007700">= </font><font color="#0000BB">2</font><font color="#007700">;<br />include </font><font color="#DD0000">'file.txt'</font><font color="#007700">;&nbsp;&nbsp;</font><font color="#FF8000">// Works.<br /></font><font color="#007700">include </font><font color="#DD0000">'file.php'</font><font color="#007700">;&nbsp;&nbsp;</font><font color="#FF8000">// Works.<br /><br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
相关信息参见<A HREF="features.remote-files.html">使用远程文件</A>，<A HREF="function.fopen.html"><B CLASS="function">fopen()</B></A> 和 <A HREF="function.file.html"><B CLASS="function">file()</B></A>。
</P><P>&#13; 因为 <A HREF="function.include.html"><B CLASS="function">include()</B></A> 和 <A HREF="function.require.html"><B CLASS="function">require()</B></A> 是特殊的语言结构，在条件语句中使用必须将其放在语句组中（花括号中）。
</P><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN5403"></A><P><B>例子 11-6. include() 与条件语句组</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /><br /></font><font color="#FF8000">// This is WRONG and will not work as desired.<br /></font><font color="#007700">if (</font><font color="#0000BB">$condition</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;include </font><font color="#0000BB">$file</font><font color="#007700">;<br />else<br />&nbsp;&nbsp;&nbsp;&nbsp;include </font><font color="#0000BB">$other</font><font color="#007700">;<br /><br /><br /></font><font color="#FF8000">// This is CORRECT.<br /></font><font color="#007700">if (</font><font color="#0000BB">$condition</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;include </font><font color="#0000BB">$file</font><font color="#007700">;<br />} else {<br />&nbsp;&nbsp;&nbsp;&nbsp;include </font><font color="#0000BB">$other</font><font color="#007700">;<br />}<br /><br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P><P>&#13; 处理返回值：可以在被包括的文件中使用 <A HREF="function.return.html"><B CLASS="function">return()</B></A>
语句来终止该文件中程序的执行并返回调用它的脚本。同样也可以从被包括的文件中返回值。可以像普通函数一样获得
include 呼叫的返回值。
</P><P>&#13; <DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>
在 PHP 3 中，除非是在函数中调用否则被包括的文件中不能出现
return。在此情况下 <A HREF="function.return.html"><B CLASS="function">return()</B></A> 作用于该函数而不是整个文件。
</P></BLOCKQUOTE></DIV>
</P><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN5413"></A><P><B>例子 11-7. <A HREF="function.include.html"><B CLASS="function">include()</B></A> 和 <A HREF="function.return.html"><B CLASS="function">return()</B></A> 语句</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
return.php<br /><font color="#0000BB">&lt;?php<br /><br />$var </font><font color="#007700">= </font><font color="#DD0000">'PHP'</font><font color="#007700">;<br /><br />return </font><font color="#0000BB">$var</font><font color="#007700">;<br /><br /></font><font color="#0000BB">?&gt;<br /></font><br />noreturn.php<br /><font color="#0000BB">&lt;?php<br /><br />$var </font><font color="#007700">= </font><font color="#DD0000">'PHP'</font><font color="#007700">;<br /><br /></font><font color="#0000BB">?&gt;<br /></font><br />testreturns.php<br /><font color="#0000BB">&lt;?php<br /><br />$foo </font><font color="#007700">= include </font><font color="#DD0000">'return.php'</font><font color="#007700">;<br /><br />echo </font><font color="#0000BB">$foo</font><font color="#007700">; </font><font color="#FF8000">// prints 'PHP'<br /><br /></font><font color="#0000BB">$bar </font><font color="#007700">= include </font><font color="#DD0000">'noreturn.php'</font><font color="#007700">;<br /><br />echo </font><font color="#0000BB">$bar</font><font color="#007700">; </font><font color="#FF8000">// prints 1<br /><br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P><P>&#13; <TT CLASS="literal">$bar</TT> 的值为 <TT CLASS="literal">1</TT> 是因为 include 成功运行了。注意以上例子中的区别。第一个在被包括的文件中用了 <A HREF="function.return.html"><B CLASS="function">return()</B></A> 而另一个没有。其它几种把文件“包括”到变量的方法是用 <A HREF="function.fopen.html"><B CLASS="function">fopen()</B></A>，<A HREF="function.file.html"><B CLASS="function">file()</B></A> 或者 <A HREF="function.include.html"><B CLASS="function">include()</B></A> 连同<A HREF="ref.outcontrol.html">输出控制函数</A>一起使用。
</P><DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>注: </B>由于这是一个语言结构而非函数，因此它无法被“<A HREF="functions.variable-functions.html">变量函数</A>”调用。</P></BLOCKQUOTE></DIV><P>&#13; 参见 <A HREF="function.require.html"><B CLASS="function">require()</B></A>，<A HREF="function.require-once.html"><B CLASS="function">require_once()</B></A>，<A HREF="function.include-once.html"><B CLASS="function">include_once()</B></A>，<A HREF="function.readfile.html"><B CLASS="function">readfile()</B></A>，<A HREF="function.virtual.html"><B CLASS="function">virtual()</B></A> 和 <A HREF="configuration.directives.html#ini.include-path">include_path</A>。
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.require.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.require-once.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.require.html"><B CLASS="function">require()</B></A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="control-structures.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.require-once.html"><B CLASS="function">require_once()</B></A></TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
