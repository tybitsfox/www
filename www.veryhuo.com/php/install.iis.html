<HTML><HEAD><TITLE>IIS/PWS 服务器</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="安装" HREF="installation.html"><LINK REL="PREVIOUS" TITLE="fhttpd 服务器" HREF="install.fhttpd.html"><LINK REL="NEXT" TITLE="Servers-Netscape, iPlanet and SunONE" HREF="install.netscape-enterprise.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="sect1" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="install.fhttpd.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom">章 3. 安装</TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="install.netscape-enterprise.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="sect1"><H1 CLASS="sect1"><A NAME="install.iis"></A>IIS/PWS 服务器</H1><P>&#13; 本节包括 IIS（Microsoft Internet Information
Server）的说明和提示。以及 <A HREF="install.iis.html#install.iis.iis3">PWS/IIS 3</A>，<A HREF="install.iis.html#install.iis.pws4">PWS 4 以及更新版本</A> 和 <A HREF="install.iis.html#install.iis.iis4">IIS 4 以及更新版本</A> 上 PHP 的安装说明。
</P><DIV CLASS="note"><BLOCKQUOTE CLASS="note"><P><B>CGI 用户请注意: </B>
阅读 <A HREF="faq.installation.html#faq.installation.forceredirect">cgi.force_redirect
的常见问题</A>中的重要细节。该指令必须被设为 <TT CLASS="literal">0</TT>。
</P></BLOCKQUOTE></DIV><DIV CLASS="sect2"><H2 CLASS="sect2"><A NAME="install.iis.iis3"></A>Windows 和 PWS/IIS 3</H2><P>&#13; 推荐使用PHP发行包中包含的注册表文件（pws-php4cgi.reg）来配置服务器。你可能需要编辑这个文件，确认扩展库和
PHP 的安装目录符合你的设置。或者你可以按照以下步骤手工进行。
</P><DIV CLASS="warning"><P></P><TABLE CLASS="warning" BORDER="1" WIDTH="100%"><TR><TD ALIGN="CENTER"><B>警告</B></TD></TR><TR><TD ALIGN="LEFT"><P>&#13; 以下步骤涉及到直接修改 Windows
注册表，如果出错会使你的系统不稳定。我们强烈推荐你先备份注册表文件。PHP
开发小组将不对你损坏了注册表负责。
</P></TD></TR></TABLE></DIV><P>&#13; <P></P><UL><LI><P>&#13; 运行 Regedit。
</P></LI><LI><P>&#13; 找到：<TT CLASS="literal">HKEY_LOCAL_MACHINE /System
/CurrentControlSet /Services /W3Svc /Parameters
/ScriptMap</TT>。
</P></LI><LI><P>&#13; 在编辑菜单下选择：<TT CLASS="literal">新建-&#62;字符串值</TT>（<TT CLASS="literal">New-&#62;String Value</TT>）。
</P></LI><LI><P>&#13; 输入你想 PHP 脚本使用的文件后缀，例如 <TT CLASS="literal">.php</TT>。
</P></LI><LI><P>&#13; 双击这个新的字符串值，并且在数据栏中输入 <TT CLASS="literal">php.exe</TT> 的路径，例如：<TT CLASS="literal">c:\php\php.exe</TT>。
</P></LI><LI><P>&#13; 如果你希望其他后缀（例如 .php3）也和 PHP 关联，重复以上步骤。
</P></LI></UL>
</P><P>&#13; 以下步骤并不影响 Web 服务器安装，并且仅适用于你的 PHP
脚本运行于命令行方式下（例如运行
<TT CLASS="filename">c:\myscripts\test.php</TT>）或者在资源管理器中双击
PHP 文件。你可能更希望双击 PHP 文件时用文本编辑器打开，那么可以跳过这一步。
</P><P>&#13; <P></P><UL><LI><P>&#13; 找到：<TT CLASS="literal">HKEY_CLASSES_ROOT</TT>。
</P></LI><LI><P>&#13; 在编辑菜单中选择：<TT CLASS="literal">新建-&#62;主键</TT>（<TT CLASS="literal">New-&#62;Key</TT>）。
</P></LI><LI><P>&#13; 给该主键命名为你前一节中设置的后缀，例如：<TT CLASS="literal">.php</TT>。
</P></LI><LI><P>&#13; 选中该主键，在右边一栏中双击“默认”（"Default"）并输入 <TT CLASS="literal">phpfile</TT>。
</P></LI><LI><P>&#13; 对于你前一节中设置的其它后缀，重复以上步骤。
</P></LI><LI><P>&#13; 现在再在 <TT CLASS="literal">HKEY_CLASSES_ROOT</TT>
下面新建一个主键（<TT CLASS="literal">New-&#62;Key</TT>），命名为 <TT CLASS="literal">phpfile</TT>。
</P></LI><LI><P>&#13; 选中主键 <TT CLASS="literal">phpfile</TT>，在右边一栏中双击“默认”（"Default"）并输入
<TT CLASS="literal">PHP Script</TT>。
</P></LI><LI><P>&#13; 右键点击主键
<TT CLASS="literal">phpfile</TT>，选择<TT CLASS="literal">新建-&#62;主键</TT>（<TT CLASS="literal">New-&#62;Key</TT>），命名为
<TT CLASS="literal">Shell</TT>。
</P></LI><LI><P>&#13; 右键点击主键
<TT CLASS="literal">Shell</TT>，选择<TT CLASS="literal">新建-&#62;主键</TT>（<TT CLASS="literal">New-&#62;Key</TT>），命名为
<TT CLASS="literal">open</TT>。
</P></LI><LI><P>&#13; 右键点击主键
<TT CLASS="literal">open</TT>，选择<TT CLASS="literal">新建-&#62;主键</TT>（<TT CLASS="literal">New-&#62;Key</TT>），命名为
<TT CLASS="literal">command</TT>。
</P></LI><LI><P>&#13; 选中主键 <TT CLASS="literal">command</TT>，在右边一栏中双击“默认”（"Default"）并且输入
<TT CLASS="literal">php.exe</TT> 的路径，例如
<TT CLASS="literal">c:\php\php.exe -q %1</TT>（别忘了 <TT CLASS="literal">%1</TT>）。
</P></LI><LI><P>&#13; 退出 Regedit。
</P></LI><LI><P>&#13; 如果使用 PWS for Windows，重新启动计算机使注册表生效。
</P></LI></UL>
</P><P>&#13; PWS和IIS 3 的用户现在就拥有一个完全操作正常的 PHP 系统了。IIS 3
用户还可以使用由 Steven Genusa 提供的一个极好的<A HREF="http://www.genusa.com/iis/iiscfg.html" TARGET="_top">工具</A>来配置脚本映射。
</P></DIV><DIV CLASS="sect2"><H2 CLASS="sect2"><A NAME="install.iis.pws4"></A>Windows 和 PWS 4 或更新版本</H2><P>&#13; 在 PWS 4 或者更新版本中安装 PHP 有两个选择。一种是 CGI
方式，还有一种是使用 ISAPI 模块的 DLL。
</P><P>&#13; 如果你选择 CGI 方式，按照以下步骤：
<P></P><UL><LI><P>&#13; 编辑 PHP 发行包中 SAPI 目录下的
<TT CLASS="filename">pws-php4cgi.reg</TT>文件，在里面输入正确的
<TT CLASS="filename">php.exe</TT> 的路径。反斜线必须双写，例如：
<TT CLASS="literal">[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\w3svc\parameters\Script Map] ".php"="c:\\php\\php.exe"</TT>，然后双击此文件将其合并（Merge）到注册表中。
</P></LI><LI><P>&#13; 在个人 Web 管理器中，右键点击你希望加入 PHP
支持的目录，选择“属性”（Properties），选中“执行“（Execute）多选框，并确认。
</P></LI></UL>
</P><P>&#13; 如果你选择 ISAPI 模块，按照以下步骤：
<P></P><UL><LI><P>&#13; 编辑 PHP 发行包中 SAPI 目录下的 <TT CLASS="filename">pws-php4isapi.reg</TT>
文件，在里面输入正确的 <TT CLASS="filename">php4isapi.dll</TT> 的路径。反斜线必须双写，例如：
<TT CLASS="literal">[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\w3svc\parameters\Script Map] ".php"="c:\\php\\sapi\\php4isapi.dll"</TT>，然后双击此文件将其合并（Merge）到注册表中。
</P></LI><LI><P>&#13; 在个人 Web 管理器中，右键点击你希望加入 PHP
支持的目录，选择“属性”（Properties），选中“执行”（Execute）多选框，并确认。
</P></LI></UL>
</P><P>&#13; 无论哪种方式都需要重新启动计算机以使改变设置生效。
</P></DIV><DIV CLASS="sect2"><H2 CLASS="sect2"><A NAME="install.iis.iis4"></A>Windows NT/2000/XP 和 IIS 4 或更新版本</H2><P>&#13; 要在 NT/2000/XP 中的 IIS 4 或更新版本中安装
PHP，按照以下说明进行。有两种选择安装 PHP，CGI 方式（php.exe）或者 ISAPI 模块方式。
</P><P>&#13; 无论哪种方式，都需要打开管理中心（Microsoft Management Console，NT 4.0
Option Pack 中的 'Internet Services Manager'，或者 2000/XP
中的控制面板 -&#62; 管理工具（Control Panel-&#62;Administrative Tools））。用右键点击你的
Web Server 节点（多半是 'Default Web Site'），选择“属性”（Properties）。
</P><P>&#13; 如果你选择 CGI 方式，按照以下步骤：
<P></P><UL><LI><P>&#13; 在“主目录”（Home Directory），“虚拟目录”（Virtual
Directory）或者“目录”（Directory）标签栏中，点击“配置”（Configuration）按钮，然后选择“应用程序映射”（App Mappings）标签栏。
</P></LI><LI><P>&#13; 点击“添加”（Add）按钮，在“可执行文件”（Executable）框中输入：<TT CLASS="literal">c:\php\php.exe</TT>（假定你将
PHP 解压缩到了 c:\php\）。
</P></LI><LI><P>&#13; 在“文件后缀”（Extension）框中输入你要使用的 PHP 后缀。'Method exclusions'
空着，选中“脚本引擎”（Script engine）。你也可以选中“检查文件是否存在”（check
that file exists）－ 略微损失一点性能，IIS 会先检查脚本文件是否存在。这样会输出
404 的错误信息而不是 PHP 没有输出任何数据的 cgi 错误。
</P><P>&#13; 对于其它你想使用的 PHP 后缀重复以上两个步骤。通常使用的有
<TT CLASS="literal">.php</TT> 和 <TT CLASS="literal">.phtml</TT>，对于一些老的程序还需要
<TT CLASS="literal">.php3</TT>。
</P></LI><LI><P>&#13; 设置适当的安全级别（在Internet Service Manager 中完成）。如果你使用了
NTFS，还需要在 <TT CLASS="literal">php.exe</TT>
所在的目录中给 I_USR_ 用户加上“执行”的权限。
</P></LI></UL>
</P><P>&#13; 如果你选择ISAPI模块，按照以下步骤：
<P></P><UL><LI><P>&#13; 如果你不用 PHP 进行 HTTP 认证的话，你可以（也应该）跳过这一步。在
ISAPI Filters 中，加入一个新的 ISAPI filter。用 PHP
作为过滤器的名字，并且提供 php4isapi.dll 所在的路径。
</P></LI><LI><P>&#13; 在“主目录”（Home Directory）中点击“配置”（Configuration）按钮，在应用程序映射（Application
Mappings）中添加一个新的条目。用 php4isapi.dll 的路径作为可执行文件（Executable），用
<TT CLASS="literal">.php</TT> 作为文件后缀，选中“脚本引擎”（Script Engine），而
'Method exclusions' 为空。
</P></LI><LI><P>&#13; 完全停止 IIS 服务（NET STOP iisadmin）
</P></LI><LI><P>&#13; 重新启动IIS服务（NET START w3svc）
</P></LI></UL>
</P></DIV></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="install.fhttpd.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="install.netscape-enterprise.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">fhttpd 服务器</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="installation.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">Servers-Netscape, iPlanet and SunONE</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
