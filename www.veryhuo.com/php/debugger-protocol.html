<HTML><HEAD><TITLE>调试器协议</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="PHP 的调试" HREF="debugger.html"><LINK REL="PREVIOUS" TITLE="使用调试器" HREF="debugger-using.html"><LINK REL="NEXT" TITLE="扩展 PHP 3" HREF="phpdevel.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="sect1" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="debugger-using.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom">附录 E. PHP 的调试</TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="phpdevel.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV CLASS="sect1"><H1 CLASS="sect1"><A NAME="debugger-protocol"></A>调试器协议</H1><P>&#13; PHP 3 调试器协议以行为单位。每一行有一个<SPAN CLASS="emphasis"><I CLASS="emphasis">类型(type)</I></SPAN>，某几行组成一个<SPAN CLASS="emphasis"><I CLASS="emphasis">消息(message)</I></SPAN>。每一个消息起始于包含类型 <TT CLASS="literal">start</TT> 的一行，并终止于包含类型 <TT CLASS="literal">end</TT> 的一行。PHP 3 可以同时发送不同的消息行。
</P><P>&#13; 行的格式如下：
<DIV CLASS="informalexample"><A NAME="AEN127059"></A><P></P><P CLASS="literallayout"><br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;date&nbsp;time&nbsp;host(pid)&nbsp;type:&nbsp;message-data<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P><P></P></DIV>
</P><P>&#13; <P></P><DIV CLASS="variablelist"><DL><DT><TT CLASS="replaceable"><I>date</I></TT></DT><DD><P>&#13; date 使用 ISO 8601 格式：（<TT CLASS="replaceable"><I>yyyy</I></TT>-<TT CLASS="replaceable"><I>mm</I></TT>-<TT CLASS="replaceable"><I>dd</I></TT>）
</P></DD><DT><TT CLASS="replaceable"><I>time</I></TT></DT><DD><P>&#13; time 精确到毫秒：<TT CLASS="replaceable"><I>hh</I></TT>:<TT CLASS="replaceable"><I>mm</I></TT>:<TT CLASS="replaceable"><I>uuuuuu</I></TT>
</P></DD><DT><TT CLASS="replaceable"><I>host</I></TT></DT><DD><P>&#13; 产生错误的 PHP 脚本所在主机的 DNS 名或 IP 地址。
</P></DD><DT><TT CLASS="replaceable"><I>pid</I></TT></DT><DD><P>&#13; 产生错误的 PHP 脚本在 <TT CLASS="replaceable"><I>host</I></TT> 中的 PID（进程 id）。
</P></DD><DT><TT CLASS="replaceable"><I>type</I></TT></DT><DD><P>&#13; 行的类型。它告诉接收信息的程序如何处理下面的数据：
<DIV CLASS="table"><A NAME="AEN127095"></A><P><B>表格 E-1. 调试器行类型</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><THEAD><TR><TH ALIGN="LEFT" VALIGN="MIDDLE">名称</TH><TH ALIGN="LEFT" VALIGN="MIDDLE">含义</TH></TR></THEAD><TBODY><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><TT CLASS="literal">start</TT></TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 告诉接收的程序，调试信息由此开始。<TT CLASS="replaceable"><I>data</I></TT> 的内容将会是错误消息的类型，在本页面下方列出。
</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><TT CLASS="literal">message</TT></TD><TD ALIGN="LEFT" VALIGN="MIDDLE">PHP 3 错误消息。</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><TT CLASS="literal">location</TT></TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 发生错误的文件名和行号。<TT CLASS="literal">location</TT> 的第一行总是包含顶级(top-level)地址。<TT CLASS="replaceable"><I>data</I></TT> 包含 <TT CLASS="literal"><TT CLASS="replaceable"><I>file</I></TT>:<TT CLASS="replaceable"><I>line</I></TT></TT>。在 <TT CLASS="literal">message</TT> 和每一个 <TT CLASS="literal">function</TT> 之后总有一行 <TT CLASS="literal">location</TT> 行。
</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; <TT CLASS="literal">frames</TT>
</TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 在下面的堆栈卸出中所包含的帧数。如果有四帧，则应该有四层函数调用的信息。如果没有给出“frames”这一行，则深度被假定为 0（错误发生在最顶层）。
</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; <TT CLASS="literal">function</TT></TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 发生错误的函数。在调用函数堆栈的每级只重复一次。
</TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><TT CLASS="literal">end</TT></TD><TD ALIGN="LEFT" VALIGN="MIDDLE">&#13; 告诉接收的程序，除错信息到此结束。
</TD></TR></TBODY></TABLE></DIV>
</P></DD><DT><TT CLASS="replaceable"><I>data</I></TT></DT><DD><P>每行的数据。</P></DD></DL></DIV>
<DIV CLASS="table"><A NAME="AEN127141"></A><P><B>表格 E-2. 调试器错误类型</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><THEAD><TR><TH ALIGN="LEFT" VALIGN="MIDDLE">调试器</TH><TH ALIGN="LEFT" VALIGN="MIDDLE">PHP 3 内部</TH></TR></THEAD><TBODY><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">warning</SPAN></TD><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">E_WARNING</SPAN></TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">error</SPAN></TD><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">E_ERROR</SPAN></TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">parse</SPAN></TD><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">E_PARSE</SPAN></TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">notice</SPAN></TD><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">E_NOTICE</SPAN></TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">core-error</SPAN></TD><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">E_CORE_ERROR</SPAN></TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">core-warning</SPAN></TD><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">E_CORE_WARNING</SPAN></TD></TR><TR><TD ALIGN="LEFT" VALIGN="MIDDLE"><SPAN CLASS="errortype">unknown</SPAN></TD><TD ALIGN="LEFT" VALIGN="MIDDLE">（其它任何错误）</TD></TR></TBODY></TABLE></DIV>
<TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN127183"></A><P><B>例子 E-1. 调试器错误消息示例</B></P><P CLASS="literallayout"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
1998-04-05&nbsp;23:27:400966&nbsp;lucifer.guardian.no(20481)&nbsp;start:&nbsp;notice<br>
1998-04-05&nbsp;23:27:400966&nbsp;lucifer.guardian.no(20481)&nbsp;message:&nbsp;Uninitialized&nbsp;variable<br>
1998-04-05&nbsp;23:27:400966&nbsp;lucifer.guardian.no(20481)&nbsp;location:&nbsp;(null;):7<br>
1998-04-05&nbsp;23:27:400966&nbsp;lucifer.guardian.no(20481)&nbsp;frames:&nbsp;1<br>
1998-04-05&nbsp;23:27:400966&nbsp;lucifer.guardian.no(20481)&nbsp;function:&nbsp;display<br>
1998-04-05&nbsp;23:27:400966&nbsp;lucifer.guardian.no(20481)&nbsp;location:&nbsp;/home/ssb/public_html/test.php3:10<br>
1998-04-05&nbsp;23:27:400966&nbsp;lucifer.guardian.no(20481)&nbsp;end:&nbsp;notice<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P></DIV></TD></TR></TABLE>
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="debugger-using.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="phpdevel.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">使用调试器</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="debugger.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">扩展 PHP 3</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
