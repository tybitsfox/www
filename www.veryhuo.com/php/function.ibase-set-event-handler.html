<HTML><HEAD><TITLE>ibase_set_event_handler</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="InterBase Functions" HREF="ref.ibase.html"><LINK REL="PREVIOUS" TITLE="ibase_rollback" HREF="function.ibase-rollback.html"><LINK REL="NEXT" TITLE="ibase_timefmt" HREF="function.ibase-timefmt.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="refentry" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.ibase-rollback.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.ibase-timefmt.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><H1><A NAME="function.ibase-set-event-handler"></A>ibase_set_event_handler</H1><DIV CLASS="refnamediv"><A NAME="AEN45746"></A><P> (no version information, might be only in CVS)</P>ibase_set_event_handler&nbsp;--&nbsp;
Register a callback function to be called when events are posted
</DIV><DIV CLASS="refsect1"><A NAME="AEN45749"></A><H2>Description</H2>resource <B CLASS="methodname">ibase_set_event_handler</B> ( [resource connection, callback event_handler, string event_name1 [, string event_name2 [, string ...]]])<BR></BR><P>&#13; This function registers a PHP user function as event handler for the specified
events. The callback is called with the event name and the link resource as arguments
whenever one of the specified events is posted by the database. The callback must
return <TT CLASS="constant"><B>FALSE</B></TT> if the event handler should be canceled. Any other return value is ignored.
</P><P>&#13; <DIV CLASS="informalexample"><A NAME="AEN45772"></A><P></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /><br /></font><font color="#007700">function </font><font color="#0000BB">event_handler</font><font color="#007700">(</font><font color="#0000BB">$event_name</font><font color="#007700">, </font><font color="#0000BB">$link</font><font color="#007700">) <br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$event_name</font><font color="#007700">==</font><font color="#DD0000">"NEW ORDER"</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// process new order<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">ibase_query</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">, </font><font color="#DD0000">"UPDATE orders SET status='handled'"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;} else if (</font><font color="#0000BB">$event_name</font><font color="#007700">==</font><font color="#DD0000">"DB_SHUTDOWN"</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// free event handler <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">return </font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></font><font color="#0000BB">ibase_set_event_handler</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">, </font><font color="#DD0000">"event_handler"</font><font color="#007700">, </font><font color="#DD0000">"NEW_ORDER"</font><font color="#007700">, </font><font color="#DD0000">"DB_SHUTDOWN"</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE><P></P></DIV>
</P><P>&#13; The return value is an event resource. This resource can be used to free the event handler
using <A HREF="function.ibase-free-event-handler.html"><B CLASS="function">ibase_free_event_handler()</B></A>.
</P><P>&#13; See also
<A HREF="function.ibase-free-event-handler.html"><B CLASS="function">ibase_free_event_handler()</B></A> and
<A HREF="function.ibase-wait-event.html"><B CLASS="function">ibase_wait_event()</B></A>.
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.ibase-rollback.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.ibase-timefmt.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">ibase_rollback</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="ref.ibase.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">ibase_timefmt</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
