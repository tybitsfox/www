<HTML><HEAD><TITLE>ifx_getsqlca</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK REL="HOME" TITLE="PHP 手册" HREF="index-2.html"><LINK REL="UP" TITLE="Informix Functions" HREF="ref.ifx.html"><LINK REL="PREVIOUS" TITLE="ifx_get_char" HREF="function.ifx-get-char.html"><LINK REL="NEXT" TITLE="ifx_htmltbl_result" HREF="function.ifx-htmltbl-result.html"><META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD><BODY TOPMARGIN="0" LEFTMARGIN="0" CLASS="refentry" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF"><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="bottom"><A HREF="function.ifx-get-char.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="10%" ALIGN="right" VALIGN="bottom"><A HREF="function.ifx-htmltbl-result.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><H1><A NAME="function.ifx-getsqlca"></A>ifx_getsqlca</H1><DIV CLASS="refnamediv"><A NAME="AEN44291"></A><P> (PHP 3&#62;= 3.0.8, PHP 4 )</P>ifx_getsqlca&nbsp;--&nbsp;
Get the contents of sqlca.sqlerrd[0..5] after a query
</DIV><DIV CLASS="refsect1"><A NAME="AEN44294"></A><H2>Description</H2>array <B CLASS="methodname">ifx_getsqlca</B> ( int result_id)<BR></BR><P>&#13; <TT CLASS="parameter"><I>result_id</I></TT> is a valid result id returned by
<A HREF="function.ifx-query.html"><B CLASS="function">ifx_query()</B></A> or
<A HREF="function.ifx-prepare.html"><B CLASS="function">ifx_prepare()</B></A>.
</P><P>
Returns a pseudo-row (associative array) with sqlca.sqlerrd[0]
... sqlca.sqlerrd[5] after the query associated with
<TT CLASS="parameter"><I>result_id</I></TT>.
</P><P>
For inserts, updates and deletes the values returned are those as
set by the server after executing the query. This gives access to
the number of affected rows and the serial insert value. For
SELECTs the values are those saved after the PREPARE
statement. This gives access to the *estimated* number of
affected rows. The use of this function saves the overhead of
executing a "select dbinfo('sqlca.sqlerrdx')" query, as it
retrieves the values that were saved by the ifx driver at the
appropriate moment.
</P><P>&#13; <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV CLASS="example"><A NAME="AEN44310"></A><P><B>例子 1. Retrieve Informix sqlca.sqlerrd[x] values</B></P><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">/* assume the first column of 'sometable' is a serial */<br /></font><font color="#0000BB">$qid </font><font color="#007700">= </font><font color="#0000BB">ifx_query</font><font color="#007700">(</font><font color="#DD0000">"insert into sometable <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values (0, '2nd column', 'another column') "</font><font color="#007700">, </font><font color="#0000BB">$connid</font><font color="#007700">);<br />if (!</font><font color="#0000BB">$qid</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">/* ... error ... */<br /></font><font color="#007700">}<br /></font><font color="#0000BB">$sqlca </font><font color="#007700">= </font><font color="#0000BB">ifx_getsqlca</font><font color="#007700">(</font><font color="#0000BB">$qid</font><font color="#007700">);<br /></font><font color="#0000BB">$serial_value </font><font color="#007700">= </font><font color="#0000BB">$sqlca</font><font color="#007700">[</font><font color="#DD0000">"sqlerrd1"</font><font color="#007700">];<br />echo </font><font color="#DD0000">"The serial value of the inserted row is : $serial_value&lt;br /&gt;\n"</font><font color="#007700">; <br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
</P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="function.ifx-get-char.html" ACCESSKEY="P">后退</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index-2.html" ACCESSKEY="H">起点</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="function.ifx-htmltbl-result.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">ifx_get_char</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="ref.ifx.html" ACCESSKEY="U">上一级</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">ifx_htmltbl_result</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>
<p style="text-align:center;"><script type="text/javascript" src="http://www.veryhuo.com/plus/js/manual.js"></script></p>
<div style="display:none;">
<script type="text/javascript" src="/liehuo.net/js/stat.js"></script>
</div>
</body>
</html>
