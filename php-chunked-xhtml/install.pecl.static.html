<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>将 PECL 扩展库静态编译入 PHP</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.pecl.php-config.html">php-config</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.problems.html">还有问题？</a></div>
 <div class="up"><a href="install.pecl.html">PECL 扩展库安装</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="install.pecl.static" class="sect1">
  <h2 class="title">将 PECL 扩展库静态编译入 PHP</h2>
  <p class="simpara">
   有时可能需要将扩展库静态编译到 PHP 中。这需要将扩展库源程序放入
   <var class="filename">php-src/ext/</var> 目录中去并告诉 PHP
   编译系统来生成其配置脚本。
  </p>
  <p class="para">
   <div class="example-contents screen">
<div class="cdata"><pre>
$ cd /your/phpsrcdir/ext
$ pecl download extname
$ gzip -d &lt; extname.tgz | tar -xvf -
$ mv extname-x.x.x extname
</pre></div>
   </div>
  </p>
  <p class="simpara">
   这将产生以下目录：
  </p>
  <p class="para">
   <div class="example-contents screen"><br />
    /your/phpsrcdir/ext/extname<br />
   </div>
  </p>
  <p class="simpara">
   此时强制 PHP 重新生成配置脚本，然后正常编译 PHP：
  </p>
  <p class="para">
   <div class="example-contents screen"><br />
    $ cd /your/phpsrcdir <br />
    $ rm configure<br />
    $ ./buildconf --force<br />
    $ ./configure --help<br />
    $ ./configure --with-extname --enable-someotherext --with-foobar<br />
    $ make<br />
    $ make install<br />
   </div>
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    要运行“buildconf”脚本，需要 autoconf 2.13 和 automake 1.4+（更新版本的
    autoconf 也许能工作，但不被支持）。
   </span>
  </p></blockquote>
  <p class="simpara">
   是否用 <em>--enable-extname</em> 或 <em>--with-extname</em>
   取决于扩展库。通常不需要外部库文件的扩展库使用
   <em>--enable</em>。要确认的话，在 buildconf 之后运行：
  </p>
  <p class="para">
   <div class="example-contents screen"><br />
    $ ./configure --help | grep extname<br />
   </div>
  </p>
 </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.pecl.php-config.html">php-config</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.problems.html">还有问题？</a></div>
 <div class="up"><a href="install.pecl.html">PECL 扩展库安装</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
